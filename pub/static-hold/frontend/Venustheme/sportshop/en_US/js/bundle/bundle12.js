require.config({"config": {
        "jsbuild":{"Magento_GoogleGtag/js/google-adwords.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/* jscs:disable */\n/* eslint-disable */\ndefine([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    /**\n     * @param {Object} config\n     */\n    return function (config) {\n        if (!window.gtag) {\n            // Inject Global Site Tag\n            var gtagScript = document.createElement('script');\n            gtagScript.type = 'text/javascript';\n            gtagScript.async = true;\n            gtagScript.src = config.gtagSiteSrc;\n            document.head.appendChild(gtagScript);\n\n            window.dataLayer = window.dataLayer || [];\n\n            function gtag(){dataLayer.push(arguments);}\n            gtag('js', new Date());\n            gtag('set', 'developer_id.dYjhlMD', true);\n            if (config.conversionLabel) {\n                gtag(\n                    'event',\n                    'conversion',\n                    {'send_to': config.conversionId + '/'\n                            + config.conversionLabel}\n                );\n            }\n        } else {\n            gtag('config', config.conversionId);\n        }\n    }\n});\n","Magento_GoogleGtag/js/google-analytics.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/* jscs:disable */\n/* eslint-disable */\ndefine([\n    'jquery',\n    'mage/cookies'\n], function ($) {\n    'use strict';\n\n    /**\n     * @param {Object} config\n     */\n    return function (config) {\n        var allowServices = false,\n            allowedCookies,\n            allowedWebsites,\n            measurementId;\n\n        if (config.isCookieRestrictionModeEnabled) {\n            allowedCookies = $.mage.cookies.get(config.cookieName);\n\n            if (allowedCookies !== null) {\n                allowedWebsites = JSON.parse(allowedCookies);\n\n                if (allowedWebsites[config.currentWebsite] === 1) {\n                    allowServices = true;\n                }\n            }\n        } else {\n            allowServices = true;\n        }\n\n        if (allowServices) {\n            /* Global site tag (gtag.js) - Google Analytics */\n            measurementId = config.pageTrackingData.measurementId;\n            if (window.gtag) {\n                gtag('config', measurementId, { 'anonymize_ip': true });\n                // Purchase Event\n                if (config.ordersTrackingData.hasOwnProperty('orders')) {\n                    var purchaseObject = config.ordersTrackingData.orders[0];\n                    purchaseObject['items'] = config.ordersTrackingData.products;\n                    gtag('event', 'purchase', purchaseObject);\n                }\n            } else {\n                (function(d,s,u){\n                    var gtagScript = d.createElement(s);\n                    gtagScript.type = 'text/javascript';\n                    gtagScript.async = true;\n                    gtagScript.src = u;\n                    d.head.insertBefore(gtagScript, d.head.children[0]);\n                })(document, 'script', 'https://www.googletagmanager.com/gtag/js?id=' + measurementId);\n                window.dataLayer = window.dataLayer || [];\n                function gtag(){dataLayer.push(arguments);}\n                gtag('js', new Date());\n                gtag('config', measurementId, { 'anonymize_ip': true });\n                // Purchase Event\n                if (config.ordersTrackingData.hasOwnProperty('orders')) {\n                    var purchaseObject = config.ordersTrackingData.orders[0];\n                    purchaseObject['items'] = config.ordersTrackingData.products;\n                    gtag('event', 'purchase', purchaseObject);\n                }\n            }\n        }\n    }\n});\n","Amasty_Checkout/js/view/billing-address-mixin.js":"/**\n * Billing address view mixin for store flag is billing form in edit mode (visible)\n */\ndefine([\n    'ko',\n    'underscore',\n    'Magento_Customer/js/model/customer',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Checkout/js/checkout-data'\n], function (ko, _, customer, quote, checkoutData) {\n    'use strict';\n\n    return function (billingAddress) {\n        return billingAddress.extend({\n            initObservable: function () {\n                this._super();\n                if (window.checkoutConfig.isBillingSameAsShipping) {\n                    return this;\n                }\n\n                this.observe({\n                    stateForBillingShipping: window.checkoutConfig.isBillingSameAsShipping\n                });\n\n                quote.billingAddress.subscribe(function (newAddress) {\n                    if (!quote.isVirtual()) {\n                        this.isAddressSameAsShipping(\n                            newAddress !== null\n                                && newAddress.getCacheKey() === quote.shippingAddress().getCacheKey()\n                                && this.stateForBillingShipping()\n                        );\n                    }\n\n                    this.isAddressDetailsVisible(\n                        this.isAddressSameAsShipping()\n                        || !!checkoutData.getSelectedBillingAddress()\n                    );\n                }, this);\n\n                return this;\n            },\n\n            /**\n             * Cancel address edit action\n             * Disable button action if customer isn`t logged in because\n             * the state of the \"Same as delivered\" checkbox is hidden\n             *\n             * @return {*}\n             */\n            cancelAddressEdit: function () {\n                if (!customer.isLoggedIn() && !window.checkoutConfig.displayBillingSameAsShipping) {\n                    return;\n                }\n\n                this._super();\n\n                if (!window.checkoutConfig.displayBillingSameAsShipping && quote.billingAddress()) {\n                    this.isAddressSameAsShipping(this.stateForBillingShipping());\n                }\n            },\n\n            /**\n             * @return {Boolean}\n             */\n            useShippingAddress: function () {\n                if (!window.checkoutConfig.isBillingSameAsShipping) {\n                    this.stateForBillingShipping(!this.stateForBillingShipping());\n                    this.isAddressDetailsVisible(this.isAddressSameAsShipping());\n                }\n\n                return this._super();\n            },\n\n            /**\n             * Update address action\n             *\n             * @return {*}\n             */\n            updateAddress: function () {\n                this._super();\n\n                if (!window.checkoutConfig.isBillingSameAsShipping) {\n                    if (this.selectedAddress() && !this.isAddressFormVisible()) {\n                        this.isAddressDetailsVisible(true);\n                    } else if (!this.source.get('params.invalid')) {\n                        this.isAddressDetailsVisible(true);\n                    }\n                }\n            },\n\n            /**\n             * Manage checkbox visibility for billing\n             *\n             * @return {Boolean}\n             */\n            canUseShippingAddress: ko.computed(function () {\n                return !quote.isVirtual()\n                    && quote.shippingAddress()\n                    && quote.shippingAddress().canUseForBilling()\n                    && window.checkoutConfig.displayBillingSameAsShipping;\n            })\n        });\n    };\n});\n","Amasty_Checkout/js/view/shipping-mixin.js":"define([], function () {\n    'use strict';\n\n    return function (Shipping) {\n        return Shipping.extend({\n            /**\n             * Override parent function if isBillingSameAsShipping = false\n             * This is need to save the shipping form data when billing form open\n             *\n             * @returns {Boolean}\n             */\n            isBillingAddressFormVisible: function () {\n                if (window.checkoutConfig.isBillingSameAsShipping) {\n                    return this._super();\n                }\n\n                this.isUpdateCancelledByBilling = false;\n\n                return this.isUpdateCancelledByBilling;\n            }\n        });\n    };\n});\n","Amasty_Checkout/js/validation/phone-validation.js":"require([\n    'jquery',\n    'Magento_Ui/js/lib/validation/validator',\n    'Magento_Ui/js/lib/validation/utils',\n    'mage/translate'\n], function ($, validator,utils) {\n    'use strict';\n\n    validator.addRule(\n        'validate-numbers-and-spec-characters',\n        function (value) {\n            return utils.isEmptyNoTrim(value) || (/^[\\d\\W\\_]+$/).test(value.trim());\n        },\n        $.mage.__('Please use only numbers or special characters in this field.')\n    );\n});\n","Magepow_Ajaxcart/js/goto.js":"define([\n    'jquery'\n    ], function ($) {\n        'use strict';\n\n        $.widget('magepow.gotoproduct', {\n            _create: function () {\n                var self = this;\n\n                self.element.find('a').on('click', function (e) {\n                    e.preventDefault();\n                    window.top.location.href = $(this).attr('href');\n\n                    return false;\n                });\n            }\n        });\n\n        return $.magepow.gotoproduct;\n    });\n","Magepow_Ajaxcart/js/popup.js":"define([\n    'jquery',\n    ], function ($) {\n        'use strict';\n\n        $.widget('magepow.popup', {\n            options: {\n                countDown: 0\n            },\n\n            _create: function () {\n                var self = this;\n                var options = this.options;\n                var countDown = options.countDown;\n\n                if(countDown > 0) {\n                    window.ajaxcart_countdown = setInterval(function () {\n                        countDown -= 1;\n                        $('.content-ajaxcart span.countdown').text(\"(\" + countDown + \")\");\n                        if (countDown <= 0) {\n                            self._closePopup();\n                        }\n                    }, 1000);\n                }\n                \n                $('.content-ajaxcart .btn-continue').on('click', function() {\n                    self._closePopup();\n                });\n\n            },\n\n            _closePopup: function(){\n                // $('.modals-ajaxcart, .modals-overlay').remove();\n                // $('body').removeClass('_has-modal');\n                $('.modals-ajaxcart').find('.action-close').trigger('click');\n                clearInterval(window.ajaxcart_countdown);\n            }\n        });\n\n        return $.magepow.popup;\n    });","Magepow_Ajaxcart/js/suggest.js":"define([\n\t'jquery',\n\t'slick'\n\t], function ($) {\n\t\t'use strict';\n\n\t\t$.widget('magepow.suggest', {\n\t\t\toptions: {\n\t\t\t\titemsNumber: 0\n\t\t\t},\n\n\t\t\t_create: function () {\n\t\t\t\tvar options = this.options,\n\t\t\t\t\titems0 = (1 > options.itemsNumber) ? options.itemsNumber : 1,\n\t\t\t\t\titems600 = (2 > options.itemsNumber) ? options.itemsNumber : 2,\n\t\t\t\t\titems1000 = (3 > options.itemsNumber) ? options.itemsNumber : 3;\n\t\t\t\tvar $this  = $(this),\n\t\t\t\t\tslider = $('.ajax-cart-owl-carousel');\n\t\t\t\tslider.on('init', function(event, slick){\n\t\t\t\t    $this._hideLoading();\n\t\t\t\t});\n\t\t\t\tslider.slick({\n\t\t\t\t\t'arrows'          : true,\n\t\t\t\t\t'dots'            : false,\n\t\t\t\t\t'infinite'        : true,\n\t\t\t\t\t'slidesToShow'    : items1000,\n\t\t\t\t\t'responsive'      : [{breakpoint: 999, settings: {slidesToShow: items600}}, {breakpoint: 599, settings: {slidesToShow: items0}}]\n\t\t\t\t});\n\n\t\t\t},\n\n\t\t\t_hideLoading: function () {\n\t\t\t\t$('.ajax-owl-loading').hide();\n\t\t\t}\n\t\t});\n\n\t\treturn $.magepow.suggest;\n\t});","Magepow_Ajaxcart/js/ajax.js":"define([\n    'jquery',\n    'mage/translate',\n    'Magento_Ui/js/modal/modal'\n    ], function ($, $t, modal) {\n        'use strict';\n\n        $.widget('magepow.ajaxcart', {\n            options: {\n                processStart: null,\n                processStop : null,\n                bindSubmit  : true,\n                countDown   : 0,\n                showLoader  : true,\n                minicartSelector: '[data-block=\"minicart\"]',\n                messagesSelector: '[data-placeholder=\"messages\"]',\n                productStatusSelector: '.stock.available',\n                addToCartButtonSelector: '.action.tocart',\n                addAllToCartButtonSelector: '.add-all-tocart',\n                addToCartButtonDisabledClass: 'disabled',\n                addToCartButtonTextWhileAdding: '',\n                addToCartButtonTextAdded: '',\n                addToCartButtonTextDefault: '',\n                addUrl: '',\n                quickview: false,\n                isProductView: false,\n                isSuggestPopup: false,\n                quickViewUrl: ''\n            },\n\n            productIdInputName: [\"product\", \"product-id\", \"data-product-id\", \"data-product\"],\n\n            _create: function () {\n                this._initAjaxcart();\n                window.ajaxCart = this;\n                $('body').on('ajaxcart:refresh', function () {\n                    window.ajaxCart._initAjaxcart();\n                });\n                this.getAppVersion('Magepow_Ajaxcart', 'https://magepow.com/magento-2-ajax-add-to-cart.html');\n            },\n\n            _initAjaxcart: function () {\n                var options = this.options;\n                var self = this;\n\n                self.addAllToCart();\n                self.element.off('click').on(\"click\",  options.addToCartButtonSelector, function(e){\n                    if($(this).attr('data-post')) return;// turn off add to cart for wishlist in category page\n                    var form = $(this).parents('form').get(0);\n                    if($(form).hasClass('reorder')) return;// turn off the recently ordered sidebar in category page\n                    e.preventDefault();\n     \n                    var form = $(this).parents('form').get(0);\n                    var data = '';\n                    if (form) {\n                        var isValid = true;\n                        if (options.isProductView || $('body').hasClass('open-quickview')) {\n                            try {\n                                isValid = $(form).valid();\n                            } catch(err) {\n                                isValid = true;\n                            }\n                        }\n\n                        if (isValid) {\n                            var oldAction = $(form).attr('action');\n                            var serialize = $(form).serialize();\n                            var id = self._findId(this, oldAction, form);\n\n                            if ($.isNumeric(id)) {\n                                data += 'id=' + id;\n                                if (serialize == '') {\n                                    $(form).find('input, select').each(function () {\n                                        data += \"&\" + $(this).attr('name') + \"=\" + $(this).val();\n                                    });\n                                } else {\n                                    data += \"&\" + serialize;\n                                }\n\n                                if (options.quickview) {\n                                    window.parent.ajaxCart._sendAjax(options.addUrl, data, oldAction, form);\n                                    return false;\n                                }\n\n                                self._sendAjax(options.addUrl, data, oldAction, form);\n                                return false;\n                            }\n\n                            window.location.href = oldAction;\n                        }\n                    } else {\n                        var dataPost = $.parseJSON($(this).attr('data-post'));\n                        if (dataPost) {\n                            var formKey = $(\"input[name='form_key']\").val();\n                            var oldAction = dataPost.action;\n                            data += 'id=' + dataPost.data.product + '&product=' + dataPost.data.product + '&form_key=' + formKey + '&uenc=' + dataPost.data.uenc;\n                            self._sendAjax(options.addUrl, data, oldAction);\n                            return false;\n                        } else {\n                            var id = self._findId(this);\n                            if (id) {\n                                e.stopImmediatePropagation();\n                                self.quickview(options.quickViewUrl + 'id/' + id);\n                                return false;\n                            }\n                        }\n                    }\n                });\n            },\n          \n            _findId: function (btn, oldAction, form) {\n                var self = this;\n                var id = $(btn).attr('data-product-id');\n                if($.isNumeric(id)) return id;\n                var item = $(btn).closest('li.product-item');\n                id = $(item).find('[data-product-id]').attr('data-product-id');\n                if ($.isNumeric(id)) return id;\n\n                if (oldAction) {\n                    var formData = oldAction.split('/');\n                    for (var i = 0; i < formData.length; i++) {\n                        if (self.productIdInputName.indexOf(formData[i]) >= 0) {\n                            if ($.isNumeric(formData[i + 1])) {\n                                id = formData[i + 1];\n                            }\n                        }\n                    }\n\n                    if ($.isNumeric(id)) return id;\n                }\n\n                if (form) {\n                    $(form).find('input').each(function () {\n                        if (self.productIdInputName.indexOf($(this).attr('name')) >= 0) {\n                            if ($.isNumeric($(this).val())) {\n                                id = $(this).val();\n                            }\n                        }\n                    });\n\n                    if ($.isNumeric(id)) return id;\n                }\n\n                var priceBox = $(btn).closest('.price-box.price-final_price');\n                id = $(priceBox).attr('data-product-id');\n\n                if ($.isNumeric(id)) return id;\n\n                return false;\n            },\n\n            _sendAjax: function (addUrl, data, oldAction, form=false) {\n                var body = $('body');\n                var options = this.options;\n                var self = this;\n                if(form){\n                    self.disableAddToCartButton(form);\n                    data = new FormData(form);\n                }\n                $.ajax({\n                    type: 'post',\n                    url: addUrl,\n                    data: data,\n                    showLoader: options.showLoader,\n                    dataType: 'json',\n                    cache: false,\n                    contentType: false,\n                    processData: false,\n                    success: function (data) {\n                        if(!$('#modals_ajaxcart').length) body.append('<div id=\"modals_ajaxcart\" style=\"display:none\"></div>');\n                        var _qsModal = $('#modals_ajaxcart');\n                        if (data.popup) {\n                            self._showPopup(_qsModal, '<div class=\"content-ajaxcart\">' + data.popup + '</div>');\n                        } else if (data.error && data.view) {\n                            /*show Quick View*/\n                            var quickView = true;\n                            if(form){\n                                var addToCartButtonMain = $(form).closest('#product_addtocart_form');\n                                if(addToCartButtonMain.length) quickView = false;\n                            }\n                            if(quickView && data.error_info.search(\"not available\") == -1){\n                                if ($.fn.quickview) {\n                                    $.fn.quickview({url:options.quickViewUrl  + 'id/' + data['id']});\n                                } else {\n                                    self.quickview({url:options.quickViewUrl  + 'id/' + data['id']});\n                                }\n                            } else {\n                                self._showPopup(_qsModal, data.error_info);\n                            }\n                        }\n\n                        if(form) self.enableAddToCartButton(form);\n                    },\n                    error: function () {\n                        window.location.href = oldAction;\n                    }\n                });\n            },\n\n            _showPopup: function (_qsModal, data) {\n                var body = $('body');\n                self = this;           \n                _qsModal.html(data);\n                if(!body.hasClass('open-ajaxcart')){\n                    self._closePopup();\n                    body.addClass('open-ajaxcart');\n                    var modals = body.find('.modals-ajaxcart');\n                    if(!modals.length){\n                        modal({\n                            type: 'popup',\n                            modalClass: 'modals-ajaxcart',\n                            responsive: true,\n                            innerScroll: true,\n                            buttons: false,\n                            closed: function(){\n                                body.removeClass('open-ajaxcart');                                       \n                            } \n                        }, _qsModal);\n                    }\n                    _qsModal.modal('openModal');\n                    _qsModal.trigger('contentUpdated');\n                }\n                _qsModal.find('.btn-continue').on('click', function() {\n                    self._closePopup();\n                });\n                /*Show count down*/\n                this._showCountdown(); \n            },\n\n            _closePopup: function(){\n                var $body = $('body');\n                $body.removeClass('open-minicart-modal open-ajaxcart open-quickview _has-modal');\n                $body.find('.modal-popup:not(.popup-authentication, .customer-popup-ajaxwishlist), .modals-overlay').remove();\n                $body.find('.modal-popup .action-close').trigger('click');\n                clearInterval(window.ajaxcart_countdown);\n            },\n\n            _showCountdown: function () {\n                self = this;\n                var options = this.options;\n                var countDown = options.countDown;\n                if(countDown > 0) {\n                    window.ajaxcart_countdown = setInterval(function () {\n                        countDown -= 1;\n                        $('.content-ajaxcart span.countdown').text(\"(\" + countDown + \")\");\n                        if (countDown <= 0) {\n                            self._closePopup();\n                        }\n                    }, 1000);\n                }\n            },\n            /**\n             * @param {String} form\n             */\n            disableAddToCartButton: function (form) {\n                var addToCartButtonTextWhileAdding = this.options.addToCartButtonTextWhileAdding || $t('Adding...'),\n                    addToCartButton = $(form).find(this.options.addToCartButtonSelector);\n\n                addToCartButton.addClass(this.options.addToCartButtonDisabledClass);\n                addToCartButton.find('span').text(addToCartButtonTextWhileAdding);\n                addToCartButton.attr('title', addToCartButtonTextWhileAdding);\n            },\n\n            /**\n             * @param {String} form\n             */\n            enableAddToCartButton: function (form) {\n                var addToCartButtonTextAdded = this.options.addToCartButtonTextAdded || $t('Added'),\n                    self = this,\n                    addToCartButton = $(form).find(this.options.addToCartButtonSelector);\n\n                addToCartButton.find('span').text(addToCartButtonTextAdded);\n                addToCartButton.attr('title', addToCartButtonTextAdded);\n\n                setTimeout(function () {\n                    var addToCartButtonTextDefault = self.options.addToCartButtonTextDefault || $t('Add to Cart');\n\n                    addToCartButton.removeClass(self.options.addToCartButtonDisabledClass);\n                    addToCartButton.find('span').text(addToCartButtonTextDefault);\n                    addToCartButton.attr('title', addToCartButtonTextDefault);\n                }, 1000);\n            },\n            \n            quickview: function () {\n                var obj = arguments[0];\n                var body = $('body');\n                if(!$('#modals_quickview').length) body.append('<div id=\"modals_quickview\" style=\"display:none\"></div>');\n                var _qsModal = $('#modals_quickview');\n                var quickajax= function(url){\n                    $.ajax({\n                        url:url,\n                        type:'POST',\n                        showLoader: true,\n                        cache:false,   \n                        success:function(data){\n                            _qsModal.html('<div class=\"content-quickview\">' + data + '</div>');\n                            if(!body.hasClass('open-quickview')){\n                                body.addClass('open-quickview');\n                                var modalsQuickview = body.find('.modals-quickview');\n                                if(!modalsQuickview.length){\n                                    modal({\n                                        type: 'popup',\n                                        modalClass: 'modals-quickview',\n                                        responsive: true,\n                                        innerScroll: true,\n                                        buttons: false,\n                                        closed: function(){\n                                            body.removeClass('open-quickview');                                       \n                                        } \n                                    }, _qsModal);\n                                }\n                                _qsModal.modal('openModal');\n                            }\n                            _qsModal.trigger('contentUpdated');                          \n                        }\n                    });\n                    _qsModal.on('fotorama:load', function(){\n                        _qsModal.find(\".product-view .product-info-main.product-shop\").height(_qsModal.find(\".product-img-box\").height());\n                    });\n                }\n                if(obj.url){\n                    quickajax(obj.url)\n                } else {\n                    $(document).on('click', obj.itemClass, function(e) {\n                        e.preventDefault();\n                        quickajax($(this).data('url'))\n                    });\n                }\n            },\n\n            addAllToCart: function() {\n                var self = this;\n                var options = this.options;\n                $(document).on(\"click\", options.addAllToCartButtonSelector, function(e){\n                    var searchIds = $(\"input[name='product']\").map(function(){return $(this).val();}).get();\n                    $.ajax({\n                        url: options.addUrl + 'index/allcart',\n                        type: 'POST',\n                        showLoader: true,\n                        cache: false,\n                        dataType: 'json',\n                        data: {productIds : searchIds.join()},\n                        success: function (data) {\n                            var _qsModalContent = '<div class=\"content-ajaxcart\">quickview placeholder</div>';\n                            if(!$('#modals_ajaxcart').length){\n                                $(document.body).append('<div id=\"modals_ajaxcart\" style=\"display:none\">' + _qsModalContent + '</div>');\n                            }\n\n                            var _qsModal = $('#modals_ajaxcart .content-ajaxcart');\n                            if (data.error) {\n                                window.location.replace(options.addUrl +'#scroll');\n                            }else{\n                                if (data.popup) {\n                                    self._showPopup(_qsModal, _qsModalContent, data.popup);\n                                }\n                            }\n                            \n                        }\n                    });\n                })                \n            },\n\n            getAppVersion: function (appName, href) {\n                // this expression is to get the version string\n                let regx = new RegExp('.*\\/(.*?)\\/assets\\/', 'i');\n                let result = regx.exec(href);\n                let version = result ? result[1].replace(/\\D/g, '') : '1.0.0';\n                console.log(`%c ${appName} %c v${version}  %c`, \"background: #555555; padding: 1px; margin-bottom: 2px; border-radius: 3px 0 0 3px; color: #fff\", \"background: #44cc11; padding: 1px; margin-bottom: 2px; border-radius: 0 3px 3px 0; color: #fff\", \"background:transparent\", `\ud83d\ude80 ${href}`);\n\n                return version;\n            }\n\n        });\n\n    return $.magepow.ajaxcart;\n});\n","Magepow_Ajaxcart/js/view/minicartaddons.js":"define([\n       'ko',\n       'uiComponent',\n       'Magento_Customer/js/customer-data',\n   ], function (ko, Component, customerData) {\n       'use strict';\n       var subtotalAmount;\n       var maxPrice = maxpriceShipping;\n       var percentage;\n       return Component.extend({\n           displaySubtotal: ko.observable(true),\n           maxprice:maxPrice.toFixed(2),\n           /**\n            * @override\n            */\n           initialize: function () {\n               this._super();\n               this.cart = customerData.get('cart');\n           },\n           getTotalCartItems: function () {\n               return customerData.get('cart')().summary_count;\n           },\n           getpercentage: function () {\n               subtotalAmount = customerData.get('cart')().subtotalAmount;\n               if (subtotalAmount > maxPrice) {\n                   subtotalAmount = maxPrice;\n               }\n               percentage = ((subtotalAmount * 100) / maxPrice);\n               return percentage;\n           }\n       });\n   });","Magepow_Ajaxcart/js/mixin/configurable.js":"define([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    return function (widget) {\n        $.widget('mage.configurable', widget, {\n            /**\n             * Initialize tax configuration, initial settings, and options values.\n             * @private\n             */\n            _initializeOptions: function () {\n                var element;\n\n                element = $(this.options.priceHolderSelector);\n                if (!element.data('magePriceBox')) {\n                    element.priceBox();\n                }\n\n                return this._super();\n            }\n        });\n\n        return $.mage.configurable;\n    };\n});","Craftyclicks_Ukpostcodelookup/crafty_postcode.class.js":"/*\n// This is a collection of JavaScript code to allow easy integration of\n// postcode / address finder functionality into any website\n//\n// Provided by www.CraftyClicks.co.uk\n//\n// Version - 4.9.5 (26/11/2018)\n//\n// Feel free to copy/use/modify this code any way you see fit. Please keep this\n// comment header in place when you do.\n//\n// To integrate UK postcode / address lookup on your website, please visit www.craftyclicks.co.uk for\n// details of how to sign up for an account.\n//\n**********************************************************************************/\nif(!_cp_js_included){var _cp_js_included=1;var _cp_instances=[],_cp_instance_idx=0,_cp_pl=[\"FLAT\",\"SHOP\",\"UNIT\",\"BLOCK\",\"STALL\",\"SUITE\",\"APARTMENT\",\"MAISONETTE\",\"HOUSE NUMBER\"];function CraftyPostcodeCreate(){_cp_instance_idx++;_cp_instances[_cp_instance_idx]=new CraftyPostcodeClass();_cp_instances[_cp_instance_idx].obj_idx=_cp_instance_idx;return _cp_instances[_cp_instance_idx]}function _cp_sp(b){var d=\"\",c;for(c=0;c<_cp_pl.length;c++){d=_cp_pl[c];if(d==b.substr(0,d.length).toUpperCase()){return(b.substr(d.length))}}return(\"\")}function _cp_eh(a){var b=\"\";while(b=a.shift()){if(!isNaN(parseInt(b))){return(parseInt(b))}}return\"\"}function _cp_kp(a){var b;if(!a){a=window.event}if(a.keyCode){b=a.keyCode}else{if(a.which){b=a.which}}if(b==13){this.onclick()}}function CraftyPostcodeClass(){this.config={lookup_url:\"pcls1.craftyclicks.co.uk/js/\",access_token:\"\",basic_address:0,traditional_county:0,busy_img_url:\"crafty_postcode_busy.gif\",hide_result:0,org_uppercase:1,town_uppercase:1,county_uppercase:0,addr_uppercase:0,delimiter:\", \",msg1:\"Please wait while we find the address\",err_msg1:\"This postcode could not be found, please try again or enter your address manually\",err_msg2:\"This postcode is not valid, please try again or enter your address manually\",err_msg3:\"Unable to connect to address lookup server, please enter your address manually.\",err_msg4:\"An unexpected error occured, please enter your address manually.\",res_autoselect:1,res_select_on_change:1,debug_mode:0,lookup_timeout:10000,form:\"\",elements:\"\",max_width:\"400px\",max_lines:1,first_res_line:\"---- please select your address ----\",result_elem_id:\"\",on_result_ready:null,on_result_selected:null,on_error:null,pre_populate_common_address_parts:0,elem_company:\"crafty_out_company\",elem_house_num:\"\",elem_street1:\"crafty_out_street1\",elem_street2:\"crafty_out_street2\",elem_street3:\"crafty_out_street3\",elem_town:\"crafty_out_town\",elem_county:\"crafty_out_county\",elem_postcode:\"crafty_in_out_postcode\",elem_udprn:\"crafty_out_udprn\",single_res_autoselect:0,single_res_notice:\"---- address found, see below ----\",elem_search_house:\"crafty_in_search_house\",elem_search_street:\"crafty_in_search_street\",elem_search_town:\"crafty_in_search_town\",max_results:25,err_msg5:\"The house name/number could not be found, please try again.\",err_msg6:\"No results found, please modify your search and try again.\",err_msg7:\"Too many results, please modify your search and try again.\",err_msg9:\"Please provide more data and try again.\",err_msg8:\"Trial account limit reached, please use AA11AA, AA11AB, AA11AD or AA11AE.\"};this.xmlhttp=null;this.res_arr=null;this.disp_arr=null;this.res_arr_idx=0;this.dummy_1st_line=0;this.cc=0;this.flexi_search=0;this.lookup_timeout=null;this.obj_name=\"\";this.house_search=0;this.set=function(a,b){this.config[a]=b};this.res_clicked=function(a){this.cc++;if(this.res_selected(a)){if(0!=this.config.hide_result&&((2>=this.config.max_lines&&1<this.cc)||(2<this.config.max_lines))){this.update_res(null);this.cc=0}}};this.res_selected=function(a){if(1==this.dummy_1st_line){if(0==a){return 0}else{a--}}a=this.disp_arr[a][\"index\"];this.populate_form_fields(this.res_arr[a]);if(this.config.on_result_selected){this.config.on_result_selected(a)}return 1};this.populate_form_fields=function(l){var d=[];var p=this.config.delimiter;for(var g=0;g<8;g++){d[g]=this.get_elem(g)}d[11]=this.get_elem(11);if(d[11]){d[11].value=l.udprn}var c=null;if(d[0]){if(d[0]==d[1]&&\"\"!=l.org){d[1].value=l.org;c=d[1];d[1]=d[2];d[2]=d[3];d[3]=null}else{d[0].value=l.org}}var o=l.housename2;if(\"\"!=o&&\"\"!=l.housename1){o+=p}o+=l.housename1;var m=l.housenumber;if(d[7]){d[7].value=o;if(\"\"!=o&&\"\"!=m){d[7].value+=p}d[7].value+=m;o=\"\";m=\"\"}var f=l.street1;var e=l.street2;if(\"\"!=m){if(\"\"!=e){e=m+\" \"+e}else{if(\"\"!=f){f=m+\" \"+f}else{f=m}}}var j=e+(e==\"\"?\"\":(f==\"\"?\"\":p))+f;var n=l.locality_dep;var k=l.locality;if(\"\"!=j&&parseInt(j)==j){if(\"\"!=n){n=parseInt(j)+\" \"+n}else{k=parseInt(j)+\" \"+k}j=\"\";f=\"\"}var h=n+(n==\"\"||k==\"\"?\"\":p)+k;var a=j+(j==\"\"||h==\"\"?\"\":p)+h;if(d[1]&&d[2]&&d[3]){if(\"\"!=l.pobox||\"\"!=o){if(\"\"!=l.pobox){d[1].value=l.pobox}else{d[1].value=o}if(\"\"==h){if(\"\"==e){d[2].value=f;d[3].value=\"\"}else{d[2].value=e;d[3].value=f}}else{if(\"\"==j){if(\"\"==n){d[2].value=k;d[3].value=\"\"}else{d[2].value=n;d[3].value=k}}else{d[2].value=j;d[3].value=h}}}else{if(\"\"==j){if(\"\"==n){d[1].value=k;d[2].value=\"\";d[3].value=\"\"}else{d[1].value=n;d[2].value=k;d[3].value=\"\"}}else{if(\"\"==h){if(\"\"==e){d[1].value=f;d[2].value=\"\";d[3].value=\"\"}else{d[1].value=e;d[2].value=f;d[3].value=\"\"}}else{if(\"\"==e){d[1].value=f;if(\"\"==n){d[2].value=k;d[3].value=\"\"}else{d[2].value=n;d[3].value=k}}else{if(\"\"==n){d[1].value=e;d[2].value=f;d[3].value=k}else{if(j.length<h.length){d[1].value=j;d[2].value=n;d[3].value=k}else{d[1].value=e;d[2].value=f;d[3].value=h}}}}}}}else{if(d[1]&&d[2]){if(\"\"!=l.pobox){d[1].value=l.pobox;d[2].value=a}else{if(\"\"!=o&&\"\"!=j&&\"\"!=h){if((o.length+j.length)<(j.length+h.length)){d[1].value=o+(o==\"\"?\"\":p)+j;d[2].value=h}else{d[1].value=o;d[2].value=j+(j==\"\"?\"\":p)+h}}else{if(\"\"!=o&&\"\"!=j){d[1].value=o;d[2].value=j}else{if(\"\"==o&&\"\"!=j){if(\"\"==h){if(\"\"!=e){d[1].value=e;d[2].value=f}else{d[1].value=j;d[2].value=\"\"}}else{d[1].value=j;d[2].value=h}}else{if(\"\"==j&&\"\"!=o){d[1].value=o;d[2].value=h}else{d[1].value=h;d[2].value=\"\"}}}}}}else{var b=\"\";if(\"\"!=l.pobox){b=l.pobox+p+h}else{b=o+(o==\"\"||a==\"\"?\"\":p)+a}if(d[1]){d[1].value=b}else{if(d[2]){d[2].value=b}else{if(d[3]){d[3].value=b}else{if(c){c.value=l.org+p+b}else{}}}}}}if(d[4]){d[4].value=l.town}if(d[5]){d[5].value=l.county}if(d[6]){d[6].value=l.postcode}return 1};this.show_busy=function(){if(this.config.busy_img_url&&\"\"!=this.config.busy_img_url){var b=document.createElement(\"img\");var a=document.createAttribute(\"src\");a.value=this.config.busy_img_url;b.setAttributeNode(a);a=document.createAttribute(\"title\");a.value=this.config.msg1;b.setAttributeNode(a);this.update_res(b)}else{this.update_res(null)}};this.disp_err=function(d,b){var a=null;var e=\"\";if(\"\"!=d){switch(d){case\"0001\":e=this.config.err_msg1;break;case\"0002\":e=this.config.err_msg2;break;case\"9001\":e=this.config.err_msg3;break;case\"0003\":e=this.config.err_msg9;break;case\"0004\":e=this.config.err_msg6;break;case\"0005\":e=this.config.err_msg7;break;case\"7001\":e=this.config.err_msg8;break;default:e=\"(\"+d+\") \"+this.config.err_msg4;break}if(this.config.debug_mode){var c=\"\";switch(d){case\"8000\":c=\" :: No Access Token \";break;case\"8001\":c=\" :: Invalid Token Format \";break;case\"8002\":c=\" :: Invalid Token \";break;case\"8003\":c=\" :: Out of Credits \";break;case\"8004\":c=\" :: Restricted by rules \";break;case\"8005\":c=\" :: Token suspended \";break}e+=c+\" :: DBG :: \"+b}a=document.createTextNode(e)}this.update_res(a);if(this.config.on_error){this.config.on_error(e)}};this.disp_err_msg=function(b){var a=null;if(\"\"!=b){a=document.createTextNode(b)}this.update_res(a);if(this.config.on_error){this.config.on_error(b)}};this.display_res_line=function(d,c){var b=document.getElementById(\"crafty_postcode_lookup_result_option\"+this.obj_idx);var e=document.createElement(\"option\");e.appendChild(document.createTextNode(d));if(-1==c){e.setAttribute(\"selected\",\"selected\")}if(null!=b){b.appendChild(e)}else{var a=document.createElement(\"select\");a.id=\"crafty_postcode_lookup_result_option\"+this.obj_idx;a.onclick=Function(\"_cp_instances[\"+this.obj_idx+\"].res_clicked(this.selectedIndex);\");a.onkeypress=_cp_kp;if(0!=this.config.res_select_on_change){a.onchange=Function(\"_cp_instances[\"+this.obj_idx+\"].res_selected(this.selectedIndex);\")}if(this.config.max_width&&\"\"!=this.config.max_width){a.style.width=this.config.max_width}var f=this.res_arr_idx;if(1==this.dummy_1st_line){f++}if((navigator.appName==\"Microsoft Internet Explorer\")&&(parseFloat(navigator.appVersion)<=4)){a.size=0}else{if(f>=this.config.max_lines){a.size=this.config.max_lines}else{a.size=f}}a.appendChild(e);this.update_res(a)}};this.update_res=function(a){if(this.lookup_timeout){clearTimeout(this.lookup_timeout)}try{if(document.getElementById){var b=document.getElementById(this.config.result_elem_id);if(b.hasChildNodes()){while(b.firstChild){b.removeChild(b.firstChild)}}if(null!=a){b.appendChild(a)}}}catch(c){}};this.str_trim=function(b){var a=0;var c=b.length-1;while(a<b.length&&b[a]==\" \"){a++}while(c>a&&b[c]==\" \"){c-=1}return b.substring(a,c+1)};this.cp_uc=function(e){if(\"PC\"==e||\"UK\"==e||\"EU\"==e){return(e)}var d=\"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";var c=\"\";var f=1;var b=0;for(var a=0;a<e.length;a++){if(-1!=d.indexOf(e.charAt(a))){if(f||b){c=c+e.charAt(a);f=0}else{c=c+e.charAt(a).toLowerCase()}}else{c=c+e.charAt(a);if(a+2>=e.length&&\"'\"==e.charAt(a)){f=0}else{if(\"(\"==e.charAt(a)){close_idx=e.indexOf(\")\",a+1);if(a+3<close_idx){b=0;f=1}else{b=1}}else{if(\")\"==e.charAt(a)){b=0;f=1}else{if(\"-\"==e.charAt(a)){close_idx=e.indexOf(\"-\",a+1);if((-1!=close_idx&&a+3>=close_idx)||a+3>=e.length){b=0;f=0}else{b=0;f=1}}else{if(a+2<e.length&&\"0\"<=e.charAt(a)&&\"9\">=e.charAt(a)){f=0}else{f=1}}}}}}}return(c)};this.leading_caps=function(a,b){if(0!=b||2>a.length){return(a)}var d=\"\";var f=a.split(\" \");for(var c=0;c<f.length;c++){var e=this.str_trim(f[c]);if(\"\"!=e){if(\"\"!=d){d=d+\" \"}d=d+this.cp_uc(e)}}return(d)};this.new_res_line=function(){var a=[];a.org=\"\";a.housename1=\"\";a.housename2=\"\";a.pobox=\"\";a.housenumber=\"\";a.street1=\"\";a.street2=\"\";a.locality_dep=\"\";a.locality=\"\";a.town=\"\";a.county=\"\";a.postcode=\"\";a.udprn=\"\";return(a)};this.res_arr_compare=function(e,c){if(e.match_quality>c.match_quality){return(1)}if(e.match_quality<c.match_quality){return(-1)}if(e.street1>c.street1){return(1)}if(e.street1<c.street1){return(-1)}if(e.street2>c.street2){return(1)}if(e.street2<c.street2){return(-1)}var h;if(\"\"==e.housenumber){h=_cp_eh(Array(e.housename1,e.housename2))}else{h=parseInt(e.housenumber)}var g;if(\"\"==c.housenumber){g=_cp_eh(Array(c.housename1,c.housename2))}else{g=parseInt(c.housenumber)}if(\"\"==h&&\"\"!=g){return(1)}else{if(\"\"!=h&&\"\"==g){return(-1)}else{if(h>g){return(1)}if(h<g){return(-1)}}}var f=_cp_sp(e.housename1);if(!isNaN(parseInt(f))){f=parseInt(f)}var d=_cp_sp(c.housename1);if(!isNaN(parseInt(d))){d=parseInt(d)}if(f>d){return(1)}if(f<d){return(-1)}var f=_cp_sp(e.housename2);if(!isNaN(parseInt(f))){f=parseInt(f)}var d=_cp_sp(c.housename2);if(!isNaN(parseInt(d))){d=parseInt(d)}if(f>d){return(1)}if(f<d){return(-1)}f=e.housename2+e.housename1;d=c.housename2+c.housename1;if(f>d){return(1)}if(f<d){return(-1)}if(e.org>c.org){return(1)}if(e.org<c.org){return(-1)}return(1)};this.disp_res_arr=function(){this.res_arr=this.res_arr.sort(this.res_arr_compare);if(0!=this.config.res_autoselect){this.populate_form_fields(this.res_arr[0])}var a=this.config.delimiter;this.disp_arr=[];for(var c=0;c<this.res_arr_idx;c++){var e=this.res_arr[c];var b=e.org+(e.org!=\"\"?a:\"\")+e.housename2+(e.housename2!=\"\"?a:\"\")+e.housename1+(e.housename1!=\"\"?a:\"\")+e.pobox+(e.pobox!=\"\"?a:\"\")+e.housenumber+(e.housenumber!=\"\"?\" \":\"\")+e.street2+(e.street2!=\"\"?a:\"\")+e.street1+(e.street1!=\"\"?a:\"\")+e.locality_dep+(e.locality_dep!=\"\"?a:\"\")+e.locality+(e.locality!=\"\"?a:\"\")+e.town;if(this.flexi_search){b+=a+e.postcode}var d=[];d.index=c;d.str=b;this.disp_arr[c]=d}this.update_res(null);this.dummy_1st_line=0;if(\"\"!=this.config.first_res_line){this.dummy_1st_line=1;this.display_res_line(this.config.first_res_line,-1)}for(var c=0;c<this.res_arr_idx;c++){this.display_res_line(this.disp_arr[c][\"str\"],c)}if(this.config.pre_populate_common_address_parts){var f=this.new_res_line();f.org=this.res_arr[0][\"org\"];f.housename1=this.res_arr[0][\"housename1\"];f.housename2=this.res_arr[0][\"housename2\"];f.pobox=this.res_arr[0][\"pobox\"];f.housenumber=this.res_arr[0][\"housenumber\"];f.street1=this.res_arr[0][\"street1\"];f.street2=this.res_arr[0][\"street2\"];f.locality_dep=this.res_arr[0][\"locality_dep\"];f.locality=this.res_arr[0][\"locality\"];f.town=this.res_arr[0][\"town\"];f.county=this.res_arr[0][\"county\"];f.postcode=this.res_arr[0][\"postcode\"];f.udprn=this.res_arr[0][\"udprn\"];for(var c=1;c<this.res_arr_idx;c++){if(this.res_arr[c][\"org\"]!=f.org){f.org=\"\"}if(this.res_arr[c][\"housename2\"]!=f.housename2){f.housename2=\"\"}if(this.res_arr[c][\"housename1\"]!=f.housename1){f.housename1=\"\"}if(this.res_arr[c][\"pobox\"]!=f.pobox){f.pobox=\"\"}if(this.res_arr[c][\"housenumber\"]!=f.housenumber){f.housenumber=\"\"}if(this.res_arr[c][\"street1\"]!=f.street1){f.street1=\"\"}if(this.res_arr[c][\"street2\"]!=f.street2){f.street2=\"\"}if(this.res_arr[c][\"locality_dep\"]!=f.locality_dep){f.locality_dep=\"\"}if(this.res_arr[c][\"locality\"]!=f.locality){f.locality=\"\"}if(this.res_arr[c][\"town\"]!=f.town){f.town=\"\"}if(this.res_arr[c][\"county\"]!=f.county){f.county=\"\"}if(this.res_arr[c][\"postcode\"]!=f.postcode){f.postcode=\"\"}if(this.res_arr[c][\"udprn\"]!=f.udprn){f.udprn=\"\"}}this.populate_form_fields(f)}};this.get_elem=function(a){var d=\"\";var c=null;if(\"\"!=this.config.elements){var b=this.config.elements.split(\",\");d=b[a]}else{switch(a){case 0:d=this.config.elem_company;break;case 1:d=this.config.elem_street1;break;case 2:d=this.config.elem_street2;break;case 3:d=this.config.elem_street3;break;case 4:d=this.config.elem_town;break;case 5:d=this.config.elem_county;break;case 6:default:d=this.config.elem_postcode;break;case 7:d=this.config.elem_house_num;break;case 8:d=this.config.elem_search_house;break;case 9:d=this.config.elem_search_street;break;case 10:d=this.config.elem_search_town;break;case 11:d=this.config.elem_udprn;break}}if(\"\"!=d){if(\"\"!=this.config.form){c=document.forms[this.config.form].elements[d]}else{if(document.getElementById){c=document.getElementById(d)}}}return(c)};this.doHouseSearch=function(){var a=this.get_elem(8);if(a&&0<a.value.length){this.house_search=1}this.doLookup()};this.doLookup=function(){this.xmlhttp=null;var a=this.get_elem(6);var b=null;if(a){this.show_busy();this.lookup_timeout=setTimeout(\"_cp_instances[\"+this.obj_idx+\"].lookup_timeout_err()\",this.config.lookup_timeout);b=this.validate_pc(a.value)}if(null!=b){this.direct_xml_fetch(0,b)}else{this.disp_err(\"0002\",\"invalid postcode format\")}};this.flexiSearch=function(){this.xmlhttp=null;var a=\"\";if(this.get_elem(8)&&\"\"!=this.get_elem(8).value){a+=\"&search_house=\"+this.get_elem(8).value}if(this.get_elem(9)&&\"\"!=this.get_elem(9).value){a+=\"&search_street=\"+this.get_elem(9).value}if(this.get_elem(10)&&\"\"!=this.get_elem(10).value){a+=\"&search_town=\"+this.get_elem(10).value}if(\"\"!=a){this.show_busy();this.lookup_timeout=setTimeout(\"_cp_instances[\"+this.obj_idx+\"].lookup_timeout_err()\",this.config.lookup_timeout);this.direct_xml_fetch(1,a)}else{this.disp_err(\"0003\",\"search string too short\")}};this.validate_pc=function(c){var b=\"\";do{b=c;c=c.replace(/[^A-Za-z0-9]/,\"\")}while(b!=c);b=c.toUpperCase();if(7>=b.length&&5<=b.length){var d=b.substring(b.length-3,b.length);var a=b.substring(0,b.length-3);if(true==/[CIKMOV]/.test(d)){return null}if(\"0\"<=d.charAt(0)&&\"9\">=d.charAt(0)&&\"A\"<=d.charAt(1)&&\"Z\">=d.charAt(1)&&\"A\"<=d.charAt(2)&&\"Z\">=d.charAt(2)){switch(a.length){case 2:if(\"A\"<=a.charAt(0)&&\"Z\">=a.charAt(0)&&\"0\"<=a.charAt(1)&&\"9\">=a.charAt(1)){return(b)}break;case 3:if(\"A\"<=a.charAt(0)&&\"Z\">=a.charAt(0)){if(\"0\"<=a.charAt(1)&&\"9\">=a.charAt(1)&&\"0\"<=a.charAt(2)&&\"9\">=a.charAt(2)){return(b)}else{if(\"A\"<=a.charAt(1)&&\"Z\">=a.charAt(1)&&\"0\"<=a.charAt(2)&&\"9\">=a.charAt(2)){return(b)}else{if(\"0\"<=a.charAt(1)&&\"9\">=a.charAt(1)&&\"A\"<=a.charAt(2)&&\"Z\">=a.charAt(2)){return(b)}}}}break;case 4:if(\"A\"<=a.charAt(0)&&\"Z\">=a.charAt(0)&&\"A\"<=a.charAt(1)&&\"Z\">=a.charAt(1)&&\"0\"<=a.charAt(2)&&\"9\">=a.charAt(2)){if(\"0\"<=a.charAt(3)&&\"9\">=a.charAt(3)){return(b)}else{if(\"A\"<=a.charAt(3)&&\"Z\">=a.charAt(3)){return(b)}}}break;default:break}}}return null};this.direct_xml_fetch=function(d,a){try{var e=document.getElementById(this.config.result_elem_id);var b=\"\";if(\"https:\"==document.location.protocol){b=\"https://\"}else{b=\"http://\"}if(0==d){b+=this.config.lookup_url;if(this.config.basic_address){b+=\"basicaddress\"}else{b+=\"rapidaddress\"}b+=\"?postcode=\"+a+\"&callback=_cp_instances[\"+this.obj_idx+\"].handle_js_response&callback_id=0\"}else{if(this.config.basic_address){this.disp_err(\"1207\",\"BasicAddress can't be used for Flexi Search!\");return}else{b+=this.config.lookup_url+\"flexiaddress?callback=_cp_instances[\"+this.obj_idx+\"].handle_js_response&callback_id=1\";b+=\"&max_results=\"+this.config.max_results;b+=a}}if(\"\"!=this.config.access_token){b+=\"&key=\"+this.config.access_token}var c=document.createElement(\"script\");c.src=encodeURI(b);c.type=\"text/javascript\";e.appendChild(c)}catch(f){this.disp_err(\"1206\",f)}};this.handle_js_response=function(c,d,e){if(!d){var f=e.error_code;var a=e.error_msg;this.disp_err(f,a)}else{this.res_arr=[];this.res_arr_idx=0;if(0==c){this.flexi_search=0;if(this.house_search){e=this.filter_data_by_house_name(e);if(null==e){this.disp_err_msg(this.config.err_msg5);return}}this.add_to_res_array(e)}else{this.flexi_search=1;this.res_arr.total_postcode_count=e.total_postcode_count;this.res_arr.total_thoroughfare_count=e.total_thoroughfare_count;this.res_arr.total_delivery_point_count=e.total_delivery_point_count;for(var i=1;i<=e.total_postcode_count;i++){this.add_to_res_array(e[i])}}if(this.res_arr_idx){var b=false;if(1==this.res_arr_idx&&this.config.single_res_autoselect){var g=null;if(\"\"!=this.config.single_res_notice){g=document.createTextNode(this.config.single_res_notice)}this.update_res(g);this.populate_form_fields(this.res_arr[0]);b=true}else{this.disp_res_arr();document.getElementById(\"crafty_postcode_lookup_result_option\"+this.obj_idx).focus()}if(0==c&&\"\"!=e.postcode){var h=this.get_elem(6);h.value=e.postcode}if(this.config.on_result_ready){this.config.on_result_ready()}if(b&&this.config.on_result_selected){this.config.on_result_selected(0)}}else{this.disp_err(\"1205\",\"no result to display\")}}};this.add_to_res_array=function(f){for(var d=1;d<=f.thoroughfare_count;d++){var e=f[d][\"thoroughfare_name\"];if(\"\"!=f[d][\"thoroughfare_descriptor\"]){e+=\" \"+f[d][\"thoroughfare_descriptor\"]}e=this.leading_caps(e,this.config.addr_uppercase);var c=f[d][\"dependent_thoroughfare_name\"];if(\"\"!=f[d][\"dependent_thoroughfare_descriptor\"]){c+=\" \"+f[d][\"dependent_thoroughfare_descriptor\"]}c=this.leading_caps(c,this.config.addr_uppercase);if(\"delivery_point_count\" in f[d]&&0<f[d][\"delivery_point_count\"]){for(var a=1;a<=f[d][\"delivery_point_count\"];a++){var g=this.new_res_line();g.street1=e;g.street2=c;var b=f[d][a];if(\"match_quality\" in b){g.match_quality=b.match_quality}else{g.match_quality=1}g.housenumber=b.building_number;g.housename2=this.leading_caps(b.sub_building_name,this.config.addr_uppercase);g.housename1=this.leading_caps(b.building_name,this.config.addr_uppercase);g.org=b.department_name;if(\"\"!=g.org&&\"\"!=b.organisation_name){g.org+=this.config.delimiter}g.org=this.leading_caps(g.org+b.organisation_name,this.config.org_uppercase);g.pobox=this.leading_caps(b.po_box_number,this.config.addr_uppercase);g.postcode=f.postcode;g.town=this.leading_caps(f.town,this.config.town_uppercase);g.locality=this.leading_caps(f.dependent_locality,this.config.addr_uppercase);g.locality_dep=this.leading_caps(f.double_dependent_locality,this.config.addr_uppercase);if(this.config.traditional_county){g.county=this.leading_caps(f.traditional_county,this.config.county_uppercase)}else{g.county=this.leading_caps(f.postal_county,this.config.county_uppercase)}g.udprn=b.udprn;this.res_arr[this.res_arr_idx]=g;this.res_arr_idx++}}else{var g=this.new_res_line();g.street1=e;g.street2=c;g.postcode=f.postcode;g.town=this.leading_caps(f.town,this.config.town_uppercase);g.locality=this.leading_caps(f.dependent_locality,this.config.addr_uppercase);g.locality_dep=this.leading_caps(f.double_dependent_locality,this.config.addr_uppercase);if(this.config.traditional_county){g.county=this.leading_caps(f.traditional_county,this.config.county_uppercase)}else{g.county=this.leading_caps(f.postal_county,this.config.county_uppercase)}g.match_quality=2;this.res_arr[this.res_arr_idx]=g;this.res_arr_idx++}}};this.filter_data_by_house_name=function(f){var g=this.get_elem(8);if(!g||!g.value.length){return f}var j=g.value.toUpperCase();var k=-1;if(parseInt(j)==j){k=parseInt(j)}var l=\" \"+j;var e=[];var i=1;var b=0;for(var c=1;c<=f.thoroughfare_count;c++){e[i]=[];b=0;for(var d=1;d<=f[c][\"delivery_point_count\"];d++){var h=f[c][d];var a=\" \"+h.sub_building_name+\" \"+h.building_name+\" \";if(-1!=a.indexOf(l)||k==parseInt(h.building_number)){b++;e[i][b]=[];e[i][b][\"building_number\"]=h.building_number;e[i][b][\"sub_building_name\"]=h.sub_building_name;e[i][b][\"building_name\"]=h.building_name;e[i][b][\"department_name\"]=h.department_name;e[i][b][\"organisation_name\"]=h.organisation_name;e[i][b][\"po_box_number\"]=h.po_box_number;e[i][b][\"udprn\"]=h.udprn}}if(b){e[i][\"delivery_point_count\"]=b;e[i][\"thoroughfare_name\"]=f[c][\"thoroughfare_name\"];e[i][\"thoroughfare_descriptor\"]=f[c][\"thoroughfare_descriptor\"];e[i][\"dependent_thoroughfare_name\"]=f[c][\"dependent_thoroughfare_name\"];e[i][\"dependent_thoroughfare_descriptor\"]=f[c][\"dependent_thoroughfare_descriptor\"];i++}}if(1<i){e.thoroughfare_count=i-1;e.town=f.town;e.dependent_locality=f.dependent_locality;e.double_dependent_locality=f.double_dependent_locality;e.traditional_county=f.traditional_county;e.postal_county=f.postal_county;e.postcode=f.postcode;return e}return null};this.lookup_timeout_err=function(){this.disp_err(\"9001\",\"Internal Timeout after \"+this.config.lookup_timeout+\"ms\")}}};","Craftyclicks_Ukpostcodelookup/form_integrations/cc_iwd_checkout.js":"/*\n// This is a collection of JavaScript code to allow easy integration of\n// the Crafty Clicks postcode / address finder functionality into Magento 2\n// custom checkout by IWD. Tested with IWD Checkout Suite version 3.2.0.\n//\n// Provided by www.CraftyClicks.co.uk\n//\n// Requires standard CraftyClicks JS - tested with v4.9.3\n//\n// If you copy/use/modify this code - please keep this\n// comment header in place\n//\n// Copyright (c) 2009-2018 Crafty Clicks (http://www.craftyclicks.com)\n//\n// This code relies on jQuery, you must have a reasonably recent version loaded\n// in your template. Magento should include it as standard.\n//\n// If you need any help, contact support@craftyclicks.co.uk - we will help!\n//\n**********************************************************************************/\n\nfunction CraftyClicksMagento2Class() {\n\tthis.current_setup = 'initial';\n\n\t// initial page setup\n\tthis.initial_setup =function() {\n\t\t// move fields\n\t\tjQuery('#' + this.misc.container_id).find('[name=\"lastname\"]').closest('.field').after(jQuery('#' + this.fields.country_id).closest('.field'));\n\t\tjQuery('#' + this.fields.country_id).closest('.field').before(jQuery('#' + this.fields.company_id).closest('.field'));\n\n\t\t// add cp address class to fields and labels so we can easily grab them for the hide fields feature\n\t\tvar that = this;\n\t\tjQuery.each(this.fields, function(index, value) {\n\t\t\tif (value !== that.fields.postcode_id && value !== that.fields.country_id && value !== that.fields.company_id) {\n\t\t\t\tjQuery('#' + value).closest('.field').addClass(that.misc.prefix + '_cp_address_class');\n\t\t\t\tif (value == that.fields.address_1_id) {\n\t\t\t\t\tjQuery('#' + value).closest('.field').parent().closest('.field').addClass(that.misc.prefix + '_cp_address_class');\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tthis.setup_for_uk = function() {\n\t\t// check if we need to do anything\n\t\tif ('uk' != this.current_setup) {\n\t\t\t// do the magic for UK\n\n\t\t\t// move postcode to show after country and add placeholder\n\t\t\tjQuery('#' + this.fields.country_id).closest('.field').after(jQuery('#' + this.fields.postcode_id).closest('.field'));\n\t\t\tjQuery('#' + this.fields.postcode_id).attr('placeholder', crafty_cfg.txt.search_placeholder);\n\n\t\t\t// check if button already exists\n\t\t\t// Step 6 - add prefix to button and result display so they are unique\n\t\t\tif (jQuery('#' + this.misc.prefix + '_cp_button_id').length == 0) {\n\t\t\t\t// add button after postcode input\n\t\t\t\tvar tmp_html = '<div class=\"field\"><div><button id=\"' + this.misc.prefix + '_cp_button_id\" type=\"button\" class=\"iwd_opc_button active iwd_opc_place_order_button\"><span>' + crafty_cfg.txt.search_buttontext + '</span></button></div></div>';\n\t\t\t\tjQuery('#'+this.fields.postcode_id).closest('.field').after(tmp_html);\n\n\t\t\t\t// add click event listener to button\n\t\t\t\tvar el = document.getElementById(this.misc.prefix + '_cp_button_id');\n\t\t\t\tif (el != null) {\n\t\t\t\t\tel.addEventListener('click', this.button_clicked.bind(this));\n\t\t\t\t}\n\n\t\t\t\t// add results after button\n\t\t\t\tjQuery('#'+this.misc.prefix+'_cp_button_id').closest('.field').after('<div class=\"field\" style=\"display: none;\"><div id=\"' + this.misc.prefix + '_cp_result_display\" class=\"search-list\"></div></div>');\n\t\t\t} else {\n\t\t\t\tjQuery('#' + this.misc.prefix + '_cp_button_id').show();\n\t\t\t}\n\n\t\t\t// disable autofill\n\t\t\tjQuery('#' + this.fields.postcode_id).attr('autocomplete', 'new-password')\n\t\t}\n\n\t\tif (crafty_cfg.hide_fields) {\n\t\t\tjQuery('.' + this.misc.prefix + '_cp_address_class').hide();\n\t\t}\n\n\t\tthis.current_setup = 'uk';\n\t}\n\n\tthis.setup_for_non_uk = function() {\n\t\t// check if we need to do anything\n\t\tif ('non_uk' != this.current_setup) {\n\t\t\t// move postcode field to show after region\n\t\t\tjQuery('#' + this.fields.county_id).closest('.field').after(jQuery('#' + this.fields.postcode_id).closest('.field'));\n\n\t\t\t// hide button and result box if they exist\n\t\t\tif (jQuery('#' + this.misc.prefix + '_cp_button_id').length == 1) {\n\t\t\t\tjQuery('#' + this.misc.prefix + '_cp_button_id').hide();\n\t\t\t}\n\n\t\t\tif (jQuery('#' + this.misc.prefix + '_cp_result_display').length == 1) {\n\t\t\t\tjQuery('#' + this.misc.prefix + '_cp_result_display').hide();\n\t\t\t}\n\n\t\t\tjQuery('#' + this.misc.prefix + '_cp_result_display').children('select').remove();\n\n\t\t\t// show fields\n\t\t\tjQuery('.' + this.misc.prefix + '_cp_address_class').show();\n\n\t\t\t// enable autofill\n\t\t\tjQuery('#' + this.fields.postcode_id).attr('autocomplete', 'postal-code')\n\n\t\t\tthis.current_setup = 'non_uk';\n\t\t}\n\t}\n\n\tthis.add_lookup = function(setup) {\n\t\t// Step 5 - make sure we only do add_lookup once per instance\n\t\tif (jQuery('#'+setup.fields.postcode_id).attr('cc-applied') == \"1\") {\n\t\t\treturn\n\t\t}\n\t\tcp_obj = CraftyPostcodeCreate(); // instantiate library magic\n\t\tthis.cp_obj = cp_obj;\n\t\t// config\n\t\tthis.fields = setup.fields;\n\t\tthis.misc = setup.misc;\n\n\t\t// the set method is shorthand and is equivalent to cp_obj.config['configItem'] = configValue;\n\t\tcp_obj.set(\"result_elem_id\", this.misc.prefix + \"_cp_result_display\");\n\t\tcp_obj.set(\"form\", \"\");\n\t\tcp_obj.set(\"elem_company\", this.fields.company_id);\n\t\tcp_obj.set(\"elem_street1\", this.fields.address_1_id);\n\t\tcp_obj.set(\"elem_street2\", this.fields.address_2_id);\n\t\tcp_obj.set(\"elem_postcode\", this.fields.postcode_id);\n\t\tcp_obj.set(\"elem_town\", this.fields.town_id);\n\t\tcp_obj.set(\"elem_country\", this.fields.country_id);\n\t\tcp_obj.set(\"elem_county\", this.fields.county_id);\n\n\t\tcp_obj.set(\"container_elem\", this.misc.container_elem);\n\t\tcp_obj.set(\"prefix\", this.misc.prefix);\n\n\t\tcp_obj.set(\"access_token\", crafty_cfg.key);\n\t\tcp_obj.set(\"res_autoselect\", \"0\");\n\t\tcp_obj.set(\"single_res_autoselect\" , 0);\n\t\tcp_obj.set(\"max_lines\" , 1);\n\n\t\tif (crafty_cfg.advanced.county_data == 'traditional') {\n\t\t\tcp_obj.set(\"traditional_county\" , 1);\n\t\t} else if (crafty_cfg.advanced.county_data == 'former_postal') {\n\t\t\tcp_obj.set(\"traditional_county\" , 0);\n\t\t}\n\n\t\tcp_obj.set(\"busy_img_url\" , null);\n\t\tcp_obj.set(\"hide_result\" , false);\n\t\tcp_obj.set(\"on_result_ready\", this.result_ready.bind(this));\n\t\tcp_obj.set(\"on_result_selected\", this.result_selected.bind(this));\n\t\tcp_obj.set(\"on_error\", this.result_error.bind(this));\n\t\tcp_obj.set(\"first_res_line\", '---- please select your address ----');\n\t\tcp_obj.set(\"err_msg1\", crafty_cfg.error_msg['0001']);\n\t\tcp_obj.set(\"err_msg2\", crafty_cfg.error_msg['0002']);\n\t\tcp_obj.set(\"err_msg3\", crafty_cfg.error_msg['0003']);\n\t\tcp_obj.set(\"err_msg4\", crafty_cfg.error_msg['0004']);\n\t\tcp_obj.set(\"max_width\", \"100%\");\n\n\t\t// do initial setup\n\t\tthis.initial_setup();\n\n\t\t// do setup for current country\n\t\tthis.country_changed();\n\n\t\t// listen for country changes\n\t\tvar countryEl = document.getElementById(this.fields.country_id);\n\t\tcountryEl.addEventListener('change', this.country_changed.bind(this));\n\n\t\tjQuery('#'+setup.fields.postcode_id).attr('cc-applied', '1');\n\t}\n\n\tthis.country_changed = function(e) {\n\t\t// show postcode lookup for:\n\t\t// \"GB\" UK\n\t\t// \"JE\" Jersey\n\t\t// \"GG\" Guernsey\n\t\t// \"IM\" Isle of Man\n\t\tvar curr_country = jQuery('#' + this.fields.country_id).val();\n\t\tif ('GB' == curr_country || 'JE' == curr_country || 'GG' == curr_country || 'IM' == curr_country) {\n\t\t\tthis.setup_for_uk();\n\t\t} else {\n\t\t\tthis.setup_for_non_uk();\n\t\t}\n\t}\n\n\tthis.button_clicked = function(e) {\n\t\te.preventDefault();\n\t\tjQuery('#' + this.misc.prefix +'_cp_result_display').siblings('.field-error').children('.search-subtext').hide();\n\t\tjQuery('#' + this.misc.prefix + '_cp_result_display').closest('.field').show();\n\t\tjQuery('#' + this.misc.prefix + '_cp_result_display').show();\n\t\tthis.cp_obj.doLookup();\n\t}\n\n\tthis.result_ready = function() {\n\n\t}\n\n\tthis.result_selected = function() {\n\t\t// update country field if user selects address from GG/JE, etc.\n\t\tswitch(jQuery('#' + this.fields.postcode_id).val().substring(0,2)){\n\t\t\tcase \"GY\":\n\t\t\t\tjQuery('#' + this.fields.country_id).val(\"GG\");\n\t\t\t\tbreak;\n\t\t\tcase \"JE\":\n\t\t\t\tjQuery('#' + this.fields.country_id).val(\"JE\");\n\t\t\t\tbreak;\n\t\t\tcase \"IM\":\n\t\t\t\tjQuery('#' + this.fields.country_id).val(\"IM\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tjQuery('#' + this.fields.country_id).val(\"GB\");\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (crafty_cfg.advanced.county_data == 'none') {\n\t\t\tjQuery('#'+this.fields.county_id).val('');\n\t\t}\n\n\t\tjQuery('.' + this.misc.prefix + '_cp_address_class').show();\n\n\t\t// trigger change event on address fields to satisfy magento required fields\n\t\tjQuery('#'+this.fields.company_id).trigger('change');\n\t\tjQuery('#'+this.fields.address_1_id).trigger('change');\n\t\tjQuery('#'+this.fields.address_2_id).trigger('change');\n\t\tjQuery('#'+this.fields.postcode_id).trigger('change');\n\t\tjQuery('#'+this.fields.town_id).trigger('change');\n\t\tjQuery('#'+this.fields.county_id).trigger('change');\n\t\tjQuery('#'+this.fields.country_id).trigger('change');\n\t}\n\n\tthis.result_error = function() {\n\t\t// apply magento error styling\n\t\tjQuery('#shipping_cp_result_display').removeClass('search-list');\n\t\tjQuery('#shipping_cp_result_display').addClass('field-error');\n\n\t\tjQuery('.' + this.misc.prefix + '_cp_address_class').show();\n\t}\n}\n\n\nactivate_cc = function() {\n\tif (jQuery('#co-shipping-form').find('[name=\"postcode\"]').length == 1) {\n\t\t// Step 3 - now that we know this form exists, create an instance from our constructor\n\t\tvar cc1 = new CraftyClicksMagento2Class();\n\t\t// Step 4 - run the add_lookup method on our instance and pass it field id's\n\t\tcc1.add_lookup({\n\t\t\t\"fields\": {\n\t\t\t\t\"company_id\":\t\t\tjQuery('#co-shipping-form').find('[name=\"company\"]').attr('id'),\n\t\t\t\t\"address_1_id\":\t\tjQuery('#co-shipping-form').find('[name=\"street[0]\"]').attr('id'),\n\t\t\t\t\"address_2_id\":\t\tjQuery('#co-shipping-form').find('[name=\"street[1]\"]').attr('id'),\n\t\t\t\t\"postcode_id\":\t\tjQuery('#co-shipping-form').find('[name=\"postcode\"]').attr('id'),\n\t\t\t\t\"town_id\":\t\t\t\tjQuery('#co-shipping-form').find('[name=\"city\"]').attr('id'),\n\t\t\t\t\"county_id\":\t\t\tjQuery('#co-shipping-form').find('[name=\"region\"]').attr('id'),\n\t\t\t\t\"country_id\":\t\t\tjQuery('#co-shipping-form').find('[name=\"country_id\"]').attr('id'),\n\t\t\t},\n\t\t\t\"misc\": {\n\t\t\t\t\"container_id\":\t\t\t\"co-shipping-form\",\n\t\t\t\t\"prefix\":\t\t\t\t\t\t\"shipping\"\n\t\t\t}\n\t\t});\n\t}\n\n\tif (jQuery('#co-payment-form').find('[name=\"postcode\"]').length == 1) {\n\t\tvar cc2 = new CraftyClicksMagento2Class();\n\t\tcc2.add_lookup({\n\t\t\t\"fields\": {\n\t\t\t\t\"company_id\":\t\t\tjQuery('#co-payment-form').find('[name=\"company\"]').attr('id'),\n\t\t\t\t\"address_1_id\":\t\tjQuery('#co-payment-form').find('[name=\"street[0]\"]').attr('id'),\n\t\t\t\t\"address_2_id\":\t\tjQuery('#co-payment-form').find('[name=\"street[1]\"]').attr('id'),\n\t\t\t\t\"address_3_id\":\t\tjQuery('#co-shipping-form').find('[name=\"street[2]\"]').attr('id'),\n\t\t\t\t\"postcode_id\":\t\tjQuery('#co-payment-form').find('[name=\"postcode\"]').attr('id'),\n\t\t\t\t\"town_id\":\t\t\t\tjQuery('#co-payment-form').find('[name=\"city\"]').attr('id'),\n\t\t\t\t\"county_id\":\t\t\tjQuery('#co-payment-form').find('[name=\"region\"]').attr('id'),\n\t\t\t\t\"country_id\":\t\t\tjQuery('#co-payment-form').find('[name=\"country_id\"]').attr('id'),\n\t\t\t},\n\t\t\t\"misc\": {\n\t\t\t\t\"container_id\":\t\t\t\"co-payment-form\",\n\t\t\t\t\"prefix\":\t\t\t\t\t\t\"payment\"\n\t\t\t}\n\t\t});\n\t}\n}\n\nrequirejs(['jquery'], function($) {\n\tjQuery(document).ready(function() {\n\t\t// Step 1 - check crafty is enabled\n\t\tif (crafty_cfg.enabled) {\n\t\t\t// Step 2 - page takes a while to load, so continuously check for form\n\t\t\tsetInterval(activate_cc, 200);\n\t\t}\n\n\t});\n});","Craftyclicks_Ukpostcodelookup/form_integrations/cc_aheadworks_checkout.js":"/*\n// This is a collection of JavaScript code to allow easy integration of\n// the Crafty Clicks postcode / address finder functionality into \n// OneStepCheckout by Aheadworks for Magento 2. Tested with OneStepCheckout\n// version 1.2.0.\n//\n// This file works for the standard magento 2 checkout (both community and enterprise)\n//\n// Provided by www.CraftyClicks.co.uk\n//\n// Requires standard CraftyClicks JS - tested with v4.9.3\n//\n// If you copy/use/modify this code - please keep this\n// comment header in place\n//\n// Copyright (c) 2009-2018 Crafty Clicks (http://www.craftyclicks.com)\n//\n// This code relies on jQuery, you must have a reasonably recent version loaded\n// in your template. Magento should include it as standard.\n//\n// If you need any help, contact support@craftyclicks.co.uk - we will help!\n//\n**********************************************************************************/\nfunction CraftyClicksMagento2Class() {\n\tthis.current_setup = 'initial';\n\n\t// initial page setup\n\tthis.initial_setup =function() {\n\t\t// move country field to top\n\t\tjQuery('#' + this.misc.container_class).find('[name=\"lastname\"]').closest('.field').after(jQuery('#' + this.fields.country_id).closest('.field'));\n\t\t// if hide fields is true, move telephone field up\n\t\tif (crafty_cfg.hide_fields) {\n\t\t\tjQuery('#' + this.fields.country_id).closest('.field').before(jQuery('#' + this.misc.container_class).find('[name=\"telephone\"]').closest('.field'));\n\t\t}\n\n\t\t// add cp address class to fields and labels so we can easily grab them for the hide fields feature\n\t\tvar that = this;\n\t\tjQuery.each(this.fields, function(index, value) {\n\t\t\tif (value !== that.fields.postcode_id && value !== that.fields.country_id) {\n\t\t\t\tjQuery('#' + value).closest('.control').addClass(that.misc.prefix + '_cp_address_class');\n\t\t\t\tjQuery('#' + value).closest('.control').prev('label').addClass(that.misc.prefix + '_cp_address_class');\n\t\t\t\tif (value == that.fields.address_1_id) {\n\t\t\t\t\tjQuery('#' + value).closest('.control').parent().closest('.control').addClass(that.misc.prefix + '_cp_address_class');\n\t\t\t\t\tjQuery('#' + value).closest('.control').parent().closest('.control').prev('.label').addClass(that.misc.prefix + '_cp_address_class');\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tthis.setup_for_uk = function() {\n\t\t// check if we need to do anything\n\t\tif ('uk' != this.current_setup) {\n\t\t\t// do the magic for UK\n\n\t\t\t// move postcode to show after country and add placeholder\n\t\t\tjQuery('#' + this.fields.country_id).closest('.field').after(jQuery('#' + this.fields.postcode_id).closest('.field'));\n\t\t\tjQuery('#' + this.fields.postcode_id).attr('placeholder', crafty_cfg.txt.search_placeholder);\n\n\t\t\t// move state to show on same row as city\n\t\t\tjQuery('#' + this.fields.town_id).closest('.field').after(jQuery('#' + this.fields.county_id).closest('.field'))\n\n\t\t\t// move row containing country and postcode to top\n\t\t\tjQuery('#' + this.fields.address_1_id).closest('.field-row').before(jQuery('#' + this.fields.postcode_id).closest('.field-row'))\n\n\t\t\t// disable autofill\n\t\t\tjQuery('#' + this.fields.postcode_id).attr('autocomplete', 'new-password')\n\n\t\t\t// check if button already exists\n\t\t\t// Step 6 - add prefix to button and result display so they are unique\n\t\t\tif (jQuery('#' + this.misc.prefix + '_cp_button_id').length == 0) {\n\t\t\t\tjQuery('#'+this.fields.postcode_id).wrap('<div class=\"search-bar\"></div>');\n\n\t\t\t\t// add button after postcode input\n\t\t\t\tvar tmp_html = '<button id=\"' + this.misc.prefix + '_cp_button_id\" type=\"button\" class=\"action primary\" style=\"height: 44px\"><span>' + crafty_cfg.txt.search_buttontext + '</span></button>';\n\t\t\t\tjQuery('#'+this.fields.postcode_id).after(tmp_html);\n\n\t\t\t\t// add click event listener to button\n\t\t\t\tvar el = document.getElementById(this.misc.prefix + '_cp_button_id');\n\t\t\t\tif (el != null) {\n\t\t\t\t\tel.addEventListener('click', this.button_clicked.bind(this));\n\t\t\t\t}\n\n\t\t\t\t// add search-list and mage-error after search-bar\n\t\t\t\tjQuery('#'+this.fields.postcode_id).closest('.search-bar').after('<div id=\"' + this.misc.prefix + '_cp_result_display\" class=\"search-list\"></div>');\n\n\t\t\t\tjQuery('#'+this.misc.prefix + '_cp_result_display').after('<div class=\"search-list\" style=\"display: none;\"><select></select></div>'+\n\t\t\t\t'<div id=\"cc_' + this.misc.prefix + '_error\" class=\"mage-error\" generated><div class=\"search-subtext\"></div></div>');\n\n\t\t\t\tjQuery('#'+this.fields.postcode_id).closest('.field').addClass('search-container type_3')\n\t\t\t} else {\n\t\t\t\tjQuery('#' + this.misc.prefix + '_cp_button_id').show();\n\t\t\t\tjQuery('#' + this.misc.prefix + '_cp_result_display').show();\n\t\t\t\tjQuery('#' + this.fields.postcode_id).closest('.field').addClass(\"search-container type_3\");\n\t\t\t}\n\t\t}\n\n\t\tif ('initial' == this.current_setup && crafty_cfg.hide_fields) {\n\t\t\tjQuery('.' + this.misc.prefix + '_cp_address_class').hide();\n\t\t} else if ('non_uk' == this.current_setup && crafty_cfg.hide_fields && jQuery('#' + this.fields.postcode_id).val() === \"\") {\n\t\t\tjQuery('.' + this.misc.prefix + '_cp_address_class').hide();\n\t\t}\n\n\t\t// modify search input width for aheadworks\n\t\tjQuery('.search-bar').children('.input-text').attr('style', 'width: 64% !important')\n\t\t\n\t\t// hide error to avoid blank vertical space\n\t\tjQuery('#cc_' + this.misc.prefix + '_error').hide();\n\n\t\tthis.current_setup = 'uk';\n\t}\n\n\tthis.setup_for_non_uk = function() {\n\t\t// check if we need to do anything\n\t\tif ('non_uk' != this.current_setup) {\n\t\t\t// move postcode field to show after region\n\t\t\tjQuery('#' + this.fields.county_id).closest('.field').after(jQuery('#' + this.fields.postcode_id).closest('.field'));\n\n\t\t\t// disable autofill\n\t\t\tjQuery('#' + this.fields.postcode_id).attr('autocomplete', 'postal-code')\n\n\t\t\t// hide button and result box if they exist\n\t\t\tif (jQuery('#' + this.misc.prefix + '_cp_button_id').length == 1) {\n\t\t\t\tjQuery('#' + this.misc.prefix + '_cp_button_id').hide();\n\t\t\t}\n\n\t\t\tif (jQuery('#' + this.misc.prefix + '_cp_result_display').length == 1) {\n\t\t\t\tjQuery('#' + this.misc.prefix + '_cp_result_display').hide();\n\t\t\t}\n\n\t\t\tjQuery('#' + this.misc.prefix + '_cp_result_display').children('select').remove();\n\n\t\t\t// reset postcode input width\n\t\t\tjQuery('#' + this.fields.postcode_id).closest('.field').removeClass(\"search-container type_3\");\n\n\t\t\t// show fields\n\t\t\tjQuery('.' + this.misc.prefix + '_cp_address_class').show();\n\n\t\t\t// modify search input width for aheadworks\n\t\t\tjQuery('.search-bar').children('.input-text').attr('style', '')\n\n\t\t\t// hide error to avoid blank vertical space\n\t\t\tjQuery('#cc_' + this.misc.prefix + '_error').hide();\n\n\t\t\tthis.current_setup = 'non_uk';\n\t\t}\n\t}\n\n\tthis.add_lookup = function(setup) {\n\t\t// Step 5 - make sure we only do add_lookup once per instance\n\t\tif (jQuery('#'+setup.fields.postcode_id).attr('cc-applied') == \"1\") {\n\t\t\treturn\n\t\t}\n\t\tcp_obj = CraftyPostcodeCreate(); // instantiate library magic\n\t\tthis.cp_obj = cp_obj;\n\t\t// config\n\t\tthis.fields = setup.fields;\n\t\tthis.misc = setup.misc;\n\n\t\t// the set method is shorthand and is equivalent to cp_obj.config['configItem'] = configValue;\n\t\tcp_obj.set(\"result_elem_id\", this.misc.prefix + \"_cp_result_display\");\n\t\tcp_obj.set(\"form\", \"\");\n\t\tcp_obj.set(\"elem_company\", this.fields.company_id);\n\t\tcp_obj.set(\"elem_street1\", this.fields.address_1_id);\n\t\tcp_obj.set(\"elem_street2\", this.fields.address_2_id);\n\t\tcp_obj.set(\"elem_postcode\", this.fields.postcode_id);\n\t\tcp_obj.set(\"elem_town\", this.fields.town_id);\n\t\tcp_obj.set(\"elem_country\", this.fields.country_id);\n\t\tcp_obj.set(\"elem_county\", this.fields.county_id);\n\n\t\tcp_obj.set(\"prefix\", this.misc.prefix);\n\n\t\tcp_obj.set(\"access_token\", crafty_cfg.key);\n\t\tcp_obj.set(\"res_autoselect\", \"0\");\n\t\tcp_obj.set(\"single_res_autoselect\" , 0);\n\t\tcp_obj.set(\"max_lines\" , 1);\n\n\t\tif (crafty_cfg.advanced.county_data == 'traditional') {\n\t\t\tcp_obj.set(\"traditional_county\" , 1);\n\t\t} else if (crafty_cfg.advanced.county_data == 'former_postal') {\n\t\t\tcp_obj.set(\"traditional_county\" , 0);\n\t\t}\n\n\t\tcp_obj.set(\"busy_img_url\" , null);\n\t\tcp_obj.set(\"hide_result\" , false);\n\t\tcp_obj.set(\"on_result_ready\", this.result_ready.bind(this));\n\t\tcp_obj.set(\"on_result_selected\", this.result_selected.bind(this));\n\t\tcp_obj.set(\"on_error\", this.result_error.bind(this));\n\t\tcp_obj.set(\"first_res_line\", '---- please select your address ----');\n\t\tcp_obj.set(\"err_msg1\", crafty_cfg.error_msg['0001']);\n\t\tcp_obj.set(\"err_msg2\", crafty_cfg.error_msg['0002']);\n\t\tcp_obj.set(\"err_msg3\", crafty_cfg.error_msg['0003']);\n\t\tcp_obj.set(\"err_msg4\", crafty_cfg.error_msg['0004']);\n\t\tcp_obj.set(\"max_width\", \"100%\");\n\n\t\t// do initial setup\n\t\tthis.initial_setup();\n\n\t\t// do setup for current country\n\t\tthis.country_changed();\n\n\t\t// listen for country changes\n\t\tvar countryEl = document.getElementById(this.fields.country_id);\n\t\tcountryEl.addEventListener('change', this.country_changed.bind(this));\n\n\t\tjQuery('#'+setup.fields.postcode_id).attr('cc-applied', '1');\n\t}\n\n\tthis.country_changed = function(e) {\n\t\t// show postcode lookup for:\n\t\t// \"GB\" UK\n\t\t// \"JE\" Jersey\n\t\t// \"GG\" Guernsey\n\t\t// \"IM\" Isle of Man\n\t\tvar curr_country = jQuery('#' + this.fields.country_id).val();\n\t\tif ('GB' == curr_country || 'JE' == curr_country || 'GG' == curr_country || 'IM' == curr_country) {\n\t\t\tthis.setup_for_uk();\n\t\t} else {\n\t\t\tthis.setup_for_non_uk();\n\t\t}\n\t}\n\n\tthis.button_clicked = function() {\n\t\tthis.cp_obj.doLookup();\n\t}\n\n\tthis.result_ready = function() {\n\t\tjQuery('#cc_' + this.misc.prefix + '_error').hide();\n\t}\n\n\tthis.result_selected = function() {\n\t\t// update country field if user selects address from GG/JE, etc.\n\t\tswitch(jQuery('#' + this.fields.postcode_id).val().substring(0,2)){\n\t\t\tcase \"GY\":\n\t\t\tjQuery('#' + this.fields.country_id).val(\"GG\");\n\t\t\tbreak;\n\t\t\tcase \"JE\":\n\t\t\tjQuery('#' + this.fields.country_id).val(\"JE\");\n\t\t\tbreak;\n\t\t\tcase \"IM\":\n\t\t\tjQuery('#' + this.fields.country_id).val(\"IM\");\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\tjQuery('#' + this.fields.country_id).val(\"GB\");\n\t\t\tbreak;\n\t\t}\n\n\t\tif (crafty_cfg.advanced.county_data == 'none') {\n\t\t\tjQuery('#'+this.fields.county_id).val('')\n\t\t}\n\n\t\tjQuery('.' + this.misc.prefix + '_cp_address_class').show();\n\n\t\t// trigger change event on address fields to satisfy magento required fields\n\t\tjQuery('#'+this.cp_obj.config[\"elem_company\"]).trigger('change');\n\t\tjQuery('#'+this.cp_obj.config[\"elem_street1\"]).trigger('change');\n\t\tjQuery('#'+this.cp_obj.config[\"elem_street2\"]).trigger('change');\n\t\tjQuery('#'+this.cp_obj.config[\"elem_postcode\"]).trigger('change');\n\t\tjQuery('#'+this.cp_obj.config[\"elem_town\"]).trigger('change');\n\t\tjQuery('#'+this.cp_obj.config[\"elem_county\"]).trigger('change');\n\t\tjQuery('#'+this.cp_obj.config[\"elem_country\"]).trigger('change');\n\t}\n\n\tthis.result_error = function() {\n\t\t// apply magento error styling\n\t\tlet error = jQuery('#' + this.misc.prefix + '_cp_result_display').text();\n\t\tjQuery('#' + this.misc.prefix + '_cp_result_display').text('');\n\t\tjQuery('#' + this.misc.prefix +'_cp_result_display').siblings('.mage-error').children('.search-subtext').text(error);\n\n\t\tjQuery('#cc_' + this.misc.prefix + '_error').show();\n\t\tjQuery('.' + this.misc.prefix + '_cp_address_class').show();\n\t}\n}\n\n\nactivate_cc = function() {\n\tif (jQuery('.onestep-shipping-address').find('[name=\"postcode\"]').length == 1 &&\n\tjQuery('.onestep-shipping-address').find('[name=\"street[0]\"]').length == 1) {\n\t\t// Step 3 - now that we know this form exists, create an instance from our constructor\n\t\tvar cc1 = new CraftyClicksMagento2Class();\n\t\t// Step 4 - run the add_lookup method on our instance and pass it field id's\n\t\tcc1.add_lookup({\n\t\t\t\"fields\": {\n\t\t\t\t\"company_id\":\t\t\tjQuery('.onestep-shipping-address').find('[name=\"company\"]').attr('id'),\n\t\t\t\t\"address_1_id\":\t\tjQuery('.onestep-shipping-address').find('[name=\"street[0]\"]').attr('id'),\n\t\t\t\t\"address_2_id\":\t\tjQuery('.onestep-shipping-address').find('[name=\"street[1]\"]').attr('id'),\n\t\t\t\t\"postcode_id\":\t\tjQuery('.onestep-shipping-address').find('[name=\"postcode\"]').attr('id'),\n\t\t\t\t\"town_id\":\t\t\t\tjQuery('.onestep-shipping-address').find('[name=\"city\"]').attr('id'),\n\t\t\t\t\"county_id\":\t\t\tjQuery('.onestep-shipping-address').find('[name=\"region\"]')[1].getAttribute('id'),\n\t\t\t\t\"country_id\":\t\t\tjQuery('.onestep-shipping-address').find('[name=\"country_id\"]').attr('id'),\n\t\t\t},\n\t\t\t\"misc\": {\n\t\t\t\t\"container_class\":\t\t\t\"onestep-shipping-address\",\n\t\t\t\t\"prefix\":\t\t\t\t\t\t\"shipping\"\n\t\t\t}\n\t\t});\n\t}\n\n\tif (jQuery('.onestep-billing-address').find('[name=\"postcode\"]').length == 1 &&\n\tjQuery('.onestep-shipping-address').find('[name=\"street[0]\"]').length == 1) {\n\t\tvar cc2 = new CraftyClicksMagento2Class();\n\t\tcc2.add_lookup({\n\t\t\t\"fields\": {\n\t\t\t\t\"company_id\":\t\t\tjQuery('.onestep-billing-address').find('[name=\"company\"]').attr('id'),\n\t\t\t\t\"address_1_id\":\t\tjQuery('.onestep-billing-address').find('[name=\"street[0]\"]').attr('id'),\n\t\t\t\t\"address_2_id\":\t\tjQuery('.onestep-billing-address').find('[name=\"street[1]\"]').attr('id'),\n\t\t\t\t\"address_3_id\":\t\tjQuery('.onestep-billing-address').find('[name=\"street[2]\"]').attr('id'),\n\t\t\t\t\"postcode_id\":\t\tjQuery('.onestep-billing-address').find('[name=\"postcode\"]').attr('id'),\n\t\t\t\t\"town_id\":\t\t\t\tjQuery('.onestep-billing-address').find('[name=\"city\"]').attr('id'),\n\t\t\t\t\"county_id\":\t\t\tjQuery('.onestep-billing-address').find('[name=\"region\"]')[1].getAttribute('id'),\n\t\t\t\t\"country_id\":\t\t\tjQuery('.onestep-billing-address').find('[name=\"country_id\"]').attr('id'),\n\t\t\t},\n\t\t\t\"misc\": {\n\t\t\t\t\"container_class\":\t\t\t\"onestep-billing-address\",\n\t\t\t\t\"prefix\":\t\t\t\t\t\t\"payment\"\n\t\t\t}\n\t\t});\n\t}\n}\n\nrequirejs(['jquery'], function($) {\n\tjQuery(document).ready(function() {\n\t\t// Step 1 - check crafty is enabled\n\t\tif (crafty_cfg.enabled) {\n\t\t\t// Step 2 - page takes a while to load, so continuously check for forms\n\t\t\tsetInterval(activate_cc, 200);\n\t\t}\n\n\t});\n});","Craftyclicks_Ukpostcodelookup/form_integrations/cc_customer_address.js":"/*\n// This is a collection of JavaScript code to allow easy integration of\n// the Crafty Clicks postcode / address finder functionality into Magento 2\n//\n// Provided by www.CraftyClicks.co.uk\n//\n// Requires standard CraftyClicks JS - tested with v4.9.3\n//\n// If you copy/use/modify this code - please keep this\n// comment header in place\n//\n// Copyright (c) 2009-2018 Crafty Clicks (http://www.craftyclicks.com)\n//\n// This code relies on jQuery, you must have a reasonably recent version loaded\n// in your template. Magento should include it as standard.\n//\n// If you need any help, contact support@craftyclicks.co.uk - we will help!\n//\n**********************************************************************************/\n\nfunction CraftyClicksMagento2Class() {\n\tthis.current_setup = 'initial';\n\n\t// initial page setup\n\tthis.initial_setup =function() {\n\t\t// move fields\n\t\tjQuery('#' + this.fields.company_id).closest('.field').before(jQuery('#' + this.fields.country_id).closest('.field'));\n\t\tjQuery('#' + this.fields.company_id).closest('.field').before(jQuery('#' + this.fields.postcode_id).closest('.field'));\n\t}\n\n\tthis.setup_for_uk = function() {\n\t\t// check if we need to do anything\n\t\tif ('uk' != this.current_setup) {\n\t\t\t// do the magic for UK\n\n\t\t\t// add placeholder\n\t\t\tjQuery('#' + this.fields.postcode_id).attr('placeholder', crafty_cfg.txt.search_placeholder);\n\n\t\t\t// check if button already exists\n\t\t\tif (jQuery('#cp_button_id').length == 0) {\n\t\t\t\tjQuery('#'+this.fields.postcode_id).wrap('<div class=\"search-bar\"></div>');\n\n\t\t\t\t// add button BEFORE postcode input (prevents m2 postcode validation from hijacking cc button)\n\t\t\t\tvar tmp_html = '<button id=\"cp_button_id\" type=\"button\" class=\"action primary\"><span>' + crafty_cfg.txt.search_buttontext + '</span></button>';\n\t\t\t\tjQuery('#'+this.fields.postcode_id).before(tmp_html);\n\n\t\t\t\t// add click event listener to button\n\t\t\t\tvar el = document.getElementById('cp_button_id');\n\t\t\t\tif (el != null) {\n\t\t\t\t\tel.addEventListener('click', this.button_clicked.bind(this));\n\t\t\t\t}\n\n\t\t\t\t// add search-list and mage-error after search-bar\n\t\t\t\tjQuery('#'+this.fields.postcode_id).closest('.search-bar').after('<div id=\"cp_result_display\" class=\"search-list\"></div>');\n\n\t\t\t\tjQuery('#cp_result_display').after('<div class=\"search-list\" style=\"display: none;\"><select></select></div>'+\n\t\t\t\t'<div id=\"cc_' + this.misc.prefix + '_error\" class=\"mage-error\" generated><div class=\"search-subtext\"></div></div>');\n\n\t\t\t\tjQuery('#'+this.fields.postcode_id).closest('.field').addClass('search-container type_3')\n\n\t\t\t\t// move m2 error field after zip (fix to prevent m2 postcode validation hijacking cc button)\n\t\t\t\tvar warningElem = jQuery('#'+this.fields.postcode_id).closest('.form-address-edit').find('div .warning')\n\t\t\t\tjQuery('#'+this.fields.postcode_id).after(warningElem)\n\n\t\t\t} else {\n\t\t\t\tjQuery('#cp_button_id').show();\n\t\t\t\tjQuery('#cp_result_display').show();\n\t\t\t\tjQuery('#' + this.fields.postcode_id).closest('.field').addClass(\"search-container type_3\");\n\t\t\t}\n\t\t}\n\n\t\tthis.current_setup = 'uk';\n\t}\n\n\tthis.setup_for_non_uk = function() {\n\t\t// check if we need to do anything\n\t\tif ('non_uk' != this.current_setup) {\n\t\t\t// hide button and result box if they exist\n\t\t\tif (jQuery('#cp_button_id').length == 1) {\n\t\t\t\tjQuery('#cp_button_id').hide();\n\t\t\t}\n\n\t\t\tif (jQuery('#cp_result_display').length == 1) {\n\t\t\t\tjQuery('#cp_result_display').hide();\n\t\t\t}\n\n\t\t\tjQuery('#cp_result_display').children('select').remove();\n\n\t\t\t// reset postcode input width\n\t\t\tjQuery('#' + this.fields.postcode_id).closest('.field').removeClass(\"search-container type_3\");\n\n\t\t\tthis.current_setup = 'non_uk';\n\t\t}\n\t}\n\n\tthis.add_lookup = function(setup) {\n\t\t// Step 5 - make sure we only do add_lookup once per instance\n\t\tif (jQuery('#'+setup.fields.postcode_id).attr('cc-applied') == \"1\") {\n\t\t\treturn\n\t\t}\n\t\tcp_obj = CraftyPostcodeCreate(); // instantiate library magic\n\t\tthis.cp_obj = cp_obj;\n\t\t// config\n\t\tthis.fields = setup.fields;\n\t\tthis.misc = setup.misc;\n\n\t\t// the set method is shorthand and is equivalent to cp_obj.config['configItem'] = configValue;\n\t\tcp_obj.set(\"result_elem_id\", \"cp_result_display\");\n\t\tcp_obj.set(\"form\", \"\");\n\t\tcp_obj.set(\"elem_company\", this.fields.company_id);\n\t\tcp_obj.set(\"elem_street1\", this.fields.address_1_id);\n\t\tcp_obj.set(\"elem_street2\", this.fields.address_2_id);\n\t\tcp_obj.set(\"elem_postcode\", this.fields.postcode_id);\n\t\tcp_obj.set(\"elem_town\", this.fields.town_id);\n\t\tcp_obj.set(\"elem_country\", this.fields.country_id);\n\n\t\tif (crafty_cfg.advanced.county_data !== 'none') {\n\t\t\tcp_obj.set(\"elem_county\", this.fields.county_id);\n\t\t}\n\n\t\tcp_obj.set(\"container_elem\", this.misc.container_elem);\n\n\t\tcp_obj.set(\"access_token\", crafty_cfg.key);\n\t\tcp_obj.set(\"res_autoselect\", \"0\");\n\t\tcp_obj.set(\"single_res_autoselect\" , 0);\n\t\tcp_obj.set(\"max_lines\" , 1);\n\n\t\tif (crafty_cfg.advanced.county_data == 'traditional') {\n\t\t\tcp_obj.set(\"traditional_county\" , 1);\n\t\t} else if (crafty_cfg.advanced.county_data == 'former_postal') {\n\t\t\tcp_obj.set(\"traditional_county\" , 0);\n\t\t}\n\n\t\tcp_obj.set(\"busy_img_url\" , null);\n\t\tcp_obj.set(\"hide_result\" , false);\n\t\tcp_obj.set(\"on_result_ready\", this.result_ready.bind(this));\n\t\tcp_obj.set(\"on_result_selected\", this.result_selected.bind(this));\n\t\tcp_obj.set(\"on_error\", this.result_error.bind(this));\n\t\tcp_obj.set(\"first_res_line\", '---- please select your address ----');\n\t\tcp_obj.set(\"err_msg1\", crafty_cfg.error_msg['0001']);\n\t\tcp_obj.set(\"err_msg2\", crafty_cfg.error_msg['0002']);\n\t\tcp_obj.set(\"err_msg3\", crafty_cfg.error_msg['0003']);\n\t\tcp_obj.set(\"err_msg4\", crafty_cfg.error_msg['0004']);\n\t\tcp_obj.set(\"max_width\", \"100%\");\n\n\t\t// do initial setup\n\t\tthis.initial_setup();\n\n\t\t// do setup for current country\n\t\tthis.country_changed();\n\n\t\t// listen for country changes\n\t\tvar countryEl = document.getElementById(this.fields.country_id);\n\t\tcountryEl.addEventListener('change', this.country_changed.bind(this));\n\n\t\tjQuery('#'+setup.fields.postcode_id).attr('cc-applied', '1');\n\t}\n\n\tthis.country_changed = function(e) {\n\t\t// show postcode lookup for:\n\t\t// \"GB\" UK\n\t\t// \"JE\" Jersey\n\t\t// \"GG\" Guernsey\n\t\t// \"IM\" Isle of Man\n\t\tvar curr_country = jQuery('#' + this.fields.country_id).val();\n\t\tif ('GB' == curr_country || 'JE' == curr_country || 'GG' == curr_country || 'IM' == curr_country) {\n\t\t\tthis.setup_for_uk();\n\t\t} else {\n\t\t\tthis.setup_for_non_uk();\n\t\t}\n\t}\n\n\tthis.button_clicked = function() {\n\t\tthis.cp_obj.doLookup();\n\t}\n\n\tthis.result_ready = function() {\n\t\tjQuery('#crafty_postcode_lookup_result_option1').addClass('admin__control-select');\n\t\tjQuery('#cc_' + this.misc.prefix + '_error').hide();\n\t}\n\n\tthis.result_selected = function() {\n\t\t// update country field if user selects address from GG/JE, etc.\n\t\tswitch(jQuery('#' + this.fields.postcode_id).val().substring(0,2)){\n\t\t\tcase \"GY\":\n\t\t\t\tjQuery('#' + this.fields.country_id).val(\"GG\");\n\t\t\t\tbreak;\n\t\t\tcase \"JE\":\n\t\t\t\tjQuery('#' + this.fields.country_id).val(\"JE\");\n\t\t\t\tbreak;\n\t\t\tcase \"IM\":\n\t\t\t\tjQuery('#' + this.fields.country_id).val(\"IM\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tjQuery('#' + this.fields.country_id).val(\"GB\");\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (crafty_cfg.advanced.county_data == 'none') {\n\t\t\tjQuery('#'+this.fields.county_id).val('')\n\t\t}\n\n\t\t// trigger change event on address fields to satisfy magento required fields\n\t\tjQuery('#'+this.fields.company_id).trigger('change');\n\t\tjQuery('#'+this.fields.address_1_id).trigger('change');\n\t\tjQuery('#'+this.fields.address_2_id).trigger('change');\n\t\tjQuery('#'+this.fields.postcode_id).trigger('change');\n\t\tjQuery('#'+this.fields.town_id).trigger('change');\n\t\tjQuery('#'+this.fields.county_id).trigger('change');\n\t\tjQuery('#'+this.fields.country_id).trigger('change');\n\t}\n\n\tthis.result_error = function() {\n\t\t// apply magento error styling\n\t\tlet error = jQuery('#cp_result_display').text();\n\t\tjQuery('#cp_result_display').text('');\n\t\tjQuery('#cp_result_display').siblings('.mage-error').children('.search-subtext').text(error);\n\t\tjQuery('#cp_result_display').siblings('.mage-error').css('display', 'block');\n\n\t\tjQuery('#cc_' + this.misc.prefix + '_error').show();\n\t}\n}\n\n\nactivate_cc = function() {\n\tif (jQuery('#form-validate').find('[name=\"postcode\"]').length == 1) {\n\t\t// Step 3 - now that we know this form exists, create an instance from our constructor\n\t\tvar cc1 = new CraftyClicksMagento2Class();\n\t\t// Step 4 - run the add_lookup method on our instance and pass it field id's\n\t\tcc1.add_lookup({\n\t\t\t\"fields\": {\n\t\t\t\t\"company_id\":\t\t\t\"company\",\n\t\t\t\t\"address_1_id\":\t\t\"street_1\",\n\t\t\t\t\"address_2_id\":\t\t\"street_2\",\n\t\t\t\t\"postcode_id\":\t\t\"zip\",\n\t\t\t\t\"town_id\":\t\t\t\t\"city\",\n\t\t\t\t\"county_id\":\t\t\t\"region\",\n\t\t\t\t\"country_id\":\t\t\t\"country\",\n\t\t\t},\n\t\t\t\"misc\": {\n\t\t\t\t\"container_id\":\t\"form-validate\"\n\t\t\t}\n\t\t});\n\t}\n}\n\nrequirejs(['jquery'], function($) {\n\tjQuery(document).ready(function() {\n\t\t// Step 1 - check crafty is enabled\n\t\tif (crafty_cfg.enabled) {\n\t\t\t// Step 2 - page takes a while to load, so continuously check for form\n\t\t\tsetInterval(activate_cc, 200);\n\t\t}\n\t});\n});","Craftyclicks_Ukpostcodelookup/form_integrations/cc_default_checkout.js":"/*\n// This is a collection of JavaScript code to allow easy integration of\n// the Crafty Clicks postcode / address finder functionality into Magento 2\n//\n// This file works for the standard magento 2 checkout (both community and enterprise)\n//\n// Provided by www.CraftyClicks.co.uk\n//\n// Requires standard CraftyClicks JS - tested with v4.9.3\n//\n// If you copy/use/modify this code - please keep this\n// comment header in place\n//\n// Copyright (c) 2009-2018 Crafty Clicks (http://www.craftyclicks.com)\n//\n// This code relies on jQuery, you must have a reasonably recent version loaded\n// in your template. Magento should include it as standard.\n//\n// If you need any help, contact support@craftyclicks.co.uk - we will help!\n//\n**********************************************************************************/\n\nfunction CraftyClicksMagento2Class() {\n\tthis.current_setup = 'initial';\n\n\t// initial page setup\n\tthis.initial_setup =function() {\n\t\t// move country field to top\n\t\tjQuery('#' + this.misc.container_id).find('[name=\"lastname\"]').closest('.field').after(jQuery('#' + this.fields.country_id).closest('.field'));\n\t\t// if hide fields is true, move telephone field up\n\t\tif (crafty_cfg.hide_fields) {\n\t\t\tjQuery('#' + this.fields.country_id).closest('.field').before(jQuery('#' + this.misc.container_id).find('[name=\"telephone\"]').closest('.field'));\n\t\t}\n\n\t\t// add cp address class to fields and labels so we can easily grab them for the hide fields feature\n\t\tvar that = this;\n\t\tjQuery.each(this.fields, function(index, value) {\n\t\t\tif (value !== that.fields.postcode_id && value !== that.fields.country_id) {\n\t\t\t\tjQuery('#' + value).closest('.control').addClass(that.misc.prefix + '_cp_address_class');\n\t\t\t\tjQuery('#' + value).closest('.control').prev('label').addClass(that.misc.prefix + '_cp_address_class');\n\t\t\t\tif (value == that.fields.address_1_id) {\n\t\t\t\t\tjQuery('#' + value).closest('.control').parent().closest('.control').addClass(that.misc.prefix + '_cp_address_class');\n\t\t\t\t\tjQuery('#' + value).closest('.control').parent().closest('.control').prev('.label').addClass(that.misc.prefix + '_cp_address_class');\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tthis.setup_for_uk = function() {\n\t\t// check if we need to do anything\n\t\tif ('uk' != this.current_setup) {\n\t\t\t// do the magic for UK\n\n\t\t\t// move postcode to show after country and add placeholder\n\t\t\tjQuery('#' + this.fields.country_id).closest('.field').after(jQuery('#' + this.fields.postcode_id).closest('.field'));\n\t\t\tjQuery('#' + this.fields.postcode_id).attr('placeholder', crafty_cfg.txt.search_placeholder);\n\n\t\t\t// check if button already exists\n\t\t\t// Step 6 - add prefix to button and result display so they are unique\n\t\t\tif (jQuery('#' + this.misc.prefix + '_cp_button_id').length == 0) {\n\t\t\t\tjQuery('#'+this.fields.postcode_id).wrap('<div class=\"search-bar\"></div>');\n\n\t\t\t\t// add button after postcode input\n\t\t\t\tvar tmp_html = '<button id=\"' + this.misc.prefix + '_cp_button_id\" type=\"button\" class=\"action primary\"><span>' + crafty_cfg.txt.search_buttontext + '</span></button>';\n\t\t\t\tjQuery('#'+this.fields.postcode_id).after(tmp_html);\n\n\t\t\t\t// add click event listener to button\n\t\t\t\tvar el = document.getElementById(this.misc.prefix + '_cp_button_id');\n\t\t\t\tif (el != null) {\n\t\t\t\t\tel.addEventListener('click', this.button_clicked.bind(this));\n\t\t\t\t}\n\n\t\t\t\t// add search-list and mage-error after search-bar\n\t\t\t\tjQuery('#'+this.fields.postcode_id).closest('.search-bar').after('<div id=\"' + this.misc.prefix + '_cp_result_display\" class=\"search-list\"></div>');\n\n\t\t\t\tjQuery('#'+this.misc.prefix + '_cp_result_display').after('<div class=\"search-list\" style=\"display: none;\"><select></select></div>'+\n\t\t\t\t'<div id=\"cc_' + this.misc.prefix + '_error\" class=\"mage-error\" generated><div class=\"search-subtext\"></div></div>');\n\n\t\t\t\tjQuery('#'+this.fields.postcode_id).closest('.field').addClass('search-container type_3')\n\t\t\t} else {\n\t\t\t\tjQuery('#' + this.misc.prefix + '_cp_button_id').show();\n\t\t\t\tjQuery('#' + this.misc.prefix + '_cp_result_display').show();\n\t\t\t\tjQuery('#' + this.fields.postcode_id).closest('.field').addClass(\"search-container type_3\");\n\t\t\t}\n\n\t\t\t// disable autofill\n\t\t\tjQuery('#' + this.fields.postcode_id).attr('autocomplete', 'new-password')\n\t\t}\n\n\t\tif ('initial' == this.current_setup && crafty_cfg.hide_fields) {\n\t\t\tjQuery('.' + this.misc.prefix + '_cp_address_class').hide();\n\t\t} else if ('non_uk' == this.current_setup && crafty_cfg.hide_fields && jQuery('#' + this.fields.postcode_id).val() === \"\") {\n\t\t\tjQuery('.' + this.misc.prefix + '_cp_address_class').hide();\n\t\t}\n\n\t\tthis.current_setup = 'uk';\n\t}\n\n\tthis.setup_for_non_uk = function() {\n\t\t// check if we need to do anything\n\t\tif ('non_uk' != this.current_setup) {\n\t\t\t// move postcode field to show after region\n\t\t\tjQuery('#' + this.fields.county_id).closest('.field').after(jQuery('#' + this.fields.postcode_id).closest('.field'));\n\n\t\t\t// hide button and result box if they exist\n\t\t\tif (jQuery('#' + this.misc.prefix + '_cp_button_id').length == 1) {\n\t\t\t\tjQuery('#' + this.misc.prefix + '_cp_button_id').hide();\n\t\t\t}\n\n\t\t\tif (jQuery('#' + this.misc.prefix + '_cp_result_display').length == 1) {\n\t\t\t\tjQuery('#' + this.misc.prefix + '_cp_result_display').hide();\n\t\t\t}\n\n\t\t\tjQuery('#' + this.misc.prefix + '_cp_result_display').children('select').remove();\n\n\t\t\t// reset postcode input width\n\t\t\tjQuery('#' + this.fields.postcode_id).closest('.field').removeClass(\"search-container type_3\");\n\n\t\t\t// show fields\n\t\t\tjQuery('.' + this.misc.prefix + '_cp_address_class').show();\n\n\t\t\t// enable autofill\n\t\t\tjQuery('#' + this.fields.postcode_id).attr('autocomplete', 'postal-code')\n\n\t\t\tthis.current_setup = 'non_uk';\n\t\t}\n\t}\n\n\tthis.add_lookup = function(setup) {\n\t\t// Step 5 - make sure we only do add_lookup once per instance\n\t\tif (jQuery('#'+setup.fields.postcode_id).attr('cc-applied') == \"1\") {\n\t\t\treturn\n\t\t}\n\t\tcp_obj = CraftyPostcodeCreate(); // instantiate library magic\n\t\tthis.cp_obj = cp_obj;\n\t\t// config\n\t\tthis.fields = setup.fields;\n\t\tthis.misc = setup.misc;\n\n\t\t// the set method is shorthand and is equivalent to cp_obj.config['configItem'] = configValue;\n\t\tcp_obj.set(\"result_elem_id\", this.misc.prefix + \"_cp_result_display\");\n\t\tcp_obj.set(\"form\", \"\");\n\t\tcp_obj.set(\"elem_company\", this.fields.company_id);\n\t\tcp_obj.set(\"elem_street1\", this.fields.address_1_id);\n\t\tcp_obj.set(\"elem_street2\", this.fields.address_2_id);\n\t\tcp_obj.set(\"elem_postcode\", this.fields.postcode_id);\n\t\tcp_obj.set(\"elem_town\", this.fields.town_id);\n\t\tcp_obj.set(\"elem_country\", this.fields.country_id);\n\t\tcp_obj.set(\"elem_county\", this.fields.county_id);\n\n\t\tcp_obj.set(\"prefix\", this.misc.prefix);\n\n\t\tcp_obj.set(\"access_token\", crafty_cfg.key);\n\t\tcp_obj.set(\"res_autoselect\", \"0\");\n\t\tcp_obj.set(\"single_res_autoselect\" , 0);\n\t\tcp_obj.set(\"max_lines\" , 1);\n\n\t\tif (crafty_cfg.advanced.county_data == 'traditional') {\n\t\t\tcp_obj.set(\"traditional_county\" , 1);\n\t\t} else if (crafty_cfg.advanced.county_data == 'former_postal') {\n\t\t\tcp_obj.set(\"traditional_county\" , 0);\n\t\t}\n\n\t\tcp_obj.set(\"busy_img_url\" , null);\n\t\tcp_obj.set(\"hide_result\" , false);\n\t\tcp_obj.set(\"on_result_ready\", this.result_ready.bind(this));\n\t\tcp_obj.set(\"on_result_selected\", this.result_selected.bind(this));\n\t\tcp_obj.set(\"on_error\", this.result_error.bind(this));\n\t\tcp_obj.set(\"first_res_line\", '---- please select your address ----');\n\t\tcp_obj.set(\"err_msg1\", crafty_cfg.error_msg['0001']);\n\t\tcp_obj.set(\"err_msg2\", crafty_cfg.error_msg['0002']);\n\t\tcp_obj.set(\"err_msg3\", crafty_cfg.error_msg['0003']);\n\t\tcp_obj.set(\"err_msg4\", crafty_cfg.error_msg['0004']);\n\t\tcp_obj.set(\"max_width\", \"100%\");\n\n\t\t// do initial setup\n\t\tthis.initial_setup();\n\n\t\t// do setup for current country\n\t\tthis.country_changed();\n\n\t\t// listen for country changes\n\t\tvar countryEl = document.getElementById(this.fields.country_id);\n\t\tcountryEl.addEventListener('change', this.country_changed.bind(this));\n\n\t\tjQuery('#'+setup.fields.postcode_id).attr('cc-applied', '1');\n\t}\n\n\tthis.country_changed = function(e) {\n\t\t// show postcode lookup for:\n\t\t// \"GB\" UK\n\t\t// \"JE\" Jersey\n\t\t// \"GG\" Guernsey\n\t\t// \"IM\" Isle of Man\n\t\tvar curr_country = jQuery('#' + this.fields.country_id).val();\n\t\tif ('GB' == curr_country || 'JE' == curr_country || 'GG' == curr_country || 'IM' == curr_country) {\n\t\t\tthis.setup_for_uk();\n\t\t} else {\n\t\t\tthis.setup_for_non_uk();\n\t\t}\n\t}\n\n\tthis.button_clicked = function() {\n\t\tthis.cp_obj.doLookup();\n\t}\n\n\tthis.result_ready = function() {\n\t\tjQuery('#cc_' + this.misc.prefix + '_error').hide();\n\t}\n\n\tthis.result_selected = function() {\n\t\t// update country field if user selects address from GG/JE, etc.\n\t\tswitch(jQuery('#' + this.fields.postcode_id).val().substring(0,2)){\n\t\t\tcase \"GY\":\n\t\t\tjQuery('#' + this.fields.country_id).val(\"GG\");\n\t\t\tbreak;\n\t\t\tcase \"JE\":\n\t\t\tjQuery('#' + this.fields.country_id).val(\"JE\");\n\t\t\tbreak;\n\t\t\tcase \"IM\":\n\t\t\tjQuery('#' + this.fields.country_id).val(\"IM\");\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\tjQuery('#' + this.fields.country_id).val(\"GB\");\n\t\t\tbreak;\n\t\t}\n\n\t\tif (crafty_cfg.advanced.county_data == 'none') {\n\t\t\tjQuery('#'+this.fields.county_id).val('')\n\t\t}\n\n\t\tjQuery('.' + this.misc.prefix + '_cp_address_class').show();\n\n\t\t// trigger change event on address fields to satisfy magento required fields\n\t\tjQuery('#'+this.cp_obj.config[\"elem_company\"]).trigger('change');\n\t\tjQuery('#'+this.cp_obj.config[\"elem_street1\"]).trigger('change');\n\t\tjQuery('#'+this.cp_obj.config[\"elem_street2\"]).trigger('change');\n\t\tjQuery('#'+this.cp_obj.config[\"elem_postcode\"]).trigger('change');\n\t\tjQuery('#'+this.cp_obj.config[\"elem_town\"]).trigger('change');\n\t\tjQuery('#'+this.cp_obj.config[\"elem_county\"]).trigger('change');\n\t\tjQuery('#'+this.cp_obj.config[\"elem_country\"]).trigger('change');\n\t}\n\n\tthis.result_error = function() {\n\t\t// apply magento error styling\n\t\tlet error = jQuery('#' + this.misc.prefix + '_cp_result_display').text();\n\t\tjQuery('#' + this.misc.prefix + '_cp_result_display').text('');\n\t\tjQuery('#' + this.misc.prefix +'_cp_result_display').siblings('.mage-error').children('.search-subtext').text(error);\n\n\t\tjQuery('#cc_' + this.misc.prefix + '_error').show();\n\t\tjQuery('.' + this.misc.prefix + '_cp_address_class').show();\n\t}\n}\n\n\nactivate_cc = function() {\n\tif (jQuery('#checkout-step-shipping').find('[name=\"postcode\"]').length == 1) {\n\t\t// Step 3 - now that we know this form exists, create an instance from our constructor\n\t\tvar cc1 = new CraftyClicksMagento2Class();\n\t\t// Step 4 - run the add_lookup method on our instance and pass it field id's\n\t\tcc1.add_lookup({\n\t\t\t\"fields\": {\n\t\t\t\t\"company_id\":\t\t\tjQuery('#checkout-step-shipping').find('[name=\"company\"]').attr('id'),\n\t\t\t\t\"address_1_id\":\t\tjQuery('#checkout-step-shipping').find('[name=\"street[0]\"]').attr('id'),\n\t\t\t\t\"address_2_id\":\t\tjQuery('#checkout-step-shipping').find('[name=\"street[1]\"]').attr('id'),\n\t\t\t\t\"postcode_id\":\t\tjQuery('#checkout-step-shipping').find('[name=\"postcode\"]').attr('id'),\n\t\t\t\t\"town_id\":\t\t\t\tjQuery('#checkout-step-shipping').find('[name=\"city\"]').attr('id'),\n\t\t\t\t\"county_id\":\t\t\tjQuery('#checkout-step-shipping').find('[name=\"region\"]').attr('id'),\n\t\t\t\t\"country_id\":\t\t\tjQuery('#checkout-step-shipping').find('[name=\"country_id\"]').attr('id'),\n\t\t\t},\n\t\t\t\"misc\": {\n\t\t\t\t\"container_id\":\t\t\t\"checkout-step-shipping\",\n\t\t\t\t\"prefix\":\t\t\t\t\t\t\"shipping\"\n\t\t\t}\n\t\t});\n\t}\n\n\tif (jQuery('#checkout-step-payment').find('[name=\"postcode\"]').length == 1) {\n\t\tvar cc2 = new CraftyClicksMagento2Class();\n\t\tcc2.add_lookup({\n\t\t\t\"fields\": {\n\t\t\t\t\"company_id\":\t\t\tjQuery('#checkout-step-payment').find('[name=\"company\"]').attr('id'),\n\t\t\t\t\"address_1_id\":\t\tjQuery('#checkout-step-payment').find('[name=\"street[0]\"]').attr('id'),\n\t\t\t\t\"address_2_id\":\t\tjQuery('#checkout-step-payment').find('[name=\"street[1]\"]').attr('id'),\n\t\t\t\t\"address_3_id\":\t\tjQuery('#checkout-step-shipping').find('[name=\"street[2]\"]').attr('id'),\n\t\t\t\t\"postcode_id\":\t\tjQuery('#checkout-step-payment').find('[name=\"postcode\"]').attr('id'),\n\t\t\t\t\"town_id\":\t\t\t\tjQuery('#checkout-step-payment').find('[name=\"city\"]').attr('id'),\n\t\t\t\t\"county_id\":\t\t\tjQuery('#checkout-step-payment').find('[name=\"region\"]').attr('id'),\n\t\t\t\t\"country_id\":\t\t\tjQuery('#checkout-step-payment').find('[name=\"country_id\"]').attr('id'),\n\t\t\t},\n\t\t\t\"misc\": {\n\t\t\t\t\"container_id\":\t\t\t\"checkout-step-payment\",\n\t\t\t\t\"prefix\":\t\t\t\t\t\t\"payment\"\n\t\t\t}\n\t\t});\n\t}\n}\n\nrequirejs(['jquery'], function($) {\n\tjQuery(document).ready(function() {\n\t\t// Step 1 - check crafty is enabled\n\t\tif (crafty_cfg.enabled) {\n\t\t\t// Step 2 - page takes a while to load, so continuously check for forms\n\t\t\tsetInterval(activate_cc, 200);\n\t\t}\n\n\t});\n});"}
}});
