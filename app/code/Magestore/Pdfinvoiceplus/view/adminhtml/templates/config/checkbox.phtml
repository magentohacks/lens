<?php
/**
 * Magestore
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Magestore.com license that is
 * available through the world-wide-web at this URL:
 * http://www.magestore.com/license-agreement.html
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 *
 * @category    Magestore
 * @package     Magestore_Pdfinvoiceplus
 * @copyright   Copyright (c) 2012 Magestore (http://www.magestore.com/)
 * @license     http://www.magestore.com/license-agreement.html
 */

/** @var \Magestore\Pdfinvoiceplus\Block\Adminhtml\Configurations\Checkbox $block */

?>
<style>
    .checkbox-field {
        width: 380px;
        min-height: 17px;
        max-height: 200px;
        overflow: auto;
        padding: 4px;
        margin: 8px 0px;
        border-width: 1px;
        border-style: solid;
        border-color: #aaa #c8c8c8 #c8c8c8 #aaa;
        background: #fff;
        font: 12px arial, helvetica, sans-serif;
        vertical-align: middle;
        border-image-source: initial;
        border-image-slice: initial;
        border-image-width: initial;
        border-image-outset: initial;
        border-image-repeat: initial;
    }

    .checkbox-field input {
        margin: 1px !important;
    }
</style>

<?php $elementId = $this->getElement()->getHtmlId() ?>
<?php $elementName = $this->getElement()->getName() ?>
<?php $value = $this->getElement()->getValue() ?>

<!-- SelectAll / UnselectAll -->
<script type="text/javascript">
    function checkboxSelectAll(checkboxClass) {
        var checkbox = document.getElementsByClassName(checkboxClass);
        for (var i = 0; i < checkbox.length; i++) {
            checkbox[i].checked = true;
        }
    }
    function checkboxUnselectAll(checkboxClass) {
        var checkbox = document.getElementsByClassName(checkboxClass);
        for (var i = 0; i < checkbox.length; i++) {
            checkbox[i].checked = false;
        }
    }
</script>

<div id="check-all-<?php echo $elementId ?>" class="selected-all" style="padding-left: 5px;">
    <input type="radio" name="<?php echo $elementName ?>[selected_all]" value="1"
           onclick="checkboxSelectAll('<?php echo $elementId ?>')"/>
    <?php echo __('Select All') ?>
    &nbsp; / &nbsp;
    <input type="radio" name="<?php echo $elementName ?>[selected_all]" value="2"
           onclick="checkboxUnselectAll('<?php echo $elementId ?>')"/>
    <?php echo __('Unselect All ') ?>
</div>


<div id="<?php echo $elementId ?>" class="checkbox-field">
    <?php foreach ($this->toOptionArray() as $option): ?>
        <?php if ($value && is_array($value)): ?>
            <?php if (!isset($value['options'])): $value['options'] = array(); endif; ?>
            <input id="cb_<?php echo $option['value'] ?>" type="checkbox"
                   name="<?php echo $elementName ?>[options][]"
                   value="<?php echo $option['value'] ?>"
                <?php echo (in_array($option['value'], $value['options'])) ? 'checked' : '' ?>
                   class="var-checkbox <?php echo $elementId ?>" size="10">
            <label for="cb_<?php echo $option['value'] ?>"><?php echo $option['label'] ?></label>
            <br/>

        <?php else: ?>
            <input id="cb_<?php echo $option['value'] ?>" type="checkbox"
                   name="<?php echo $elementName ?>[options][]"
                   value="<?php echo $option['value'] ?>"
                   class="var-checkbox <?php echo $elementId ?>" size="10">
            <label for="cb_<?php echo $option['value'] ?>"><?php echo $option['label'] ?></label>
            <br/>
        <?php endif; ?>
    <?php endforeach; ?>
</div>

<script type="text/javascript">
    var <?php echo $elementId ?>_checkboxs = document.getElementsByClassName('<?php echo $elementId ?>');
    for (var ci = 0; ci < <?php echo $elementId ?>_checkboxs.length; ci++) {
        <?php echo $elementId ?>_checkboxs[ci].onclick = function () {
            var childs = document.getElementById('check-all-<?php echo $elementId ?>').childNodes;
            for (var i = 0; i < childs.length; i++) {
                childs[i].checked = false;
            }
        };
    }
</script>