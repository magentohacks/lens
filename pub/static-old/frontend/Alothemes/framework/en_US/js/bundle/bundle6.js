require.config({"config": {
        "jsbuild":{"Mageplaza_Core/lib/fileUploader/jquery.fileupload-ui.js":"/*\n * jQuery File Upload User Interface Plugin\n * https://github.com/blueimp/jQuery-File-Upload\n *\n * Copyright 2010, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, require */\n\n(function (factory) {\n  'use strict';\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define([\n      'jquery',\n      'Mageplaza_Core/lib/fileUploader/vendor/blueimp-tmpl/js/tmpl',\n      'Mageplaza_Core/lib/fileUploader/jquery.fileupload-image',\n      'Mageplaza_Core/lib/fileUploader/jquery.fileupload-audio',\n      'Mageplaza_Core/lib/fileUploader/jquery.fileupload-video',\n      'Mageplaza_Core/lib/fileUploader/jquery.fileupload-validate'\n    ], factory);\n  } else if (typeof exports === 'object') {\n    // Node/CommonJS:\n    factory(\n      require('jquery'),\n      require('Mageplaza_Core/lib/fileUploader/vendor/blueimp-tmpl/js/tmpl'),\n      require('Mageplaza_Core/lib/fileUploader/jquery.fileupload-image'),\n      require('Mageplaza_Core/lib/fileUploader/jquery.fileupload-audio'),\n      require('Mageplaza_Core/lib/fileUploader/jquery.fileupload-video'),\n      require('Mageplaza_Core/lib/fileUploader/jquery.fileupload-validate')\n    );\n  } else {\n    // Browser globals:\n    factory(window.jQuery, window.tmpl);\n  }\n})(function ($, tmpl) {\n  'use strict';\n\n  $.blueimp.fileupload.prototype._specialOptions.push(\n    'filesContainer',\n    'uploadTemplateId',\n    'downloadTemplateId'\n  );\n\n  // The UI version extends the file upload widget\n  // and adds complete user interface interaction:\n  $.widget('blueimp.fileupload', $.blueimp.fileupload, {\n    options: {\n      // By default, files added to the widget are uploaded as soon\n      // as the user clicks on the start buttons. To enable automatic\n      // uploads, set the following option to true:\n      autoUpload: false,\n      // The class to show/hide UI elements:\n      showElementClass: 'in',\n      // The ID of the upload template:\n      uploadTemplateId: 'template-upload',\n      // The ID of the download template:\n      downloadTemplateId: 'template-download',\n      // The container for the list of files. If undefined, it is set to\n      // an element with class \"files\" inside of the widget element:\n      filesContainer: undefined,\n      // By default, files are appended to the files container.\n      // Set the following option to true, to prepend files instead:\n      prependFiles: false,\n      // The expected data type of the upload response, sets the dataType\n      // option of the $.ajax upload requests:\n      dataType: 'json',\n\n      // Error and info messages:\n      messages: {\n        unknownError: 'Unknown error'\n      },\n\n      // Function returning the current number of files,\n      // used by the maxNumberOfFiles validation:\n      getNumberOfFiles: function () {\n        return this.filesContainer.children().not('.processing').length;\n      },\n\n      // Callback to retrieve the list of files from the server response:\n      getFilesFromResponse: function (data) {\n        if (data.result && $.isArray(data.result.files)) {\n          return data.result.files;\n        }\n        return [];\n      },\n\n      // The add callback is invoked as soon as files are added to the fileupload\n      // widget (via file input selection, drag & drop or add API call).\n      // See the basic file upload widget for more information:\n      add: function (e, data) {\n        if (e.isDefaultPrevented()) {\n          return false;\n        }\n        var $this = $(this),\n          that = $this.data('blueimp-fileupload') || $this.data('fileupload'),\n          options = that.options;\n        data.context = that\n          ._renderUpload(data.files)\n          .data('data', data)\n          .addClass('processing');\n        options.filesContainer[options.prependFiles ? 'prepend' : 'append'](\n          data.context\n        );\n        that._forceReflow(data.context);\n        that._transition(data.context);\n        data\n          .process(function () {\n            return $this.fileupload('process', data);\n          })\n          .always(function () {\n            data.context\n              .each(function (index) {\n                $(this)\n                  .find('.size')\n                  .text(that._formatFileSize(data.files[index].size));\n              })\n              .removeClass('processing');\n            that._renderPreviews(data);\n          })\n          .done(function () {\n            data.context.find('.edit,.start').prop('disabled', false);\n            if (\n              that._trigger('added', e, data) !== false &&\n              (options.autoUpload || data.autoUpload) &&\n              data.autoUpload !== false\n            ) {\n              data.submit();\n            }\n          })\n          .fail(function () {\n            if (data.files.error) {\n              data.context.each(function (index) {\n                var error = data.files[index].error;\n                if (error) {\n                  $(this).find('.error').text(error);\n                }\n              });\n            }\n          });\n      },\n      // Callback for the start of each file upload request:\n      send: function (e, data) {\n        if (e.isDefaultPrevented()) {\n          return false;\n        }\n        var that =\n          $(this).data('blueimp-fileupload') || $(this).data('fileupload');\n        if (\n          data.context &&\n          data.dataType &&\n          data.dataType.substr(0, 6) === 'iframe'\n        ) {\n          // Iframe Transport does not support progress events.\n          // In lack of an indeterminate progress bar, we set\n          // the progress to 100%, showing the full animated bar:\n          data.context\n            .find('.progress')\n            .addClass(!$.support.transition && 'progress-animated')\n            .attr('aria-valuenow', 100)\n            .children()\n            .first()\n            .css('width', '100%');\n        }\n        return that._trigger('sent', e, data);\n      },\n      // Callback for successful uploads:\n      done: function (e, data) {\n        if (e.isDefaultPrevented()) {\n          return false;\n        }\n        var that =\n            $(this).data('blueimp-fileupload') || $(this).data('fileupload'),\n          getFilesFromResponse =\n            data.getFilesFromResponse || that.options.getFilesFromResponse,\n          files = getFilesFromResponse(data),\n          template,\n          deferred;\n        if (data.context) {\n          data.context.each(function (index) {\n            var file = files[index] || { error: 'Empty file upload result' };\n            deferred = that._addFinishedDeferreds();\n            that._transition($(this)).done(function () {\n              var node = $(this);\n              template = that._renderDownload([file]).replaceAll(node);\n              that._forceReflow(template);\n              that._transition(template).done(function () {\n                data.context = $(this);\n                that._trigger('completed', e, data);\n                that._trigger('finished', e, data);\n                deferred.resolve();\n              });\n            });\n          });\n        } else {\n          template = that\n            ._renderDownload(files)\n            [that.options.prependFiles ? 'prependTo' : 'appendTo'](\n              that.options.filesContainer\n            );\n          that._forceReflow(template);\n          deferred = that._addFinishedDeferreds();\n          that._transition(template).done(function () {\n            data.context = $(this);\n            that._trigger('completed', e, data);\n            that._trigger('finished', e, data);\n            deferred.resolve();\n          });\n        }\n      },\n      // Callback for failed (abort or error) uploads:\n      fail: function (e, data) {\n        if (e.isDefaultPrevented()) {\n          return false;\n        }\n        var that =\n            $(this).data('blueimp-fileupload') || $(this).data('fileupload'),\n          template,\n          deferred;\n        if (data.context) {\n          data.context.each(function (index) {\n            if (data.errorThrown !== 'abort') {\n              var file = data.files[index];\n              file.error =\n                file.error || data.errorThrown || data.i18n('unknownError');\n              deferred = that._addFinishedDeferreds();\n              that._transition($(this)).done(function () {\n                var node = $(this);\n                template = that._renderDownload([file]).replaceAll(node);\n                that._forceReflow(template);\n                that._transition(template).done(function () {\n                  data.context = $(this);\n                  that._trigger('failed', e, data);\n                  that._trigger('finished', e, data);\n                  deferred.resolve();\n                });\n              });\n            } else {\n              deferred = that._addFinishedDeferreds();\n              that._transition($(this)).done(function () {\n                $(this).remove();\n                that._trigger('failed', e, data);\n                that._trigger('finished', e, data);\n                deferred.resolve();\n              });\n            }\n          });\n        } else if (data.errorThrown !== 'abort') {\n          data.context = that\n            ._renderUpload(data.files)\n            [that.options.prependFiles ? 'prependTo' : 'appendTo'](\n              that.options.filesContainer\n            )\n            .data('data', data);\n          that._forceReflow(data.context);\n          deferred = that._addFinishedDeferreds();\n          that._transition(data.context).done(function () {\n            data.context = $(this);\n            that._trigger('failed', e, data);\n            that._trigger('finished', e, data);\n            deferred.resolve();\n          });\n        } else {\n          that._trigger('failed', e, data);\n          that._trigger('finished', e, data);\n          that._addFinishedDeferreds().resolve();\n        }\n      },\n      // Callback for upload progress events:\n      progress: function (e, data) {\n        if (e.isDefaultPrevented()) {\n          return false;\n        }\n        var progress = Math.floor((data.loaded / data.total) * 100);\n        if (data.context) {\n          data.context.each(function () {\n            $(this)\n              .find('.progress')\n              .attr('aria-valuenow', progress)\n              .children()\n              .first()\n              .css('width', progress + '%');\n          });\n        }\n      },\n      // Callback for global upload progress events:\n      progressall: function (e, data) {\n        if (e.isDefaultPrevented()) {\n          return false;\n        }\n        var $this = $(this),\n          progress = Math.floor((data.loaded / data.total) * 100),\n          globalProgressNode = $this.find('.fileupload-progress'),\n          extendedProgressNode = globalProgressNode.find('.progress-extended');\n        if (extendedProgressNode.length) {\n          extendedProgressNode.html(\n            (\n              $this.data('blueimp-fileupload') || $this.data('fileupload')\n            )._renderExtendedProgress(data)\n          );\n        }\n        globalProgressNode\n          .find('.progress')\n          .attr('aria-valuenow', progress)\n          .children()\n          .first()\n          .css('width', progress + '%');\n      },\n      // Callback for uploads start, equivalent to the global ajaxStart event:\n      start: function (e) {\n        if (e.isDefaultPrevented()) {\n          return false;\n        }\n        var that =\n          $(this).data('blueimp-fileupload') || $(this).data('fileupload');\n        that._resetFinishedDeferreds();\n        that\n          ._transition($(this).find('.fileupload-progress'))\n          .done(function () {\n            that._trigger('started', e);\n          });\n      },\n      // Callback for uploads stop, equivalent to the global ajaxStop event:\n      stop: function (e) {\n        if (e.isDefaultPrevented()) {\n          return false;\n        }\n        var that =\n            $(this).data('blueimp-fileupload') || $(this).data('fileupload'),\n          deferred = that._addFinishedDeferreds();\n        $.when.apply($, that._getFinishedDeferreds()).done(function () {\n          that._trigger('stopped', e);\n        });\n        that\n          ._transition($(this).find('.fileupload-progress'))\n          .done(function () {\n            $(this)\n              .find('.progress')\n              .attr('aria-valuenow', '0')\n              .children()\n              .first()\n              .css('width', '0%');\n            $(this).find('.progress-extended').html('&nbsp;');\n            deferred.resolve();\n          });\n      },\n      processstart: function (e) {\n        if (e.isDefaultPrevented()) {\n          return false;\n        }\n        $(this).addClass('fileupload-processing');\n      },\n      processstop: function (e) {\n        if (e.isDefaultPrevented()) {\n          return false;\n        }\n        $(this).removeClass('fileupload-processing');\n      },\n      // Callback for file deletion:\n      destroy: function (e, data) {\n        if (e.isDefaultPrevented()) {\n          return false;\n        }\n        var that =\n            $(this).data('blueimp-fileupload') || $(this).data('fileupload'),\n          removeNode = function () {\n            that._transition(data.context).done(function () {\n              $(this).remove();\n              that._trigger('destroyed', e, data);\n            });\n          };\n        if (data.url) {\n          data.dataType = data.dataType || that.options.dataType;\n          $.ajax(data)\n            .done(removeNode)\n            .fail(function () {\n              that._trigger('destroyfailed', e, data);\n            });\n        } else {\n          removeNode();\n        }\n      }\n    },\n\n    _resetFinishedDeferreds: function () {\n      this._finishedUploads = [];\n    },\n\n    _addFinishedDeferreds: function (deferred) {\n      // eslint-disable-next-line new-cap\n      var promise = deferred || $.Deferred();\n      this._finishedUploads.push(promise);\n      return promise;\n    },\n\n    _getFinishedDeferreds: function () {\n      return this._finishedUploads;\n    },\n\n    // Link handler, that allows to download files\n    // by drag & drop of the links to the desktop:\n    _enableDragToDesktop: function () {\n      var link = $(this),\n        url = link.prop('href'),\n        name = link.prop('download'),\n        type = 'application/octet-stream';\n      link.on('dragstart', function (e) {\n        try {\n          e.originalEvent.dataTransfer.setData(\n            'DownloadURL',\n            [type, name, url].join(':')\n          );\n        } catch (ignore) {\n          // Ignore exceptions\n        }\n      });\n    },\n\n    _formatFileSize: function (bytes) {\n      if (typeof bytes !== 'number') {\n        return '';\n      }\n      if (bytes >= 1000000000) {\n        return (bytes / 1000000000).toFixed(2) + ' GB';\n      }\n      if (bytes >= 1000000) {\n        return (bytes / 1000000).toFixed(2) + ' MB';\n      }\n      return (bytes / 1000).toFixed(2) + ' KB';\n    },\n\n    _formatBitrate: function (bits) {\n      if (typeof bits !== 'number') {\n        return '';\n      }\n      if (bits >= 1000000000) {\n        return (bits / 1000000000).toFixed(2) + ' Gbit/s';\n      }\n      if (bits >= 1000000) {\n        return (bits / 1000000).toFixed(2) + ' Mbit/s';\n      }\n      if (bits >= 1000) {\n        return (bits / 1000).toFixed(2) + ' kbit/s';\n      }\n      return bits.toFixed(2) + ' bit/s';\n    },\n\n    _formatTime: function (seconds) {\n      var date = new Date(seconds * 1000),\n        days = Math.floor(seconds / 86400);\n      days = days ? days + 'd ' : '';\n      return (\n        days +\n        ('0' + date.getUTCHours()).slice(-2) +\n        ':' +\n        ('0' + date.getUTCMinutes()).slice(-2) +\n        ':' +\n        ('0' + date.getUTCSeconds()).slice(-2)\n      );\n    },\n\n    _formatPercentage: function (floatValue) {\n      return (floatValue * 100).toFixed(2) + ' %';\n    },\n\n    _renderExtendedProgress: function (data) {\n      return (\n        this._formatBitrate(data.bitrate) +\n        ' | ' +\n        this._formatTime(((data.total - data.loaded) * 8) / data.bitrate) +\n        ' | ' +\n        this._formatPercentage(data.loaded / data.total) +\n        ' | ' +\n        this._formatFileSize(data.loaded) +\n        ' / ' +\n        this._formatFileSize(data.total)\n      );\n    },\n\n    _renderTemplate: function (func, files) {\n      if (!func) {\n        return $();\n      }\n      var result = func({\n        files: files,\n        formatFileSize: this._formatFileSize,\n        options: this.options\n      });\n      if (result instanceof $) {\n        return result;\n      }\n      return $(this.options.templatesContainer).html(result).children();\n    },\n\n    _renderPreviews: function (data) {\n      data.context.find('.preview').each(function (index, elm) {\n        $(elm).empty().append(data.files[index].preview);\n      });\n    },\n\n    _renderUpload: function (files) {\n      return this._renderTemplate(this.options.uploadTemplate, files);\n    },\n\n    _renderDownload: function (files) {\n      return this._renderTemplate(this.options.downloadTemplate, files)\n        .find('a[download]')\n        .each(this._enableDragToDesktop)\n        .end();\n    },\n\n    _editHandler: function (e) {\n      e.preventDefault();\n      if (!this.options.edit) return;\n      var that = this,\n        button = $(e.currentTarget),\n        template = button.closest('.template-upload'),\n        data = template.data('data'),\n        index = button.data().index;\n      this.options.edit(data.files[index]).then(function (file) {\n        if (!file) return;\n        data.files[index] = file;\n        data.context.addClass('processing');\n        template.find('.edit,.start').prop('disabled', true);\n        $(that.element)\n          .fileupload('process', data)\n          .always(function () {\n            template\n              .find('.size')\n              .text(that._formatFileSize(data.files[index].size));\n            data.context.removeClass('processing');\n            that._renderPreviews(data);\n          })\n          .done(function () {\n            template.find('.edit,.start').prop('disabled', false);\n          })\n          .fail(function () {\n            template.find('.edit').prop('disabled', false);\n            var error = data.files[index].error;\n            if (error) {\n              template.find('.error').text(error);\n            }\n          });\n      });\n    },\n\n    _startHandler: function (e) {\n      e.preventDefault();\n      var button = $(e.currentTarget),\n        template = button.closest('.template-upload'),\n        data = template.data('data');\n      button.prop('disabled', true);\n      if (data && data.submit) {\n        data.submit();\n      }\n    },\n\n    _cancelHandler: function (e) {\n      e.preventDefault();\n      var template = $(e.currentTarget).closest(\n          '.template-upload,.template-download'\n        ),\n        data = template.data('data') || {};\n      data.context = data.context || template;\n      if (data.abort) {\n        data.abort();\n      } else {\n        data.errorThrown = 'abort';\n        this._trigger('fail', e, data);\n      }\n    },\n\n    _deleteHandler: function (e) {\n      e.preventDefault();\n      var button = $(e.currentTarget);\n      this._trigger(\n        'destroy',\n        e,\n        $.extend(\n          {\n            context: button.closest('.template-download'),\n            type: 'DELETE'\n          },\n          button.data()\n        )\n      );\n    },\n\n    _forceReflow: function (node) {\n      return $.support.transition && node.length && node[0].offsetWidth;\n    },\n\n    _transition: function (node) {\n      // eslint-disable-next-line new-cap\n      var dfd = $.Deferred();\n      if (\n        $.support.transition &&\n        node.hasClass('fade') &&\n        node.is(':visible')\n      ) {\n        var transitionEndHandler = function (e) {\n          // Make sure we don't respond to other transition events\n          // in the container element, e.g. from button elements:\n          if (e.target === node[0]) {\n            node.off($.support.transition.end, transitionEndHandler);\n            dfd.resolveWith(node);\n          }\n        };\n        node\n          .on($.support.transition.end, transitionEndHandler)\n          .toggleClass(this.options.showElementClass);\n      } else {\n        node.toggleClass(this.options.showElementClass);\n        dfd.resolveWith(node);\n      }\n      return dfd;\n    },\n\n    _initButtonBarEventHandlers: function () {\n      var fileUploadButtonBar = this.element.find('.fileupload-buttonbar'),\n        filesList = this.options.filesContainer;\n      this._on(fileUploadButtonBar.find('.start'), {\n        click: function (e) {\n          e.preventDefault();\n          filesList.find('.start').trigger('click');\n        }\n      });\n      this._on(fileUploadButtonBar.find('.cancel'), {\n        click: function (e) {\n          e.preventDefault();\n          filesList.find('.cancel').trigger('click');\n        }\n      });\n      this._on(fileUploadButtonBar.find('.delete'), {\n        click: function (e) {\n          e.preventDefault();\n          filesList\n            .find('.toggle:checked')\n            .closest('.template-download')\n            .find('.delete')\n            .trigger('click');\n          fileUploadButtonBar.find('.toggle').prop('checked', false);\n        }\n      });\n      this._on(fileUploadButtonBar.find('.toggle'), {\n        change: function (e) {\n          filesList\n            .find('.toggle')\n            .prop('checked', $(e.currentTarget).is(':checked'));\n        }\n      });\n    },\n\n    _destroyButtonBarEventHandlers: function () {\n      this._off(\n        this.element\n          .find('.fileupload-buttonbar')\n          .find('.start, .cancel, .delete'),\n        'click'\n      );\n      this._off(this.element.find('.fileupload-buttonbar .toggle'), 'change.');\n    },\n\n    _initEventHandlers: function () {\n      this._super();\n      this._on(this.options.filesContainer, {\n        'click .edit': this._editHandler,\n        'click .start': this._startHandler,\n        'click .cancel': this._cancelHandler,\n        'click .delete': this._deleteHandler\n      });\n      this._initButtonBarEventHandlers();\n    },\n\n    _destroyEventHandlers: function () {\n      this._destroyButtonBarEventHandlers();\n      this._off(this.options.filesContainer, 'click');\n      this._super();\n    },\n\n    _enableFileInputButton: function () {\n      this.element\n        .find('.fileinput-button input')\n        .prop('disabled', false)\n        .parent()\n        .removeClass('disabled');\n    },\n\n    _disableFileInputButton: function () {\n      this.element\n        .find('.fileinput-button input')\n        .prop('disabled', true)\n        .parent()\n        .addClass('disabled');\n    },\n\n    _initTemplates: function () {\n      var options = this.options;\n      options.templatesContainer = this.document[0].createElement(\n        options.filesContainer.prop('nodeName')\n      );\n      if (tmpl) {\n        if (options.uploadTemplateId) {\n          options.uploadTemplate = tmpl(options.uploadTemplateId);\n        }\n        if (options.downloadTemplateId) {\n          options.downloadTemplate = tmpl(options.downloadTemplateId);\n        }\n      }\n    },\n\n    _initFilesContainer: function () {\n      var options = this.options;\n      if (options.filesContainer === undefined) {\n        options.filesContainer = this.element.find('.files');\n      } else if (!(options.filesContainer instanceof $)) {\n        options.filesContainer = $(options.filesContainer);\n      }\n    },\n\n    _initSpecialOptions: function () {\n      this._super();\n      this._initFilesContainer();\n      // this._initTemplates();\n    },\n\n    _create: function () {\n      this._super();\n      this._resetFinishedDeferreds();\n      if (!$.support.fileInput) {\n        this._disableFileInputButton();\n      }\n    },\n\n    enable: function () {\n      var wasDisabled = false;\n      if (this.options.disabled) {\n        wasDisabled = true;\n      }\n      this._super();\n      if (wasDisabled) {\n        this.element.find('input, button').prop('disabled', false);\n        this._enableFileInputButton();\n      }\n    },\n\n    disable: function () {\n      if (!this.options.disabled) {\n        this.element.find('input, button').prop('disabled', true);\n        this._disableFileInputButton();\n      }\n      this._super();\n    }\n  });\n});\n","Mageplaza_Core/lib/fileUploader/jquery.fileupload-validate.js":"/*\n * jQuery File Upload Validation Plugin\n * https://github.com/blueimp/jQuery-File-Upload\n *\n * Copyright 2013, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, require */\n\n(function (factory) {\n  'use strict';\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['jquery', 'Mageplaza_Core/lib/fileUploader/jquery.fileupload-process'], factory);\n  } else if (typeof exports === 'object') {\n    // Node/CommonJS:\n    factory(require('jquery'), require('Mageplaza_Core/lib/fileUploader/jquery.fileupload-process'));\n  } else {\n    // Browser globals:\n    factory(window.jQuery);\n  }\n})(function ($) {\n  'use strict';\n\n  // Append to the default processQueue:\n  $.blueimp.fileupload.prototype.options.processQueue.push({\n    action: 'validate',\n    // Always trigger this action,\n    // even if the previous action was rejected:\n    always: true,\n    // Options taken from the global options map:\n    acceptFileTypes: '@',\n    maxFileSize: '@',\n    minFileSize: '@',\n    maxNumberOfFiles: '@',\n    disabled: '@disableValidation'\n  });\n\n  // The File Upload Validation plugin extends the fileupload widget\n  // with file validation functionality:\n  $.widget('blueimp.fileupload', $.blueimp.fileupload, {\n    options: {\n      /*\n            // The regular expression for allowed file types, matches\n            // against either file type or file name:\n            acceptFileTypes: /(\\.|\\/)(gif|jpe?g|png)$/i,\n            // The maximum allowed file size in bytes:\n            maxFileSize: 10000000, // 10 MB\n            // The minimum allowed file size in bytes:\n            minFileSize: undefined, // No minimal file size\n            // The limit of files to be uploaded:\n            maxNumberOfFiles: 10,\n            */\n\n      // Function returning the current number of files,\n      // has to be overridden for maxNumberOfFiles validation:\n      getNumberOfFiles: $.noop,\n\n      // Error and info messages:\n      messages: {\n        maxNumberOfFiles: 'Maximum number of files exceeded',\n        acceptFileTypes: 'File type not allowed',\n        maxFileSize: 'File is too large',\n        minFileSize: 'File is too small'\n      }\n    },\n\n    processActions: {\n      validate: function (data, options) {\n        if (options.disabled) {\n          return data;\n        }\n        // eslint-disable-next-line new-cap\n        var dfd = $.Deferred(),\n          settings = this.options,\n          file = data.files[data.index],\n          fileSize;\n        if (options.minFileSize || options.maxFileSize) {\n          fileSize = file.size;\n        }\n        if (\n          $.type(options.maxNumberOfFiles) === 'number' &&\n          (settings.getNumberOfFiles() || 0) + data.files.length >\n            options.maxNumberOfFiles\n        ) {\n          file.error = settings.i18n('maxNumberOfFiles');\n        } else if (\n          options.acceptFileTypes &&\n          !(\n            options.acceptFileTypes.test(file.type) ||\n            options.acceptFileTypes.test(file.name)\n          )\n        ) {\n          file.error = settings.i18n('acceptFileTypes');\n        } else if (fileSize > options.maxFileSize) {\n          file.error = settings.i18n('maxFileSize');\n        } else if (\n          $.type(fileSize) === 'number' &&\n          fileSize < options.minFileSize\n        ) {\n          file.error = settings.i18n('minFileSize');\n        } else {\n          delete file.error;\n        }\n        if (file.error || data.files.error) {\n          data.files.error = true;\n          dfd.rejectWith(this, [data]);\n        } else {\n          dfd.resolveWith(this, [data]);\n        }\n        return dfd.promise();\n      }\n    }\n  });\n});\n","Mageplaza_Core/lib/fileUploader/vendor/jquery.ui.widget.js":"/*! jQuery UI - v1.12.1+0b7246b6eeadfa9e2696e22f3230f6452f8129dc - 2020-02-20\n * http://jqueryui.com\n * Includes: widget.js\n * Copyright jQuery Foundation and other contributors; Licensed MIT */\n\n/* global define, require */\n/* eslint-disable no-param-reassign, new-cap, jsdoc/require-jsdoc */\n\n(function (factory) {\n  'use strict';\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(['jquery'], factory);\n  } else if (typeof exports === 'object') {\n    // Node/CommonJS\n    factory(require('jquery'));\n  } else {\n    // Browser globals\n    factory(window.jQuery);\n  }\n})(function ($) {\n  ('use strict');\n\n  $.ui = $.ui || {};\n\n  $.ui.version = '1.12.1';\n\n  /*!\n   * jQuery UI Widget 1.12.1\n   * http://jqueryui.com\n   *\n   * Copyright jQuery Foundation and other contributors\n   * Released under the MIT license.\n   * http://jquery.org/license\n   */\n\n  //>>label: Widget\n  //>>group: Core\n  //>>description: Provides a factory for creating stateful widgets with a common API.\n  //>>docs: http://api.jqueryui.com/jQuery.widget/\n  //>>demos: http://jqueryui.com/widget/\n\n  // Support: jQuery 1.9.x or older\n  // $.expr[ \":\" ] is deprecated.\n  if (!$.expr.pseudos) {\n    $.expr.pseudos = $.expr[':'];\n  }\n\n  // Support: jQuery 1.11.x or older\n  // $.unique has been renamed to $.uniqueSort\n  if (!$.uniqueSort) {\n    $.uniqueSort = $.unique;\n  }\n\n  var widgetUuid = 0;\n  var widgetHasOwnProperty = Array.prototype.hasOwnProperty;\n  var widgetSlice = Array.prototype.slice;\n\n  $.cleanData = (function (orig) {\n    return function (elems) {\n      var events, elem, i;\n      // eslint-disable-next-line eqeqeq\n      for (i = 0; (elem = elems[i]) != null; i++) {\n        // Only trigger remove when necessary to save time\n        events = $._data(elem, 'events');\n        if (events && events.remove) {\n          $(elem).triggerHandler('remove');\n        }\n      }\n      orig(elems);\n    };\n  })($.cleanData);\n\n  $.widget = function (name, base, prototype) {\n    var existingConstructor, constructor, basePrototype;\n\n    // ProxiedPrototype allows the provided prototype to remain unmodified\n    // so that it can be used as a mixin for multiple widgets (#8876)\n    var proxiedPrototype = {};\n\n    var namespace = name.split('.')[0];\n    name = name.split('.')[1];\n    var fullName = namespace + '-' + name;\n\n    if (!prototype) {\n      prototype = base;\n      base = $.Widget;\n    }\n\n    if ($.isArray(prototype)) {\n      prototype = $.extend.apply(null, [{}].concat(prototype));\n    }\n\n    // Create selector for plugin\n    $.expr.pseudos[fullName.toLowerCase()] = function (elem) {\n      return !!$.data(elem, fullName);\n    };\n\n    $[namespace] = $[namespace] || {};\n    existingConstructor = $[namespace][name];\n    constructor = $[namespace][name] = function (options, element) {\n      // Allow instantiation without \"new\" keyword\n      if (!this._createWidget) {\n        return new constructor(options, element);\n      }\n\n      // Allow instantiation without initializing for simple inheritance\n      // must use \"new\" keyword (the code above always passes args)\n      if (arguments.length) {\n        this._createWidget(options, element);\n      }\n    };\n\n    // Extend with the existing constructor to carry over any static properties\n    $.extend(constructor, existingConstructor, {\n      version: prototype.version,\n\n      // Copy the object used to create the prototype in case we need to\n      // redefine the widget later\n      _proto: $.extend({}, prototype),\n\n      // Track widgets that inherit from this widget in case this widget is\n      // redefined after a widget inherits from it\n      _childConstructors: []\n    });\n\n    basePrototype = new base();\n\n    // We need to make the options hash a property directly on the new instance\n    // otherwise we'll modify the options hash on the prototype that we're\n    // inheriting from\n    basePrototype.options = $.widget.extend({}, basePrototype.options);\n    $.each(prototype, function (prop, value) {\n      if (!$.isFunction(value)) {\n        proxiedPrototype[prop] = value;\n        return;\n      }\n      proxiedPrototype[prop] = (function () {\n        function _super() {\n          return base.prototype[prop].apply(this, arguments);\n        }\n\n        function _superApply(args) {\n          return base.prototype[prop].apply(this, args);\n        }\n\n        return function () {\n          var __super = this._super;\n          var __superApply = this._superApply;\n          var returnValue;\n\n          this._super = _super;\n          this._superApply = _superApply;\n\n          returnValue = value.apply(this, arguments);\n\n          this._super = __super;\n          this._superApply = __superApply;\n\n          return returnValue;\n        };\n      })();\n    });\n    constructor.prototype = $.widget.extend(\n      basePrototype,\n      {\n        // TODO: remove support for widgetEventPrefix\n        // always use the name + a colon as the prefix, e.g., draggable:start\n        // don't prefix for widgets that aren't DOM-based\n        widgetEventPrefix: existingConstructor\n          ? basePrototype.widgetEventPrefix || name\n          : name\n      },\n      proxiedPrototype,\n      {\n        constructor: constructor,\n        namespace: namespace,\n        widgetName: name,\n        widgetFullName: fullName\n      }\n    );\n\n    // If this widget is being redefined then we need to find all widgets that\n    // are inheriting from it and redefine all of them so that they inherit from\n    // the new version of this widget. We're essentially trying to replace one\n    // level in the prototype chain.\n    if (existingConstructor) {\n      $.each(existingConstructor._childConstructors, function (i, child) {\n        var childPrototype = child.prototype;\n\n        // Redefine the child widget using the same prototype that was\n        // originally used, but inherit from the new version of the base\n        $.widget(\n          childPrototype.namespace + '.' + childPrototype.widgetName,\n          constructor,\n          child._proto\n        );\n      });\n\n      // Remove the list of existing child constructors from the old constructor\n      // so the old child constructors can be garbage collected\n      delete existingConstructor._childConstructors;\n    } else {\n      base._childConstructors.push(constructor);\n    }\n\n    $.widget.bridge(name, constructor);\n\n    return constructor;\n  };\n\n  $.widget.extend = function (target) {\n    var input = widgetSlice.call(arguments, 1);\n    var inputIndex = 0;\n    var inputLength = input.length;\n    var key;\n    var value;\n\n    for (; inputIndex < inputLength; inputIndex++) {\n      for (key in input[inputIndex]) {\n        value = input[inputIndex][key];\n        if (\n          widgetHasOwnProperty.call(input[inputIndex], key) &&\n          value !== undefined\n        ) {\n          // Clone objects\n          if ($.isPlainObject(value)) {\n            target[key] = $.isPlainObject(target[key])\n              ? $.widget.extend({}, target[key], value)\n              : // Don't extend strings, arrays, etc. with objects\n                $.widget.extend({}, value);\n\n            // Copy everything else by reference\n          } else {\n            target[key] = value;\n          }\n        }\n      }\n    }\n    return target;\n  };\n\n  $.widget.bridge = function (name, object) {\n    var fullName = object.prototype.widgetFullName || name;\n    $.fn[name] = function (options) {\n      var isMethodCall = typeof options === 'string';\n      var args = widgetSlice.call(arguments, 1);\n      var returnValue = this;\n\n      if (isMethodCall) {\n        // If this is an empty collection, we need to have the instance method\n        // return undefined instead of the jQuery instance\n        if (!this.length && options === 'instance') {\n          returnValue = undefined;\n        } else {\n          this.each(function () {\n            var methodValue;\n            var instance = $.data(this, fullName);\n\n            if (options === 'instance') {\n              returnValue = instance;\n              return false;\n            }\n\n            if (!instance) {\n              return $.error(\n                'cannot call methods on ' +\n                  name +\n                  ' prior to initialization; ' +\n                  \"attempted to call method '\" +\n                  options +\n                  \"'\"\n              );\n            }\n\n            if (!$.isFunction(instance[options]) || options.charAt(0) === '_') {\n              return $.error(\n                \"no such method '\" +\n                  options +\n                  \"' for \" +\n                  name +\n                  ' widget instance'\n              );\n            }\n\n            methodValue = instance[options].apply(instance, args);\n\n            if (methodValue !== instance && methodValue !== undefined) {\n              returnValue =\n                methodValue && methodValue.jquery\n                  ? returnValue.pushStack(methodValue.get())\n                  : methodValue;\n              return false;\n            }\n          });\n        }\n      } else {\n        // Allow multiple hashes to be passed on init\n        if (args.length) {\n          options = $.widget.extend.apply(null, [options].concat(args));\n        }\n\n        this.each(function () {\n          var instance = $.data(this, fullName);\n          if (instance) {\n            instance.option(options || {});\n            if (instance._init) {\n              instance._init();\n            }\n          } else {\n            $.data(this, fullName, new object(options, this));\n          }\n        });\n      }\n\n      return returnValue;\n    };\n  };\n\n  $.Widget = function (/* options, element */) {};\n  $.Widget._childConstructors = [];\n\n  $.Widget.prototype = {\n    widgetName: 'widget',\n    widgetEventPrefix: '',\n    defaultElement: '<div>',\n\n    options: {\n      classes: {},\n      disabled: false,\n\n      // Callbacks\n      create: null\n    },\n\n    _createWidget: function (options, element) {\n      element = $(element || this.defaultElement || this)[0];\n      this.element = $(element);\n      this.uuid = widgetUuid++;\n      this.eventNamespace = '.' + this.widgetName + this.uuid;\n\n      this.bindings = $();\n      this.hoverable = $();\n      this.focusable = $();\n      this.classesElementLookup = {};\n\n      if (element !== this) {\n        $.data(element, this.widgetFullName, this);\n        this._on(true, this.element, {\n          remove: function (event) {\n            if (event.target === element) {\n              this.destroy();\n            }\n          }\n        });\n        this.document = $(\n          element.style\n            ? // Element within the document\n              element.ownerDocument\n            : // Element is window or document\n              element.document || element\n        );\n        this.window = $(\n          this.document[0].defaultView || this.document[0].parentWindow\n        );\n      }\n\n      this.options = $.widget.extend(\n        {},\n        this.options,\n        this._getCreateOptions(),\n        options\n      );\n\n      this._create();\n\n      if (this.options.disabled) {\n        this._setOptionDisabled(this.options.disabled);\n      }\n\n      this._trigger('create', null, this._getCreateEventData());\n      this._init();\n    },\n\n    _getCreateOptions: function () {\n      return {};\n    },\n\n    _getCreateEventData: $.noop,\n\n    _create: $.noop,\n\n    _init: $.noop,\n\n    destroy: function () {\n      var that = this;\n\n      this._destroy();\n      $.each(this.classesElementLookup, function (key, value) {\n        that._removeClass(value, key);\n      });\n\n      // We can probably remove the unbind calls in 2.0\n      // all event bindings should go through this._on()\n      this.element.off(this.eventNamespace).removeData(this.widgetFullName);\n      this.widget().off(this.eventNamespace).removeAttr('aria-disabled');\n\n      // Clean up events and states\n      this.bindings.off(this.eventNamespace);\n    },\n\n    _destroy: $.noop,\n\n    widget: function () {\n      return this.element;\n    },\n\n    option: function (key, value) {\n      var options = key;\n      var parts;\n      var curOption;\n      var i;\n\n      if (arguments.length === 0) {\n        // Don't return a reference to the internal hash\n        return $.widget.extend({}, this.options);\n      }\n\n      if (typeof key === 'string') {\n        // Handle nested keys, e.g., \"foo.bar\" => { foo: { bar: ___ } }\n        options = {};\n        parts = key.split('.');\n        key = parts.shift();\n        if (parts.length) {\n          curOption = options[key] = $.widget.extend({}, this.options[key]);\n          for (i = 0; i < parts.length - 1; i++) {\n            curOption[parts[i]] = curOption[parts[i]] || {};\n            curOption = curOption[parts[i]];\n          }\n          key = parts.pop();\n          if (arguments.length === 1) {\n            return curOption[key] === undefined ? null : curOption[key];\n          }\n          curOption[key] = value;\n        } else {\n          if (arguments.length === 1) {\n            return this.options[key] === undefined ? null : this.options[key];\n          }\n          options[key] = value;\n        }\n      }\n\n      this._setOptions(options);\n\n      return this;\n    },\n\n    _setOptions: function (options) {\n      var key;\n\n      for (key in options) {\n        this._setOption(key, options[key]);\n      }\n\n      return this;\n    },\n\n    _setOption: function (key, value) {\n      if (key === 'classes') {\n        this._setOptionClasses(value);\n      }\n\n      this.options[key] = value;\n\n      if (key === 'disabled') {\n        this._setOptionDisabled(value);\n      }\n\n      return this;\n    },\n\n    _setOptionClasses: function (value) {\n      var classKey, elements, currentElements;\n\n      for (classKey in value) {\n        currentElements = this.classesElementLookup[classKey];\n        if (\n          value[classKey] === this.options.classes[classKey] ||\n          !currentElements ||\n          !currentElements.length\n        ) {\n          continue;\n        }\n\n        // We are doing this to create a new jQuery object because the _removeClass() call\n        // on the next line is going to destroy the reference to the current elements being\n        // tracked. We need to save a copy of this collection so that we can add the new classes\n        // below.\n        elements = $(currentElements.get());\n        this._removeClass(currentElements, classKey);\n\n        // We don't use _addClass() here, because that uses this.options.classes\n        // for generating the string of classes. We want to use the value passed in from\n        // _setOption(), this is the new value of the classes option which was passed to\n        // _setOption(). We pass this value directly to _classes().\n        elements.addClass(\n          this._classes({\n            element: elements,\n            keys: classKey,\n            classes: value,\n            add: true\n          })\n        );\n      }\n    },\n\n    _setOptionDisabled: function (value) {\n      this._toggleClass(\n        this.widget(),\n        this.widgetFullName + '-disabled',\n        null,\n        !!value\n      );\n\n      // If the widget is becoming disabled, then nothing is interactive\n      if (value) {\n        this._removeClass(this.hoverable, null, 'ui-state-hover');\n        this._removeClass(this.focusable, null, 'ui-state-focus');\n      }\n    },\n\n    enable: function () {\n      return this._setOptions({ disabled: false });\n    },\n\n    disable: function () {\n      return this._setOptions({ disabled: true });\n    },\n\n    _classes: function (options) {\n      var full = [];\n      var that = this;\n\n      options = $.extend(\n        {\n          element: this.element,\n          classes: this.options.classes || {}\n        },\n        options\n      );\n\n      function bindRemoveEvent() {\n        options.element.each(function (_, element) {\n          var isTracked = $.map(that.classesElementLookup, function (elements) {\n            return elements;\n          }).some(function (elements) {\n            return elements.is(element);\n          });\n\n          if (!isTracked) {\n            that._on($(element), {\n              remove: '_untrackClassesElement'\n            });\n          }\n        });\n      }\n\n      function processClassString(classes, checkOption) {\n        var current, i;\n        for (i = 0; i < classes.length; i++) {\n          current = that.classesElementLookup[classes[i]] || $();\n          if (options.add) {\n            bindRemoveEvent();\n            current = $(\n              $.uniqueSort(current.get().concat(options.element.get()))\n            );\n          } else {\n            current = $(current.not(options.element).get());\n          }\n          that.classesElementLookup[classes[i]] = current;\n          full.push(classes[i]);\n          if (checkOption && options.classes[classes[i]]) {\n            full.push(options.classes[classes[i]]);\n          }\n        }\n      }\n\n      if (options.keys) {\n        processClassString(options.keys.match(/\\S+/g) || [], true);\n      }\n      if (options.extra) {\n        processClassString(options.extra.match(/\\S+/g) || []);\n      }\n\n      return full.join(' ');\n    },\n\n    _untrackClassesElement: function (event) {\n      var that = this;\n      $.each(that.classesElementLookup, function (key, value) {\n        if ($.inArray(event.target, value) !== -1) {\n          that.classesElementLookup[key] = $(value.not(event.target).get());\n        }\n      });\n\n      this._off($(event.target));\n    },\n\n    _removeClass: function (element, keys, extra) {\n      return this._toggleClass(element, keys, extra, false);\n    },\n\n    _addClass: function (element, keys, extra) {\n      return this._toggleClass(element, keys, extra, true);\n    },\n\n    _toggleClass: function (element, keys, extra, add) {\n      add = typeof add === 'boolean' ? add : extra;\n      var shift = typeof element === 'string' || element === null,\n        options = {\n          extra: shift ? keys : extra,\n          keys: shift ? element : keys,\n          element: shift ? this.element : element,\n          add: add\n        };\n      options.element.toggleClass(this._classes(options), add);\n      return this;\n    },\n\n    _on: function (suppressDisabledCheck, element, handlers) {\n      var delegateElement;\n      var instance = this;\n\n      // No suppressDisabledCheck flag, shuffle arguments\n      if (typeof suppressDisabledCheck !== 'boolean') {\n        handlers = element;\n        element = suppressDisabledCheck;\n        suppressDisabledCheck = false;\n      }\n\n      // No element argument, shuffle and use this.element\n      if (!handlers) {\n        handlers = element;\n        element = this.element;\n        delegateElement = this.widget();\n      } else {\n        element = delegateElement = $(element);\n        this.bindings = this.bindings.add(element);\n      }\n\n      $.each(handlers, function (event, handler) {\n        function handlerProxy() {\n          // Allow widgets to customize the disabled handling\n          // - disabled as an array instead of boolean\n          // - disabled class as method for disabling individual parts\n          if (\n            !suppressDisabledCheck &&\n            (instance.options.disabled === true ||\n              $(this).hasClass('ui-state-disabled'))\n          ) {\n            return;\n          }\n          return (\n            typeof handler === 'string' ? instance[handler] : handler\n          ).apply(instance, arguments);\n        }\n\n        // Copy the guid so direct unbinding works\n        if (typeof handler !== 'string') {\n          handlerProxy.guid = handler.guid =\n            handler.guid || handlerProxy.guid || $.guid++;\n        }\n\n        var match = event.match(/^([\\w:-]*)\\s*(.*)$/);\n        var eventName = match[1] + instance.eventNamespace;\n        var selector = match[2];\n\n        if (selector) {\n          delegateElement.on(eventName, selector, handlerProxy);\n        } else {\n          element.on(eventName, handlerProxy);\n        }\n      });\n    },\n\n    _off: function (element, eventName) {\n      eventName =\n        (eventName || '').split(' ').join(this.eventNamespace + ' ') +\n        this.eventNamespace;\n      element.off(eventName);\n\n      // Clear the stack to avoid memory leaks (#10056)\n      this.bindings = $(this.bindings.not(element).get());\n      this.focusable = $(this.focusable.not(element).get());\n      this.hoverable = $(this.hoverable.not(element).get());\n    },\n\n    _delay: function (handler, delay) {\n      var instance = this;\n      function handlerProxy() {\n        return (\n          typeof handler === 'string' ? instance[handler] : handler\n        ).apply(instance, arguments);\n      }\n      return setTimeout(handlerProxy, delay || 0);\n    },\n\n    _hoverable: function (element) {\n      this.hoverable = this.hoverable.add(element);\n      this._on(element, {\n        mouseenter: function (event) {\n          this._addClass($(event.currentTarget), null, 'ui-state-hover');\n        },\n        mouseleave: function (event) {\n          this._removeClass($(event.currentTarget), null, 'ui-state-hover');\n        }\n      });\n    },\n\n    _focusable: function (element) {\n      this.focusable = this.focusable.add(element);\n      this._on(element, {\n        focusin: function (event) {\n          this._addClass($(event.currentTarget), null, 'ui-state-focus');\n        },\n        focusout: function (event) {\n          this._removeClass($(event.currentTarget), null, 'ui-state-focus');\n        }\n      });\n    },\n\n    _trigger: function (type, event, data) {\n      var prop, orig;\n      var callback = this.options[type];\n\n      data = data || {};\n      event = $.Event(event);\n      event.type = (\n        type === this.widgetEventPrefix ? type : this.widgetEventPrefix + type\n      ).toLowerCase();\n\n      // The original event may come from any element\n      // so we need to reset the target on the new event\n      event.target = this.element[0];\n\n      // Copy original event properties over to the new event\n      orig = event.originalEvent;\n      if (orig) {\n        for (prop in orig) {\n          if (!(prop in event)) {\n            event[prop] = orig[prop];\n          }\n        }\n      }\n\n      this.element.trigger(event, data);\n      return !(\n        ($.isFunction(callback) &&\n          callback.apply(this.element[0], [event].concat(data)) === false) ||\n        event.isDefaultPrevented()\n      );\n    }\n  };\n\n  $.each({ show: 'fadeIn', hide: 'fadeOut' }, function (method, defaultEffect) {\n    $.Widget.prototype['_' + method] = function (element, options, callback) {\n      if (typeof options === 'string') {\n        options = { effect: options };\n      }\n\n      var hasOptions;\n      var effectName = !options\n        ? method\n        : options === true || typeof options === 'number'\n        ? defaultEffect\n        : options.effect || defaultEffect;\n\n      options = options || {};\n      if (typeof options === 'number') {\n        options = { duration: options };\n      }\n\n      hasOptions = !$.isEmptyObject(options);\n      options.complete = callback;\n\n      if (options.delay) {\n        element.delay(options.delay);\n      }\n\n      if (hasOptions && $.effects && $.effects.effect[effectName]) {\n        element[method](options);\n      } else if (effectName !== method && element[effectName]) {\n        element[effectName](options.duration, options.easing, callback);\n      } else {\n        element.queue(function (next) {\n          $(this)[method]();\n          if (callback) {\n            callback.call(element[0]);\n          }\n          next();\n        });\n      }\n    };\n  });\n});\n","Mageplaza_Core/lib/fileUploader/vendor/blueimp-tmpl/js/runtime.js":"/*\n * JavaScript Templates Runtime\n * https://github.com/blueimp/JavaScript-Templates\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define */\n\n/* eslint-disable strict */\n\n;(function ($) {\n  'use strict'\n  var tmpl = function (id, data) {\n    var f = tmpl.cache[id]\n    return data\n      ? f(data, tmpl)\n      : function (data) {\n          return f(data, tmpl)\n        }\n  }\n  tmpl.cache = {}\n  tmpl.encReg = /[<>&\"'\\x00]/g // eslint-disable-line no-control-regex\n  tmpl.encMap = {\n    '<': '&lt;',\n    '>': '&gt;',\n    '&': '&amp;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  }\n  tmpl.encode = function (s) {\n    // eslint-disable-next-line eqeqeq\n    return (s == null ? '' : '' + s).replace(tmpl.encReg, function (c) {\n      return tmpl.encMap[c] || ''\n    })\n  }\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return tmpl\n    })\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = tmpl\n  } else {\n    $.tmpl = tmpl\n  }\n})(this)\n","Mageplaza_Core/lib/fileUploader/vendor/blueimp-tmpl/js/tmpl.js":"/*\n * JavaScript Templates\n * https://github.com/blueimp/JavaScript-Templates\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Inspired by John Resig's JavaScript Micro-Templating:\n * http://ejohn.org/blog/javascript-micro-templating/\n */\n\n/* global define */\n\n/* eslint-disable strict */\n\n;(function ($) {\n  'use strict'\n  var tmpl = function (str, data) {\n    var f = !/[^\\w\\-.:]/.test(str)\n      ? (tmpl.cache[str] = tmpl.cache[str] || tmpl(tmpl.load(str)))\n      : new Function( // eslint-disable-line no-new-func\n          tmpl.arg + ',tmpl',\n          'var _e=tmpl.encode' +\n            tmpl.helper +\n            \",_s='\" +\n            str.replace(tmpl.regexp, tmpl.func) +\n            \"';return _s;\"\n        )\n    return data\n      ? f(data, tmpl)\n      : function (data) {\n          return f(data, tmpl)\n        }\n  }\n  tmpl.cache = {}\n  tmpl.load = function (id) {\n    return document.getElementById(id).innerHTML\n  }\n  tmpl.regexp = /([\\s'\\\\])(?!(?:[^{]|\\{(?!%))*%\\})|(?:\\{%(=|#)([\\s\\S]+?)%\\})|(\\{%)|(%\\})/g\n  tmpl.func = function (s, p1, p2, p3, p4, p5) {\n    if (p1) {\n      // whitespace, quote and backspace in HTML context\n      return (\n        {\n          '\\n': '\\\\n',\n          '\\r': '\\\\r',\n          '\\t': '\\\\t',\n          ' ': ' '\n        }[p1] || '\\\\' + p1\n      )\n    }\n    if (p2) {\n      // interpolation: {%=prop%}, or unescaped: {%#prop%}\n      if (p2 === '=') {\n        return \"'+_e(\" + p3 + \")+'\"\n      }\n      return \"'+(\" + p3 + \"==null?'':\" + p3 + \")+'\"\n    }\n    if (p4) {\n      // evaluation start tag: {%\n      return \"';\"\n    }\n    if (p5) {\n      // evaluation end tag: %}\n      return \"_s+='\"\n    }\n  }\n  tmpl.encReg = /[<>&\"'\\x00]/g // eslint-disable-line no-control-regex\n  tmpl.encMap = {\n    '<': '&lt;',\n    '>': '&gt;',\n    '&': '&amp;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  }\n  tmpl.encode = function (s) {\n    // eslint-disable-next-line eqeqeq\n    return (s == null ? '' : '' + s).replace(tmpl.encReg, function (c) {\n      return tmpl.encMap[c] || ''\n    })\n  }\n  tmpl.arg = 'o'\n  tmpl.helper =\n    \",print=function(s,e){_s+=e?(s==null?'':s):_e(s);}\" +\n    ',include=function(s,d){_s+=tmpl(s,d);}'\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return tmpl\n    })\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = tmpl\n  } else {\n    $.tmpl = tmpl\n  }\n})(this)\n","Mageplaza_Core/lib/fileUploader/vendor/blueimp-tmpl/js/compile.js":"#!/usr/bin/env node\n/*\n * JavaScript Templates Compiler\n * https://github.com/blueimp/JavaScript-Templates\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* eslint-disable strict */\n/* eslint-disable no-console */\n\n;(function () {\n  'use strict'\n  var path = require('path')\n  var tmpl = require(path.join(__dirname, 'tmpl.js'))\n  var fs = require('fs')\n  // Retrieve the content of the minimal runtime:\n  var runtime = fs.readFileSync(path.join(__dirname, 'runtime.js'), 'utf8')\n  // A regular expression to parse templates from script tags in a HTML page:\n  var regexp = /<script( id=\"([\\w-]+)\")? type=\"text\\/x-tmpl\"( id=\"([\\w-]+)\")?>([\\s\\S]+?)<\\/script>/gi\n  // A regular expression to match the helper function names:\n  var helperRegexp = new RegExp(\n    tmpl.helper.match(/\\w+(?=\\s*=\\s*function\\s*\\()/g).join('\\\\s*\\\\(|') +\n      '\\\\s*\\\\('\n  )\n  // A list to store the function bodies:\n  var list = []\n  var code\n  // Extend the Templating engine with a print method for the generated functions:\n  tmpl.print = function (str) {\n    // Only add helper functions if they are used inside of the template:\n    var helper = helperRegexp.test(str) ? tmpl.helper : ''\n    var body = str.replace(tmpl.regexp, tmpl.func)\n    if (helper || /_e\\s*\\(/.test(body)) {\n      helper = '_e=tmpl.encode' + helper + ','\n    }\n    return (\n      'function(' +\n      tmpl.arg +\n      ',tmpl){' +\n      ('var ' + helper + \"_s='\" + body + \"';return _s;\")\n        .split(\"_s+='';\")\n        .join('') +\n      '}'\n    )\n  }\n  // Loop through the command line arguments:\n  process.argv.forEach(function (file, index) {\n    var listLength = list.length\n    var stats\n    var content\n    var result\n    var id\n    // Skip the first two arguments, which are \"node\" and the script:\n    if (index > 1) {\n      stats = fs.statSync(file)\n      if (!stats.isFile()) {\n        console.error(file + ' is not a file.')\n        return\n      }\n      content = fs.readFileSync(file, 'utf8')\n      // eslint-disable-next-line no-constant-condition\n      while (true) {\n        // Find templates in script tags:\n        result = regexp.exec(content)\n        if (!result) {\n          break\n        }\n        id = result[2] || result[4]\n        list.push(\"'\" + id + \"':\" + tmpl.print(result[5]))\n      }\n      if (listLength === list.length) {\n        // No template script tags found, use the complete content:\n        id = path.basename(file, path.extname(file))\n        list.push(\"'\" + id + \"':\" + tmpl.print(content))\n      }\n    }\n  })\n  if (!list.length) {\n    console.error('Missing input file.')\n    return\n  }\n  // Combine the generated functions as cache of the minimal runtime:\n  code = runtime.replace('{}', '{' + list.join(',') + '}')\n  // Print the resulting code to the console output:\n  console.log(code)\n})()\n","Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-orientation.js":"/*\n * JavaScript Load Image Orientation\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2013, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/*\nExif orientation values to correctly display the letter F:\n\n    1             2\n  \u2588\u2588\u2588\u2588\u2588\u2588        \u2588\u2588\u2588\u2588\u2588\u2588\n  \u2588\u2588                \u2588\u2588\n  \u2588\u2588\u2588\u2588            \u2588\u2588\u2588\u2588\n  \u2588\u2588                \u2588\u2588\n  \u2588\u2588                \u2588\u2588\n\n    3             4\n      \u2588\u2588        \u2588\u2588\n      \u2588\u2588        \u2588\u2588\n    \u2588\u2588\u2588\u2588        \u2588\u2588\u2588\u2588\n      \u2588\u2588        \u2588\u2588\n  \u2588\u2588\u2588\u2588\u2588\u2588        \u2588\u2588\u2588\u2588\u2588\u2588\n\n    5             6\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588    \u2588\u2588\n\u2588\u2588  \u2588\u2588        \u2588\u2588  \u2588\u2588\n\u2588\u2588            \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n\n    7             8\n        \u2588\u2588    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n    \u2588\u2588  \u2588\u2588        \u2588\u2588  \u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588            \u2588\u2588\n\n*/\n\n/* global define, module, require */\n\n;(function (factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image', 'Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-scale', 'Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-meta'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(\n      require('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image'),\n      require('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-scale'),\n      require('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-meta')\n    )\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function (loadImage) {\n  'use strict'\n\n  var originalTransform = loadImage.transform\n  var originalRequiresCanvas = loadImage.requiresCanvas\n  var originalRequiresMetaData = loadImage.requiresMetaData\n  var originalTransformCoordinates = loadImage.transformCoordinates\n  var originalGetTransformedOptions = loadImage.getTransformedOptions\n\n  ;(function ($) {\n    // Guard for non-browser environments (e.g. server-side rendering):\n    if (!$.global.document) return\n    // black+white 3x2 JPEG, with the following meta information set:\n    // - EXIF Orientation: 6 (Rotated 90\u00b0 CCW)\n    // Image data layout (B=black, F=white):\n    // BFF\n    // BBB\n    var testImageURL =\n      'data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAA' +\n      'AAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBA' +\n      'QEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQE' +\n      'BAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/x' +\n      'ABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAA' +\n      'AAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQ' +\n      'voP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXw' +\n      'H/9k='\n    var img = document.createElement('img')\n    img.onload = function () {\n      // Check if the browser supports automatic image orientation:\n      $.orientation = img.width === 2 && img.height === 3\n      if ($.orientation) {\n        var canvas = $.createCanvas(1, 1, true)\n        var ctx = canvas.getContext('2d')\n        ctx.drawImage(img, 1, 1, 1, 1, 0, 0, 1, 1)\n        // Check if the source image coordinates (sX, sY, sWidth, sHeight) are\n        // correctly applied to the auto-orientated image, which should result\n        // in a white opaque pixel (e.g. in Safari).\n        // Browsers that show a transparent pixel (e.g. Chromium) fail to crop\n        // auto-oriented images correctly and require a workaround, e.g.\n        // drawing the complete source image to an intermediate canvas first.\n        // See https://bugs.chromium.org/p/chromium/issues/detail?id=1074354\n        $.orientationCropBug =\n          ctx.getImageData(0, 0, 1, 1).data.toString() !== '255,255,255,255'\n      }\n    }\n    img.src = testImageURL\n  })(loadImage)\n\n  /**\n   * Determines if the orientation requires a canvas element.\n   *\n   * @param {object} [options] Options object\n   * @param {boolean} [withMetaData] Is metadata required for orientation\n   * @returns {boolean} Returns true if orientation requires canvas/meta\n   */\n  function requiresCanvasOrientation(options, withMetaData) {\n    var orientation = options && options.orientation\n    return (\n      // Exif orientation for browsers without automatic image orientation:\n      (orientation === true && !loadImage.orientation) ||\n      // Orientation reset for browsers with automatic image orientation:\n      (orientation === 1 && loadImage.orientation) ||\n      // Orientation to defined value, requires meta for orientation reset only:\n      ((!withMetaData || loadImage.orientation) &&\n        orientation > 1 &&\n        orientation < 9)\n    )\n  }\n\n  /**\n   * Determines if the image requires an orientation change.\n   *\n   * @param {number} [orientation] Defined orientation value\n   * @param {number} [autoOrientation] Auto-orientation based on Exif data\n   * @returns {boolean} Returns true if an orientation change is required\n   */\n  function requiresOrientationChange(orientation, autoOrientation) {\n    return (\n      orientation !== autoOrientation &&\n      ((orientation === 1 && autoOrientation > 1 && autoOrientation < 9) ||\n        (orientation > 1 && orientation < 9))\n    )\n  }\n\n  /**\n   * Determines orientation combinations that require a rotation by 180\u00b0.\n   *\n   * The following is a list of combinations that return true:\n   *\n   * 2 (flip) => 5 (rot90,flip), 7 (rot90,flip), 6 (rot90), 8 (rot90)\n   * 4 (flip) => 5 (rot90,flip), 7 (rot90,flip), 6 (rot90), 8 (rot90)\n   *\n   * 5 (rot90,flip) => 2 (flip), 4 (flip), 6 (rot90), 8 (rot90)\n   * 7 (rot90,flip) => 2 (flip), 4 (flip), 6 (rot90), 8 (rot90)\n   *\n   * 6 (rot90) => 2 (flip), 4 (flip), 5 (rot90,flip), 7 (rot90,flip)\n   * 8 (rot90) => 2 (flip), 4 (flip), 5 (rot90,flip), 7 (rot90,flip)\n   *\n   * @param {number} [orientation] Defined orientation value\n   * @param {number} [autoOrientation] Auto-orientation based on Exif data\n   * @returns {boolean} Returns true if rotation by 180\u00b0 is required\n   */\n  function requiresRot180(orientation, autoOrientation) {\n    if (autoOrientation > 1 && autoOrientation < 9) {\n      switch (orientation) {\n        case 2:\n        case 4:\n          return autoOrientation > 4\n        case 5:\n        case 7:\n          return autoOrientation % 2 === 0\n        case 6:\n        case 8:\n          return (\n            autoOrientation === 2 ||\n            autoOrientation === 4 ||\n            autoOrientation === 5 ||\n            autoOrientation === 7\n          )\n      }\n    }\n    return false\n  }\n\n  // Determines if the target image should be a canvas element:\n  loadImage.requiresCanvas = function (options) {\n    return (\n      requiresCanvasOrientation(options) ||\n      originalRequiresCanvas.call(loadImage, options)\n    )\n  }\n\n  // Determines if metadata should be loaded automatically:\n  loadImage.requiresMetaData = function (options) {\n    return (\n      requiresCanvasOrientation(options, true) ||\n      originalRequiresMetaData.call(loadImage, options)\n    )\n  }\n\n  loadImage.transform = function (img, options, callback, file, data) {\n    originalTransform.call(\n      loadImage,\n      img,\n      options,\n      function (img, data) {\n        if (data) {\n          var autoOrientation =\n            loadImage.orientation && data.exif && data.exif.get('Orientation')\n          if (autoOrientation > 4 && autoOrientation < 9) {\n            // Automatic image orientation switched image dimensions\n            var originalWidth = data.originalWidth\n            var originalHeight = data.originalHeight\n            data.originalWidth = originalHeight\n            data.originalHeight = originalWidth\n          }\n        }\n        callback(img, data)\n      },\n      file,\n      data\n    )\n  }\n\n  // Transforms coordinate and dimension options\n  // based on the given orientation option:\n  loadImage.getTransformedOptions = function (img, opts, data) {\n    var options = originalGetTransformedOptions.call(loadImage, img, opts)\n    var exifOrientation = data.exif && data.exif.get('Orientation')\n    var orientation = options.orientation\n    var autoOrientation = loadImage.orientation && exifOrientation\n    if (orientation === true) orientation = exifOrientation\n    if (!requiresOrientationChange(orientation, autoOrientation)) {\n      return options\n    }\n    var top = options.top\n    var right = options.right\n    var bottom = options.bottom\n    var left = options.left\n    var newOptions = {}\n    for (var i in options) {\n      if (Object.prototype.hasOwnProperty.call(options, i)) {\n        newOptions[i] = options[i]\n      }\n    }\n    newOptions.orientation = orientation\n    if (\n      (orientation > 4 && !(autoOrientation > 4)) ||\n      (orientation < 5 && autoOrientation > 4)\n    ) {\n      // Image dimensions and target dimensions are switched\n      newOptions.maxWidth = options.maxHeight\n      newOptions.maxHeight = options.maxWidth\n      newOptions.minWidth = options.minHeight\n      newOptions.minHeight = options.minWidth\n      newOptions.sourceWidth = options.sourceHeight\n      newOptions.sourceHeight = options.sourceWidth\n    }\n    if (autoOrientation > 1) {\n      // Browsers which correctly apply source image coordinates to\n      // auto-oriented images\n      switch (autoOrientation) {\n        case 2:\n          // Horizontal flip\n          right = options.left\n          left = options.right\n          break\n        case 3:\n          // 180\u00b0 Rotate CCW\n          top = options.bottom\n          right = options.left\n          bottom = options.top\n          left = options.right\n          break\n        case 4:\n          // Vertical flip\n          top = options.bottom\n          bottom = options.top\n          break\n        case 5:\n          // Horizontal flip + 90\u00b0 Rotate CCW\n          top = options.left\n          right = options.bottom\n          bottom = options.right\n          left = options.top\n          break\n        case 6:\n          // 90\u00b0 Rotate CCW\n          top = options.left\n          right = options.top\n          bottom = options.right\n          left = options.bottom\n          break\n        case 7:\n          // Vertical flip + 90\u00b0 Rotate CCW\n          top = options.right\n          right = options.top\n          bottom = options.left\n          left = options.bottom\n          break\n        case 8:\n          // 90\u00b0 Rotate CW\n          top = options.right\n          right = options.bottom\n          bottom = options.left\n          left = options.top\n          break\n      }\n      // Some orientation combinations require additional rotation by 180\u00b0:\n      if (requiresRot180(orientation, autoOrientation)) {\n        var tmpTop = top\n        var tmpRight = right\n        top = bottom\n        right = left\n        bottom = tmpTop\n        left = tmpRight\n      }\n    }\n    newOptions.top = top\n    newOptions.right = right\n    newOptions.bottom = bottom\n    newOptions.left = left\n    // Account for defined browser orientation:\n    switch (orientation) {\n      case 2:\n        // Horizontal flip\n        newOptions.right = left\n        newOptions.left = right\n        break\n      case 3:\n        // 180\u00b0 Rotate CCW\n        newOptions.top = bottom\n        newOptions.right = left\n        newOptions.bottom = top\n        newOptions.left = right\n        break\n      case 4:\n        // Vertical flip\n        newOptions.top = bottom\n        newOptions.bottom = top\n        break\n      case 5:\n        // Vertical flip + 90\u00b0 Rotate CW\n        newOptions.top = left\n        newOptions.right = bottom\n        newOptions.bottom = right\n        newOptions.left = top\n        break\n      case 6:\n        // 90\u00b0 Rotate CW\n        newOptions.top = right\n        newOptions.right = bottom\n        newOptions.bottom = left\n        newOptions.left = top\n        break\n      case 7:\n        // Horizontal flip + 90\u00b0 Rotate CW\n        newOptions.top = right\n        newOptions.right = top\n        newOptions.bottom = left\n        newOptions.left = bottom\n        break\n      case 8:\n        // 90\u00b0 Rotate CCW\n        newOptions.top = left\n        newOptions.right = top\n        newOptions.bottom = right\n        newOptions.left = bottom\n        break\n    }\n    return newOptions\n  }\n\n  // Transform image orientation based on the given EXIF orientation option:\n  loadImage.transformCoordinates = function (canvas, options, data) {\n    originalTransformCoordinates.call(loadImage, canvas, options, data)\n    var orientation = options.orientation\n    var autoOrientation =\n      loadImage.orientation && data.exif && data.exif.get('Orientation')\n    if (!requiresOrientationChange(orientation, autoOrientation)) {\n      return\n    }\n    var ctx = canvas.getContext('2d')\n    var width = canvas.width\n    var height = canvas.height\n    var sourceWidth = width\n    var sourceHeight = height\n    if (\n      (orientation > 4 && !(autoOrientation > 4)) ||\n      (orientation < 5 && autoOrientation > 4)\n    ) {\n      // Image dimensions and target dimensions are switched\n      canvas.width = height\n      canvas.height = width\n    }\n    if (orientation > 4) {\n      // Destination and source dimensions are switched\n      sourceWidth = height\n      sourceHeight = width\n    }\n    // Reset automatic browser orientation:\n    switch (autoOrientation) {\n      case 2:\n        // Horizontal flip\n        ctx.translate(sourceWidth, 0)\n        ctx.scale(-1, 1)\n        break\n      case 3:\n        // 180\u00b0 Rotate CCW\n        ctx.translate(sourceWidth, sourceHeight)\n        ctx.rotate(Math.PI)\n        break\n      case 4:\n        // Vertical flip\n        ctx.translate(0, sourceHeight)\n        ctx.scale(1, -1)\n        break\n      case 5:\n        // Horizontal flip + 90\u00b0 Rotate CCW\n        ctx.rotate(-0.5 * Math.PI)\n        ctx.scale(-1, 1)\n        break\n      case 6:\n        // 90\u00b0 Rotate CCW\n        ctx.rotate(-0.5 * Math.PI)\n        ctx.translate(-sourceWidth, 0)\n        break\n      case 7:\n        // Vertical flip + 90\u00b0 Rotate CCW\n        ctx.rotate(-0.5 * Math.PI)\n        ctx.translate(-sourceWidth, sourceHeight)\n        ctx.scale(1, -1)\n        break\n      case 8:\n        // 90\u00b0 Rotate CW\n        ctx.rotate(0.5 * Math.PI)\n        ctx.translate(0, -sourceHeight)\n        break\n    }\n    // Some orientation combinations require additional rotation by 180\u00b0:\n    if (requiresRot180(orientation, autoOrientation)) {\n      ctx.translate(sourceWidth, sourceHeight)\n      ctx.rotate(Math.PI)\n    }\n    switch (orientation) {\n      case 2:\n        // Horizontal flip\n        ctx.translate(width, 0)\n        ctx.scale(-1, 1)\n        break\n      case 3:\n        // 180\u00b0 Rotate CCW\n        ctx.translate(width, height)\n        ctx.rotate(Math.PI)\n        break\n      case 4:\n        // Vertical flip\n        ctx.translate(0, height)\n        ctx.scale(1, -1)\n        break\n      case 5:\n        // Vertical flip + 90\u00b0 Rotate CW\n        ctx.rotate(0.5 * Math.PI)\n        ctx.scale(1, -1)\n        break\n      case 6:\n        // 90\u00b0 Rotate CW\n        ctx.rotate(0.5 * Math.PI)\n        ctx.translate(0, -height)\n        break\n      case 7:\n        // Horizontal flip + 90\u00b0 Rotate CW\n        ctx.rotate(0.5 * Math.PI)\n        ctx.translate(width, -height)\n        ctx.scale(-1, 1)\n        break\n      case 8:\n        // 90\u00b0 Rotate CCW\n        ctx.rotate(-0.5 * Math.PI)\n        ctx.translate(-width, 0)\n        break\n    }\n  }\n})\n","Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-meta.js":"/*\n * JavaScript Load Image Meta\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2013, Sebastian Tschan\n * https://blueimp.net\n *\n * Image metadata handling implementation\n * based on the help and contribution of\n * Achim St\u00f6hr.\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require, Promise, DataView, Uint8Array, ArrayBuffer */\n\n;(function (factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image'))\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function (loadImage) {\n  'use strict'\n\n  var global = loadImage.global\n  var originalTransform = loadImage.transform\n\n  var blobSlice =\n    global.Blob &&\n    (Blob.prototype.slice ||\n      Blob.prototype.webkitSlice ||\n      Blob.prototype.mozSlice)\n\n  var bufferSlice =\n    (global.ArrayBuffer && ArrayBuffer.prototype.slice) ||\n    function (begin, end) {\n      // Polyfill for IE10, which does not support ArrayBuffer.slice\n      // eslint-disable-next-line no-param-reassign\n      end = end || this.byteLength - begin\n      var arr1 = new Uint8Array(this, begin, end)\n      var arr2 = new Uint8Array(end)\n      arr2.set(arr1)\n      return arr2.buffer\n    }\n\n  var metaDataParsers = {\n    jpeg: {\n      0xffe1: [], // APP1 marker\n      0xffed: [] // APP13 marker\n    }\n  }\n\n  /**\n   * Parses image metadata and calls the callback with an object argument\n   * with the following property:\n   * - imageHead: The complete image head as ArrayBuffer\n   * The options argument accepts an object and supports the following\n   * properties:\n   * - maxMetaDataSize: Defines the maximum number of bytes to parse.\n   * - disableImageHead: Disables creating the imageHead property.\n   *\n   * @param {Blob} file Blob object\n   * @param {Function} [callback] Callback function\n   * @param {object} [options] Parsing options\n   * @param {object} [data] Result data object\n   * @returns {Promise<object>|undefined} Returns Promise if no callback given.\n   */\n  function parseMetaData(file, callback, options, data) {\n    var that = this\n    /**\n     * Promise executor\n     *\n     * @param {Function} resolve Resolution function\n     * @param {Function} reject Rejection function\n     * @returns {undefined} Undefined\n     */\n    function executor(resolve, reject) {\n      if (\n        !(\n          global.DataView &&\n          blobSlice &&\n          file &&\n          file.size >= 12 &&\n          file.type === 'image/jpeg'\n        )\n      ) {\n        // Nothing to parse\n        return resolve(data)\n      }\n      // 256 KiB should contain all EXIF/ICC/IPTC segments:\n      var maxMetaDataSize = options.maxMetaDataSize || 262144\n      if (\n        !loadImage.readFile(\n          blobSlice.call(file, 0, maxMetaDataSize),\n          function (buffer) {\n            // Note on endianness:\n            // Since the marker and length bytes in JPEG files are always\n            // stored in big endian order, we can leave the endian parameter\n            // of the DataView methods undefined, defaulting to big endian.\n            var dataView = new DataView(buffer)\n            // Check for the JPEG marker (0xffd8):\n            if (dataView.getUint16(0) !== 0xffd8) {\n              return reject(\n                new Error('Invalid JPEG file: Missing JPEG marker.')\n              )\n            }\n            var offset = 2\n            var maxOffset = dataView.byteLength - 4\n            var headLength = offset\n            var markerBytes\n            var markerLength\n            var parsers\n            var i\n            while (offset < maxOffset) {\n              markerBytes = dataView.getUint16(offset)\n              // Search for APPn (0xffeN) and COM (0xfffe) markers,\n              // which contain application-specific metadata like\n              // Exif, ICC and IPTC data and text comments:\n              if (\n                (markerBytes >= 0xffe0 && markerBytes <= 0xffef) ||\n                markerBytes === 0xfffe\n              ) {\n                // The marker bytes (2) are always followed by\n                // the length bytes (2), indicating the length of the\n                // marker segment, which includes the length bytes,\n                // but not the marker bytes, so we add 2:\n                markerLength = dataView.getUint16(offset + 2) + 2\n                if (offset + markerLength > dataView.byteLength) {\n                  // eslint-disable-next-line no-console\n                  console.log('Invalid JPEG metadata: Invalid segment size.')\n                  break\n                }\n                parsers = metaDataParsers.jpeg[markerBytes]\n                if (parsers && !options.disableMetaDataParsers) {\n                  for (i = 0; i < parsers.length; i += 1) {\n                    parsers[i].call(\n                      that,\n                      dataView,\n                      offset,\n                      markerLength,\n                      data,\n                      options\n                    )\n                  }\n                }\n                offset += markerLength\n                headLength = offset\n              } else {\n                // Not an APPn or COM marker, probably safe to\n                // assume that this is the end of the metadata\n                break\n              }\n            }\n            // Meta length must be longer than JPEG marker (2)\n            // plus APPn marker (2), followed by length bytes (2):\n            if (!options.disableImageHead && headLength > 6) {\n              data.imageHead = bufferSlice.call(buffer, 0, headLength)\n            }\n            resolve(data)\n          },\n          reject,\n          'readAsArrayBuffer'\n        )\n      ) {\n        // No support for the FileReader interface, nothing to parse\n        resolve(data)\n      }\n    }\n    options = options || {} // eslint-disable-line no-param-reassign\n    if (global.Promise && typeof callback !== 'function') {\n      options = callback || {} // eslint-disable-line no-param-reassign\n      data = options // eslint-disable-line no-param-reassign\n      return new Promise(executor)\n    }\n    data = data || {} // eslint-disable-line no-param-reassign\n    return executor(callback, callback)\n  }\n\n  /**\n   * Replaces the head of a JPEG Blob\n   *\n   * @param {Blob} blob Blob object\n   * @param {ArrayBuffer} oldHead Old JPEG head\n   * @param {ArrayBuffer} newHead New JPEG head\n   * @returns {Blob} Combined Blob\n   */\n  function replaceJPEGHead(blob, oldHead, newHead) {\n    if (!blob || !oldHead || !newHead) return null\n    return new Blob([newHead, blobSlice.call(blob, oldHead.byteLength)], {\n      type: 'image/jpeg'\n    })\n  }\n\n  /**\n   * Replaces the image head of a JPEG blob with the given one.\n   * Returns a Promise or calls the callback with the new Blob.\n   *\n   * @param {Blob} blob Blob object\n   * @param {ArrayBuffer} head New JPEG head\n   * @param {Function} [callback] Callback function\n   * @returns {Promise<Blob|null>|undefined} Combined Blob\n   */\n  function replaceHead(blob, head, callback) {\n    var options = { maxMetaDataSize: 256, disableMetaDataParsers: true }\n    if (!callback && global.Promise) {\n      return parseMetaData(blob, options).then(function (data) {\n        return replaceJPEGHead(blob, data.imageHead, head)\n      })\n    }\n    parseMetaData(\n      blob,\n      function (data) {\n        callback(replaceJPEGHead(blob, data.imageHead, head))\n      },\n      options\n    )\n  }\n\n  loadImage.transform = function (img, options, callback, file, data) {\n    if (loadImage.requiresMetaData(options)) {\n      data = data || {} // eslint-disable-line no-param-reassign\n      parseMetaData(\n        file,\n        function (result) {\n          if (result !== data) {\n            // eslint-disable-next-line no-console\n            if (global.console) console.log(result)\n            result = data // eslint-disable-line no-param-reassign\n          }\n          originalTransform.call(\n            loadImage,\n            img,\n            options,\n            callback,\n            file,\n            result\n          )\n        },\n        options,\n        data\n      )\n    } else {\n      originalTransform.apply(loadImage, arguments)\n    }\n  }\n\n  loadImage.blobSlice = blobSlice\n  loadImage.bufferSlice = bufferSlice\n  loadImage.replaceHead = replaceHead\n  loadImage.parseMetaData = parseMetaData\n  loadImage.metaDataParsers = metaDataParsers\n})\n","Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image.js":"/*\n * JavaScript Load Image\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, Promise */\n\n;(function ($) {\n  'use strict'\n\n  var urlAPI = $.URL || $.webkitURL\n\n  /**\n   * Creates an object URL for a given File object.\n   *\n   * @param {Blob} blob Blob object\n   * @returns {string|boolean} Returns object URL if API exists, else false.\n   */\n  function createObjectURL(blob) {\n    return urlAPI ? urlAPI.createObjectURL(blob) : false\n  }\n\n  /**\n   * Revokes a given object URL.\n   *\n   * @param {string} url Blob object URL\n   * @returns {undefined|boolean} Returns undefined if API exists, else false.\n   */\n  function revokeObjectURL(url) {\n    return urlAPI ? urlAPI.revokeObjectURL(url) : false\n  }\n\n  /**\n   * Helper function to revoke an object URL\n   *\n   * @param {string} url Blob Object URL\n   * @param {object} [options] Options object\n   */\n  function revokeHelper(url, options) {\n    if (url && url.slice(0, 5) === 'blob:' && !(options && options.noRevoke)) {\n      revokeObjectURL(url)\n    }\n  }\n\n  /**\n   * Loads a given File object via FileReader interface.\n   *\n   * @param {Blob} file Blob object\n   * @param {Function} onload Load event callback\n   * @param {Function} [onerror] Error/Abort event callback\n   * @param {string} [method=readAsDataURL] FileReader method\n   * @returns {FileReader|boolean} Returns FileReader if API exists, else false.\n   */\n  function readFile(file, onload, onerror, method) {\n    if (!$.FileReader) return false\n    var reader = new FileReader()\n    reader.onload = function () {\n      onload.call(reader, this.result)\n    }\n    if (onerror) {\n      reader.onabort = reader.onerror = function () {\n        onerror.call(reader, this.error)\n      }\n    }\n    var readerMethod = reader[method || 'readAsDataURL']\n    if (readerMethod) {\n      readerMethod.call(reader, file)\n      return reader\n    }\n  }\n\n  /**\n   * Cross-frame instanceof check.\n   *\n   * @param {string} type Instance type\n   * @param {object} obj Object instance\n   * @returns {boolean} Returns true if the object is of the given instance.\n   */\n  function isInstanceOf(type, obj) {\n    // Cross-frame instanceof check\n    return Object.prototype.toString.call(obj) === '[object ' + type + ']'\n  }\n\n  /**\n   * @typedef { HTMLImageElement|HTMLCanvasElement } Result\n   */\n\n  /**\n   * Loads an image for a given File object.\n   *\n   * @param {Blob|string} file Blob object or image URL\n   * @param {Function|object} [callback] Image load event callback or options\n   * @param {object} [options] Options object\n   * @returns {HTMLImageElement|FileReader|Promise<Result>} Object\n   */\n  function loadImage(file, callback, options) {\n    /**\n     * Promise executor\n     *\n     * @param {Function} resolve Resolution function\n     * @param {Function} reject Rejection function\n     * @returns {HTMLImageElement|FileReader} Object\n     */\n    function executor(resolve, reject) {\n      var img = document.createElement('img')\n      var url\n      /**\n       * Callback for the fetchBlob call.\n       *\n       * @param {HTMLImageElement|HTMLCanvasElement} img Error object\n       * @param {object} data Data object\n       * @returns {undefined} Undefined\n       */\n      function resolveWrapper(img, data) {\n        if (resolve === reject) {\n          // Not using Promises\n          if (resolve) resolve(img, data)\n          return\n        } else if (img instanceof Error) {\n          reject(img)\n          return\n        }\n        data = data || {} // eslint-disable-line no-param-reassign\n        data.image = img\n        resolve(data)\n      }\n      /**\n       * Callback for the fetchBlob call.\n       *\n       * @param {Blob} blob Blob object\n       * @param {Error} err Error object\n       */\n      function fetchBlobCallback(blob, err) {\n        if (err && $.console) console.log(err) // eslint-disable-line no-console\n        if (blob && isInstanceOf('Blob', blob)) {\n          file = blob // eslint-disable-line no-param-reassign\n          url = createObjectURL(file)\n        } else {\n          url = file\n          if (options && options.crossOrigin) {\n            img.crossOrigin = options.crossOrigin\n          }\n        }\n        img.src = url\n      }\n      img.onerror = function (event) {\n        revokeHelper(url, options)\n        if (reject) reject.call(img, event)\n      }\n      img.onload = function () {\n        revokeHelper(url, options)\n        var data = {\n          originalWidth: img.naturalWidth || img.width,\n          originalHeight: img.naturalHeight || img.height\n        }\n        try {\n          loadImage.transform(img, options, resolveWrapper, file, data)\n        } catch (error) {\n          if (reject) reject(error)\n        }\n      }\n      if (typeof file === 'string') {\n        if (loadImage.requiresMetaData(options)) {\n          loadImage.fetchBlob(file, fetchBlobCallback, options)\n        } else {\n          fetchBlobCallback()\n        }\n        return img\n      } else if (isInstanceOf('Blob', file) || isInstanceOf('File', file)) {\n        url = createObjectURL(file)\n        if (url) {\n          img.src = url\n          return img\n        }\n        return readFile(\n          file,\n          function (url) {\n            img.src = url\n          },\n          reject\n        )\n      }\n    }\n    if ($.Promise && typeof callback !== 'function') {\n      options = callback // eslint-disable-line no-param-reassign\n      return new Promise(executor)\n    }\n    return executor(callback, callback)\n  }\n\n  // Determines if metadata should be loaded automatically.\n  // Requires the load image meta extension to load metadata.\n  loadImage.requiresMetaData = function (options) {\n    return options && options.meta\n  }\n\n  // If the callback given to this function returns a blob, it is used as image\n  // source instead of the original url and overrides the file argument used in\n  // the onload and onerror event callbacks:\n  loadImage.fetchBlob = function (url, callback) {\n    callback()\n  }\n\n  loadImage.transform = function (img, options, callback, file, data) {\n    callback(img, data)\n  }\n\n  loadImage.global = $\n  loadImage.readFile = readFile\n  loadImage.isInstanceOf = isInstanceOf\n  loadImage.createObjectURL = createObjectURL\n  loadImage.revokeObjectURL = revokeObjectURL\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return loadImage\n    })\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = loadImage\n  } else {\n    $.loadImage = loadImage\n  }\n})((typeof window !== 'undefined' && window) || this)\n","Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/index.js":"/* global module, require */\n\nmodule.exports = require('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image')\n\nrequire('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-scale')\nrequire('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-meta')\nrequire('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-fetch')\nrequire('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-exif')\nrequire('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-exif-map')\nrequire('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-iptc')\nrequire('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-iptc-map')\nrequire('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-orientation')\n","Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-iptc-map.js":"/*\n * JavaScript Load Image IPTC Map\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2013, Sebastian Tschan\n * Copyright 2018, Dave Bevan\n *\n * IPTC tags mapping based on\n * https://iptc.org/standards/photo-metadata\n * https://exiftool.org/TagNames/IPTC.html\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require */\n\n;(function (factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image', 'Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-iptc'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image'), require('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-iptc'))\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function (loadImage) {\n  'use strict'\n\n  var IptcMapProto = loadImage.IptcMap.prototype\n\n  IptcMapProto.tags = {\n    0: 'ApplicationRecordVersion',\n    3: 'ObjectTypeReference',\n    4: 'ObjectAttributeReference',\n    5: 'ObjectName',\n    7: 'EditStatus',\n    8: 'EditorialUpdate',\n    10: 'Urgency',\n    12: 'SubjectReference',\n    15: 'Category',\n    20: 'SupplementalCategories',\n    22: 'FixtureIdentifier',\n    25: 'Keywords',\n    26: 'ContentLocationCode',\n    27: 'ContentLocationName',\n    30: 'ReleaseDate',\n    35: 'ReleaseTime',\n    37: 'ExpirationDate',\n    38: 'ExpirationTime',\n    40: 'SpecialInstructions',\n    42: 'ActionAdvised',\n    45: 'ReferenceService',\n    47: 'ReferenceDate',\n    50: 'ReferenceNumber',\n    55: 'DateCreated',\n    60: 'TimeCreated',\n    62: 'DigitalCreationDate',\n    63: 'DigitalCreationTime',\n    65: 'OriginatingProgram',\n    70: 'ProgramVersion',\n    75: 'ObjectCycle',\n    80: 'Byline',\n    85: 'BylineTitle',\n    90: 'City',\n    92: 'Sublocation',\n    95: 'State',\n    100: 'CountryCode',\n    101: 'Country',\n    103: 'OriginalTransmissionReference',\n    105: 'Headline',\n    110: 'Credit',\n    115: 'Source',\n    116: 'CopyrightNotice',\n    118: 'Contact',\n    120: 'Caption',\n    121: 'LocalCaption',\n    122: 'Writer',\n    125: 'RasterizedCaption',\n    130: 'ImageType',\n    131: 'ImageOrientation',\n    135: 'LanguageIdentifier',\n    150: 'AudioType',\n    151: 'AudioSamplingRate',\n    152: 'AudioSamplingResolution',\n    153: 'AudioDuration',\n    154: 'AudioOutcue',\n    184: 'JobID',\n    185: 'MasterDocumentID',\n    186: 'ShortDocumentID',\n    187: 'UniqueDocumentID',\n    188: 'OwnerID',\n    200: 'ObjectPreviewFileFormat',\n    201: 'ObjectPreviewFileVersion',\n    202: 'ObjectPreviewData',\n    221: 'Prefs',\n    225: 'ClassifyState',\n    228: 'SimilarityIndex',\n    230: 'DocumentNotes',\n    231: 'DocumentHistory',\n    232: 'ExifCameraInfo',\n    255: 'CatalogSets'\n  }\n\n  IptcMapProto.stringValues = {\n    10: {\n      0: '0 (reserved)',\n      1: '1 (most urgent)',\n      2: '2',\n      3: '3',\n      4: '4',\n      5: '5 (normal urgency)',\n      6: '6',\n      7: '7',\n      8: '8 (least urgent)',\n      9: '9 (user-defined priority)'\n    },\n    75: {\n      a: 'Morning',\n      b: 'Both Morning and Evening',\n      p: 'Evening'\n    },\n    131: {\n      L: 'Landscape',\n      P: 'Portrait',\n      S: 'Square'\n    }\n  }\n\n  IptcMapProto.getText = function (id) {\n    var value = this.get(id)\n    var tagCode = this.map[id]\n    var stringValue = this.stringValues[tagCode]\n    if (stringValue) return stringValue[value]\n    return String(value)\n  }\n\n  IptcMapProto.getAll = function () {\n    var map = {}\n    var prop\n    var name\n    for (prop in this) {\n      if (Object.prototype.hasOwnProperty.call(this, prop)) {\n        name = this.tags[prop]\n        if (name) map[name] = this.getText(name)\n      }\n    }\n    return map\n  }\n\n  IptcMapProto.getName = function (tagCode) {\n    return this.tags[tagCode]\n  }\n\n  // Extend the map of tag names to tag codes:\n  ;(function () {\n    var tags = IptcMapProto.tags\n    var map = IptcMapProto.map || {}\n    var prop\n    // Map the tag names to tags:\n    for (prop in tags) {\n      if (Object.prototype.hasOwnProperty.call(tags, prop)) {\n        map[tags[prop]] = Number(prop)\n      }\n    }\n  })()\n})\n","Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-exif.js":"/*\n * JavaScript Load Image Exif Parser\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2013, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require, DataView */\n\n/* eslint-disable no-console */\n\n;(function (factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image', 'Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-meta'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image'), require('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-meta'))\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function (loadImage) {\n  'use strict'\n\n  /**\n   * Exif tag map\n   *\n   * @name ExifMap\n   * @class\n   * @param {number|string} tagCode IFD tag code\n   */\n  function ExifMap(tagCode) {\n    if (tagCode) {\n      Object.defineProperty(this, 'map', {\n        value: this.ifds[tagCode].map\n      })\n      Object.defineProperty(this, 'tags', {\n        value: (this.tags && this.tags[tagCode]) || {}\n      })\n    }\n  }\n\n  ExifMap.prototype.map = {\n    Orientation: 0x0112,\n    Thumbnail: 'ifd1',\n    Blob: 0x0201, // Alias for JPEGInterchangeFormat\n    Exif: 0x8769,\n    GPSInfo: 0x8825,\n    Interoperability: 0xa005\n  }\n\n  ExifMap.prototype.ifds = {\n    ifd1: { name: 'Thumbnail', map: ExifMap.prototype.map },\n    0x8769: { name: 'Exif', map: {} },\n    0x8825: { name: 'GPSInfo', map: {} },\n    0xa005: { name: 'Interoperability', map: {} }\n  }\n\n  /**\n   * Retrieves exif tag value\n   *\n   * @param {number|string} id Exif tag code or name\n   * @returns {object} Exif tag value\n   */\n  ExifMap.prototype.get = function (id) {\n    return this[id] || this[this.map[id]]\n  }\n\n  /**\n   * Returns the Exif Thumbnail data as Blob.\n   *\n   * @param {DataView} dataView Data view interface\n   * @param {number} offset Thumbnail data offset\n   * @param {number} length Thumbnail data length\n   * @returns {undefined|Blob} Returns the Thumbnail Blob or undefined\n   */\n  function getExifThumbnail(dataView, offset, length) {\n    if (!length) return\n    if (offset + length > dataView.byteLength) {\n      console.log('Invalid Exif data: Invalid thumbnail data.')\n      return\n    }\n    return new Blob(\n      [loadImage.bufferSlice.call(dataView.buffer, offset, offset + length)],\n      {\n        type: 'image/jpeg'\n      }\n    )\n  }\n\n  var ExifTagTypes = {\n    // byte, 8-bit unsigned int:\n    1: {\n      getValue: function (dataView, dataOffset) {\n        return dataView.getUint8(dataOffset)\n      },\n      size: 1\n    },\n    // ascii, 8-bit byte:\n    2: {\n      getValue: function (dataView, dataOffset) {\n        return String.fromCharCode(dataView.getUint8(dataOffset))\n      },\n      size: 1,\n      ascii: true\n    },\n    // short, 16 bit int:\n    3: {\n      getValue: function (dataView, dataOffset, littleEndian) {\n        return dataView.getUint16(dataOffset, littleEndian)\n      },\n      size: 2\n    },\n    // long, 32 bit int:\n    4: {\n      getValue: function (dataView, dataOffset, littleEndian) {\n        return dataView.getUint32(dataOffset, littleEndian)\n      },\n      size: 4\n    },\n    // rational = two long values, first is numerator, second is denominator:\n    5: {\n      getValue: function (dataView, dataOffset, littleEndian) {\n        return (\n          dataView.getUint32(dataOffset, littleEndian) /\n          dataView.getUint32(dataOffset + 4, littleEndian)\n        )\n      },\n      size: 8\n    },\n    // slong, 32 bit signed int:\n    9: {\n      getValue: function (dataView, dataOffset, littleEndian) {\n        return dataView.getInt32(dataOffset, littleEndian)\n      },\n      size: 4\n    },\n    // srational, two slongs, first is numerator, second is denominator:\n    10: {\n      getValue: function (dataView, dataOffset, littleEndian) {\n        return (\n          dataView.getInt32(dataOffset, littleEndian) /\n          dataView.getInt32(dataOffset + 4, littleEndian)\n        )\n      },\n      size: 8\n    }\n  }\n  // undefined, 8-bit byte, value depending on field:\n  ExifTagTypes[7] = ExifTagTypes[1]\n\n  /**\n   * Returns Exif tag value.\n   *\n   * @param {DataView} dataView Data view interface\n   * @param {number} tiffOffset TIFF offset\n   * @param {number} offset Tag offset\n   * @param {number} type Tag type\n   * @param {number} length Tag length\n   * @param {boolean} littleEndian Little endian encoding\n   * @returns {object} Tag value\n   */\n  function getExifValue(\n    dataView,\n    tiffOffset,\n    offset,\n    type,\n    length,\n    littleEndian\n  ) {\n    var tagType = ExifTagTypes[type]\n    var tagSize\n    var dataOffset\n    var values\n    var i\n    var str\n    var c\n    if (!tagType) {\n      console.log('Invalid Exif data: Invalid tag type.')\n      return\n    }\n    tagSize = tagType.size * length\n    // Determine if the value is contained in the dataOffset bytes,\n    // or if the value at the dataOffset is a pointer to the actual data:\n    dataOffset =\n      tagSize > 4\n        ? tiffOffset + dataView.getUint32(offset + 8, littleEndian)\n        : offset + 8\n    if (dataOffset + tagSize > dataView.byteLength) {\n      console.log('Invalid Exif data: Invalid data offset.')\n      return\n    }\n    if (length === 1) {\n      return tagType.getValue(dataView, dataOffset, littleEndian)\n    }\n    values = []\n    for (i = 0; i < length; i += 1) {\n      values[i] = tagType.getValue(\n        dataView,\n        dataOffset + i * tagType.size,\n        littleEndian\n      )\n    }\n    if (tagType.ascii) {\n      str = ''\n      // Concatenate the chars:\n      for (i = 0; i < values.length; i += 1) {\n        c = values[i]\n        // Ignore the terminating NULL byte(s):\n        if (c === '\\u0000') {\n          break\n        }\n        str += c\n      }\n      return str\n    }\n    return values\n  }\n\n  /**\n   * Determines if the given tag should be included.\n   *\n   * @param {object} includeTags Map of tags to include\n   * @param {object} excludeTags Map of tags to exclude\n   * @param {number|string} tagCode Tag code to check\n   * @returns {boolean} True if the tag should be included\n   */\n  function shouldIncludeTag(includeTags, excludeTags, tagCode) {\n    return (\n      (!includeTags || includeTags[tagCode]) &&\n      (!excludeTags || excludeTags[tagCode] !== true)\n    )\n  }\n\n  /**\n   * Parses Exif tags.\n   *\n   * @param {DataView} dataView Data view interface\n   * @param {number} tiffOffset TIFF offset\n   * @param {number} dirOffset Directory offset\n   * @param {boolean} littleEndian Little endian encoding\n   * @param {ExifMap} tags Map to store parsed exif tags\n   * @param {ExifMap} tagOffsets Map to store parsed exif tag offsets\n   * @param {object} includeTags Map of tags to include\n   * @param {object} excludeTags Map of tags to exclude\n   * @returns {number} Next directory offset\n   */\n  function parseExifTags(\n    dataView,\n    tiffOffset,\n    dirOffset,\n    littleEndian,\n    tags,\n    tagOffsets,\n    includeTags,\n    excludeTags\n  ) {\n    var tagsNumber, dirEndOffset, i, tagOffset, tagNumber, tagValue\n    if (dirOffset + 6 > dataView.byteLength) {\n      console.log('Invalid Exif data: Invalid directory offset.')\n      return\n    }\n    tagsNumber = dataView.getUint16(dirOffset, littleEndian)\n    dirEndOffset = dirOffset + 2 + 12 * tagsNumber\n    if (dirEndOffset + 4 > dataView.byteLength) {\n      console.log('Invalid Exif data: Invalid directory size.')\n      return\n    }\n    for (i = 0; i < tagsNumber; i += 1) {\n      tagOffset = dirOffset + 2 + 12 * i\n      tagNumber = dataView.getUint16(tagOffset, littleEndian)\n      if (!shouldIncludeTag(includeTags, excludeTags, tagNumber)) continue\n      tagValue = getExifValue(\n        dataView,\n        tiffOffset,\n        tagOffset,\n        dataView.getUint16(tagOffset + 2, littleEndian), // tag type\n        dataView.getUint32(tagOffset + 4, littleEndian), // tag length\n        littleEndian\n      )\n      tags[tagNumber] = tagValue\n      if (tagOffsets) {\n        tagOffsets[tagNumber] = tagOffset\n      }\n    }\n    // Return the offset to the next directory:\n    return dataView.getUint32(dirEndOffset, littleEndian)\n  }\n\n  /**\n   * Parses tags in a given IFD (Image File Directory).\n   *\n   * @param {object} data Data object to store exif tags and offsets\n   * @param {number|string} tagCode IFD tag code\n   * @param {DataView} dataView Data view interface\n   * @param {number} tiffOffset TIFF offset\n   * @param {boolean} littleEndian Little endian encoding\n   * @param {object} includeTags Map of tags to include\n   * @param {object} excludeTags Map of tags to exclude\n   */\n  function parseExifIFD(\n    data,\n    tagCode,\n    dataView,\n    tiffOffset,\n    littleEndian,\n    includeTags,\n    excludeTags\n  ) {\n    var dirOffset = data.exif[tagCode]\n    if (dirOffset) {\n      data.exif[tagCode] = new ExifMap(tagCode)\n      if (data.exifOffsets) {\n        data.exifOffsets[tagCode] = new ExifMap(tagCode)\n      }\n      parseExifTags(\n        dataView,\n        tiffOffset,\n        tiffOffset + dirOffset,\n        littleEndian,\n        data.exif[tagCode],\n        data.exifOffsets && data.exifOffsets[tagCode],\n        includeTags && includeTags[tagCode],\n        excludeTags && excludeTags[tagCode]\n      )\n    }\n  }\n\n  loadImage.parseExifData = function (dataView, offset, length, data, options) {\n    if (options.disableExif) {\n      return\n    }\n    var includeTags = options.includeExifTags\n    var excludeTags = options.excludeExifTags || {\n      0x8769: {\n        // ExifIFDPointer\n        0x927c: true // MakerNote\n      }\n    }\n    var tiffOffset = offset + 10\n    var littleEndian\n    var dirOffset\n    var thumbnailIFD\n    // Check for the ASCII code for \"Exif\" (0x45786966):\n    if (dataView.getUint32(offset + 4) !== 0x45786966) {\n      // No Exif data, might be XMP data instead\n      return\n    }\n    if (tiffOffset + 8 > dataView.byteLength) {\n      console.log('Invalid Exif data: Invalid segment size.')\n      return\n    }\n    // Check for the two null bytes:\n    if (dataView.getUint16(offset + 8) !== 0x0000) {\n      console.log('Invalid Exif data: Missing byte alignment offset.')\n      return\n    }\n    // Check the byte alignment:\n    switch (dataView.getUint16(tiffOffset)) {\n      case 0x4949:\n        littleEndian = true\n        break\n      case 0x4d4d:\n        littleEndian = false\n        break\n      default:\n        console.log('Invalid Exif data: Invalid byte alignment marker.')\n        return\n    }\n    // Check for the TIFF tag marker (0x002A):\n    if (dataView.getUint16(tiffOffset + 2, littleEndian) !== 0x002a) {\n      console.log('Invalid Exif data: Missing TIFF marker.')\n      return\n    }\n    // Retrieve the directory offset bytes, usually 0x00000008 or 8 decimal:\n    dirOffset = dataView.getUint32(tiffOffset + 4, littleEndian)\n    // Create the exif object to store the tags:\n    data.exif = new ExifMap()\n    if (!options.disableExifOffsets) {\n      data.exifOffsets = new ExifMap()\n      data.exifTiffOffset = tiffOffset\n      data.exifLittleEndian = littleEndian\n    }\n    // Parse the tags of the main image directory (IFD0) and retrieve the\n    // offset to the next directory (IFD1), usually the thumbnail directory:\n    dirOffset = parseExifTags(\n      dataView,\n      tiffOffset,\n      tiffOffset + dirOffset,\n      littleEndian,\n      data.exif,\n      data.exifOffsets,\n      includeTags,\n      excludeTags\n    )\n    if (dirOffset && shouldIncludeTag(includeTags, excludeTags, 'ifd1')) {\n      data.exif.ifd1 = dirOffset\n      if (data.exifOffsets) {\n        data.exifOffsets.ifd1 = tiffOffset + dirOffset\n      }\n    }\n    Object.keys(data.exif.ifds).forEach(function (tagCode) {\n      parseExifIFD(\n        data,\n        tagCode,\n        dataView,\n        tiffOffset,\n        littleEndian,\n        includeTags,\n        excludeTags\n      )\n    })\n    thumbnailIFD = data.exif.ifd1\n    // Check for JPEG Thumbnail offset and data length:\n    if (thumbnailIFD && thumbnailIFD[0x0201]) {\n      thumbnailIFD[0x0201] = getExifThumbnail(\n        dataView,\n        tiffOffset + thumbnailIFD[0x0201],\n        thumbnailIFD[0x0202] // Thumbnail data length\n      )\n    }\n  }\n\n  // Registers the Exif parser for the APP1 JPEG metadata segment:\n  loadImage.metaDataParsers.jpeg[0xffe1].push(loadImage.parseExifData)\n\n  loadImage.exifWriters = {\n    // Orientation writer:\n    0x0112: function (buffer, data, value) {\n      var orientationOffset = data.exifOffsets[0x0112]\n      if (!orientationOffset) return buffer\n      var view = new DataView(buffer, orientationOffset + 8, 2)\n      view.setUint16(0, value, data.exifLittleEndian)\n      return buffer\n    }\n  }\n\n  loadImage.writeExifData = function (buffer, data, id, value) {\n    loadImage.exifWriters[data.exif.map[id]](buffer, data, value)\n  }\n\n  loadImage.ExifMap = ExifMap\n\n  // Adds the following properties to the parseMetaData callback data:\n  // - exif: The parsed Exif tags\n  // - exifOffsets: The parsed Exif tag offsets\n  // - exifTiffOffset: TIFF header offset (used for offset pointers)\n  // - exifLittleEndian: little endian order if true, big endian if false\n\n  // Adds the following options to the parseMetaData method:\n  // - disableExif: Disables Exif parsing when true.\n  // - disableExifOffsets: Disables storing Exif tag offsets when true.\n  // - includeExifTags: A map of Exif tags to include for parsing.\n  // - excludeExifTags: A map of Exif tags to exclude from parsing.\n})\n","Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-iptc.js":"/*\n * JavaScript Load Image IPTC Parser\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2013, Sebastian Tschan\n * Copyright 2018, Dave Bevan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require, DataView */\n\n;(function (factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image', 'Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-meta'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image'), require('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-meta'))\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function (loadImage) {\n  'use strict'\n\n  /**\n   * IPTC tag map\n   *\n   * @name IptcMap\n   * @class\n   */\n  function IptcMap() {}\n\n  IptcMap.prototype.map = {\n    ObjectName: 5\n  }\n\n  IptcMap.prototype.types = {\n    0: 'Uint16', // ApplicationRecordVersion\n    200: 'Uint16', // ObjectPreviewFileFormat\n    201: 'Uint16', // ObjectPreviewFileVersion\n    202: 'binary' // ObjectPreviewData\n  }\n\n  /**\n   * Retrieves IPTC tag value\n   *\n   * @param {number|string} id IPTC tag code or name\n   * @returns {object} IPTC tag value\n   */\n  IptcMap.prototype.get = function (id) {\n    return this[id] || this[this.map[id]]\n  }\n\n  /**\n   * Retrieves string for the given DataView and range\n   *\n   * @param {DataView} dataView Data view interface\n   * @param {number} offset Offset start\n   * @param {number} length Offset length\n   * @returns {string} String value\n   */\n  function getStringValue(dataView, offset, length) {\n    var outstr = ''\n    var end = offset + length\n    for (var n = offset; n < end; n += 1) {\n      outstr += String.fromCharCode(dataView.getUint8(n))\n    }\n    return outstr\n  }\n\n  /**\n   * Retrieves tag value for the given DataView and range\n   *\n   * @param {number} tagCode tag code\n   * @param {IptcMap} map IPTC tag map\n   * @param {DataView} dataView Data view interface\n   * @param {number} offset Range start\n   * @param {number} length Range length\n   * @returns {object} Tag value\n   */\n  function getTagValue(tagCode, map, dataView, offset, length) {\n    if (map.types[tagCode] === 'binary') {\n      return new Blob([dataView.buffer.slice(offset, offset + length)])\n    }\n    if (map.types[tagCode] === 'Uint16') {\n      return dataView.getUint16(offset)\n    }\n    return getStringValue(dataView, offset, length)\n  }\n\n  /**\n   * Combines IPTC value with existing ones.\n   *\n   * @param {object} value Existing IPTC field value\n   * @param {object} newValue New IPTC field value\n   * @returns {object} Resulting IPTC field value\n   */\n  function combineTagValues(value, newValue) {\n    if (value === undefined) return newValue\n    if (value instanceof Array) {\n      value.push(newValue)\n      return value\n    }\n    return [value, newValue]\n  }\n\n  /**\n   * Parses IPTC tags.\n   *\n   * @param {DataView} dataView Data view interface\n   * @param {number} segmentOffset Segment offset\n   * @param {number} segmentLength Segment length\n   * @param {object} data Data export object\n   * @param {object} includeTags Map of tags to include\n   * @param {object} excludeTags Map of tags to exclude\n   */\n  function parseIptcTags(\n    dataView,\n    segmentOffset,\n    segmentLength,\n    data,\n    includeTags,\n    excludeTags\n  ) {\n    var value, tagSize, tagCode\n    var segmentEnd = segmentOffset + segmentLength\n    var offset = segmentOffset\n    while (offset < segmentEnd) {\n      if (\n        dataView.getUint8(offset) === 0x1c && // tag marker\n        dataView.getUint8(offset + 1) === 0x02 // record number, only handles v2\n      ) {\n        tagCode = dataView.getUint8(offset + 2)\n        if (\n          (!includeTags || includeTags[tagCode]) &&\n          (!excludeTags || !excludeTags[tagCode])\n        ) {\n          tagSize = dataView.getInt16(offset + 3)\n          value = getTagValue(tagCode, data.iptc, dataView, offset + 5, tagSize)\n          data.iptc[tagCode] = combineTagValues(data.iptc[tagCode], value)\n          if (data.iptcOffsets) {\n            data.iptcOffsets[tagCode] = offset\n          }\n        }\n      }\n      offset += 1\n    }\n  }\n\n  /**\n   * Tests if field segment starts at offset.\n   *\n   * @param {DataView} dataView Data view interface\n   * @param {number} offset Segment offset\n   * @returns {boolean} True if '8BIM<EOT><EOT>' exists at offset\n   */\n  function isSegmentStart(dataView, offset) {\n    return (\n      dataView.getUint32(offset) === 0x3842494d && // Photoshop segment start\n      dataView.getUint16(offset + 4) === 0x0404 // IPTC segment start\n    )\n  }\n\n  /**\n   * Returns header length.\n   *\n   * @param {DataView} dataView Data view interface\n   * @param {number} offset Segment offset\n   * @returns {number} Header length\n   */\n  function getHeaderLength(dataView, offset) {\n    var length = dataView.getUint8(offset + 7)\n    if (length % 2 !== 0) length += 1\n    // Check for pre photoshop 6 format\n    if (length === 0) {\n      // Always 4\n      length = 4\n    }\n    return length\n  }\n\n  loadImage.parseIptcData = function (dataView, offset, length, data, options) {\n    if (options.disableIptc) {\n      return\n    }\n    var markerLength = offset + length\n    while (offset + 8 < markerLength) {\n      if (isSegmentStart(dataView, offset)) {\n        var headerLength = getHeaderLength(dataView, offset)\n        var segmentOffset = offset + 8 + headerLength\n        if (segmentOffset > markerLength) {\n          // eslint-disable-next-line no-console\n          console.log('Invalid IPTC data: Invalid segment offset.')\n          break\n        }\n        var segmentLength = dataView.getUint16(offset + 6 + headerLength)\n        if (offset + segmentLength > markerLength) {\n          // eslint-disable-next-line no-console\n          console.log('Invalid IPTC data: Invalid segment size.')\n          break\n        }\n        // Create the iptc object to store the tags:\n        data.iptc = new IptcMap()\n        if (!options.disableIptcOffsets) {\n          data.iptcOffsets = new IptcMap()\n        }\n        parseIptcTags(\n          dataView,\n          segmentOffset,\n          segmentLength,\n          data,\n          options.includeIptcTags,\n          options.excludeIptcTags || { 202: true } // ObjectPreviewData\n        )\n        return\n      }\n      // eslint-disable-next-line no-param-reassign\n      offset += 1\n    }\n  }\n\n  // Registers this IPTC parser for the APP13 JPEG metadata segment:\n  loadImage.metaDataParsers.jpeg[0xffed].push(loadImage.parseIptcData)\n\n  loadImage.IptcMap = IptcMap\n\n  // Adds the following properties to the parseMetaData callback data:\n  // - iptc: The iptc tags, parsed by the parseIptcData method\n\n  // Adds the following options to the parseMetaData method:\n  // - disableIptc: Disables IPTC parsing when true.\n  // - disableIptcOffsets: Disables storing IPTC tag offsets when true.\n  // - includeIptcTags: A map of IPTC tags to include for parsing.\n  // - excludeIptcTags: A map of IPTC tags to exclude from parsing.\n})\n","Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-scale.js":"/*\n * JavaScript Load Image Scaling\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require */\n\n;(function (factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image'))\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function (loadImage) {\n  'use strict'\n\n  var originalTransform = loadImage.transform\n\n  loadImage.createCanvas = function (width, height, offscreen) {\n    if (offscreen && loadImage.global.OffscreenCanvas) {\n      return new OffscreenCanvas(width, height)\n    }\n    var canvas = document.createElement('canvas')\n    canvas.width = width\n    canvas.height = height\n    return canvas\n  }\n\n  loadImage.transform = function (img, options, callback, file, data) {\n    originalTransform.call(\n      loadImage,\n      loadImage.scale(img, options, data),\n      options,\n      callback,\n      file,\n      data\n    )\n  }\n\n  // Transform image coordinates, allows to override e.g.\n  // the canvas orientation based on the orientation option,\n  // gets canvas, options and data passed as arguments:\n  loadImage.transformCoordinates = function () {}\n\n  // Returns transformed options, allows to override e.g.\n  // maxWidth, maxHeight and crop options based on the aspectRatio.\n  // gets img, options, data passed as arguments:\n  loadImage.getTransformedOptions = function (img, options) {\n    var aspectRatio = options.aspectRatio\n    var newOptions\n    var i\n    var width\n    var height\n    if (!aspectRatio) {\n      return options\n    }\n    newOptions = {}\n    for (i in options) {\n      if (Object.prototype.hasOwnProperty.call(options, i)) {\n        newOptions[i] = options[i]\n      }\n    }\n    newOptions.crop = true\n    width = img.naturalWidth || img.width\n    height = img.naturalHeight || img.height\n    if (width / height > aspectRatio) {\n      newOptions.maxWidth = height * aspectRatio\n      newOptions.maxHeight = height\n    } else {\n      newOptions.maxWidth = width\n      newOptions.maxHeight = width / aspectRatio\n    }\n    return newOptions\n  }\n\n  // Canvas render method, allows to implement a different rendering algorithm:\n  loadImage.drawImage = function (\n    img,\n    canvas,\n    sourceX,\n    sourceY,\n    sourceWidth,\n    sourceHeight,\n    destWidth,\n    destHeight,\n    options\n  ) {\n    var ctx = canvas.getContext('2d')\n    if (options.imageSmoothingEnabled === false) {\n      ctx.msImageSmoothingEnabled = false\n      ctx.imageSmoothingEnabled = false\n    } else if (options.imageSmoothingQuality) {\n      ctx.imageSmoothingQuality = options.imageSmoothingQuality\n    }\n    ctx.drawImage(\n      img,\n      sourceX,\n      sourceY,\n      sourceWidth,\n      sourceHeight,\n      0,\n      0,\n      destWidth,\n      destHeight\n    )\n    return ctx\n  }\n\n  // Determines if the target image should be a canvas element:\n  loadImage.requiresCanvas = function (options) {\n    return options.canvas || options.crop || !!options.aspectRatio\n  }\n\n  // Scales and/or crops the given image (img or canvas HTML element)\n  // using the given options:\n  loadImage.scale = function (img, options, data) {\n    // eslint-disable-next-line no-param-reassign\n    options = options || {}\n    // eslint-disable-next-line no-param-reassign\n    data = data || {}\n    var useCanvas =\n      img.getContext ||\n      (loadImage.requiresCanvas(options) &&\n        !!loadImage.global.HTMLCanvasElement)\n    var width = img.naturalWidth || img.width\n    var height = img.naturalHeight || img.height\n    var destWidth = width\n    var destHeight = height\n    var maxWidth\n    var maxHeight\n    var minWidth\n    var minHeight\n    var sourceWidth\n    var sourceHeight\n    var sourceX\n    var sourceY\n    var pixelRatio\n    var downsamplingRatio\n    var tmp\n    var canvas\n    /**\n     * Scales up image dimensions\n     */\n    function scaleUp() {\n      var scale = Math.max(\n        (minWidth || destWidth) / destWidth,\n        (minHeight || destHeight) / destHeight\n      )\n      if (scale > 1) {\n        destWidth *= scale\n        destHeight *= scale\n      }\n    }\n    /**\n     * Scales down image dimensions\n     */\n    function scaleDown() {\n      var scale = Math.min(\n        (maxWidth || destWidth) / destWidth,\n        (maxHeight || destHeight) / destHeight\n      )\n      if (scale < 1) {\n        destWidth *= scale\n        destHeight *= scale\n      }\n    }\n    if (useCanvas) {\n      // eslint-disable-next-line no-param-reassign\n      options = loadImage.getTransformedOptions(img, options, data)\n      sourceX = options.left || 0\n      sourceY = options.top || 0\n      if (options.sourceWidth) {\n        sourceWidth = options.sourceWidth\n        if (options.right !== undefined && options.left === undefined) {\n          sourceX = width - sourceWidth - options.right\n        }\n      } else {\n        sourceWidth = width - sourceX - (options.right || 0)\n      }\n      if (options.sourceHeight) {\n        sourceHeight = options.sourceHeight\n        if (options.bottom !== undefined && options.top === undefined) {\n          sourceY = height - sourceHeight - options.bottom\n        }\n      } else {\n        sourceHeight = height - sourceY - (options.bottom || 0)\n      }\n      destWidth = sourceWidth\n      destHeight = sourceHeight\n    }\n    maxWidth = options.maxWidth\n    maxHeight = options.maxHeight\n    minWidth = options.minWidth\n    minHeight = options.minHeight\n    if (useCanvas && maxWidth && maxHeight && options.crop) {\n      destWidth = maxWidth\n      destHeight = maxHeight\n      tmp = sourceWidth / sourceHeight - maxWidth / maxHeight\n      if (tmp < 0) {\n        sourceHeight = (maxHeight * sourceWidth) / maxWidth\n        if (options.top === undefined && options.bottom === undefined) {\n          sourceY = (height - sourceHeight) / 2\n        }\n      } else if (tmp > 0) {\n        sourceWidth = (maxWidth * sourceHeight) / maxHeight\n        if (options.left === undefined && options.right === undefined) {\n          sourceX = (width - sourceWidth) / 2\n        }\n      }\n    } else {\n      if (options.contain || options.cover) {\n        minWidth = maxWidth = maxWidth || minWidth\n        minHeight = maxHeight = maxHeight || minHeight\n      }\n      if (options.cover) {\n        scaleDown()\n        scaleUp()\n      } else {\n        scaleUp()\n        scaleDown()\n      }\n    }\n    if (useCanvas) {\n      pixelRatio = options.pixelRatio\n      if (\n        pixelRatio > 1 &&\n        // Check if the image has not yet had the device pixel ratio applied:\n        !(\n          img.style.width &&\n          Math.floor(parseFloat(img.style.width, 10)) ===\n            Math.floor(width / pixelRatio)\n        )\n      ) {\n        destWidth *= pixelRatio\n        destHeight *= pixelRatio\n      }\n      // Check if workaround for Chromium orientation crop bug is required:\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=1074354\n      if (\n        loadImage.orientationCropBug &&\n        !img.getContext &&\n        (sourceX || sourceY || sourceWidth !== width || sourceHeight !== height)\n      ) {\n        // Write the complete source image to an intermediate canvas first:\n        tmp = img\n        // eslint-disable-next-line no-param-reassign\n        img = loadImage.createCanvas(width, height, true)\n        loadImage.drawImage(\n          tmp,\n          img,\n          0,\n          0,\n          width,\n          height,\n          width,\n          height,\n          options\n        )\n      }\n      downsamplingRatio = options.downsamplingRatio\n      if (\n        downsamplingRatio > 0 &&\n        downsamplingRatio < 1 &&\n        destWidth < sourceWidth &&\n        destHeight < sourceHeight\n      ) {\n        while (sourceWidth * downsamplingRatio > destWidth) {\n          canvas = loadImage.createCanvas(\n            sourceWidth * downsamplingRatio,\n            sourceHeight * downsamplingRatio,\n            true\n          )\n          loadImage.drawImage(\n            img,\n            canvas,\n            sourceX,\n            sourceY,\n            sourceWidth,\n            sourceHeight,\n            canvas.width,\n            canvas.height,\n            options\n          )\n          sourceX = 0\n          sourceY = 0\n          sourceWidth = canvas.width\n          sourceHeight = canvas.height\n          // eslint-disable-next-line no-param-reassign\n          img = canvas\n        }\n      }\n      canvas = loadImage.createCanvas(destWidth, destHeight)\n      loadImage.transformCoordinates(canvas, options, data)\n      if (pixelRatio > 1) {\n        canvas.style.width = canvas.width / pixelRatio + 'px'\n      }\n      loadImage\n        .drawImage(\n          img,\n          canvas,\n          sourceX,\n          sourceY,\n          sourceWidth,\n          sourceHeight,\n          destWidth,\n          destHeight,\n          options\n        )\n        .setTransform(1, 0, 0, 1, 0, 0) // reset to the identity matrix\n      return canvas\n    }\n    img.width = destWidth\n    img.height = destHeight\n    return img\n  }\n})\n","Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-fetch.js":"/*\n * JavaScript Load Image Fetch\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2017, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require, Promise */\n\n;(function (factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image'))\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function (loadImage) {\n  'use strict'\n\n  var global = loadImage.global\n\n  if (\n    global.fetch &&\n    global.Request &&\n    global.Response &&\n    global.Response.prototype.blob\n  ) {\n    loadImage.fetchBlob = function (url, callback, options) {\n      /**\n       * Fetch response handler.\n       *\n       * @param {Response} response Fetch response\n       * @returns {Blob} Fetched Blob.\n       */\n      function responseHandler(response) {\n        return response.blob()\n      }\n      if (global.Promise && typeof callback !== 'function') {\n        return fetch(new Request(url, callback)).then(responseHandler)\n      }\n      fetch(new Request(url, options))\n        .then(responseHandler)\n        .then(callback)\n        [\n          // Avoid parsing error in IE<9, where catch is a reserved word.\n          // eslint-disable-next-line dot-notation\n          'catch'\n        ](function (err) {\n          callback(null, err)\n        })\n    }\n  } else if (\n    global.XMLHttpRequest &&\n    // https://xhr.spec.whatwg.org/#the-responsetype-attribute\n    new XMLHttpRequest().responseType === ''\n  ) {\n    loadImage.fetchBlob = function (url, callback, options) {\n      /**\n       * Promise executor\n       *\n       * @param {Function} resolve Resolution function\n       * @param {Function} reject Rejection function\n       */\n      function executor(resolve, reject) {\n        options = options || {} // eslint-disable-line no-param-reassign\n        var req = new XMLHttpRequest()\n        req.open(options.method || 'GET', url)\n        if (options.headers) {\n          Object.keys(options.headers).forEach(function (key) {\n            req.setRequestHeader(key, options.headers[key])\n          })\n        }\n        req.withCredentials = options.credentials === 'include'\n        req.responseType = 'blob'\n        req.onload = function () {\n          resolve(req.response)\n        }\n        req.onerror = req.onabort = req.ontimeout = function (err) {\n          if (resolve === reject) {\n            // Not using Promises\n            reject(null, err)\n          } else {\n            reject(err)\n          }\n        }\n        req.send(options.body)\n      }\n      if (global.Promise && typeof callback !== 'function') {\n        options = callback // eslint-disable-line no-param-reassign\n        return new Promise(executor)\n      }\n      return executor(callback, callback)\n    }\n  }\n})\n","Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-exif-map.js":"/*\n * JavaScript Load Image Exif Map\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2013, Sebastian Tschan\n * https://blueimp.net\n *\n * Exif tags mapping based on\n * https://github.com/jseidelin/exif-js\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require */\n\n;(function (factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image', 'Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-exif'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image'), require('Mageplaza_Core/lib/fileUploader/vendor/blueimp-load-image/js/load-image-exif'))\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function (loadImage) {\n  'use strict'\n\n  var ExifMapProto = loadImage.ExifMap.prototype\n\n  ExifMapProto.tags = {\n    // =================\n    // TIFF tags (IFD0):\n    // =================\n    0x0100: 'ImageWidth',\n    0x0101: 'ImageHeight',\n    0x0102: 'BitsPerSample',\n    0x0103: 'Compression',\n    0x0106: 'PhotometricInterpretation',\n    0x0112: 'Orientation',\n    0x0115: 'SamplesPerPixel',\n    0x011c: 'PlanarConfiguration',\n    0x0212: 'YCbCrSubSampling',\n    0x0213: 'YCbCrPositioning',\n    0x011a: 'XResolution',\n    0x011b: 'YResolution',\n    0x0128: 'ResolutionUnit',\n    0x0111: 'StripOffsets',\n    0x0116: 'RowsPerStrip',\n    0x0117: 'StripByteCounts',\n    0x0201: 'JPEGInterchangeFormat',\n    0x0202: 'JPEGInterchangeFormatLength',\n    0x012d: 'TransferFunction',\n    0x013e: 'WhitePoint',\n    0x013f: 'PrimaryChromaticities',\n    0x0211: 'YCbCrCoefficients',\n    0x0214: 'ReferenceBlackWhite',\n    0x0132: 'DateTime',\n    0x010e: 'ImageDescription',\n    0x010f: 'Make',\n    0x0110: 'Model',\n    0x0131: 'Software',\n    0x013b: 'Artist',\n    0x8298: 'Copyright',\n    0x8769: {\n      // ExifIFDPointer\n      0x9000: 'ExifVersion', // EXIF version\n      0xa000: 'FlashpixVersion', // Flashpix format version\n      0xa001: 'ColorSpace', // Color space information tag\n      0xa002: 'PixelXDimension', // Valid width of meaningful image\n      0xa003: 'PixelYDimension', // Valid height of meaningful image\n      0xa500: 'Gamma',\n      0x9101: 'ComponentsConfiguration', // Information about channels\n      0x9102: 'CompressedBitsPerPixel', // Compressed bits per pixel\n      0x927c: 'MakerNote', // Any desired information written by the manufacturer\n      0x9286: 'UserComment', // Comments by user\n      0xa004: 'RelatedSoundFile', // Name of related sound file\n      0x9003: 'DateTimeOriginal', // Date and time when the original image was generated\n      0x9004: 'DateTimeDigitized', // Date and time when the image was stored digitally\n      0x9010: 'OffsetTime', // Time zone when the image file was last changed\n      0x9011: 'OffsetTimeOriginal', // Time zone when the image was stored digitally\n      0x9012: 'OffsetTimeDigitized', // Time zone when the image was stored digitally\n      0x9290: 'SubSecTime', // Fractions of seconds for DateTime\n      0x9291: 'SubSecTimeOriginal', // Fractions of seconds for DateTimeOriginal\n      0x9292: 'SubSecTimeDigitized', // Fractions of seconds for DateTimeDigitized\n      0x829a: 'ExposureTime', // Exposure time (in seconds)\n      0x829d: 'FNumber',\n      0x8822: 'ExposureProgram', // Exposure program\n      0x8824: 'SpectralSensitivity', // Spectral sensitivity\n      0x8827: 'PhotographicSensitivity', // EXIF 2.3, ISOSpeedRatings in EXIF 2.2\n      0x8828: 'OECF', // Optoelectric conversion factor\n      0x8830: 'SensitivityType',\n      0x8831: 'StandardOutputSensitivity',\n      0x8832: 'RecommendedExposureIndex',\n      0x8833: 'ISOSpeed',\n      0x8834: 'ISOSpeedLatitudeyyy',\n      0x8835: 'ISOSpeedLatitudezzz',\n      0x9201: 'ShutterSpeedValue', // Shutter speed\n      0x9202: 'ApertureValue', // Lens aperture\n      0x9203: 'BrightnessValue', // Value of brightness\n      0x9204: 'ExposureBias', // Exposure bias\n      0x9205: 'MaxApertureValue', // Smallest F number of lens\n      0x9206: 'SubjectDistance', // Distance to subject in meters\n      0x9207: 'MeteringMode', // Metering mode\n      0x9208: 'LightSource', // Kind of light source\n      0x9209: 'Flash', // Flash status\n      0x9214: 'SubjectArea', // Location and area of main subject\n      0x920a: 'FocalLength', // Focal length of the lens in mm\n      0xa20b: 'FlashEnergy', // Strobe energy in BCPS\n      0xa20c: 'SpatialFrequencyResponse',\n      0xa20e: 'FocalPlaneXResolution', // Number of pixels in width direction per FPRUnit\n      0xa20f: 'FocalPlaneYResolution', // Number of pixels in height direction per FPRUnit\n      0xa210: 'FocalPlaneResolutionUnit', // Unit for measuring the focal plane resolution\n      0xa214: 'SubjectLocation', // Location of subject in image\n      0xa215: 'ExposureIndex', // Exposure index selected on camera\n      0xa217: 'SensingMethod', // Image sensor type\n      0xa300: 'FileSource', // Image source (3 == DSC)\n      0xa301: 'SceneType', // Scene type (1 == directly photographed)\n      0xa302: 'CFAPattern', // Color filter array geometric pattern\n      0xa401: 'CustomRendered', // Special processing\n      0xa402: 'ExposureMode', // Exposure mode\n      0xa403: 'WhiteBalance', // 1 = auto white balance, 2 = manual\n      0xa404: 'DigitalZoomRatio', // Digital zoom ratio\n      0xa405: 'FocalLengthIn35mmFilm',\n      0xa406: 'SceneCaptureType', // Type of scene\n      0xa407: 'GainControl', // Degree of overall image gain adjustment\n      0xa408: 'Contrast', // Direction of contrast processing applied by camera\n      0xa409: 'Saturation', // Direction of saturation processing applied by camera\n      0xa40a: 'Sharpness', // Direction of sharpness processing applied by camera\n      0xa40b: 'DeviceSettingDescription',\n      0xa40c: 'SubjectDistanceRange', // Distance to subject\n      0xa420: 'ImageUniqueID', // Identifier assigned uniquely to each image\n      0xa430: 'CameraOwnerName',\n      0xa431: 'BodySerialNumber',\n      0xa432: 'LensSpecification',\n      0xa433: 'LensMake',\n      0xa434: 'LensModel',\n      0xa435: 'LensSerialNumber'\n    },\n    0x8825: {\n      // GPSInfoIFDPointer\n      0x0000: 'GPSVersionID',\n      0x0001: 'GPSLatitudeRef',\n      0x0002: 'GPSLatitude',\n      0x0003: 'GPSLongitudeRef',\n      0x0004: 'GPSLongitude',\n      0x0005: 'GPSAltitudeRef',\n      0x0006: 'GPSAltitude',\n      0x0007: 'GPSTimeStamp',\n      0x0008: 'GPSSatellites',\n      0x0009: 'GPSStatus',\n      0x000a: 'GPSMeasureMode',\n      0x000b: 'GPSDOP',\n      0x000c: 'GPSSpeedRef',\n      0x000d: 'GPSSpeed',\n      0x000e: 'GPSTrackRef',\n      0x000f: 'GPSTrack',\n      0x0010: 'GPSImgDirectionRef',\n      0x0011: 'GPSImgDirection',\n      0x0012: 'GPSMapDatum',\n      0x0013: 'GPSDestLatitudeRef',\n      0x0014: 'GPSDestLatitude',\n      0x0015: 'GPSDestLongitudeRef',\n      0x0016: 'GPSDestLongitude',\n      0x0017: 'GPSDestBearingRef',\n      0x0018: 'GPSDestBearing',\n      0x0019: 'GPSDestDistanceRef',\n      0x001a: 'GPSDestDistance',\n      0x001b: 'GPSProcessingMethod',\n      0x001c: 'GPSAreaInformation',\n      0x001d: 'GPSDateStamp',\n      0x001e: 'GPSDifferential',\n      0x001f: 'GPSHPositioningError'\n    },\n    0xa005: {\n      // InteroperabilityIFDPointer\n      0x0001: 'InteroperabilityIndex'\n    }\n  }\n\n  // IFD1 directory can contain any IFD0 tags:\n  ExifMapProto.tags.ifd1 = ExifMapProto.tags\n\n  ExifMapProto.stringValues = {\n    ExposureProgram: {\n      0: 'Undefined',\n      1: 'Manual',\n      2: 'Normal program',\n      3: 'Aperture priority',\n      4: 'Shutter priority',\n      5: 'Creative program',\n      6: 'Action program',\n      7: 'Portrait mode',\n      8: 'Landscape mode'\n    },\n    MeteringMode: {\n      0: 'Unknown',\n      1: 'Average',\n      2: 'CenterWeightedAverage',\n      3: 'Spot',\n      4: 'MultiSpot',\n      5: 'Pattern',\n      6: 'Partial',\n      255: 'Other'\n    },\n    LightSource: {\n      0: 'Unknown',\n      1: 'Daylight',\n      2: 'Fluorescent',\n      3: 'Tungsten (incandescent light)',\n      4: 'Flash',\n      9: 'Fine weather',\n      10: 'Cloudy weather',\n      11: 'Shade',\n      12: 'Daylight fluorescent (D 5700 - 7100K)',\n      13: 'Day white fluorescent (N 4600 - 5400K)',\n      14: 'Cool white fluorescent (W 3900 - 4500K)',\n      15: 'White fluorescent (WW 3200 - 3700K)',\n      17: 'Standard light A',\n      18: 'Standard light B',\n      19: 'Standard light C',\n      20: 'D55',\n      21: 'D65',\n      22: 'D75',\n      23: 'D50',\n      24: 'ISO studio tungsten',\n      255: 'Other'\n    },\n    Flash: {\n      0x0000: 'Flash did not fire',\n      0x0001: 'Flash fired',\n      0x0005: 'Strobe return light not detected',\n      0x0007: 'Strobe return light detected',\n      0x0009: 'Flash fired, compulsory flash mode',\n      0x000d: 'Flash fired, compulsory flash mode, return light not detected',\n      0x000f: 'Flash fired, compulsory flash mode, return light detected',\n      0x0010: 'Flash did not fire, compulsory flash mode',\n      0x0018: 'Flash did not fire, auto mode',\n      0x0019: 'Flash fired, auto mode',\n      0x001d: 'Flash fired, auto mode, return light not detected',\n      0x001f: 'Flash fired, auto mode, return light detected',\n      0x0020: 'No flash function',\n      0x0041: 'Flash fired, red-eye reduction mode',\n      0x0045: 'Flash fired, red-eye reduction mode, return light not detected',\n      0x0047: 'Flash fired, red-eye reduction mode, return light detected',\n      0x0049: 'Flash fired, compulsory flash mode, red-eye reduction mode',\n      0x004d: 'Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected',\n      0x004f: 'Flash fired, compulsory flash mode, red-eye reduction mode, return light detected',\n      0x0059: 'Flash fired, auto mode, red-eye reduction mode',\n      0x005d: 'Flash fired, auto mode, return light not detected, red-eye reduction mode',\n      0x005f: 'Flash fired, auto mode, return light detected, red-eye reduction mode'\n    },\n    SensingMethod: {\n      1: 'Undefined',\n      2: 'One-chip color area sensor',\n      3: 'Two-chip color area sensor',\n      4: 'Three-chip color area sensor',\n      5: 'Color sequential area sensor',\n      7: 'Trilinear sensor',\n      8: 'Color sequential linear sensor'\n    },\n    SceneCaptureType: {\n      0: 'Standard',\n      1: 'Landscape',\n      2: 'Portrait',\n      3: 'Night scene'\n    },\n    SceneType: {\n      1: 'Directly photographed'\n    },\n    CustomRendered: {\n      0: 'Normal process',\n      1: 'Custom process'\n    },\n    WhiteBalance: {\n      0: 'Auto white balance',\n      1: 'Manual white balance'\n    },\n    GainControl: {\n      0: 'None',\n      1: 'Low gain up',\n      2: 'High gain up',\n      3: 'Low gain down',\n      4: 'High gain down'\n    },\n    Contrast: {\n      0: 'Normal',\n      1: 'Soft',\n      2: 'Hard'\n    },\n    Saturation: {\n      0: 'Normal',\n      1: 'Low saturation',\n      2: 'High saturation'\n    },\n    Sharpness: {\n      0: 'Normal',\n      1: 'Soft',\n      2: 'Hard'\n    },\n    SubjectDistanceRange: {\n      0: 'Unknown',\n      1: 'Macro',\n      2: 'Close view',\n      3: 'Distant view'\n    },\n    FileSource: {\n      3: 'DSC'\n    },\n    ComponentsConfiguration: {\n      0: '',\n      1: 'Y',\n      2: 'Cb',\n      3: 'Cr',\n      4: 'R',\n      5: 'G',\n      6: 'B'\n    },\n    Orientation: {\n      1: 'Original',\n      2: 'Horizontal flip',\n      3: 'Rotate 180\u00b0 CCW',\n      4: 'Vertical flip',\n      5: 'Vertical flip + Rotate 90\u00b0 CW',\n      6: 'Rotate 90\u00b0 CW',\n      7: 'Horizontal flip + Rotate 90\u00b0 CW',\n      8: 'Rotate 90\u00b0 CCW'\n    }\n  }\n\n  ExifMapProto.getText = function (name) {\n    var value = this.get(name)\n    switch (name) {\n      case 'LightSource':\n      case 'Flash':\n      case 'MeteringMode':\n      case 'ExposureProgram':\n      case 'SensingMethod':\n      case 'SceneCaptureType':\n      case 'SceneType':\n      case 'CustomRendered':\n      case 'WhiteBalance':\n      case 'GainControl':\n      case 'Contrast':\n      case 'Saturation':\n      case 'Sharpness':\n      case 'SubjectDistanceRange':\n      case 'FileSource':\n      case 'Orientation':\n        return this.stringValues[name][value]\n      case 'ExifVersion':\n      case 'FlashpixVersion':\n        if (!value) return\n        return String.fromCharCode(value[0], value[1], value[2], value[3])\n      case 'ComponentsConfiguration':\n        if (!value) return\n        return (\n          this.stringValues[name][value[0]] +\n          this.stringValues[name][value[1]] +\n          this.stringValues[name][value[2]] +\n          this.stringValues[name][value[3]]\n        )\n      case 'GPSVersionID':\n        if (!value) return\n        return value[0] + '.' + value[1] + '.' + value[2] + '.' + value[3]\n    }\n    return String(value)\n  }\n\n  ExifMapProto.getAll = function () {\n    var map = {}\n    var prop\n    var obj\n    var name\n    for (prop in this) {\n      if (Object.prototype.hasOwnProperty.call(this, prop)) {\n        obj = this[prop]\n        if (obj && obj.getAll) {\n          map[this.ifds[prop].name] = obj.getAll()\n        } else {\n          name = this.tags[prop]\n          if (name) map[name] = this.getText(name)\n        }\n      }\n    }\n    return map\n  }\n\n  ExifMapProto.getName = function (tagCode) {\n    var name = this.tags[tagCode]\n    if (typeof name === 'object') return this.ifds[tagCode].name\n    return name\n  }\n\n  // Extend the map of tag names to tag codes:\n  ;(function () {\n    var tags = ExifMapProto.tags\n    var prop\n    var ifd\n    var subTags\n    // Map the tag names to tags:\n    for (prop in tags) {\n      if (Object.prototype.hasOwnProperty.call(tags, prop)) {\n        ifd = ExifMapProto.ifds[prop]\n        if (ifd) {\n          subTags = tags[prop]\n          for (prop in subTags) {\n            if (Object.prototype.hasOwnProperty.call(subTags, prop)) {\n              ifd.map[subTags[prop]] = Number(prop)\n            }\n          }\n        } else {\n          ExifMapProto.map[tags[prop]] = Number(prop)\n        }\n      }\n    }\n  })()\n})\n","Mageplaza_Core/lib/fileUploader/vendor/blueimp-canvas-to-blob/js/canvas-to-blob.js":"/*\n * JavaScript Canvas to Blob\n * https://github.com/blueimp/JavaScript-Canvas-to-Blob\n *\n * Copyright 2012, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on stackoverflow user Stoive's code snippet:\n * http://stackoverflow.com/q/4998908\n */\n\n/* global define, Uint8Array, ArrayBuffer, module */\n\n;(function (window) {\n  'use strict'\n\n  var CanvasPrototype =\n    window.HTMLCanvasElement && window.HTMLCanvasElement.prototype\n  var hasBlobConstructor =\n    window.Blob &&\n    (function () {\n      try {\n        return Boolean(new Blob())\n      } catch (e) {\n        return false\n      }\n    })()\n  var hasArrayBufferViewSupport =\n    hasBlobConstructor &&\n    window.Uint8Array &&\n    (function () {\n      try {\n        return new Blob([new Uint8Array(100)]).size === 100\n      } catch (e) {\n        return false\n      }\n    })()\n  var BlobBuilder =\n    window.BlobBuilder ||\n    window.WebKitBlobBuilder ||\n    window.MozBlobBuilder ||\n    window.MSBlobBuilder\n  var dataURIPattern = /^data:((.*?)(;charset=.*?)?)(;base64)?,/\n  var dataURLtoBlob =\n    (hasBlobConstructor || BlobBuilder) &&\n    window.atob &&\n    window.ArrayBuffer &&\n    window.Uint8Array &&\n    function (dataURI) {\n      var matches,\n        mediaType,\n        isBase64,\n        dataString,\n        byteString,\n        arrayBuffer,\n        intArray,\n        i,\n        bb\n      // Parse the dataURI components as per RFC 2397\n      matches = dataURI.match(dataURIPattern)\n      if (!matches) {\n        throw new Error('invalid data URI')\n      }\n      // Default to text/plain;charset=US-ASCII\n      mediaType = matches[2]\n        ? matches[1]\n        : 'text/plain' + (matches[3] || ';charset=US-ASCII')\n      isBase64 = !!matches[4]\n      dataString = dataURI.slice(matches[0].length)\n      if (isBase64) {\n        // Convert base64 to raw binary data held in a string:\n        byteString = atob(dataString)\n      } else {\n        // Convert base64/URLEncoded data component to raw binary:\n        byteString = decodeURIComponent(dataString)\n      }\n      // Write the bytes of the string to an ArrayBuffer:\n      arrayBuffer = new ArrayBuffer(byteString.length)\n      intArray = new Uint8Array(arrayBuffer)\n      for (i = 0; i < byteString.length; i += 1) {\n        intArray[i] = byteString.charCodeAt(i)\n      }\n      // Write the ArrayBuffer (or ArrayBufferView) to a blob:\n      if (hasBlobConstructor) {\n        return new Blob([hasArrayBufferViewSupport ? intArray : arrayBuffer], {\n          type: mediaType\n        })\n      }\n      bb = new BlobBuilder()\n      bb.append(arrayBuffer)\n      return bb.getBlob(mediaType)\n    }\n  if (window.HTMLCanvasElement && !CanvasPrototype.toBlob) {\n    if (CanvasPrototype.mozGetAsFile) {\n      CanvasPrototype.toBlob = function (callback, type, quality) {\n        var self = this\n        setTimeout(function () {\n          if (quality && CanvasPrototype.toDataURL && dataURLtoBlob) {\n            callback(dataURLtoBlob(self.toDataURL(type, quality)))\n          } else {\n            callback(self.mozGetAsFile('blob', type))\n          }\n        })\n      }\n    } else if (CanvasPrototype.toDataURL && dataURLtoBlob) {\n      if (CanvasPrototype.msToBlob) {\n        CanvasPrototype.toBlob = function (callback, type, quality) {\n          var self = this\n          setTimeout(function () {\n            if (\n              ((type && type !== 'image/png') || quality) &&\n              CanvasPrototype.toDataURL &&\n              dataURLtoBlob\n            ) {\n              callback(dataURLtoBlob(self.toDataURL(type, quality)))\n            } else {\n              callback(self.msToBlob(type))\n            }\n          })\n        }\n      } else {\n        CanvasPrototype.toBlob = function (callback, type, quality) {\n          var self = this\n          setTimeout(function () {\n            callback(dataURLtoBlob(self.toDataURL(type, quality)))\n          })\n        }\n      }\n    }\n  }\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return dataURLtoBlob\n    })\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = dataURLtoBlob\n  } else {\n    window.dataURLtoBlob = dataURLtoBlob\n  }\n})(window)\n","Mageplaza_Core/lib/fileUploader/cors/jquery.xdr-transport.js":"/*\n * jQuery XDomainRequest Transport Plugin\n * https://github.com/blueimp/jQuery-File-Upload\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on Julian Aubourg's ajaxHooks xdr.js:\n * https://github.com/jaubourg/ajaxHooks/\n */\n\n/* global define, require, XDomainRequest */\n\n(function (factory) {\n  'use strict';\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['jquery'], factory);\n  } else if (typeof exports === 'object') {\n    // Node/CommonJS:\n    factory(require('jquery'));\n  } else {\n    // Browser globals:\n    factory(window.jQuery);\n  }\n})(function ($) {\n  'use strict';\n  if (window.XDomainRequest && !$.support.cors) {\n    $.ajaxTransport(function (s) {\n      if (s.crossDomain && s.async) {\n        if (s.timeout) {\n          s.xdrTimeout = s.timeout;\n          delete s.timeout;\n        }\n        var xdr;\n        return {\n          send: function (headers, completeCallback) {\n            var addParamChar = /\\?/.test(s.url) ? '&' : '?';\n            /**\n             * Callback wrapper function\n             *\n             * @param {number} status HTTP status code\n             * @param {string} statusText HTTP status text\n             * @param {object} [responses] Content-type specific responses\n             * @param {string} [responseHeaders] Response headers string\n             */\n            function callback(status, statusText, responses, responseHeaders) {\n              xdr.onload = xdr.onerror = xdr.ontimeout = $.noop;\n              xdr = null;\n              completeCallback(status, statusText, responses, responseHeaders);\n            }\n            xdr = new XDomainRequest();\n            // XDomainRequest only supports GET and POST:\n            if (s.type === 'DELETE') {\n              s.url = s.url + addParamChar + '_method=DELETE';\n              s.type = 'POST';\n            } else if (s.type === 'PUT') {\n              s.url = s.url + addParamChar + '_method=PUT';\n              s.type = 'POST';\n            } else if (s.type === 'PATCH') {\n              s.url = s.url + addParamChar + '_method=PATCH';\n              s.type = 'POST';\n            }\n            xdr.open(s.type, s.url);\n            xdr.onload = function () {\n              callback(\n                200,\n                'OK',\n                { text: xdr.responseText },\n                'Content-Type: ' + xdr.contentType\n              );\n            };\n            xdr.onerror = function () {\n              callback(404, 'Not Found');\n            };\n            if (s.xdrTimeout) {\n              xdr.ontimeout = function () {\n                callback(0, 'timeout');\n              };\n              xdr.timeout = s.xdrTimeout;\n            }\n            xdr.send((s.hasContent && s.data) || null);\n          },\n          abort: function () {\n            if (xdr) {\n              xdr.onerror = $.noop();\n              xdr.abort();\n            }\n          }\n        };\n      }\n    });\n  }\n});\n","Mageplaza_Core/lib/fileUploader/cors/jquery.postmessage-transport.js":"/*\n * jQuery postMessage Transport Plugin\n * https://github.com/blueimp/jQuery-File-Upload\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, require */\n\n(function (factory) {\n  'use strict';\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['jquery'], factory);\n  } else if (typeof exports === 'object') {\n    // Node/CommonJS:\n    factory(require('jquery'));\n  } else {\n    // Browser globals:\n    factory(window.jQuery);\n  }\n})(function ($) {\n  'use strict';\n\n  var counter = 0,\n    names = [\n      'accepts',\n      'cache',\n      'contents',\n      'contentType',\n      'crossDomain',\n      'data',\n      'dataType',\n      'headers',\n      'ifModified',\n      'mimeType',\n      'password',\n      'processData',\n      'timeout',\n      'traditional',\n      'type',\n      'url',\n      'username'\n    ],\n    convert = function (p) {\n      return p;\n    };\n\n  $.ajaxSetup({\n    converters: {\n      'postmessage text': convert,\n      'postmessage json': convert,\n      'postmessage html': convert\n    }\n  });\n\n  $.ajaxTransport('postmessage', function (options) {\n    if (options.postMessage && window.postMessage) {\n      var iframe,\n        loc = $('<a></a>').prop('href', options.postMessage)[0],\n        target = loc.protocol + '//' + loc.host,\n        xhrUpload = options.xhr().upload;\n      // IE always includes the port for the host property of a link\n      // element, but not in the location.host or origin property for the\n      // default http port 80 and https port 443, so we strip it:\n      if (/^(http:\\/\\/.+:80)|(https:\\/\\/.+:443)$/.test(target)) {\n        target = target.replace(/:(80|443)$/, '');\n      }\n      return {\n        send: function (_, completeCallback) {\n          counter += 1;\n          var message = {\n              id: 'postmessage-transport-' + counter\n            },\n            eventName = 'message.' + message.id;\n          iframe = $(\n            '<iframe style=\"display:none;\" src=\"' +\n              options.postMessage +\n              '\" name=\"' +\n              message.id +\n              '\"></iframe>'\n          )\n            .on('load', function () {\n              $.each(names, function (i, name) {\n                message[name] = options[name];\n              });\n              message.dataType = message.dataType.replace('postmessage ', '');\n              $(window).on(eventName, function (event) {\n                var e = event.originalEvent;\n                var data = e.data;\n                var ev;\n                if (e.origin === target && data.id === message.id) {\n                  if (data.type === 'progress') {\n                    ev = document.createEvent('Event');\n                    ev.initEvent(data.type, false, true);\n                    $.extend(ev, data);\n                    xhrUpload.dispatchEvent(ev);\n                  } else {\n                    completeCallback(\n                      data.status,\n                      data.statusText,\n                      { postmessage: data.result },\n                      data.headers\n                    );\n                    iframe.remove();\n                    $(window).off(eventName);\n                  }\n                }\n              });\n              iframe[0].contentWindow.postMessage(message, target);\n            })\n            .appendTo(document.body);\n        },\n        abort: function () {\n          if (iframe) {\n            iframe.remove();\n          }\n        }\n      };\n    }\n  });\n});\n","Magento_Shipping/js/view/checkout/shipping/shipping-policy.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'uiComponent',\n    'Magento_Shipping/js/model/config'\n\n], function (Component, config) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Magento_Shipping/checkout/shipping/shipping-policy'\n        },\n        config: config()\n    });\n});\n","Magento_Shipping/js/model/config.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([], function () {\n    'use strict';\n\n    return function () {\n        return window.checkoutConfig.shippingPolicy;\n    };\n});\n","Magento_Usps/js/model/shipping-rates-validator.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mageUtils',\n    './shipping-rates-validation-rules',\n    'mage/translate'\n], function ($, utils, validationRules, $t) {\n    'use strict';\n\n    var checkoutConfig = window.checkoutConfig;\n\n    return {\n        validationErrors: [],\n\n        /**\n         * @param {Object} address\n         * @return {Boolean}\n         */\n        validate: function (address) {\n            var rules = validationRules.getRules(),\n                self = this;\n\n            $.each(rules, function (field, rule) {\n                var message;\n\n                if (rule.required && utils.isEmpty(address[field])) {\n                    message = $t('Field ') + field + $t(' is required.');\n                    self.validationErrors.push(message);\n                }\n            });\n\n            if (!this.validationErrors.length) {\n                if (address['country_id'] == checkoutConfig.originCountryCode) { //eslint-disable-line eqeqeq\n                    return !utils.isEmpty(address.postcode);\n                }\n\n                return true;\n            }\n\n            return false;\n        }\n    };\n});\n","Magento_Usps/js/model/shipping-rates-validation-rules.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([], function () {\n    'use strict';\n\n    return {\n        /**\n         * @return {Object}\n         */\n        getRules: function () {\n            return {\n                'country_id': {\n                    'required': true\n                },\n                'postcode': {\n                    'required': false\n                }\n            };\n        }\n    };\n});\n","Magento_Usps/js/view/shipping-rates-validation.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'uiComponent',\n    'Magento_Checkout/js/model/shipping-rates-validator',\n    'Magento_Checkout/js/model/shipping-rates-validation-rules',\n    '../model/shipping-rates-validator',\n    '../model/shipping-rates-validation-rules'\n], function (\n    Component,\n    defaultShippingRatesValidator,\n    defaultShippingRatesValidationRules,\n    uspsShippingRatesValidator,\n    uspsShippingRatesValidationRules\n) {\n    'use strict';\n\n    defaultShippingRatesValidator.registerValidator('usps', uspsShippingRatesValidator);\n    defaultShippingRatesValidationRules.registerRules('usps', uspsShippingRatesValidationRules);\n\n    return Component;\n});\n","Magento_Multishipping/js/multi-shipping.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Customer/js/customer-data',\n    'jquery-ui-modules/widget'\n], function ($, customerData) {\n    'use strict';\n\n    $.widget('mage.multiShipping', {\n        options: {\n            itemsQty: 0,\n            addNewAddressBtn: 'button[data-role=\"add-new-address\"]', // Add a new multishipping address.\n            addNewAddressFlag: '#add_new_address_flag', // Hidden input field with value 0 or 1.\n            canContinueBtn: 'button[data-role=\"can-continue\"]', // Continue (update quantity or go to shipping).\n            canContinueFlag: '#can_continue_flag' // Hidden input field with value 0 or 1.\n        },\n\n        /**\n         * Bind event handlers to click events for corresponding buttons.\n         * @private\n         */\n        _create: function () {\n            this._prepareCartData();\n            $(this.options.addNewAddressBtn).on('click', $.proxy(this._addNewAddress, this));\n            $(this.options.canContinueBtn).on('click', $.proxy(this._canContinue, this));\n        },\n\n        /**\n         * Takes cart items qty from current cart data and compare it with current items qty\n         * Reloads cart data if cart items qty is wrong\n         * @private\n         */\n        _prepareCartData: function () {\n            var cartData = customerData.get('cart');\n\n            if (cartData()['summary_count'] !== this.options.itemsQty) {\n                customerData.reload(['cart'], false);\n            }\n        },\n\n        /**\n         * Add a new address. Set the hidden input field and submit the form. Then enter a new shipping address.\n         * @private\n         */\n        _addNewAddress: function () {\n            $(this.options.addNewAddressFlag).val(1);\n            this.element.submit();\n        },\n\n        /**\n         * Can the user continue to the next step? The data-flag attribute holds either 0 (no) or 1 (yes).\n         * @private\n         * @param {Event} event - Click event on the corresponding button.\n         */\n        _canContinue: function (event) {\n            $(this.options.canContinueFlag).val(parseInt($(event.currentTarget).data('flag'), 10));\n        }\n    });\n\n    return $.mage.multiShipping;\n});\n","Magento_Multishipping/js/payment.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/template',\n    'Magento_Ui/js/modal/alert',\n    'jquery-ui-modules/widget',\n    'mage/translate'\n], function ($, mageTemplate, alert) {\n    'use strict';\n\n    $.widget('mage.payment', {\n        options: {\n            continueSelector: '#payment-continue',\n            methodsContainer: '#payment-methods',\n            minBalance: 0,\n            tmpl: '<input id=\"hidden-free\" type=\"hidden\" name=\"payment[method]\" value=\"free\">'\n        },\n\n        /** @inheritdoc */\n        _create: function () {\n            this.element.find('dd [name^=\"payment[\"]').prop('disabled', true).end()\n                .on('click', this.options.continueSelector, $.proxy(this._submitHandler, this))\n                .on('updateCheckoutPrice', $.proxy(function (event, data) {\n                    //updating the checkoutPrice\n                    if (data.price) {\n                        this.options.checkoutPrice += data.price;\n                    }\n\n                    //updating total price\n                    if (data.totalPrice) {\n                        data.totalPrice = this.options.checkoutPrice;\n                    }\n\n                    if (this.options.checkoutPrice <= this.options.minBalance) {\n                        // Add free input field, hide and disable unchecked\n                        // checkbox payment method and all radio button payment methods\n                        this._disablePaymentMethods();\n                    } else {\n                        // Remove free input field, show all payment method\n                        this._enablePaymentMethods();\n                    }\n                }, this))\n                .on('click', 'dt input:radio', $.proxy(this._paymentMethodHandler, this));\n\n            if (this.options.checkoutPrice < this.options.minBalance) {\n                this._disablePaymentMethods();\n            } else {\n                this._enablePaymentMethods();\n            }\n        },\n\n        /**\n         * Display payment details when payment method radio button is checked\n         * @private\n         * @param {EventObject} e\n         */\n        _paymentMethodHandler: function (e) {\n            var element = $(e.target),\n                parentsDl = element.closest('dl');\n\n            parentsDl.find('dt input:radio').prop('checked', false);\n            parentsDl.find('dd').addClass('no-display').end()\n                .find('.items').hide()\n                .find('[name^=\"payment[\"]').prop('disabled', true);\n            element.prop('checked', true).parent()\n                .next('dd').removeClass('no-display')\n                .find('.items').show().find('[name^=\"payment[\"]').prop('disabled', false);\n        },\n\n        /**\n         * make sure one payment method is selected\n         * @private\n         * @return {Boolean}\n         */\n        _validatePaymentMethod: function () {\n            var methods = this.element.find('[name^=\"payment[\"]'),\n                isValid = false;\n\n            if (methods.length === 0) {\n                alert({\n                    content: $.mage.__('We can\\'t complete your order because you don\\'t have a payment method set up.')\n                });\n            } else if (this.options.checkoutPrice <= this.options.minBalance) {\n                isValid = true;\n            } else if (methods.filter('input:radio:checked').length) {\n                isValid = true;\n            } else {\n                alert({\n                    content: $.mage.__('Please choose a payment method.')\n                });\n            }\n\n            return isValid;\n        },\n\n        /**\n         * Disable and enable payment methods\n         * @private\n         */\n        _disablePaymentMethods: function () {\n            var tmpl = mageTemplate(this.options.tmpl, {\n                data: {}\n            });\n\n            this.element.find('input[name=\"payment[method]\"]').prop('disabled', true).end()\n                .find('input[id^=\"use\"][name^=\"payment[use\"]:not(:checked)').prop('disabled', true).parent().hide();\n            this.element.find('[name=\"payment[method]\"][value=\"free\"]').parent('dt').remove();\n            this.element.find(this.options.methodsContainer).hide().find('[name^=\"payment[\"]').prop('disabled', true);\n\n            $(tmpl).appendTo(this.element);\n        },\n\n        /**\n         * Enable and enable payment methods\n         * @private\n         */\n        _enablePaymentMethods: function () {\n            this.element.find('input[name=\"payment[method]\"]').prop('disabled', false).end()\n                .find('dt input:radio:checked').trigger('click').end()\n                .find('input[id^=\"use\"][name^=\"payment[use\"]:not(:checked)').prop('disabled', false).parent().show();\n            this.element.find(this.options.methodsContainer).show();\n        },\n\n        /**\n         * Returns checked payment method.\n         *\n         * @private\n         */\n        _getSelectedPaymentMethod: function () {\n            return this.element.find('input[name=\\'payment[method]\\']:checked');\n        },\n\n        /**\n         * Validate  before form submit\n         * @private\n         * @param {EventObject} e\n         */\n        _submitHandler: function (e) {\n            var currentMethod,\n                submitButton;\n\n            e.preventDefault();\n\n            if (this._validatePaymentMethod()) {\n                currentMethod = this._getSelectedPaymentMethod();\n                submitButton = currentMethod.parent().next('dd').find('button[type=submit]');\n\n                if (submitButton.length) {\n                    submitButton.first().trigger('click');\n                } else {\n                    this.element.trigger('submit');\n                }\n            }\n        }\n    });\n\n    return $.mage.payment;\n});\n","Magento_Multishipping/js/multi-shipping-balance.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/dataPost',\n    'jquery-ui-modules/widget'\n], function ($, dataPost) {\n    'use strict';\n\n    $.widget('mage.multiShippingBalance', {\n        options: {\n            changeUrl: ''\n        },\n\n        /**\n         * Initialize balance checkbox events.\n         *\n         * @private\n         */\n        _create: function () {\n            this.element.on('change', $.proxy(function (event) {\n                dataPost().postData({\n                    action: this.options.changeUrl,\n                    data: {\n                        useBalance: +$(event.target).is(':checked')\n                    }\n                });\n            }, this));\n        }\n    });\n\n    return $.mage.multiShippingBalance;\n});\n","Magento_Multishipping/js/overview.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget',\n    'mage/translate'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.orderOverview', {\n        options: {\n            opacity: 0.5, // CSS opacity for the 'Place Order' button when it's clicked and then disabled.\n            pleaseWaitLoader: 'span.please-wait', // 'Submitting order information...' Ajax loader.\n            placeOrderSubmit: 'button[type=\"submit\"]', // The 'Place Order' button.\n            agreements: '.checkout-agreements' // Container for all of the checkout agreements and terms/conditions\n        },\n\n        /**\n         * Bind a submit handler to the form.\n         * @private\n         */\n        _create: function () {\n            this.element.on('submit', $.proxy(this._showLoader, this));\n        },\n\n        /**\n         * Verify that all agreements and terms/conditions are checked. Show the Ajax loader. Disable\n         * the submit button (i.e. Place Order).\n         * @return {Boolean}\n         * @private\n         */\n        _showLoader: function () {\n            if ($(this.options.agreements).find('input[type=\"checkbox\"]:not(:checked)').length > 0) {\n                return false;\n            }\n            this.element.find(this.options.pleaseWaitLoader).show().end()\n                .find(this.options.placeOrderSubmit).prop('disabled', true).css('opacity', this.options.opacity);\n\n            return true;\n        }\n    });\n\n    return $.mage.orderOverview;\n});\n","Amasty_RecurringPayments/js/view/subscription-info.js":"define([\n    'uiComponent',\n    'Magento_Checkout/js/model/quote'\n], function (Component, quote) {\n    'use strict';\n\n    const amastyRecurringConfig = window?.checkoutConfig?.amastyRecurringConfig ?? {};\n\n    return Component.extend({\n        defaults: {\n            template: 'Amasty_RecurringPayments/checkout/subscription-info',\n            isEnabled: false\n        },\n\n        /**\n         * @returns {Object}\n         */\n        initObservable: function () {\n            return this._super().observe(['isEnabled']);\n        },\n\n        /**\n         * @returns {void}\n         */\n        initialize: function () {\n            this._super();\n\n            quote.paymentMethod.subscribe(({method}) => {\n                this.isEnabled(this.hasRecurringProducts() && this.isPaypalExpress(method))\n            });\n        },\n\n        /**\n         * @param {string} method\n         * @returns {Boolean}\n         */\n        isPaypalExpress: function (method) {\n            return method === 'paypal_express' || method === 'amasty_recurring_paypal';\n        },\n\n        /**\n         * @returns {Boolean}\n         */\n        hasRecurringProducts: function () {\n            return !!amastyRecurringConfig?.isRecurringProducts;\n        }\n    });\n});\n","Amasty_RecurringPayments/js/view/product/recurring-payments.js":"","Amasty_RecurringPayments/js/view/product/update-prices.js":"define([\n    'jquery',\n    'Magento_Catalog/js/price-utils',\n    'mage/template'\n], function ($, priceUtils, mageTemplate) {\n    'use strict';\n\n    return function (updatePrices) {\n        $.widget('mage.priceBox', updatePrices, {\n            options: {\n                percentDiscountTypeId: 'percent_product_price'\n            },\n\n            reloadPrice: function reDrawPrices() {\n                this._super();\n\n                var priceFormat = (this.options.priceConfig && this.options.priceConfig.priceFormat) || {},\n                    priceTemplate = mageTemplate(this.options.priceTemplate),\n                    basePrice = this.cache.displayPrices.basePrice,\n                    feeData = $.extend({}, basePrice),\n                    discountData = $.extend({}, basePrice);\n\n                if (basePrice) {\n                    this.setInitialFee(feeData, priceTemplate, priceFormat);\n                    this.setDiscountAmount(discountData, priceTemplate, priceFormat);\n                    $(document).trigger('changePriceTooltip.amrec', [ basePrice.formatted ]);\n                }\n            },\n\n            setInitialFee: function (feeData, priceTemplate, priceFormat) {\n                var subscriptionFeeElement = $('[data-amrec-js=\"initial-fee\"]');\n\n                if (!subscriptionFeeElement.length) {\n                    return;\n                }\n\n                if (subscriptionFeeElement[0].dataset.feeType == this.options.percentDiscountTypeId) {\n                    feeData.formatted = priceUtils.formatPrice(\n                        feeData.amount * (+subscriptionFeeElement[0].dataset.feeAmount / 100),\n                        priceFormat\n                    );\n\n                    $('[data-amrec-js=\"initial-fee\"]').html(priceTemplate({\n                        data: feeData\n                    }));\n                }\n            },\n\n            setDiscountAmount: function (discountData, priceTemplate, priceFormat) {\n                var subscriptionDiscountElement = $('[data-amrec-js=\"discount-amount\"]');\n\n                if (!subscriptionDiscountElement.length) {\n                    return;\n                }\n\n                if (subscriptionDiscountElement[0].dataset.discountType == this.options.percentDiscountTypeId) {\n                    discountData.formatted = priceUtils.formatPrice(\n                        discountData.amount * (+subscriptionDiscountElement[0].dataset.discountAmount / 100),\n                        priceFormat);\n\n                    subscriptionDiscountElement.html(priceTemplate({\n                        data: discountData\n                    }));\n                }\n            }\n        });\n\n        return $.mage.priceBox;\n    }\n});\n","Amasty_RecurringPayments/js/view/product/recurring-payments/select.js":"define([\n    'jquery',\n    'uiElement'\n], function ($, Component) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Amasty_RecurringPayments/product/recurring-payments/select',\n            imports: {\n                data: '${ $.provider }:plans'\n            }\n        },\n        purchaseTypeSelector: '[data-amrec-js=\"purchase-type\"]',\n        recurringSettingsContainerSelector: '[data-amrec-js=\"recurring-settings\"]',\n        addToCartActionsSelector: '.box-tocart .actions > *:not(.tocart)',\n        amazonActionsSelector: '.amazon-button-container',\n\n        /**\n         * Initializes Select component.\n         *\n         * @returns {Table} - Chainable.\n         */\n        initialize: function () {\n            this._super();\n            this.initHandlers();\n            this.initPreSelect();\n\n            return this;\n        },\n\n        /**\n         * Initializes observable properties.\n         *\n         * @returns {Table} - Chainable.\n         */\n        initObservable: function () {\n            this._super()\n                .observe([\n                    'checkedValue',\n                    'reloadPrice'\n                ]);\n            this.reloadPrice.extend({ notify: 'always' });\n\n            return this;\n        },\n\n\n        /**\n         * @returns {void}\n         */\n        initHandlers: function () {\n            this.togglePurchaseType($(this.purchaseTypeSelector + ':checked').val() === 'subscribe');\n            $(this.purchaseTypeSelector).on('change', function (event) {\n                var isSubscribe = event.target.value === 'subscribe';\n\n                this.togglePurchaseType(isSubscribe);\n                this.reloadPrice(true);\n            }.bind(this));\n        },\n\n        /**\n         * Toggle purchase type\n         *\n         * @param {Boolean} isSubscribe\n         * @returns {void}\n         */\n        togglePurchaseType: function (isSubscribe) {\n            $(this.recurringSettingsContainerSelector).toggleClass('hidden', !isSubscribe);\n            $(this.addToCartActionsSelector).toggle(!isSubscribe);\n            $(this.amazonActionsSelector).toggle(!isSubscribe);\n        },\n\n        /**\n         * Preselection plan\n         *\n         * @returns {void}\n         */\n        initPreSelect: function () {\n            var firstOptionValue = this.data[0].plan_id;\n\n            this.checkedValue(firstOptionValue);\n        }\n    });\n});\n","Amasty_RecurringPayments/js/view/product/recurring-payments/table.js":"define([\n    'jquery',\n    'uiComponent',\n    'moment',\n    'mageUtils',\n    'text!Amasty_RecurringPayments/template/product/recurring-payments/price.html',\n    'mage/template',\n    'rjsResolver',\n    'mage/translate',\n    'tooltip'\n], function ($, Component, moment, utils, priceTmpl, template, resolver) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Amasty_RecurringPayments/product/recurring-payments/table',\n            selectComponent: '${ $.parentName }.select',\n            dateComponentName: '${ $.parentName }.date',\n            StartDateWithTrial: '',\n            isAllowSpecifyStartEndDate: '',\n            checkedValue: '',\n            reloadPrice: '',\n            dateFormat: '',\n            links: {\n                checkedValue: '${ $.selectComponent }:checkedValue',\n                reloadPrice: '${ $.selectComponent }:reloadPrice',\n                data: '${ $.selectComponent }:data',\n                dateFormat: '${ $.dateComponentName }:dateFormat',\n                momentFormat: '${ $.dateComponentName }:momentFormat'\n            },\n            imports: {\n                data: '${ $.provider }:plans',\n                isFreeShipping: '${ $.provider }:isFreeShipping',\n                isAllowSpecifyStartEndDate: '${ $.provider }:isAllowSpecifyStartEndDate',\n                originalPrice: '${ $.provider }:originalPrice'\n            },\n            listens: {\n                startDate: 'setStartDate',\n                trialDays: 'setStartDate'\n            }\n        },\n        tooltipContentClass: 'amrec-tooltip-content',\n        selectors: {\n            tooltipBase: '[data-amrec-js=\"tooltip-base\"]',\n            tooltipContent: '[data-amrec-js=\"tooltip-content\"]',\n            priceHolderPrice: '.product-add-form [data-role=\"priceBox\"], .product-info-price [data-role=\"priceBox\"]',\n            bundleSlide: '#bundle-slide'\n        },\n        translation: {\n            amDiscountTooltip: $.mage.__('After the first %1  cycle(s) you will be paying %2 per delivery'),\n            // eslint-disable-next-line max-len\n            amTrialMessage: $.mage.__('Regular subscription fee (do not confuse it with initial or one-time fee which is paid at checkout) will be charged for the first time after trial period ends. In your case, this will happen in %1 days, %2')\n        },\n\n        /**\n         * Initializes Table component.\n         *\n         * @returns {Table} - Chainable.\n         */\n        initialize: function () {\n            this.initSelectors();\n            this._super();\n            this.initTable();\n            this.setStartDate();\n\n            return this;\n        },\n\n        /**\n         * Initializes observable properties.\n         *\n         * @returns {Table} - Chainable.\n         */\n        initObservable: function () {\n            this._super()\n                .observe([\n                    'checkedValue',\n                    'reloadPrice',\n                    'startDate',\n                    'StartDateWithTrial',\n                    'enableTrial',\n                    'trialDays',\n                    'isEnableFee',\n                    'feeType',\n                    'feeAmount',\n                    'feeAmountValue',\n                    'isEnableDiscount',\n                    'discountAmountType',\n                    'discountAmount',\n                    'discountAmountValue',\n                    'isEnableDiscountCycle',\n                    'discountCycles',\n                    'billingCycleName',\n                    'billingCycleUnit',\n                    'billingCycleFrequency'\n                ]);\n\n            this.billingCycleUnit.extend({ notify: 'always' });\n            this.reloadPrice.extend({ notify: 'always' });\n            this.checkedValue.subscribe(function (currentNamePlan) {\n                this.initTable(currentNamePlan);\n            }, this);\n            this.reloadPrice.subscribe(this.reloadPriceAction, this);\n            $(document).on('changePriceTooltip.amrec', function (event, price) {\n                this.originalPrice = price;\n            }.bind(this));\n\n            if (this.bundleSlide.length) {\n                this.bundleSlide.on('click.amrec', function () {\n                    this.reloadPrice(true);\n                }.bind(this));\n            }\n\n            return this;\n        },\n\n        /**\n         * @returns {void}\n         */\n        initSelectors: function () {\n            this.priceHolderPrice = $(this.selectors.priceHolderPrice);\n            this.tooltipBase = $(this.selectors.priceHolderPrice);\n            this.bundleSlide = $(this.selectors.bundleSlide);\n        },\n\n        /**\n         * @param {String} name\n         * @returns {void}\n         */\n        initTable: function (name) {\n            var namePlan = name || this.checkedValue(),\n                config = this.getConfigPlan(namePlan),\n                trialDays;\n\n            this.enableTrial(config.is_enable_trial);\n            trialDays = this.enableTrial() ? config.trial_days : 0;\n            this.trialDays(trialDays);\n            this.billingCycleName(config.plan_name);\n            this.billingCycleFrequency(config.frequency);\n            this.isEnableFee(config.is_enable_fee);\n            this.feeType(config.fee_type);\n            this.feeAmount(config.fee_amount);\n            this.feeAmountValue(config.fee_amount_formatted);\n            this.isEnableDiscount(config.discount_enabled);\n            this.discountAmountType(config.discount_amount_type);\n            this.discountAmount(config.discount_amount);\n            this.discountAmountValue(config.discount_amount_formatted);\n            this.isEnableDiscountCycle(config.discount_cycles_limit_enabled);\n            this.discountCycles(config.number_discount_cycles);\n            this.billingCycleUnit(config.frequency_unit);\n            this.reloadPrice(true);\n        },\n\n        /**\n         * @return {void}\n         */\n        reloadPriceAction: function () {\n            resolver(function () {\n                this.priceHolderPrice.trigger('reloadPrice');\n            }, this);\n        },\n\n        /**\n         * @param {Sting} id\n         * @return {Object|void}\n         */\n        getConfigPlan: function (id) {\n            var config;\n\n            if (!this.data) {\n                this.data = this.source.get('plans');\n            }\n\n            config = this.data;\n\n            if (id) {\n                config = config.filter(function (value) {\n                    return value.plan_id === id;\n                });\n            }\n\n            return config[0];\n        },\n\n        /**\n         * @return {void}\n         */\n        setStartDate: function () {\n            var StartDate = this.startDate(),\n                momentFormat = this.momentFormat,\n                StartDateWithTrial = StartDate ? moment(StartDate, momentFormat) : moment();\n\n            StartDateWithTrial = StartDateWithTrial.add(this.trialDays(), 'days');\n            StartDateWithTrial = StartDateWithTrial.format(momentFormat);\n\n            this.StartDateWithTrial(StartDateWithTrial);\n        },\n\n        /**\n         * @param {Element} element\n         * @returns {void}\n         */\n        initCyclesTooltip: function (element) {\n            $(element).tooltip({\n                position: {\n                    my: 'left bottom',\n                    at: 'left top'\n                },\n                items: this.selectors.tooltipContent,\n                tooltipClass: this.tooltipContentClass,\n                content: function () {\n                    return this.getTranslateText('amDiscountTooltip');\n                }.bind(this)\n            });\n        },\n\n        /**\n         * Get translate text\n         *\n         * @param {String} name - translate key\n         * @returns {String}\n         */\n        getTranslateText: function (name) {\n            var originalPrice = template(priceTmpl, { price: this.originalPrice }),\n                translateResult = {\n                    amDiscountTooltip: this.translation.amDiscountTooltip\n                        .replace('%1', this.discountCycles())\n                        .replace('%2', originalPrice),\n                    amTrialMessage: this.translation.amTrialMessage\n                        .replace('%1', this.trialDays())\n                        .replace('%2', this.StartDateWithTrial())\n                };\n\n            return translateResult[name];\n        }\n    });\n});\n","Amasty_RecurringPayments/js/view/product/recurring-payments/date.js":"define([\n    'jquery',\n    'uiElement',\n    'moment',\n    'mageUtils',\n    'mage/calendar'\n], function ($, Component, moment, utils) {\n    'use strict';\n\n    /**\n     * Object for normalization format Moment.js\n     */\n    var normalFormatMoment = {\n            'day': 'days',\n            'month': 'months',\n            'week': 'weeks',\n            'year': 'years'\n        },\n        valueEndDateDefault = 'amrec-end-date';\n\n    return Component.extend({\n        defaults: {\n            template: 'Amasty_RecurringPayments/product/recurring-payments/date',\n            tableComponent: 'amasty-recurring-payments.table',\n            clientTimezone: null,\n            datePlaceholder: 'dd/mm/yyyy',\n            trialDays: 0,\n            startDate: '',\n            endDate: '',\n            value: '',\n            minEndDate: '',\n            billingCycleUnit: '',\n            billingCycleFrequency: 0,\n            dateFormat: 'dd/MM/yyyy',\n            defaultChecked: 'amrec-end-infinite',\n            links: {\n                enableTrial: '${ $.tableComponent }:enableTrial',\n                trialDays: '${ $.tableComponent }:trialDays',\n                startDate: '${ $.tableComponent }:startDate',\n                billingCycleFrequency: '${ $.tableComponent }:billingCycleFrequency',\n                billingCycleUnit: '${ $.tableComponent }:billingCycleUnit'\n            },\n            imports: {\n                isAllowSpecifyStartEndDate: '${ $.provider }:isAllowSpecifyStartEndDate',\n                dateFormat: '${ $.provider }:dateFormat'\n            },\n            listens: {\n                billingCycleUnit: 'setEndDate'\n            }\n        },\n        dateConfig: {\n            minDate: new Date(),\n            changeMonth: true,\n            changeYear: true,\n            showButtonPanel: true,\n            buttonText: '',\n            firstDay: 1,\n            showOn: 'both',\n            showOtherMonths: true,\n            beforeShow: function (input, instance) {\n                instance.dpDiv.addClass('amrec-calendar-component');\n            }\n        },\n        momentFormatCached: {},\n        selectors: {\n            subscriptionEndDatepicker: '[data-amrec-js=\"subscription-end-date\"]'\n        },\n\n        /**\n         * Initializes Table component.\n         *\n         * @returns {Table} - Chainable.\n         */\n        initialize: function () {\n            this._super();\n\n            this.momentFormat = utils.convertToMomentFormat(this.dateFormat);\n            this.dateConfig.dateFormat = this.dateFormat;\n            this.dateConfigStartDate = $.extend({}, this.dateConfig);\n            this.dateConfigEndDate = $.extend({}, this.dateConfig);\n\n            if (this.isAllowSpecifyStartEndDate) {\n                this.setClientTimezone();\n                this.setStartDate();\n                this.checkedValue(this.defaultChecked);\n            }\n\n            return this;\n        },\n\n        /**\n         * Initializes observable properties.\n         *\n         * @returns {Table} - Chainable.\n         */\n        initObservable: function () {\n            this._super()\n                .observe([\n                    'checkedValue',\n                    'clientTimezone',\n                    'datePlaceholder',\n                    'startDate',\n                    'endDate',\n                    'minEndDate',\n                    'enableTrial',\n                    'trialDays',\n                    'billingCycleFrequency',\n                    'billingCycleUnit',\n                    'value'\n                ]);\n\n            this.billingCycleUnit.extend({ notify: 'always' });\n            this.startDate.subscribe(function () {\n                this.setEndDate();\n            }, this);\n\n            return this;\n        },\n\n        /**\n         * @return {void}\n         */\n        setClientTimezone: function () {\n            var clientTimezoneOffset = new Date().getTimezoneOffset();\n\n            this.clientTimezone(clientTimezoneOffset * -1);\n        },\n\n        /**\n         * @returns {void}\n         */\n        setStartDate: function () {\n            var startDate = moment(),\n                momentFormat = this.momentFormat;\n\n            startDate = startDate.format(momentFormat);\n\n            this.startDate(startDate);\n        },\n\n        /**\n         * Set Minimal Subscription End Date by selected Start Date and Billing Cycle\n         *\n         * @returns {void}\n         */\n        setEndDate: function () {\n            var endDate = this.startDate(),\n                endDatepicker = $(this.selectors.subscriptionEndDatepicker),\n                momentFormat = this.momentFormat;\n\n            if (!endDate) {\n                return;\n            }\n\n            endDate = moment(endDate, momentFormat);\n\n            if (this.enableTrial()) {\n                endDate = endDate.add(this.trialDays(), 'days');\n            }\n\n            if (this.billingCycleFrequency()) {\n                endDate = endDate.add(this.billingCycleFrequency(), normalFormatMoment[this.billingCycleUnit()]);\n            }\n\n            this.dateConfigEndDate.minDate = endDate.toDate();\n            endDatepicker.datepicker('option', 'minDate', endDate.format(momentFormat));\n            this.minEndDate(endDate.format(momentFormat));\n\n            if (this.checkedValue() !== valueEndDateDefault) {\n                this.endDate(endDate.format(momentFormat));\n            }\n        },\n\n        /**\n         * Is disabled input by radio value\n         *\n         * @param {String} name\n         * @returns {boolean}\n         */\n        isDisabled: function (name) {\n            return name !== this.checkedValue();\n        }\n    });\n});\n","Amasty_RecurringPayments/js/view/customer/subscription.js":"define([\n    'jquery',\n    'uiComponent',\n    'Magento_Ui/js/modal/confirm',\n    'mage/translate'\n], function ($, Component, confirm, $t) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            subscriptionId: '',\n            subscriptionPayment: '',\n            cancelUrl: '',\n            pauseUrl: '',\n            resumeUrl: '',\n            deliveryUrl: '',\n            shippingUrl: '',\n            popupUrl: '',\n            selectors: {\n                pauseBtn: '.action.-pause',\n                cancelBtn: '.action.-cancel',\n                resumeBtn: '.action.-resume',\n                shippingBtn: '.-profile-shipping .-edit',\n                deliveryBtn: '.-profile-delivery .-edit',\n                popupContainer: '.amrec-popup.amrec-subscription-popup',\n                popupClose: '.amrec-popup-confirmation .amrec-close',\n                popupFocusStart: '.amrec-popup-confirmation .focus-trap-start',\n                popupFocusEnd: '.amrec-popup-confirmation .focus-trap-end',\n                popup: '[data-amrec-js=\"amrec-confirmation-popup\"]',\n                popupHeader: '.amrec-popup-confirmation .amrec-header',\n                popupText: '.amrec-popup-confirmation .amrec-text',\n                popupCancelBtn: '.amrec-popup-confirmation .amrec-button.-cancel',\n                popupConfirmBtn: '.amrec-popup-confirmation .amrec-button.-confirm'\n            },\n            popupOptions: {\n                cancel: {\n                    headerText: $t('Are you sure you want to cancel this subscription?'),\n                    popupText: $t('In case you cancel it by mistake, you will have to place a new order '\n                        + 'to purchase the same subscription again, since it is currently not possible '\n                        + 'to automatically renew any subscription after cancellation.'),\n                    cancelText: $t('No, keep subscription active'),\n                    confirmText: $t('Yes, cancel this subscription')\n                },\n                pause: {\n                    headerText: $t('Are you sure you want to proceed?'),\n                    popupText: $t('You are about to pause your current subscription. While your subscription is on pause, '\n                        + 'you will not receive any recurring deliveries or charges.'),\n                    cancelText: $t('Cancel'),\n                    confirmText: $t('Ok')\n                },\n                shipping: {\n                    headerText: $t('Are you sure you want to proceed?'),\n                    popupText: $t('If you change your shipping address, taxes and totals may be recalculated. '\n                        + 'Are you sure you want to proceed?'),\n                    cancelText: $t('Cancel'),\n                    confirmText: $t('Ok')\n                },\n                delivery: {\n                    headerText: $t('It may be necessary to recreate your subscription'),\n                    popupText: $t('If the subscription changes affect the payment amount or delivery plan, '\n                        + 'the current subscription will need to be canceled and a new one created to apply the updates.'),\n                    cancelText: $t('Keep Current'),\n                    confirmText: $t('Continue')\n                }\n            },\n            keycodes: {\n                esc: 27,\n                enter: 13\n            }\n        },\n\n        /**\n         * @returns {void}\n         */\n        initialize: function () {\n            this._super();\n            this.initHandlers();\n            this.initPopupHandlers();\n            this.initWcagHandlers();\n        },\n\n        /**\n         * @returns {void}\n         */\n        initHandlers: function () {\n            $(this.selectors.cancelBtn).on('click', () => {\n               this.cancelClick()\n            });\n\n            $(this.selectors.pauseBtn).on('click', () => {\n                this.pauseClick()\n            });\n\n            $(this.selectors.resumeBtn).on('click', () => {\n                this.resumeClick()\n            });\n\n            $(this.selectors.shippingBtn).on('click', () => {\n                this.shippingClick()\n            });\n\n            $(this.selectors.deliveryBtn).on('click', () => {\n                this.deliveryClick()\n            });\n        },\n\n        /**\n         * @returns {void}\n         */\n        initWcagHandlers: function () {\n            $(this.selectors.popupFocusStart).on('focus', () => {\n                $(this.selectors.popupContainer + ' :focusable:last').focus();\n            });\n\n            $(this.selectors.popupFocusEnd).on('focus', () => {\n                $(this.selectors.popupContainer + ' :focusable:first').focus();\n            });\n\n            $(this.selectors.popup).on('keydown', (e) => {\n                if (e.which === this.keycodes.esc) {\n                    $(this.selectors.popup).hide();\n                }\n            });\n\n            $(this.selectors.popupClose).on('keydown', (e) => {\n                if (e.which === this.keycodes.enter) {\n                    $(this.selectors.popup).hide();\n                }\n            });\n        },\n\n        initPopupHandlers: function () {\n            $('[data-amrec-js=\"close-confirmation\"]').on('click', () => {\n                $(this.selectors.popup).hide();\n            });\n        },\n\n        /**\n         * @param {Object} options\n         * @returns {void}\n         */\n        openPopup: function ({headerText, popupText, cancelText, confirmText, confirmUrl}) {\n            const confirmationPopup = $(this.selectors.popup);\n\n            this.popupUrl = confirmUrl;\n            $(this.selectors.popupHeader).text(headerText);\n            $(this.selectors.popupText).text(popupText);\n            $(this.selectors.popupCancelBtn).text(cancelText);\n            $(this.selectors.popupConfirmBtn).text(confirmText);\n\n            $(this.selectors.popupConfirmBtn).off('click');\n            $(this.selectors.popupConfirmBtn).on('click', () => {\n                window.location.href = this.popupUrl;\n            });\n\n            confirmationPopup.show();\n\n            $(this.selectors.popupClose).focus();\n        },\n\n        /**\n         * @returns {void}\n         */\n        cancelClick: function () {\n            if (!this.subscriptionId || !this.subscriptionPayment) {\n                return;\n            }\n\n            const confirmUrl = this.cancelUrl + `?subscription_id=${this.subscriptionId}`\n                + `&subscription_payment=${this.subscriptionPayment}`;\n\n            this.openPopup({ ...this.popupOptions.cancel, confirmUrl: confirmUrl});\n        },\n\n        /**\n         * @returns {void}\n         */\n        pauseClick: function () {\n            const confirmUrl = this.pauseUrl + `?subscription_id=${this.subscriptionId}`\n                + `&subscription_payment=${this.subscriptionPayment}`;\n\n            this.openPopup({ ...this.popupOptions.pause, confirmUrl: confirmUrl});\n        },\n\n        /**\n         * @returns {void}\n         */\n        resumeClick: function () {\n            window.location.href = this.resumeUrl + `?subscription_id=${this.subscriptionId}`\n                + `&subscription_payment=${this.subscriptionPayment}`;\n        },\n\n        /**\n         * @returns {void}\n         */\n        shippingClick: function () {\n            const confirmUrl = this.shippingUrl + `?subscription_id=${this.subscriptionId}`\n                + `&subscription_payment=${this.subscriptionPayment}`;\n            if (this.subscriptionPayment === \"paypal_express\") {\n                //for PayPal method use the same text as for delivery popup\n                this.openPopup({...this.popupOptions.delivery, confirmUrl: confirmUrl});\n            } else {\n                this.openPopup({...this.popupOptions.shipping, confirmUrl: confirmUrl});\n            }\n        },\n\n        /**\n         * @returns {void}\n         */\n        deliveryClick: function () {\n            const confirmUrl = this.deliveryUrl + `?subscription_id=${this.subscriptionId}`\n                + `&subscription_payment=${this.subscriptionPayment}`;\n\n            if (this.subscriptionPayment === \"paypal_express\") {\n                this.openPopup({...this.popupOptions.delivery, confirmUrl: confirmUrl});\n            } else {\n                window.location.href = confirmUrl;\n            }\n        }\n    });\n});\n","Amasty_RecurringPayments/js/view/customer/subscriptions.js":"/*browser:true*/\n/*global define*/\ndefine([\n    'jquery',\n    'underscore',\n    'ko',\n    'uiComponent',\n    'Magento_Ui/js/block-loader',\n    'mage/url'\n], function ($, _, ko, Component, blockLoader, url) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Amasty_RecurringPayments/view/customer/subscriptions',\n            isLoading: ko.observable(false),\n            visible: ko.observable(false),\n            subscriptions: ko.observable([]),\n            cancelUrl: '',\n            loaderUrl: '',\n            nextBillingDateTooltipEnabled: false,\n            nextBillingDateTooltipText: '',\n            subscriptionLink: 'amasty_recurring/customer/subscription'\n        },\n\n        initialize: function () {\n            this._super();\n\n            if (this.loaderUrl) {\n                blockLoader(this.loaderUrl);\n            }\n\n            this.visible(!!this.subscriptionsData.length);\n\n            $.each(this.subscriptionsData, function (key, subscription) {\n                subscription.detailsVisibility = ko.observable(false);\n            });\n\n            this.subscriptions(this.subscriptionsData);\n        },\n\n        toggleDetailsVisibility: function (subscription) {\n            subscription.detailsVisibility(!subscription.detailsVisibility());\n        },\n\n        getSubscriptionLink: function (subscription) {\n            return url.build(this.subscriptionLink) + `?subscription_id=${subscription.subscription_id}`\n                + `&subscription_payment=${subscription.payment_method}`;\n        },\n\n        cancelClick: function (subscriptionInfo) {\n            var confirmationPopup = $('[data-amrec-js=\"cancel-confirmation-popup\"]');\n\n            confirmationPopup.show();\n\n            $('[data-amrec-js=\"close-confirmation\"]').on('click', function () {\n                confirmationPopup.hide();\n                subscriptionInfo = null;\n            });\n\n            $('[data-amrec-js=\"cancel-subscription\"]').on('click', function () {\n                var postData;\n\n                if (!subscriptionInfo) {\n                    return;\n                }\n\n                postData = {\n                    subscription_id: subscriptionInfo.subscription.subscription_id,\n                    subscription_payment: subscriptionInfo.subscription.payment_method,\n                };\n\n                confirmationPopup.hide();\n                this.isLoading(true);\n\n                $.ajax({\n                    type: 'POST',\n                    url: this.cancelUrl,\n                    data: postData,\n                    dataType: 'json',\n                    success: function (data) {\n                        $.each(data, function (key, subscription) {\n                            subscription.detailsVisibility = ko.observable(false);\n                        });\n                        this.subscriptions(data);\n                        this.visible(data.length);\n                    }.bind(this),\n                    complete: function () {\n                        this.isLoading(false);\n                    }.bind(this)\n                });\n            }.bind(this));\n        }\n    });\n});\n","Amasty_RecurringPayments/js/view/summary/fee.js":"define([\n    'Magento_Checkout/js/view/summary/abstract-total',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Catalog/js/price-utils',\n    'Magento_Checkout/js/model/totals'\n], function (Component, quote, priceUtils, totals) {\n    \"use strict\";\n    return Component.extend({\n\n        /**\n         * @returns {Boolean}\n         */\n        isDisplayed: function () {\n            return !!totals.getSegment('amasty_recurring_payments_fee');\n        },\n\n        /**\n         * @returns {String}\n         */\n        getFeeLabel: function () {\n            return totals.getSegment('amasty_recurring_payments_fee').title;\n        },\n\n        /**\n         * Get formatted price\n         * @returns {*|String}\n         */\n        getValue: function () {\n            var price = totals.getSegment('amasty_recurring_payments_fee').value;\n\n            return this.getFormattedPrice(price);\n        },\n    });\n});\n","Amasty_RecurringPayments/js/view/summary/item/details/label.js":"define([\n    'jquery',\n    'uiComponent',\n    'mage/tooltip'\n], function ($, Component) {\n    'use strict';\n\n    return Component.extend({\n        tooltip: {\n            contentSelector: '[data-amrec-js=\"tooltip-content\"]',\n            contentClassName: 'amrec-tooltip-content',\n            contentText: $.mage.__('You can not edit the Subscription product details on the Checkout page. Please, get back to the Shopping Cart to make changes')\n        },\n\n        /**\n         * Checks visibility.\n         *\n         * @return {Boolean}\n         */\n        isVisible: function (itemId) {\n            return this.recurring_items[itemId];\n        },\n\n        initTooltip: function (element) {\n            $(element).tooltip({\n                position: {\n                    my: 'right bottom',\n                    at: 'right top',\n                    collision: 'flipfit flip',\n                },\n                items: this.tooltip.contentSelector,\n                tooltipClass: this.tooltip.contentClassName,\n                content: function () {\n                    return this.tooltip.contentText;\n                }.bind(this)\n            });\n        }\n    });\n});\n","Amasty_RecurringPayments/js/view/summary/item/details/estimation.js":"define([\n    'jquery',\n    'Magento_Checkout/js/view/summary/abstract-total',\n    'Magento_Checkout/js/model/quote',\n    'ko',\n    'Amasty_RecurringPayments/js/model/update-estimation',\n    'underscore',\n    'mage/tooltip'\n], function ($, abstractTotal, quote, ko, updateEstimation, _) {\n    'use strict';\n\n    return abstractTotal.extend({\n        defaults: {\n            displayArea: 'after_details'\n        },\n        tooltip: {\n            contentSelector: '[data-amrec-js=\"tooltip-content\"]',\n            contentClassName: 'amrec-tooltip-content',\n            contentText: $.mage.__('Next billing amount is calculated based on the subscription price of the product and estimated shipping cost and is charged as soon as your subscription starts.')\n        },\n\n        /**\n         * Initializes observable properties.\n         *\n         * @returns {Component} Chainable.\n         */\n        initObservable: function () {\n            this._super();\n\n            if (window.checkoutConfig.amastyRecurringConfig.isRecurringProducts) {\n                updateEstimation.subscribeToCartChangesOnce()();\n            }\n\n            return this;\n        },\n\n        getValue: function (quoteItem) {\n            return ko.computed(function () {\n                var currentItem = _.find(quote.totals().items, function (item) {\n                    return item.item_id === quoteItem.item_id && this.isVisible(item);\n                }, this);\n\n                if (currentItem) {\n                    return this.getFormattedPrice(currentItem.extension_attributes.amasty_recurrent_estimate);\n                }\n\n                return '';\n            }, this);\n        },\n\n        /**\n         * @param {Object} quoteItem\n         * @returns {boolean}\n         */\n        isVisible: function (quoteItem) {\n            return Object.prototype.hasOwnProperty.call(quoteItem, 'extension_attributes')\n                && Object.prototype.hasOwnProperty.call(\n                    quoteItem.extension_attributes,\n                    'amasty_recurrent_estimate'\n                );\n        },\n\n        initTooltip: function (element) {\n            $(element).tooltip({\n                position: {\n                    my: 'right top',\n                    at: 'right bottom',\n                    collision: 'flipfit flip',\n                },\n                items: this.tooltip.contentSelector,\n                tooltipClass: this.tooltip.contentClassName,\n                content: function () {\n                    return this.tooltip.contentText;\n                }.bind(this)\n            });\n        }\n    });\n});\n","Amasty_RecurringPayments/js/model/update-estimation.js":"/**\n * Model for update next billing payment of subscription product\n */\ndefine([\n    'ko',\n    'Magento_Checkout/js/model/quote',\n    'mage/storage',\n    'Magento_Checkout/js/model/error-processor',\n    'Magento_Checkout/js/model/shipping-save-processor/payload-extender',\n    'Magento_Checkout/js/model/url-builder',\n    'Magento_Checkout/js/model/totals',\n    'underscore'\n], function (\n    ko,\n    quote,\n    storage,\n    errorProcessor,\n    payloadExtender,\n    urlBuilder,\n    totals,\n    _\n) {\n    'use strict';\n\n    return {\n        /**\n         * @returns {Object}\n         */\n        getPayload: function () {\n            var payload,\n                shippingMethod = quote.shippingMethod();\n\n            payload = {\n                addressInformation: {\n                    'shipping_address': quote.shippingAddress(),\n                    'billing_address': quote.billingAddress(),\n                    'shipping_method_code': shippingMethod ? shippingMethod['method_code'] : '',\n                    'shipping_carrier_code': shippingMethod ? shippingMethod['carrier_code'] : ''\n                }\n            };\n\n            payloadExtender(payload);\n\n            return payload;\n        },\n\n        /**\n         * Returns once function for subscribe to cart changes\n         * @returns {*}\n         */\n        subscribeToCartChangesOnce: function () {\n            return _.once(function () {\n                quote.shippingAddress.subscribe(this.updateEstimation, this);\n                quote.shippingMethod.subscribe(this.updateEstimation, this);\n            }.bind(this));\n        },\n\n        /**\n         * @param {Array} estimationItems\n         * @returns {void}\n         */\n        updateQuoteItems: function (estimationItems) {\n            var quoteTotals = quote.totals();\n\n            quoteTotals.items.forEach(function (item, index) {\n                estimationItems.forEach(function (estimateItem) {\n                    if (estimateItem.item_id === +item.item_id) {\n                        quoteTotals.items[index].extension_attributes.amasty_recurrent_estimate = estimateItem.value;\n                    }\n                });\n            });\n\n            quote.totals(quoteTotals);\n        },\n\n        /**\n         * @returns {jQuery.Deferred}\n         */\n        updateEstimation: function () {\n            var payload = this.getPayload();\n\n            totals.isLoading(true);\n\n            return storage.post(\n                urlBuilder.createUrl('/amasty-recurring-payments/estimate-by-shipping-information', {}),\n                JSON.stringify(payload)\n            ).done(\n                function (response) {\n                    this.updateQuoteItems(response);\n                    totals.isLoading(false);\n                }.bind(this)\n            ).fail(\n                function (response) {\n                    errorProcessor.process(response);\n                    totals.isLoading(false);\n                }\n            );\n        }\n    };\n});\n","Magento_Vault/js/view/payment/vault-enabler.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n\n/* @api */\ndefine(\n    [\n        'uiElement'\n    ],\n    function (\n        Component\n    ) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                isActivePaymentTokenEnabler: true\n            },\n\n            /**\n             * @param {String} paymentCode\n             */\n            setPaymentCode: function (paymentCode) {\n                this.paymentCode = paymentCode;\n            },\n\n            /**\n             * @returns {Object}\n             */\n            initObservable: function () {\n                this._super()\n                    .observe([\n                        'isActivePaymentTokenEnabler'\n                    ]);\n\n                return this;\n            },\n\n            /**\n             * @param {Object} data\n             */\n            visitAdditionalData: function (data) {\n                if (!this.isVaultEnabled()) {\n                    return;\n                }\n\n                if (!('additional_data' in data)) {\n                    data['additional_data'] = {};\n                }\n\n                data['additional_data']['is_active_payment_token_enabler'] = this.isActivePaymentTokenEnabler();\n            },\n\n            /**\n             * @returns {Boolean}\n             */\n            isVaultEnabled: function () {\n                return typeof window.checkoutConfig.vault[this.paymentCode] !== 'undefined' &&\n                    window.checkoutConfig.vault[this.paymentCode]['is_enabled'] === true;\n            }\n        });\n    }\n);\n","Magento_Vault/js/view/payment/vault.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n\n/* @api */\ndefine([\n    'underscore',\n    'uiComponent',\n    'Magento_Checkout/js/model/payment/renderer-list',\n    'uiLayout',\n    'uiRegistry'\n], function (_, Component, rendererList, layout, registry) {\n    'use strict';\n\n    var vaultGroupName = 'vaultGroup';\n\n    layout([{\n        name: vaultGroupName,\n        component: 'Magento_Checkout/js/model/payment/method-group',\n        alias: 'vault',\n        sortOrder: 10\n    }]);\n\n    registry.get(vaultGroupName, function (vaultGroup) {\n        _.each(window.checkoutConfig.payment.vault, function (config, index) {\n            rendererList.push(\n                {\n                    type: index,\n                    config: config.config,\n                    component: config.component,\n                    group: vaultGroup,\n\n                    /**\n                     * Custom payment method types comparator\n                     * @param {String} typeA\n                     * @param {String} typeB\n                     * @return {Boolean}\n                     */\n                    typeComparatorCallback: function (typeA, typeB) {\n                        // vault token items have the same name as vault payment without index\n                        return typeA.substring(0, typeA.lastIndexOf('_')) === typeB;\n                    }\n                }\n            );\n        });\n    });\n\n    /**\n     * Add view logic here if needed\n     */\n    return Component.extend({});\n});\n","Magento_Vault/js/view/payment/method-renderer/vault.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n\ndefine(\n    [\n        'Magento_Checkout/js/view/payment/default',\n        'Magento_Checkout/js/action/select-payment-method',\n        'Magento_Checkout/js/checkout-data'\n    ],\n    function (Component, selectPaymentMethod, checkoutData) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'Magento_Vault/payment/form'\n            },\n\n            /**\n             * @returns {exports.initObservable}\n             */\n            initObservable: function () {\n                this._super()\n                    .observe([]);\n\n                return this;\n            },\n\n            /**\n             * @returns\n             */\n            selectPaymentMethod: function () {\n                selectPaymentMethod(\n                    {\n                        method: this.getId()\n                    }\n                );\n                checkoutData.setSelectedPaymentMethod(this.getId());\n\n                return true;\n            },\n\n            /**\n             * @returns {String}\n             */\n            getTitle: function () {\n                return '';\n            },\n\n            /**\n             * @returns {String}\n             */\n            getToken: function () {\n                return '';\n            },\n\n            /**\n             * @returns {String}\n             */\n            getId: function () {\n                return this.index;\n            },\n\n            /**\n             * @returns {String}\n             */\n            getCode: function () {\n                return this.code;\n            },\n\n            /**\n             * Get last 4 digits of card\n             * @returns {String}\n             */\n            getMaskedCard: function () {\n                return '';\n            },\n\n            /**\n             * Get expiration date\n             * @returns {String}\n             */\n            getExpirationDate: function () {\n                return '';\n            },\n\n            /**\n             * Get card type\n             * @returns {String}\n             */\n            getCardType: function () {\n                return '';\n            },\n\n            /**\n             * @param {String} type\n             * @returns {Boolean}\n             */\n            getIcons: function (type) {\n                return window.checkoutConfig.payment.ccform.icons.hasOwnProperty(type) ?\n                    window.checkoutConfig.payment.ccform.icons[type]\n                    : false;\n            },\n\n            /**\n             * Return state of place order button.\n             *\n             * @return {Boolean}\n             */\n            isButtonActive: function () {\n                return this.isActive() && this.isPlaceOrderActionAllowed();\n            },\n\n            /**\n             * Check if payment is active.\n             *\n             * @return {Boolean}\n             */\n            isActive: function () {\n                return this.isChecked() === this.getId();\n            },\n\n            /**\n             * @returns {*}\n             */\n            getData: function () {\n                var data = {\n                    method: this.getCode()\n                };\n\n                data['additional_data'] = {};\n                data['additional_data']['public_hash'] = this.getToken();\n\n                return data;\n            }\n        });\n    }\n);\n","Magento_Vault/js/customer_account/deleteWidget.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'Magento_Ui/js/modal/modalToggle',\n    'mage/translate'\n], function ($, modalToggle) {\n    'use strict';\n\n    return function (config, deleteButton) {\n        config.buttons = [\n            {\n                text: $.mage.__('Cancel'),\n                class: 'action secondary cancel'\n            }, {\n                text: $.mage.__('Delete'),\n                class: 'action primary',\n\n                /**\n                 * Default action on button click\n                 */\n                click: function (event) { //eslint-disable-line no-unused-vars\n                    $(deleteButton.form).trigger('submit');\n                }\n            }\n        ];\n\n        modalToggle(config, deleteButton);\n    };\n});\n","Magento_Customer/js/invalidation-processor.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'underscore',\n    'uiElement',\n    'Magento_Customer/js/customer-data'\n], function (_, Element, customerData) {\n    'use strict';\n\n    return Element.extend({\n        /**\n         * Initialize object\n         */\n        initialize: function () {\n            this._super();\n            this.process(customerData);\n        },\n\n        /**\n         * Process all rules in loop, each rule can invalidate some sections in customer data\n         *\n         * @param {Object} customerDataObject\n         */\n        process: function (customerDataObject) {\n            _.each(this.invalidationRules, function (rule, ruleName) {\n                _.each(rule, function (ruleArgs, rulePath) {\n                    require([rulePath], function (Rule) {\n                        var currentRule = new Rule(ruleArgs);\n\n                        if (!_.isFunction(currentRule.process)) {\n                            throw new Error('Rule ' + ruleName + ' should implement invalidationProcessor interface');\n                        }\n                        currentRule.process(customerDataObject);\n                    });\n                });\n            });\n        }\n    });\n});\n","Magento_Customer/js/addressValidation.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'underscore',\n    'mageUtils',\n    'mage/translate',\n    'Magento_Checkout/js/model/postcode-validator',\n    'jquery-ui-modules/widget',\n    'validation'\n], function ($, __, utils, $t, postCodeValidator) {\n    'use strict';\n\n    $.widget('mage.addressValidation', {\n        options: {\n            selectors: {\n                button: '[data-action=save-address]',\n                zip: '#zip',\n                country: 'select[name=\"country_id\"]:visible'\n            }\n        },\n\n        zipInput: null,\n        countrySelect: null,\n\n        /**\n         * Validation creation\n         *\n         * @protected\n         */\n        _create: function () {\n            var button = $(this.options.selectors.button, this.element);\n\n            this.zipInput = $(this.options.selectors.zip, this.element);\n            this.countrySelect = $(this.options.selectors.country, this.element);\n\n            this.element.validation({\n\n                /**\n                 * Submit Handler\n                 * @param {Element} form - address form\n                 */\n                submitHandler: function (form) {\n\n                    button.attr('disabled', true);\n                    form.submit();\n                }\n            });\n\n            this._addPostCodeValidation();\n        },\n\n        /**\n         * Add postcode validation\n         *\n         * @protected\n         */\n        _addPostCodeValidation: function () {\n            var self = this;\n\n            this.zipInput.on('keyup', __.debounce(function (event) {\n                    var valid = self._validatePostCode(event.target.value);\n\n                    self._renderValidationResult(valid);\n                }, 500)\n            );\n\n            this.countrySelect.on('change', function () {\n                var valid = self._validatePostCode(self.zipInput.val());\n\n                self._renderValidationResult(valid);\n            });\n        },\n\n        /**\n         * Validate post code value.\n         *\n         * @protected\n         * @param {String} postCode - post code\n         * @return {Boolean} Whether is post code valid\n         */\n        _validatePostCode: function (postCode) {\n            var countryId = this.countrySelect.val();\n\n            if (postCode === null) {\n                return true;\n            }\n\n            return postCodeValidator.validate(postCode, countryId, this.options.postCodes);\n        },\n\n        /**\n         * Renders warning messages for invalid post code.\n         *\n         * @protected\n         * @param {Boolean} valid\n         */\n        _renderValidationResult: function (valid) {\n            var warnMessage,\n                alertDiv = this.zipInput.next();\n\n            if (!valid) {\n                warnMessage = $t('Provided Zip/Postal Code seems to be invalid.');\n\n                if (postCodeValidator.validatedPostCodeExample.length) {\n                    warnMessage += $t(' Example: ') + postCodeValidator.validatedPostCodeExample.join('; ') + '. ';\n                }\n                warnMessage += $t('If you believe it is the right one you can ignore this notice.');\n            }\n\n            alertDiv.children(':first').text(warnMessage);\n\n            if (valid) {\n                alertDiv.hide();\n            } else {\n                alertDiv.show();\n            }\n        }\n    });\n\n    return $.mage.addressValidation;\n});\n","Magento_Customer/js/validation.js":"define([\n    'jquery',\n    'moment',\n    'mageUtils',\n    'jquery/validate',\n    'validation',\n    'mage/translate'\n], function ($, moment, utils) {\n    'use strict';\n\n    $.validator.addMethod(\n        'validate-date',\n        function (value, element, params) {\n            var dateFormat = utils.normalizeDate(params.dateFormat);\n\n            if (value === '') {\n                return true;\n            }\n\n            return moment(value, dateFormat, true).isValid();\n        },\n        $.mage.__('Invalid date')\n    );\n\n    $.validator.addMethod(\n        'validate-dob',\n        function (value, element, params) {\n            var dateFormat = utils.convertToMomentFormat(params.dateFormat);\n\n            if (value === '') {\n                return true;\n            }\n\n            return moment(value, dateFormat).isBefore(moment());\n        },\n        $.mage.__('The Date of Birth should not be greater than today.')\n    );\n});\n","Magento_Customer/js/customer-global-session-loader.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Customer/js/customer-data'\n], function ($, customerData) {\n    'use strict';\n\n    return function () {\n        var customer;\n\n        // When the session is available, this customer menu will be available\n        if ($('.customer-menu').length > 0) {\n            customer = customerData.get('customer');\n\n            customerData.getInitCustomerData().done(function () {\n                // Check if the customer data is set in local storage, if not reload data from server\n                if (!customer().firstname) {\n                    customerData.reload([], false);\n                }\n            });\n        }\n    };\n});\n","Magento_Customer/js/section-config.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine(['underscore'], function (_) {\n    'use strict';\n\n    var baseUrls = [],\n        sections = [],\n        clientSideSections = [],\n        sectionNames = [],\n        canonize;\n\n    /**\n     * @param {String} url\n     * @return {String}\n     */\n    canonize = function (url) {\n        var route = url;\n\n        _.some(baseUrls, function (baseUrl) {\n            route = url.replace(baseUrl, '');\n\n            return route !== url;\n        });\n\n        return route.replace(/^\\/?index.php\\/?/, '').toLowerCase();\n    };\n\n    return {\n        /**\n         * Returns a list of sections which should be invalidated for given URL.\n         * @param {String} url - URL which was requested.\n         * @return {Object} - List of sections to invalidate.\n         */\n        getAffectedSections: function (url) {\n            var route = canonize(url),\n                actions = _.find(sections, function (val, section) {\n                    var matched;\n\n                    // Covers the case where \"*\" works as a glob pattern.\n                    if (section.indexOf('*') >= 0) {\n                        section = section.replace(/\\*/g, '[^/]+') + '$';\n                        matched = route.match(section);\n\n                        return matched && matched[0] === route;\n                    }\n\n                    return route.indexOf(section) === 0;\n                });\n\n            return _.union(_.toArray(actions), sections['*']);\n        },\n\n        /**\n         * Filters the list of given sections to the ones defined as client side.\n         * @param {Object} allSections - List of sections to check.\n         * @return {Object} - List of filtered sections.\n         */\n        filterClientSideSections: function (allSections) {\n            return _.difference(allSections, clientSideSections);\n        },\n\n        /**\n         * Tells if section is defined as client side.\n         * @param {String} sectionName - Name of the section to check.\n         * @return {Boolean}\n         */\n        isClientSideSection: function (sectionName) {\n            return _.contains(clientSideSections, sectionName);\n        },\n\n        /**\n         * Returns array of section names.\n         * @returns {Array}\n         */\n        getSectionNames: function () {\n            return sectionNames;\n        },\n\n        /**\n         * @param {Object} options\n         * @constructor\n         */\n        'Magento_Customer/js/section-config': function (options) {\n            baseUrls = options.baseUrls;\n            sections = options.sections;\n            clientSideSections = options.clientSideSections;\n            sectionNames = options.sectionNames;\n        }\n    };\n});\n","Magento_Customer/js/change-email-password.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.changeEmailPassword', {\n        options: {\n            changeEmailSelector: '[data-role=change-email]',\n            changePasswordSelector: '[data-role=change-password]',\n            mainContainerSelector: '[data-container=change-email-password]',\n            titleSelector: '[data-title=change-email-password]',\n            emailContainerSelector: '[data-container=change-email]',\n            newPasswordContainerSelector: '[data-container=new-password]',\n            confirmPasswordContainerSelector: '[data-container=confirm-password]',\n            currentPasswordSelector: '[data-input=current-password]',\n            emailSelector: '[data-input=change-email]',\n            newPasswordSelector: '[data-input=new-password]',\n            confirmPasswordSelector: '[data-input=confirm-password]'\n        },\n\n        /**\n         * Create widget\n         * @private\n         */\n        _create: function () {\n            this.element.on('change', $.proxy(function () {\n                this._checkChoice();\n            }, this));\n\n            this._checkChoice();\n            this._bind();\n        },\n\n        /**\n         * Event binding, will monitor change, keyup and paste events.\n         * @private\n         */\n        _bind: function () {\n            this._on($(this.options.emailSelector), {\n                'change': this._updatePasswordFieldWithEmailValue,\n                'keyup': this._updatePasswordFieldWithEmailValue,\n                'paste': this._updatePasswordFieldWithEmailValue\n            });\n        },\n\n        /**\n         * Check choice\n         * @private\n         */\n        _checkChoice: function () {\n            if ($(this.options.changeEmailSelector).is(':checked') &&\n                $(this.options.changePasswordSelector).is(':checked')) {\n                this._showAll();\n            } else if ($(this.options.changeEmailSelector).is(':checked')) {\n                this._showEmail();\n            } else if ($(this.options.changePasswordSelector).is(':checked')) {\n                this._showPassword();\n            } else {\n                this._hideAll();\n            }\n        },\n\n        /**\n         * Show email and password input fields\n         * @private\n         */\n        _showAll: function () {\n            $(this.options.titleSelector).html(this.options.titleChangeEmailAndPassword);\n\n            $(this.options.mainContainerSelector).show();\n            $(this.options.emailContainerSelector).show();\n            $(this.options.newPasswordContainerSelector).show();\n            $(this.options.confirmPasswordContainerSelector).show();\n\n            $(this.options.currentPasswordSelector).attr('data-validate', '{required:true}').prop('disabled', false);\n            $(this.options.emailSelector).attr('data-validate', '{required:true}').prop('disabled', false);\n            this._updatePasswordFieldWithEmailValue();\n            $(this.options.confirmPasswordSelector).attr(\n                'data-validate',\n                '{required:true, equalTo:\"' + this.options.newPasswordSelector + '\"}'\n            ).prop('disabled', false);\n        },\n\n        /**\n         * Hide email and password input fields\n         * @private\n         */\n        _hideAll: function () {\n            $(this.options.mainContainerSelector).hide();\n            $(this.options.emailContainerSelector).hide();\n            $(this.options.newPasswordContainerSelector).hide();\n            $(this.options.confirmPasswordContainerSelector).hide();\n\n            $(this.options.currentPasswordSelector).removeAttr('data-validate').prop('disabled', true);\n            $(this.options.emailSelector).removeAttr('data-validate').prop('disabled', true);\n            $(this.options.newPasswordSelector).removeAttr('data-validate').prop('disabled', true);\n            $(this.options.confirmPasswordSelector).removeAttr('data-validate').prop('disabled', true);\n        },\n\n        /**\n         * Show email input fields\n         * @private\n         */\n        _showEmail: function () {\n            this._showAll();\n            $(this.options.titleSelector).html(this.options.titleChangeEmail);\n\n            $(this.options.newPasswordContainerSelector).hide();\n            $(this.options.confirmPasswordContainerSelector).hide();\n\n            $(this.options.newPasswordSelector).removeAttr('data-validate').prop('disabled', true);\n            $(this.options.confirmPasswordSelector).removeAttr('data-validate').prop('disabled', true);\n        },\n\n        /**\n         * Show password input fields\n         * @private\n         */\n        _showPassword: function () {\n            this._showAll();\n            $(this.options.titleSelector).html(this.options.titleChangePassword);\n\n            $(this.options.emailContainerSelector).hide();\n\n            $(this.options.emailSelector).removeAttr('data-validate').prop('disabled', true);\n        },\n\n        /**\n         * Update password validation rules with email input field value\n         * @private\n         */\n        _updatePasswordFieldWithEmailValue: function () {\n            $(this.options.newPasswordSelector).attr(\n                'data-validate',\n                '{required:true, ' +\n                '\\'validate-customer-password\\':true, ' +\n                '\\'password-not-equal-to-user-name\\':\\'' + $(this.options.emailSelector).val() + '\\'}'\n            ).prop('disabled', false);\n        }\n    });\n\n    return $.mage.changeEmailPassword;\n});\n","Magento_Customer/js/address.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Ui/js/modal/confirm',\n    'jquery-ui-modules/widget',\n    'mage/translate'\n], function ($, confirm) {\n    'use strict';\n\n    $.widget('mage.address', {\n        /**\n         * Options common to all instances of this widget.\n         * @type {Object}\n         */\n        options: {\n            deleteConfirmMessage: $.mage.__('Are you sure you want to delete this address?')\n        },\n\n        /**\n         * Bind event handlers for adding and deleting addresses.\n         * @private\n         */\n        _create: function () {\n            var options         = this.options,\n                addAddress      = options.addAddress,\n                deleteAddress   = options.deleteAddress;\n\n            if (addAddress) {\n                $(document).on('click', addAddress, this._addAddress.bind(this));\n            }\n\n            if (deleteAddress) {\n                $(document).on('click', deleteAddress, this._deleteAddress.bind(this));\n            }\n        },\n\n        /**\n         * Add a new address.\n         * @private\n         */\n        _addAddress: function () {\n            window.location = this.options.addAddressLocation;\n        },\n\n        /**\n         * Delete the address whose id is specified in a data attribute after confirmation from the user.\n         * @private\n         * @param {jQuery.Event} e\n         * @return {Boolean}\n         */\n        _deleteAddress: function (e) {\n            var self = this;\n\n            confirm({\n                content: this.options.deleteConfirmMessage,\n                actions: {\n\n                    /** @inheritdoc */\n                    confirm: function () {\n                        if (typeof $(e.target).parent().data('address') !== 'undefined') {\n                            window.location = self.options.deleteUrlPrefix + $(e.target).parent().data('address') +\n                                '/form_key/' + $.mage.cookies.get('form_key');\n                        } else {\n                            window.location = self.options.deleteUrlPrefix + $(e.target).data('address') +\n                                '/form_key/' + $.mage.cookies.get('form_key');\n                        }\n                    }\n                }\n            });\n\n            return false;\n        }\n    });\n\n    return $.mage.address;\n});\n","Magento_Customer/js/block-submit-on-send.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/mage'\n], function ($) {\n    'use strict';\n\n    return function (config) {\n        var dataForm = $('#' + config.formId);\n\n        dataForm.on('submit', function () {\n            $('#' + this.id + ' div.mage-error').remove();\n            $(this).find(':submit').attr('disabled', 'disabled');\n\n            if (this.isValid === false) {\n                $(this).find(':submit').prop('disabled', false);\n            }\n            this.isValid = true;\n        });\n        dataForm.on('invalid-form.validate', function () {\n            $(this).find(':submit').prop('disabled', false);\n            this.isValid = false;\n        });\n    };\n});\n","Magento_Customer/js/show-password.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'uiComponent'\n], function ($, Component) {\n    'use strict';\n\n    return Component.extend({\n        passwordSelector: '',\n        passwordInputType: 'password',\n        textInputType: 'text',\n\n        defaults: {\n            template: 'Magento_Customer/show-password',\n            isPasswordVisible: false\n        },\n\n        /**\n         * @return {Object}\n         */\n        initObservable: function () {\n            this._super()\n                .observe(['isPasswordVisible']);\n\n            this.isPasswordVisible.subscribe(function (isChecked) {\n                this._showPassword(isChecked);\n            }.bind(this));\n\n            return this;\n        },\n\n        /**\n         * Show/Hide password\n         * @private\n         */\n        _showPassword: function (isChecked) {\n            $(this.passwordSelector).attr('type',\n                isChecked ? this.textInputType : this.passwordInputType\n            );\n        }\n    });\n});\n","Magento_Customer/js/checkout-balance.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.checkoutBalance', {\n        /**\n         * Initialize store credit events\n         * @private\n         */\n        _create: function () {\n            this.eventData = {\n                price: this.options.balance,\n                totalPrice: 0\n            };\n            this.element.on('change', $.proxy(function (e) {\n                if ($(e.target).is(':checked')) {\n                    this.eventData.price = -1 * this.options.balance;\n                } else {\n                    if (this.options.amountSubstracted) { //eslint-disable-line no-lonely-if\n                        this.eventData.price = parseFloat(this.options.usedAmount);\n                        this.options.amountSubstracted = false;\n                    } else {\n                        this.eventData.price = parseFloat(this.options.balance);\n                    }\n                }\n                this.element.trigger('updateCheckoutPrice', this.eventData);\n            }, this));\n        }\n    });\n\n    return $.mage.checkoutBalance;\n});\n","Magento_Customer/js/logout-redirect.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/mage'\n], function ($) {\n    'use strict';\n\n    return function (data) {\n        $($.mage.redirect(data.url, 'assign', 5000));\n    };\n});\n","Magento_Customer/js/password-strength-indicator.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Customer/js/zxcvbn',\n    'mage/translate',\n    'mage/validation'\n], function ($, zxcvbn, $t) {\n    'use strict';\n\n    $.widget('mage.passwordStrengthIndicator', {\n        options: {\n            cache: {},\n            passwordSelector: '[type=password]',\n            passwordStrengthMeterSelector: '[data-role=password-strength-meter]',\n            passwordStrengthMeterLabelSelector: '[data-role=password-strength-meter-label]',\n            formSelector: 'form',\n            emailSelector: 'input[type=\"email\"]'\n        },\n\n        /**\n         * Widget initialization\n         * @private\n         */\n        _create: function () {\n            this.options.cache.input = $(this.options.passwordSelector, this.element);\n            this.options.cache.meter = $(this.options.passwordStrengthMeterSelector, this.element);\n            this.options.cache.label = $(this.options.passwordStrengthMeterLabelSelector, this.element);\n\n            // We need to look outside the module for backward compatibility, since someone can already use the module.\n            // @todo Narrow this selector in 2.3 so it doesn't accidentally finds the email field from the\n            // newsletter email field or any other \"email\" field.\n            this.options.cache.email = $(this.options.formSelector).find(this.options.emailSelector);\n            this._bind();\n        },\n\n        /**\n         * Event binding, will monitor change, keyup and paste events.\n         * @private\n         */\n        _bind: function () {\n            this._on(this.options.cache.input, {\n                'change': this._calculateStrength,\n                'keyup': this._calculateStrength,\n                'paste': this._calculateStrength\n            });\n\n            if (this.options.cache.email.length) {\n                this._on(this.options.cache.email, {\n                    'change': this._calculateStrength,\n                    'keyup': this._calculateStrength,\n                    'paste': this._calculateStrength\n                });\n            }\n        },\n\n        /**\n         * Calculate password strength\n         * @private\n         */\n        _calculateStrength: function () {\n            var password = this._getPassword(),\n                isEmpty = password.length === 0,\n                zxcvbnScore,\n                displayScore,\n                isValid;\n\n            // Display score is based on combination of whether password is empty, valid, and zxcvbn strength\n            if (isEmpty) {\n                displayScore = 0;\n            } else {\n                this.options.cache.input.rules('add', {\n                    'password-not-equal-to-user-name': this.options.cache.email.val()\n                });\n\n                // We should only perform this check in case there is an email field on screen\n                if (this.options.cache.email.length &&\n                    password.toLowerCase() === this.options.cache.email.val().toLowerCase()) {\n                    displayScore = 1;\n                } else {\n                    isValid = $.validator.validateSingleElement(this.options.cache.input);\n                    zxcvbnScore = zxcvbn(password).score;\n                    displayScore = isValid && zxcvbnScore > 0 ? zxcvbnScore : 1;\n                }\n            }\n\n            // Update label\n            this._displayStrength(displayScore);\n        },\n\n        /**\n         * Display strength\n         * @param {Number} displayScore\n         * @private\n         */\n        _displayStrength: function (displayScore) {\n            var strengthLabel = '',\n                className;\n\n            switch (displayScore) {\n                case 0:\n                    strengthLabel = $t('No Password');\n                    className = 'password-none';\n                    break;\n\n                case 1:\n                    strengthLabel = $t('Weak');\n                    className = 'password-weak';\n                    break;\n\n                case 2:\n                    strengthLabel = $t('Medium');\n                    className = 'password-medium';\n                    break;\n\n                case 3:\n                    strengthLabel = $t('Strong');\n                    className = 'password-strong';\n                    break;\n\n                case 4:\n                    strengthLabel = $t('Very Strong');\n                    className = 'password-very-strong';\n                    break;\n            }\n\n            this.options.cache.meter\n                .removeClass()\n                .addClass(className);\n            this.options.cache.label.text(strengthLabel);\n        },\n\n        /**\n         * Get password value\n         * @returns {*}\n         * @private\n         */\n        _getPassword: function () {\n            return this.options.cache.input.val();\n        }\n    });\n\n    return $.mage.passwordStrengthIndicator;\n});\n","Magento_Customer/js/customer-data.js":"/**\n * Copyright 2015 Adobe\n * All Rights Reserved.\n */\n\n/**\n * @api\n */\ndefine([\n    'jquery',\n    'underscore',\n    'ko',\n    'Magento_Customer/js/section-config',\n    'mage/url',\n    'mage/storage',\n    'jquery/jquery-storageapi'\n], function ($, _, ko, sectionConfig, url) {\n    'use strict';\n\n    var options = {},\n        storage,\n        storageInvalidation,\n        invalidateCacheBySessionTimeOut,\n        invalidateCacheByCloseCookieSession,\n        dataProvider,\n        buffer,\n        customerData,\n        deferred = $.Deferred();\n\n    url.setBaseUrl(window.BASE_URL);\n    options.sectionLoadUrl = url.build('customer/section/load');\n\n    /**\n     * @param {Object} invalidateOptions\n     */\n    invalidateCacheBySessionTimeOut = function (invalidateOptions) {\n        var date;\n\n        if (new Date($.localStorage.get('mage-cache-timeout')) < new Date()) {\n            storage.removeAll();\n        }\n        date = new Date(Date.now() + parseInt(invalidateOptions.cookieLifeTime, 10) * 1000);\n        $.localStorage.set('mage-cache-timeout', date);\n    };\n\n    /**\n     * Invalidate Cache By Close Cookie Session\n     */\n    invalidateCacheByCloseCookieSession = function () {\n        var isLoggedIn = parseInt(options.isLoggedIn, 10) || 0;\n\n        if (!$.cookieStorage.isSet('mage-cache-sessid')) {\n            storage.removeAll();\n        }\n\n        if (!$.localStorage.isSet('mage-customer-login')) {\n            $.localStorage.set('mage-customer-login', isLoggedIn);\n        }\n        if ($.localStorage.get('mage-customer-login') !== isLoggedIn) {\n            $.localStorage.set('mage-customer-login', isLoggedIn);\n            storage.removeAll();\n        }\n\n        $.cookieStorage.set('mage-cache-sessid', true);\n    };\n\n    dataProvider = {\n\n        /**\n         * @param {Object} sectionNames\n         * @return {Object}\n         */\n        getFromStorage: function (sectionNames) {\n            var result = {};\n\n            _.each(sectionNames, function (sectionName) {\n                result[sectionName] = storage.get(sectionName);\n            });\n\n            return result;\n        },\n\n        /**\n         * @param {Object} sectionNames\n         * @param {Boolean} forceNewSectionTimestamp\n         * @return {*}\n         */\n        getFromServer: function (sectionNames, forceNewSectionTimestamp) {\n            var parameters;\n\n            sectionNames = sectionConfig.filterClientSideSections(sectionNames);\n            parameters = _.isArray(sectionNames) && sectionNames.indexOf('*') < 0 ? {\n                sections: sectionNames.join(',')\n            } : [];\n            parameters['force_new_section_timestamp'] = forceNewSectionTimestamp;\n\n            return $.getJSON(options.sectionLoadUrl, parameters).fail(function (jqXHR) {\n                // don't throw error if the request is cancelled or blocked\n                if (jqXHR.status !== 0) {\n                    throw new Error(jqXHR);\n                }\n            });\n        }\n    };\n\n    /**\n     * @param {Function} target\n     * @param {String} sectionName\n     * @return {*}\n     */\n    ko.extenders.disposableCustomerData = function (target, sectionName) {\n        var sectionDataIds, newSectionDataIds = {};\n\n        target.subscribe(function () {\n            setTimeout(function () {\n                storage.remove(sectionName);\n                sectionDataIds = $.cookieStorage.get('section_data_ids') || {};\n                _.each(sectionDataIds, function (data, name) {\n                    if (name !== sectionName) {\n                        newSectionDataIds[name] = data;\n                    }\n                });\n                $.cookieStorage.set('section_data_ids', newSectionDataIds);\n            }, 3000);\n        });\n\n        return target;\n    };\n\n    buffer = {\n        data: {},\n\n        /**\n         * @param {String} sectionName\n         */\n        bind: function (sectionName) {\n            this.data[sectionName] = ko.observable({});\n        },\n\n        /**\n         * @param {String} sectionName\n         * @return {Object}\n         */\n        get: function (sectionName) {\n            if (!this.data[sectionName]) {\n                this.bind(sectionName);\n            }\n\n            return this.data[sectionName];\n        },\n\n        /**\n         * @return {Array}\n         */\n        keys: function () {\n            return _.keys(this.data);\n        },\n\n        /**\n         * @param {String} sectionName\n         * @param {Object} sectionData\n         */\n        notify: function (sectionName, sectionData) {\n            if (!this.data[sectionName]) {\n                this.bind(sectionName);\n            }\n            this.data[sectionName](sectionData);\n        },\n\n        /**\n         * @param {Object} sections\n         */\n        update: function (sections) {\n            var sectionId = 0,\n                sectionDataIds = $.cookieStorage.get('section_data_ids') || {};\n\n            _.each(sections, function (sectionData, sectionName) {\n                sectionId = sectionData['data_id'];\n                sectionDataIds[sectionName] = sectionId;\n                storage.set(sectionName, sectionData);\n                storageInvalidation.remove(sectionName);\n                buffer.notify(sectionName, sectionData);\n            });\n            $.cookieStorage.set('section_data_ids', sectionDataIds);\n        },\n\n        /**\n         * @param {Object} sections\n         */\n        remove: function (sections) {\n            _.each(sections, function (sectionName) {\n                storage.remove(sectionName);\n\n                if (!sectionConfig.isClientSideSection(sectionName)) {\n                    storageInvalidation.set(sectionName, true);\n                }\n            });\n        }\n    };\n\n    customerData = {\n\n        /**\n         * Customer data initialization\n         */\n        init: function () {\n            var expiredSectionNames = this.getExpiredSectionNames();\n\n            if (expiredSectionNames.length > 0) {\n                _.each(dataProvider.getFromStorage(storage.keys()), function (sectionData, sectionName) {\n                    buffer.notify(sectionName, sectionData);\n                });\n                this.reload(expiredSectionNames, false);\n            } else {\n                _.each(dataProvider.getFromStorage(storage.keys()), function (sectionData, sectionName) {\n                    buffer.notify(sectionName, sectionData);\n                });\n\n                if (!_.isEmpty(storageInvalidation.keys())) {\n                    this.reload(storageInvalidation.keys(), false);\n                }\n            }\n\n            if (!_.isEmpty($.cookieStorage.get('section_data_clean'))) {\n                this.reload(sectionConfig.getSectionNames(), true);\n                $.cookieStorage.set('section_data_clean', '');\n            }\n        },\n\n        /**\n         * Storage init\n         */\n        initStorage: function () {\n            $.cookieStorage.setConf({\n                path: '/',\n                expires: new Date(Date.now() + parseInt(options.cookieLifeTime, 10) * 1000)\n            });\n\n            if (options.cookieDomain) {\n                $.cookieStorage.setConf({\n                    domain: options.cookieDomain\n                });\n            }\n\n            storage = $.initNamespaceStorage('mage-cache-storage').localStorage;\n            storageInvalidation = $.initNamespaceStorage('mage-cache-storage-section-invalidation').localStorage;\n        },\n\n        /**\n         * Retrieve the list of sections that has expired since last page reload.\n         *\n         * Sections can expire due to lifetime constraints or due to inconsistent storage information\n         * (validated by cookie data).\n         *\n         * @return {Array}\n         */\n        getExpiredSectionNames: function () {\n            var expiredSectionNames = [],\n                cookieSectionTimestamps = $.cookieStorage.get('section_data_ids') || {},\n                sectionLifetime = options.expirableSectionLifetime * 60,\n                currentTimestamp = Math.floor(Date.now() / 1000),\n                sectionData;\n\n            // process sections that can expire due to lifetime constraints\n            _.each(options.expirableSectionNames, function (sectionName) {\n                sectionData = storage.get(sectionName);\n\n                if (typeof sectionData === 'object' && sectionData['data_id'] + sectionLifetime <= currentTimestamp) {\n                    expiredSectionNames.push(sectionName);\n                }\n            });\n\n            // process sections that can expire due to storage information inconsistency\n            _.each(cookieSectionTimestamps, function (cookieSectionTimestamp, sectionName) {\n                if (storage !== undefined) {\n                    sectionData = storage.get(sectionName);\n                }\n\n                if (typeof sectionData === 'undefined' ||\n                    typeof sectionData === 'object' &&\n                    cookieSectionTimestamp !== sectionData['data_id']\n                ) {\n                    expiredSectionNames.push(sectionName);\n                }\n            });\n\n            //remove expired section names of previously installed/enable modules\n            expiredSectionNames = _.intersection(expiredSectionNames, sectionConfig.getSectionNames());\n\n            return _.uniq(expiredSectionNames);\n        },\n\n        /**\n         * Check if some sections have to be reloaded.\n         *\n         * @deprecated Use getExpiredSectionNames instead.\n         *\n         * @return {Boolean}\n         */\n        needReload: function () {\n            var expiredSectionNames = this.getExpiredSectionNames();\n\n            return expiredSectionNames.length > 0;\n        },\n\n        /**\n         * Retrieve the list of expired keys.\n         *\n         * @deprecated Use getExpiredSectionNames instead.\n         *\n         * @return {Array}\n         */\n        getExpiredKeys: function () {\n            return this.getExpiredSectionNames();\n        },\n\n        /**\n         * @param {String} sectionName\n         * @return {*}\n         */\n        get: function (sectionName) {\n            return buffer.get(sectionName);\n        },\n\n        /**\n         * @param {String} sectionName\n         * @param {Object} sectionData\n         */\n        set: function (sectionName, sectionData) {\n            var data = {};\n\n            data[sectionName] = sectionData;\n            buffer.update(data);\n        },\n\n        /**\n         * Avoid using this function directly 'cause of possible performance drawbacks.\n         * Each customer section reload brings new non-cached ajax request.\n         *\n         * @param {Array} sectionNames\n         * @param {Boolean} forceNewSectionTimestamp\n         * @return {*}\n         */\n        reload: function (sectionNames, forceNewSectionTimestamp) {\n            return dataProvider.getFromServer(sectionNames, forceNewSectionTimestamp).done(function (sections) {\n                $(document).trigger('customer-data-reload', [sectionNames]);\n                buffer.update(sections);\n            });\n        },\n\n        /**\n         * @param {Array} sectionNames\n         */\n        invalidate: function (sectionNames) {\n            var sectionDataIds,\n                sectionsNamesForInvalidation;\n\n            sectionsNamesForInvalidation = _.contains(sectionNames, '*') ? sectionConfig.getSectionNames() :\n                sectionNames;\n\n            $(document).trigger('customer-data-invalidate', [sectionsNamesForInvalidation]);\n            buffer.remove(sectionsNamesForInvalidation);\n            sectionDataIds = $.cookieStorage.get('section_data_ids') || {};\n\n            // Invalidate section in cookie (increase version of section with 1000)\n            _.each(sectionsNamesForInvalidation, function (sectionName) {\n                if (!sectionConfig.isClientSideSection(sectionName)) {\n                    sectionDataIds[sectionName] += 1000;\n                }\n            });\n            $.cookieStorage.set('section_data_ids', sectionDataIds);\n        },\n\n        /**\n         * Checks if customer data is initialized.\n         *\n         * @returns {jQuery.Deferred}\n         */\n        getInitCustomerData: function () {\n            return deferred.promise();\n        },\n\n        /**\n         * Reload sections on ajax complete\n         *\n         * @param {Object} jsonResponse\n         * @param {Object} settings\n         */\n        onAjaxComplete: function (jsonResponse, settings) {\n            var sections,\n                redirects;\n\n            if (settings.type.match(/post|put|delete/i)) {\n                sections = sectionConfig.getAffectedSections(settings.url);\n\n                if (sections && sections.length) {\n                    this.invalidate(sections);\n                    redirects = ['redirect', 'backUrl'];\n\n                    if (_.isObject(jsonResponse) && !_.isEmpty(_.pick(jsonResponse, redirects))) { //eslint-disable-line\n                        return;\n                    }\n                    this.reload(sections, true);\n                }\n            }\n        },\n\n        /**\n         * @param {Object} settings\n         * @constructor\n         */\n        'Magento_Customer/js/customer-data': function (settings) {\n            options = settings;\n            customerData.initStorage();\n            invalidateCacheBySessionTimeOut(settings);\n            invalidateCacheByCloseCookieSession();\n            customerData.init();\n            deferred.resolve();\n        }\n    };\n\n    /**\n     * Events listener\n     */\n    $(document).on('ajaxComplete', function (event, xhr, settings) {\n        customerData.onAjaxComplete(xhr.responseJSON, settings);\n    });\n\n    /**\n     * Events listener\n     */\n    $(document).on('submit', function (event) {\n        var sections;\n\n        if (event.target.hasAttribute('method') && event.target.getAttribute('method').match(/post|put|delete/i)) {\n            sections = sectionConfig.getAffectedSections(event.target.action);\n\n            if (sections) {\n                customerData.invalidate(sections);\n            }\n        }\n    });\n\n    return customerData;\n});\n","Magento_Customer/js/action/login.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/storage',\n    'Magento_Ui/js/model/messageList',\n    'Magento_Customer/js/customer-data',\n    'mage/translate'\n], function ($, storage, globalMessageList, customerData, $t) {\n    'use strict';\n\n    var callbacks = [],\n\n        /**\n         * @param {Object} loginData\n         * @param {String} redirectUrl\n         * @param {*} isGlobal\n         * @param {Object} messageContainer\n         */\n        action = function (loginData, redirectUrl, isGlobal, messageContainer) {\n            messageContainer = messageContainer || globalMessageList;\n            let customerLoginUrl = 'customer/ajax/login';\n\n            if (loginData.customerLoginUrl) {\n                customerLoginUrl = loginData.customerLoginUrl;\n                delete loginData.customerLoginUrl;\n            }\n\n            return storage.post(\n                customerLoginUrl,\n                JSON.stringify(loginData),\n                isGlobal\n            ).done(function (response) {\n                if (response.errors) {\n                    messageContainer.addErrorMessage(response);\n                    callbacks.forEach(function (callback) {\n                        callback(loginData);\n                    });\n                } else {\n                    callbacks.forEach(function (callback) {\n                        callback(loginData);\n                    });\n                    customerData.invalidate(['customer']);\n\n                    if (response.redirectUrl) {\n                        window.location.href = response.redirectUrl;\n                    } else if (redirectUrl) {\n                        window.location.href = redirectUrl;\n                    } else {\n                        location.reload();\n                    }\n                }\n            }).fail(function () {\n                messageContainer.addErrorMessage({\n                    'message': $t('Could not authenticate. Please try again later')\n                });\n                callbacks.forEach(function (callback) {\n                    callback(loginData);\n                });\n            });\n        };\n\n    /**\n     * @param {Function} callback\n     */\n    action.registerLoginCallback = function (callback) {\n        callbacks.push(callback);\n    };\n\n    return action;\n});\n","Magento_Customer/js/action/check-email-availability.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'mage/storage',\n    'Magento_Checkout/js/model/url-builder'\n], function (storage, urlBuilder) {\n    'use strict';\n\n    return function (deferred, email) {\n        return storage.post(\n            urlBuilder.createUrl('/customers/isEmailAvailable', {}),\n            JSON.stringify({\n                customerEmail: email\n            }),\n            false\n        ).done(function (isEmailAvailable) {\n            if (isEmailAvailable) {\n                deferred.resolve();\n            } else {\n                deferred.reject();\n            }\n        }).fail(function () {\n            deferred.reject();\n        });\n    };\n});\n","Magento_Customer/js/invalidation-rules/website-rule.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'uiClass'\n], function (Element) {\n    'use strict';\n\n    return Element.extend({\n\n        defaults: {\n            scopeConfig: {}\n        },\n\n        /**\n         * Takes website id from current customer data and compare it with current website id\n         * If customer belongs to another scope, we need to invalidate current section\n         *\n         * @param {Object} customerData\n         */\n        process: function (customerData) {\n            var customer = customerData.get('customer');\n\n            if (this.scopeConfig && customer() &&\n                ~~customer().websiteId !== ~~this.scopeConfig.websiteId && ~~customer().websiteId !== 0) {\n                customerData.reload(['customer']);\n            }\n        }\n    });\n});\n","Magento_Customer/js/view/authentication-popup.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'ko',\n    'Magento_Ui/js/form/form',\n    'Magento_Customer/js/action/login',\n    'Magento_Customer/js/customer-data',\n    'Magento_Customer/js/model/authentication-popup',\n    'mage/translate',\n    'mage/url',\n    'Magento_Ui/js/modal/alert',\n    'mage/validation'\n], function ($, ko, Component, loginAction, customerData, authenticationPopup, $t, url, alert) {\n    'use strict';\n\n    return Component.extend({\n        registerUrl: window.authenticationPopup.customerRegisterUrl,\n        forgotPasswordUrl: window.authenticationPopup.customerForgotPasswordUrl,\n        autocomplete: window.authenticationPopup.autocomplete,\n        modalWindow: null,\n        isLoading: ko.observable(false),\n\n        defaults: {\n            template: 'Magento_Customer/authentication-popup'\n        },\n\n        /**\n         * Init\n         */\n        initialize: function () {\n            var self = this;\n\n            this._super();\n            url.setBaseUrl(window.authenticationPopup.baseUrl);\n            loginAction.registerLoginCallback(function () {\n                self.isLoading(false);\n            });\n        },\n\n        /**\n         * Sets modal on given HTML element with on demand initialization.\n         */\n        setModalElement: function (element) {\n            var cart = customerData.get('cart');\n\n            if (cart().isGuestCheckoutAllowed === false) {\n                this.createPopup(element);\n            } else {\n                cart.subscribe(function (cartData) {\n                    if (cartData.isGuestCheckoutAllowed === false) {\n                        this.createPopup(element);\n                    }\n                }, this);\n            }\n        },\n\n        /**\n         * Initializes authentication modal on given HTML element.\n         */\n        createPopup: function (element) {\n            if (authenticationPopup.modalWindow == null) {\n                authenticationPopup.createPopUp(element);\n            }\n        },\n\n        /** Is login form enabled for current customer */\n        isActive: function () {\n            var customer = customerData.get('customer');\n\n            return customer() == false; //eslint-disable-line eqeqeq\n        },\n\n        /** Show login popup window */\n        showModal: function () {\n            if (this.modalWindow) {\n                $(this.modalWindow).modal('openModal');\n            } else {\n                alert({\n                    content: $t('Guest checkout is disabled.')\n                });\n            }\n        },\n\n        /**\n         * Provide login action\n         *\n         * @return {Boolean}\n         */\n        login: function (formUiElement, event) {\n            var loginData = {},\n                formElement = $(event.currentTarget),\n                formDataArray = formElement.serializeArray();\n\n            event.stopPropagation();\n            formDataArray.forEach(function (entry) {\n                loginData[entry.name] = entry.value;\n            });\n            loginData['customerLoginUrl'] = window.authenticationPopup.customerLoginUrl;\n            if (formElement.validation() &&\n                formElement.validation('isValid')\n            ) {\n                this.isLoading(true);\n                loginAction(loginData);\n            }\n\n            return false;\n        }\n    });\n});\n","Magento_Customer/js/view/customer.js":"/**\n* Copyright \u00a9 Magento, Inc. All rights reserved.\n* See COPYING.txt for license details.\n*/\n\ndefine([\n    'uiComponent',\n    'Magento_Customer/js/customer-data'\n], function (Component, customerData) {\n    'use strict';\n\n    return Component.extend({\n        /** @inheritdoc */\n        initialize: function () {\n            this._super();\n\n            this.customer = customerData.get('customer');\n        }\n    });\n});\n","Magento_Customer/js/model/customer.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'jquery',\n    'ko',\n    'underscore',\n    './address-list'\n], function ($, ko, _, addressList) {\n    'use strict';\n\n    var isLoggedIn = ko.observable(window.isCustomerLoggedIn),\n        customerData = {};\n\n    if (isLoggedIn()) {\n        customerData = window.customerData;\n    } else {\n        customerData = {};\n    }\n\n    return {\n        customerData: customerData,\n        customerDetails: {},\n        isLoggedIn: isLoggedIn,\n\n        /**\n         * @param {Boolean} flag\n         */\n        setIsLoggedIn: function (flag) {\n            isLoggedIn(flag);\n        },\n\n        /**\n         * @return {Array}\n         */\n        getBillingAddressList: function () {\n            return addressList();\n        },\n\n        /**\n         * @return {Array}\n         */\n        getShippingAddressList: function () {\n            return addressList();\n        },\n\n        /**\n         * @param {String} fieldName\n         * @param {*} value\n         */\n        setDetails: function (fieldName, value) {\n            if (fieldName) {\n                this.customerDetails[fieldName] = value;\n            }\n        },\n\n        /**\n         * @param {String} fieldName\n         * @return {*}\n         */\n        getDetails: function (fieldName) {\n            if (fieldName) {\n                if (this.customerDetails.hasOwnProperty(fieldName)) {\n                    return this.customerDetails[fieldName];\n                }\n\n                return undefined;\n            }\n\n            return this.customerDetails;\n        },\n\n        /**\n         * @param {Array} address\n         * @return {Number}\n         */\n        addCustomerAddress: function (address) {\n            var fields = [\n                    'customer_id', 'country_id', 'street', 'company', 'telephone', 'fax', 'postcode', 'city',\n                    'firstname', 'lastname', 'middlename', 'prefix', 'suffix', 'vat_id', 'default_billing',\n                    'default_shipping'\n                ],\n                customerAddress = {},\n                hasAddress = 0,\n                existingAddress;\n\n            if (!this.customerData.addresses) {\n                this.customerData.addresses = [];\n            }\n\n            customerAddress = _.pick(address, fields);\n\n            if (address.hasOwnProperty('region_id')) {\n                customerAddress.region = {\n                    'region_id': address['region_id'],\n                    region: address.region\n                };\n            }\n\n            for (existingAddress in this.customerData.addresses) {\n                if (this.customerData.addresses.hasOwnProperty(existingAddress)) {\n                    if (_.isEqual(this.customerData.addresses[existingAddress], customerAddress)) { //eslint-disable-line\n                        hasAddress = existingAddress;\n                        break;\n                    }\n                }\n            }\n\n            if (hasAddress === 0) {\n                return this.customerData.addresses.push(customerAddress) - 1;\n            }\n\n            return hasAddress;\n        },\n\n        /**\n         * @param {*} addressId\n         * @return {Boolean}\n         */\n        setAddressAsDefaultBilling: function (addressId) {\n            if (this.customerData.addresses[addressId]) {\n                this.customerData.addresses[addressId]['default_billing'] = 1;\n\n                return true;\n            }\n\n            return false;\n        },\n\n        /**\n         * @param {*} addressId\n         * @return {Boolean}\n         */\n        setAddressAsDefaultShipping: function (addressId) {\n            if (this.customerData.addresses[addressId]) {\n                this.customerData.addresses[addressId]['default_shipping'] = 1;\n\n                return true;\n            }\n\n            return false;\n        }\n    };\n});\n","Magento_Customer/js/model/customer-addresses.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'jquery',\n    'ko',\n    './customer/address'\n], function ($, ko, Address) {\n    'use strict';\n\n    var isLoggedIn = ko.observable(window.isCustomerLoggedIn);\n\n    return {\n        /**\n         * @return {Array}\n         */\n        getAddressItems: function () {\n            var items = [],\n                customerData = window.customerData;\n\n            if (isLoggedIn()) {\n                if (Object.keys(customerData).length) {\n                    $.each(customerData.addresses, function (key, item) {\n                        items.push(new Address(item));\n                    });\n                }\n            }\n\n            return items;\n        }\n    };\n});\n","Magento_Customer/js/model/authentication-popup.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Ui/js/modal/modal'\n], function ($, modal) {\n    'use strict';\n\n    return {\n        modalWindow: null,\n\n        /**\n         * Create popUp window for provided element\n         *\n         * @param {HTMLElement} element\n         */\n        createPopUp: function (element) {\n            var options = {\n                'type': 'popup',\n                'modalClass': 'popup-authentication',\n                'focus': '[name=username]',\n                'responsive': true,\n                'innerScroll': true,\n                'trigger': '.proceed-to-checkout',\n                'buttons': []\n            };\n\n            this.modalWindow = element;\n            modal(options, $(this.modalWindow));\n        },\n\n        /** Show login popup window */\n        showModal: function () {\n            $(this.modalWindow).modal('openModal').trigger('contentUpdated');\n        }\n    };\n});\n","Magento_Customer/js/model/address-list.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'ko',\n    './customer-addresses'\n], function (ko, defaultProvider) {\n    'use strict';\n\n    return ko.observableArray(defaultProvider.getAddressItems());\n});\n","Magento_Customer/js/model/customer/address.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine(['underscore'], function (_) {\n    'use strict';\n\n    /**\n     * Returns new address object.\n     *\n     * @param {Object} addressData\n     * @return {Object}\n     */\n    return function (addressData) {\n        var regionId;\n\n        if (addressData.region['region_id'] && addressData.region['region_id'] !== '0') {\n            regionId = addressData.region['region_id'] + '';\n        }\n\n        return {\n            customerAddressId: addressData.id,\n            email: addressData.email,\n            countryId: addressData['country_id'],\n            regionId: regionId,\n            regionCode: addressData.region['region_code'],\n            region: addressData.region.region,\n            customerId: addressData['customer_id'],\n            street: addressData.street,\n            company: addressData.company,\n            telephone: addressData.telephone,\n            fax: addressData.fax,\n            postcode: addressData.postcode,\n            city: addressData.city,\n            firstname: addressData.firstname,\n            lastname: addressData.lastname,\n            middlename: addressData.middlename,\n            prefix: addressData.prefix,\n            suffix: addressData.suffix,\n            vatId: addressData['vat_id'],\n            sameAsBilling: addressData['same_as_billing'],\n            saveInAddressBook: addressData['save_in_address_book'],\n            customAttributes: _.toArray(addressData['custom_attributes']).reverse(),\n\n            /**\n             * @return {*}\n             */\n            isDefaultShipping: function () {\n                return addressData['default_shipping'];\n            },\n\n            /**\n             * @return {*}\n             */\n            isDefaultBilling: function () {\n                return addressData['default_billing'];\n            },\n\n            /**\n             * @return {*}\n             */\n            getAddressInline: function () {\n                return addressData.inline;\n            },\n\n            /**\n             * @return {String}\n             */\n            getType: function () {\n                return 'customer-address';\n            },\n\n            /**\n             * @return {String}\n             */\n            getKey: function () {\n                return this.getType() + this.customerAddressId;\n            },\n\n            /**\n             * @return {String}\n             */\n            getCacheKey: function () {\n                return this.getKey();\n            },\n\n            /**\n             * @return {Boolean}\n             */\n            isEditable: function () {\n                return false;\n            },\n\n            /**\n             * @return {Boolean}\n             */\n            canUseForBilling: function () {\n                return true;\n            }\n        };\n    };\n});\n","Magento_Theme/js/theme.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/smart-keyboard-handler',\n    'mage/mage',\n    'domReady!'\n], function ($, keyboardHandler) {\n    'use strict';\n\n    $('.cart-summary').mage('sticky', {\n        container: '#maincontent'\n    });\n\n    $('.panel.header > .header.links').clone().appendTo('#store\\\\.links');\n    $('#store\\\\.links li a').each(function () {\n        var id = $(this).attr('id');\n\n        if (id !== undefined) {\n            $(this).attr('id', id + '_mobile');\n        }\n    });\n    keyboardHandler.apply();\n});\n","Magento_Theme/js/cookie-status.js":"define([\n    'jquery',\n    'Magento_Ui/js/modal/modal',\n    'mage/translate'\n], function ($, modal) {\n    'use strict';\n\n    $.widget('mage.cookieStatus', {\n        options: {\n            type: 'popup',\n            responsive: true,\n            innerScroll: true,\n            autoOpen: true,\n            buttons: [{\n                text: $.mage.__('Close'),\n                class: 'cookie-status',\n\n                /**\n                 * Callback for click event\n                 */\n                click: function () {\n                    this.closeModal();\n                }\n            }]\n        },\n\n        /**\n         * Init object\n         * @private\n         */\n        _init: function () {\n\n            if (!navigator.cookieEnabled) {\n                modal(this.options, $('#cookie-status'));\n            }\n        }\n    });\n\n    return $.mage.cookieStatus;\n});\n","Magento_Theme/js/row-builder.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * JQuery UI Widget declaration: 'mage.rowBuilder'\n *\n * @api\n */\ndefine([\n    'jquery',\n    'mage/template',\n    'jquery-ui-modules/widget'\n], function ($, mageTemplate) {\n    'use strict';\n\n    $.widget('mage.rowBuilder', {\n\n        /**\n         * options with default values for setting up the template\n         */\n        options: {\n            //Default template options\n            rowTemplate: '#template-registrant',\n            rowContainer: '#registrant-container',\n            //Row index used by the template rows.\n            rowIndex: 0,\n            //Row count: Should not be set externally\n            rowCount: 0,\n            rowParentElem: '<li></li>',\n            rowContainerClass: 'fields',\n            addRowBtn: '#add-registrant-button',\n            btnRemoveIdPrefix: 'btn-remove',\n            btnRemoveSelector: '.btn-remove',\n            rowIdPrefix: 'row',\n            //This class is added to rows added after the first one. Adds the dotted separator\n            additionalRowClass: 'add-row',\n\n            /*\n             This is provided during widget instantiation. eg :\n             formDataPost : {\"formData\":formData,\"templateFields\":['field1-name','field2-name'] }\n             -\"formData\" is the multi-dimensional array of form field values : [['a','b'],['c','b']]\n             received from the server and encoded\n             -\"templateFields\" are the input fields in the template with index suffixed after the field name\n             eg field1-name{index}\n             */\n            formDataPost: null,\n            //Default selectors for add element of a template\n            addEventSelector: 'button',\n            //Default selectors for remove markup elements of a template\n            remEventSelector: 'a',\n            //This option allows adding first row delete option and a row separator\n            hideFirstRowAddSeparator: true,\n            //Max rows - This option should be set when instantiating the widget\n            maxRows: 1000,\n            maxRowsMsg: '#max-registrant-message'\n        },\n\n        /**\n         * Initialize create\n         * @private\n         */\n        _create: function () {\n            this.rowTemplate = mageTemplate(this.options.rowTemplate);\n\n            this.options.rowCount = this.options.rowIndex = 0;\n\n            //On document ready related tasks\n            $($.proxy(this.ready, this));\n\n            //Binding template-wide events handlers for adding and removing rows\n            this.element.on(\n                'click',\n                this.options.addEventSelector + this.options.addRowBtn,\n                $.proxy(this.handleAdd, this)\n            );\n            this.element.on(\n                'click',\n                this.options.remEventSelector + this.options.btnRemoveSelector,\n                $.proxy(this.handleRemove, this)\n            );\n        },\n\n        /**\n         * Initialize template\n         * @public\n         */\n        ready: function () {\n            if (this.options.formDataPost &&\n                this.options.formDataPost.formData &&\n                this.options.formDataPost.formData.length\n            ) {\n                this.processFormDataArr(this.options.formDataPost);\n            } else if (this.options.rowIndex === 0 && this.options.maxRows !== 0) {\n                //If no form data , then add default row\n                this.addRow(0);\n            }\n        },\n\n        /**\n         * Process and loop through all row data to create preselected values. This is used for any error on submit.\n         * For complex implementations the inheriting widget can override this behavior\n         * @public\n         * @param {Object} formDataArr\n         */\n        processFormDataArr: function (formDataArr) {\n            var formData = formDataArr.formData,\n                templateFields = formDataArr.templateFields,\n                formRow,\n                i, j;\n\n            for (i = this.options.rowIndex = 0; i < formData.length; this.options.rowIndex = i++) {\n                this.addRow(i);\n\n                formRow = formData[i];\n\n                for (j = 0; j < formRow.length; j++) {\n                    this.setFieldById(templateFields[j] + i, formRow[j]);\n                }\n            }\n\n        },\n\n        /**\n         * Initialize and create markup for template row. Add it to the parent container.\n         * The template processing will substitute row index at all places marked with _index_ in the template\n         * using the template\n         * @public\n         * @param {Number} index - current index/count of the created template. This will be used as the id\n         * @return {*}\n         */\n        addRow: function (index) {\n            var row = $(this.options.rowParentElem),\n                tmpl;\n\n            row.addClass(this.options.rowContainerClass).attr('id', this.options.rowIdPrefix + index);\n\n            tmpl = this.rowTemplate({\n                data: {\n                    _index_: index\n                }\n            });\n\n            $(tmpl).appendTo(row);\n\n            $(this.options.rowContainer).append(row).trigger('contentUpdated');\n\n            row.addClass(this.options.additionalRowClass);\n\n            //Remove 'delete' link and additionalRowClass for first row\n            if (this.options.rowIndex === 0 && this.options.hideFirstRowAddSeparator) {\n                $('#' + this._esc(this.options.btnRemoveIdPrefix) + '0').remove();\n                $('#' + this._esc(this.options.rowIdPrefix) + '0').removeClass(this.options.additionalRowClass);\n            }\n\n            this.maxRowCheck(++this.options.rowCount);\n\n            return row;\n        },\n\n        /**\n         * Remove return item information row\n         * @public\n         * @param {*} rowIndex - return item information row index\n         * @return {Boolean}\n         */\n        removeRow: function (rowIndex) {\n            $('#' + this._esc(this.options.rowIdPrefix) + rowIndex).remove();\n            this.maxRowCheck(--this.options.rowCount);\n\n            return false;\n        },\n\n        /**\n         * Function to check if maximum rows are exceeded and render/hide maxMsg and Add btn\n         * @public\n         * @param {Number} rowIndex\n         */\n        maxRowCheck: function (rowIndex) {\n            var addRowBtn = $(this.options.addRowBtn),\n                maxRowMsg = $(this.options.maxRowsMsg);\n\n            //liIndex starts from 0\n            if (rowIndex >= this.options.maxRows) {\n                addRowBtn.hide();\n                maxRowMsg.show();\n            } else if (addRowBtn.is(':hidden')) {\n                addRowBtn.show();\n                maxRowMsg.hide();\n            }\n        },\n\n        /**\n         * Set the value on given element\n         * @public\n         * @param {String} domId\n         * @param {String} value\n         */\n        setFieldById: function (domId, value) {\n            var x = $('#' + this._esc(domId));\n\n            if (x.length) {\n\n                if (x.is(':checkbox')) {\n                    x.attr('checked', true);\n                } else if (x.is('option')) {\n                    x.attr('selected', 'selected');\n                } else {\n                    x.val(value);\n                }\n            }\n        },\n\n        /**\n         * Delegated handler for adding a row\n         * @public\n         * @return {Boolean}\n         */\n        handleAdd: function () {\n            this.addRow(++this.options.rowIndex);\n\n            return false;\n        },\n\n        /**\n         * Delegated handler for removing a selected row\n         * @public\n         * @param {Object} e - Native event object\n         * @return {Boolean}\n         */\n        handleRemove: function (e) {\n            this.removeRow($(e.currentTarget).closest('[id^=\"' + this.options.btnRemoveIdPrefix + '\"]')\n                .attr('id').replace(this.options.btnRemoveIdPrefix, ''));\n\n            return false;\n        },\n\n        /**\n         * Utility function to add escape chars for jquery selector strings\n         * @private\n         * @param {String} str - String to be processed\n         * @return {String}\n         */\n        _esc: function (str) {\n            return str ? str.replace(/([ ;&,.+*~\\':\"!\\^$\\[\\]()=>|\\/@])/g, '\\\\$1') : str;\n        }\n    });\n\n    return $.mage.rowBuilder;\n});\n","Magento_Theme/js/view/add-home-breadcrumb.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/* eslint-disable max-nested-callbacks, no-undef */\ndefine([\n    'jquery',\n    'Magento_Theme/js/model/breadcrumb-list',\n    'mage/translate'\n], function ($, breadcrumbList) {\n    'use strict';\n\n    /**\n     * @return {Object}\n     */\n    var homeCrumb = function () {\n        return {\n            name: 'home',\n            label: $.mage.__('Home'),\n            title: $.mage.__('Go to Home Page'),\n            link: BASE_URL || ''\n        };\n    };\n\n    return function (breadcrumb) {\n\n        breadcrumbList.unshift(homeCrumb());\n\n        return breadcrumb;\n    };\n});\n","Magento_Theme/js/view/breadcrumbs.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/template',\n    'Magento_Theme/js/model/breadcrumb-list',\n    'text!Magento_Theme/templates/breadcrumbs.html',\n    'jquery-ui-modules/widget'\n], function ($, mageTemplate, breadcrumbList, tpl) {\n    'use strict';\n\n    /**\n     * Breadcrumb Widget.\n     */\n    $.widget('mage.breadcrumbs', {\n\n        /** @inheritdoc */\n        _init: function () {\n            this._super();\n            this._render();\n        },\n\n        /**\n         * Render breadcrumb.\n         *\n         * @private\n         */\n        _render: function () {\n            var html,\n                crumbs = breadcrumbList,\n                template = mageTemplate(tpl);\n\n            this._decorate(crumbs);\n\n            html = template({\n                'breadcrumbs': crumbs\n            });\n\n            if (html.length) {\n                $(this.element).html(html);\n            }\n        },\n\n        /**\n         * Decorate list.\n         *\n         * @param {Array} list\n         * @private\n         */\n        _decorate: function (list) {\n\n            if (list.length) {\n                list[0].first = true;\n            }\n\n            if (list.length > 1) {\n                list[list.length - 1].last = true;\n            }\n        }\n    });\n\n    return $.mage.breadcrumbs;\n});\n","Magento_Theme/js/view/messages.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'jquery',\n    'uiComponent',\n    'Magento_Customer/js/customer-data',\n    'underscore',\n    'escaper',\n    'jquery/jquery-storageapi'\n], function ($, Component, customerData, _, escaper) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            cookieMessages: [],\n            cookieMessagesObservable: [],\n            messages: [],\n            allowedTags: ['div', 'span', 'b', 'strong', 'i', 'em', 'u', 'a']\n        },\n\n        /**\n         * Extends Component object by storage observable messages.\n         */\n        initialize: function () {\n            this._super().observe(\n                [\n                    'cookieMessagesObservable'\n                ]\n            );\n\n            // The \"cookieMessages\" variable is not used anymore. It exists for backward compatibility; to support\n            // merchants who have overwritten \"messages.phtml\" which would still point to cookieMessages instead of the\n            // observable variant (also see https://github.com/magento/magento2/pull/37309).\n            this.cookieMessages = _.unique($.cookieStorage.get('mage-messages'), 'text');\n            this.cookieMessagesObservable(this.cookieMessages);\n\n            this.messages = customerData.get('messages').extend({\n                disposableCustomerData: 'messages'\n            });\n\n            $.mage.cookies.set('mage-messages', '', {\n                samesite: 'strict',\n                domain: ''\n            });\n        },\n\n        /**\n         * Prepare the given message to be rendered as HTML\n         *\n         * @param {String} message\n         * @return {String}\n         */\n        prepareMessageForHtml: function (message) {\n            return escaper.escapeHtml(message, this.allowedTags);\n        },\n        purgeMessages: function () {\n            if (!_.isEmpty(this.messages().messages)) {\n                customerData.set('messages', {});\n            }\n        }\n    });\n});\n","Magento_Theme/js/model/breadcrumb-list.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([], function () {\n    'use strict';\n\n    return [];\n});\n","Magento_GoogleAnalytics/js/google-analytics.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/* jscs:disable */\n/* eslint-disable */\ndefine([\n    'jquery',\n    'mage/cookies'\n], function ($) {\n    'use strict';\n\n    /**\n     * @param {Object} config\n     */\n    return function (config) {\n        var allowServices = false,\n            allowedCookies,\n            allowedWebsites;\n\n        if (config.isCookieRestrictionModeEnabled) {\n            allowedCookies = $.mage.cookies.get(config.cookieName);\n\n            if (allowedCookies !== null) {\n                allowedWebsites = JSON.parse(allowedCookies);\n\n                if (allowedWebsites[config.currentWebsite] === 1) {\n                    allowServices = true;\n                }\n            }\n        } else {\n            allowServices = true;\n        }\n\n        if (allowServices) {\n            (function (i, s, o, g, r, a, m) {\n                i.GoogleAnalyticsObject = r;\n                i[r] = i[r] || function () {\n                        (i[r].q = i[r].q || []).push(arguments)\n                    }, i[r].l = 1 * new Date();\n                a = s.createElement(o),\n                    m = s.getElementsByTagName(o)[0];\n                a.async = 1;\n                a.src = g;\n                m.parentNode.insertBefore(a, m)\n            })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');\n\n            // Process page info\n            ga('create', config.pageTrackingData.accountId, 'auto');\n\n            if (config.pageTrackingData.isAnonymizedIpActive) {\n                ga('set', 'anonymizeIp', true);\n            }\n\n            // Process orders data\n            if (config.ordersTrackingData.hasOwnProperty('currency')) {\n                ga('require', 'ec', 'ec.js');\n\n                ga('set', 'currencyCode', config.ordersTrackingData.currency);\n\n                // Collect product data for GA\n                if (config.ordersTrackingData.products) {\n                    $.each(config.ordersTrackingData.products, function (index, value) {\n                        ga('ec:addProduct', value);\n                    });\n                }\n\n                // Collect orders data for GA\n                if (config.ordersTrackingData.orders) {\n                    $.each(config.ordersTrackingData.orders, function (index, value) {\n                        ga('ec:setAction', 'purchase', value);\n                    });\n                }\n\n                ga('send', 'pageview');\n            } else {\n                // Process Data if not orders\n                ga('send', 'pageview' + config.pageTrackingData.optPageUrl);\n            }\n        }\n    }\n});\n","Magiccart_Magicproduct/js/magicproduct.js":"/**\n * Magiccart \n * @category \tMagiccart \n * @copyright \tCopyright (c) 2014 Magiccart (http://www.magiccart.net/) \n * @license \thttp://www.magiccart.net/license-agreement.html\n * @Author: DOng NGuyen<nguyen@dvn.com>\n * @@Create Date: 2014-04-25 13:16:48\n * @@Modify Date: 2021-02-25 11:08:12\n * @@Function:\n */\n\ndefine([\n    'jquery',\n    'slick'\n    ], function ($) {\n    \"use strict\";\n    $.fn.magicproduct = function (options) {\n        var defaults = {\n            selector : '.magicproduct', // Selector product grid\n            classes  : '.product-item', // Selector product grid\n            tabs \t : '.magictabs',\n            loading  : '.ajax_loading',\n            product  : '.content-products',\n            padding  : 15, // padding item\n            actionmore \t\t\t\t: '.action-more',\n\t\t\tloadmoreSelector\t\t: '.load-more',\n\t\t\tloadendSelector\t\t\t: '.load-end',\n\t\t\tloadmoreDisabledClass\t: 'disabled'\n        };\n\n        var settings = $.extend(defaults, options);\n        var selector \t= settings.selector;\n        var classes\t\t= selector + ' ' + settings.classes;\n        var product \t= settings.product;\n        var $content \t= $(this);\n        var $product \t= $(product, $content);\n        var actionmore \t= $(settings.actionmore, $content);\n\t\tif( !$product.data( 'vertical') && $('body').hasClass('rtl') ){\n\t\t\t$product.attr('dir', 'rtl');\n\t\t\t$product.data( 'rtl', true );\n\t\t\t// $product.data( 'vertical-reverse', true );\n\t\t}\n        var options \t= $product.data();\n        var padding \t= ((options || {}).padding === void 0) ? settings.padding : options.padding;\n\t\tvar $tabs \t\t= $(settings.tabs, $content);\n\t\tvar infotabs \t= $tabs.data('ajax');\n\t\tvar $itemtabs \t= $('.item',$tabs);\n\t\tvar $loading \t= $(settings.loading, $content);\n\t\tvar $head \t\t= $('head');\n\t\tvar style \t\t= '';\n\t\tvar isGrid \t\t= false;\n        /******************************\n        Public Methods\n        *******************************/\n        var methods = {\n            init : function() {\n\t\t\t\tif(!document.documentElement.classList.contains('magicproduct-init')){\n\t\t\t\t\tdocument.documentElement.classList.add('magicproduct-init');\n\t\t\t\t\tmethods.getAppVersion('Magiccart_Magicproduct', 'https://magepow.com/magento-2-product-slider.html');\n\t\t\t\t}\n                return this.each(function() {\n                    methods.magicproductLoad();\n                });\n            },\n\n            magicproductLoad: function(buttonClass){\n            \t// over tab\n\t\t\t\tvar products = $content.find('.content-products');\n\t\t\t\tvar zIndex = 0; \n\t\t\t\tproducts.find('.per-product').on({\n\t\t\t\t\tmouseenter : function() {\n\t\t\t\t\t\tzIndex = products.css('zIndex');\n\t\t\t\t\t\tproducts.css('zIndex', zIndex + 35);\n\t\t\t\t\t},\n\t\t\t\t\tmouseleave : function() {\n\t\t\t\t\t\tproducts.css('zIndex', zIndex);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t// end over tab\n\n\t\t\t\t$tabs.on(\"click\", '.item', function(){\n\t\t\t\t\t\tvar tab = $(this);\n\t\t\t\t\t\tvar type = tab.data('type');\n\t\t\t\t\t\tvar typeClass = '.mc-'+type;\n\t\t\t\t\t\tif(tab.hasClass('activated')) return;\n\t\t\t\t\t\t$itemtabs.removeClass('activated');\n\t\t\t\t\t\ttab.addClass('activated');\n\t\t\t\t\t\tif(!tab.hasClass('loaded')){\n\t\t\t\t\t\t\tif(type == undefined) return;\n\t\t\t\t\t\t\tmethods.sendAjax(type, infotabs);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// banner tab\n\t\t\t\t\t\t\t$content.find('.category-banner').slideUp(500).removeClass('activated');\n\t\t\t\t\t\t\t$content.find('.banner-'+ type ).slideDown(500).addClass('activated');\n\t\t\t\t\t\t\t// end banner tab\n\t\t\t\t\t\t\tvar productsActivated = $product.find(typeClass).addClass('activated'); //.fadeIn(); // not show()\n\t\t\t\t\t\t\tvar nextPage = productsActivated.data('next-page');\n\t\t\t\t\t\t\tmethods.loadMoreButton(nextPage);\n\t\t\t\t\t\t\tproductsActivated.siblings().removeClass('activated'); //.hide();  // not fadeOut()\n\t\t\t\t\t\t\tproductsActivated = productsActivated.find('.products.items');\n\t\t\t\t\t\t\tif(isGrid){\n\t\t\t\t\t\t\t\tif(!productsActivated.hasClass('grid-init')) productsActivated.addClass('grid-init');\n\t\t\t\t\t\t\t} else  methods.productSlider(options, productsActivated);\n\t\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$itemtabs.each(function() {\n\t\t\t\t\tvar tab = $(this);\n\t\t\t\t\tvar typeClass = '.mc-'+ tab.data('type');\n\t\t\t\t\tif(tab.hasClass('activated')){\n\t\t\t\t\t\tvar productsActivated = $product.find(typeClass).addClass('activated');\n\t\t\t\t\t\tif (\"IntersectionObserverX\" in window) {\n\t\t\t\t\t\t\tvar style \t= methods.getStyleCLS(options);\n\t\t\t\t\t\t\tvar styleId = selector.replace(/[.]/g, '_');\n\t\t\t\t\t\t\t$head.append('<style type=\"text/css\" id=\"' + styleId +  '\" >'+style+'</style>');\n\t\t\t\t\t\t\tlet productsObserver = new IntersectionObserver(function(entries, observer) {\n\t\t\t\t\t\t\t\tentries.forEach(function(entry) {\n\t\t\t\t\t\t\t\t\tif (entry.isIntersecting) {\n\t\t\t\t\t\t\t\t\t\tlet el = entry.target;\n\t\t\t\t\t\t\t\t\t\tvar $el = $(el);\n\t\t\t\t\t\t\t\t\t\t$el.on('init', function(){\n\t\t\t\t\t\t\t\t\t\t\t$head.find('#' + styleId).remove();\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tmethods.actionLoad(tab, productsActivated);\n\t\t\t\t\t\t\t\t\t\tproductsObserver.unobserve(entry.target);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t    productsActivated.each(function(){\n\t\t\t\t\t\t    \tproductsObserver.observe(this);\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t    });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmethods.actionLoad(tab, productsActivated);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tmethods.loadMore();\n            },\n\n            actionLoad: function(tab, productsActivated) {\n            \tvar isRandom = (tab.data('type') == 'random');\n            \tif(!isRandom){\n\t            \tvar ajax =  tab.closest('.magictabs').data('ajax');\n\t            \tisRandom = (ajax.hasOwnProperty('types') && ajax.types == 'random');            \t\t\n            \t}\n            \tmethods.gridSlider(productsActivated);\n            \tif(isRandom){\n\t\t\t\t\ttab.removeClass('loaded activated').trigger('click');\n\t\t\t\t\tproductsActivated.find('.products.items').html('');            \t\t\n            \t}\n            },\n\n            getStyleCLS : function (options) {\n            \tif(!options.slidesToShow) return;\n            \tvar style \t\t= '';\n            \tvar padding \t= options.padding;\n\t\t\t\tvar responsive \t= options.responsive;\n\t\t\t\tvar length = Object.keys(responsive).length;\n\t\t\t\tvar nthChild =  options.slidesToShow + 1;\n\t\t\t\tstyle += selector + ' .content-products .item:nth-child(n+ ' + nthChild + ')' + '{display: none;} ' + selector +  ' .item{float:left};';\n\t\t\t\tvar gridResponsive = [];\n\t\t\t\t$.each( responsive, function( key, value ) { \n\t\t\t\t\tvar breakpoint = {};\n\t\t\t\t\tbreakpoint[value.breakpoint] = options.vertical ? parseInt(options.rows) : parseInt(value.settings.slidesToShow);\n\t\t\t\t\tgridResponsive.push(breakpoint);\n\t\t\t\t });\n\t\t\t\tvar girdOptions = Object.assign({}, options);\n\t\t\t\tgirdOptions.responsive  = gridResponsive.reverse();\n\t\t\t\tstyle += methods.productGrid(girdOptions, true);\n\t\t\t\treturn style;\n            },\n\n            gridSlider : function(productsActivated) {\n\t\t\t\tvar nextPage = productsActivated.data('next-page');\n\t\t\t\tvar products = productsActivated.find('.products.items');\n\t\t\t\tmethods.loadMoreButton(nextPage);\n\t\t\t\tif(options.slidesToShow){\n\t\t\t\t\tvar float  = $('body').hasClass('rtl') ? 'right' : 'left';\n\t\t\t\t\t$head.append('<style type=\"text/css\">' + classes + '{float: ' + float + '; padding-left: '+padding+'px; padding-right:'+padding+'px ; min-height: 1px; min-width: 1px;} ' + selector + ' .content-products' + '{margin-left: -'+padding+'px; margin-right: -'+padding+'px}' + selector + ' .grid-init{visibility: visible; opacity: 1; display: block}</style>');\n\t\t\t\t\tmethods.productSlider(options, products);\n\t\t\t\t} else{\n\t\t\t\t\tisGrid = true;\n\t\t\t\t\tmethods.productGrid(options);\n\t\t\t\t}\n\t\t\t\tproducts.addClass('grid-init');\n            },\n\n            loadMore : function() {\n            \tvar loadmoreButton = actionmore.find(settings.loadmoreSelector);\n            \tif(loadmoreButton.length) loadmoreButton.data('text', loadmoreButton.text());\n\t\t\t\t$content.on(\"click\", settings.actionmore + ' .load-more', function(){\n\t\t\t\t\tif($(this).hasClass(settings.loadmoreDisabledClass)) return;\n\t\t\t\t\tvar $this = $tabs.find('.item.activated');\n\t\t\t\t\tvar type  = $this.data('type');\n\t\t\t\t\tif(type == undefined) return;\n\t\t\t\t\tvar typeClass = '.mc-'+type;\n\t\t\t\t\tif($this.hasClass('loaded')){\n\t\t\t\t\t\tvar productsActivated = $product.find(typeClass); //.fadeIn(); // not show()\n\t\t\t\t\t\tvar nextPage = productsActivated.data('next-page');\n\t\t\t\t\t\tmethods.loadMoreButton(nextPage);\n\t\t\t\t\t\tif(nextPage < 2) return;\n\t\t\t\t\t\tvar info = $.extend(infotabs, { 'p' : nextPage});\n\t\t\t\t\t\tmethods.disableLoadmoreButton(actionmore);\n\t\t\t\t\t\tmethods.sendAjax(type, info, nextPage);\n\t\t\t\t\t} \n\t\t\t\t});\n            },\n\n            loadMoreButton : function(nextPage=0){\n            \tif(nextPage){\n            \t\tactionmore.show();\n            \t}else {\n            \t\tactionmore.hide();\n            \t}\n            \tif(nextPage > 1){\n\t\t\t\t\tactionmore.find(settings.loadmoreSelector).show();\n\t\t\t\t\tactionmore.find(settings.loadendSelector).hide();\n            \t}else {\n\t\t\t\t\tactionmore.find(settings.loadmoreSelector).hide();\n\t\t\t\t\tactionmore.find(settings.loadendSelector).show();\n            \t}\n            },\n\n            productSlider : function(options, el) {\n\t\t\t\tif(el.hasClass('slick-initialized')) el.slick(\"refresh\"); // slide.resize(); // $(window).trigger('resize');\n\t\t\t\telse{ // var selector = $content.selector; // '.' + $content.attr('class').trim().replace(/ /g , '.');\n\t\t\t\t\tif( !options.vertical && $('body').hasClass('rtl') ) el.attr('dir', 'rtl');\n\t\t\t\t\tvar galleryPlaceholder = el.find('.gallery-placeholder.autoplay');\n                    el.on('init', function(event, slick){\n                        $('body').trigger('contentUpdated');\n                 \t\tif(galleryPlaceholder.length) methods.gallerySlider(galleryPlaceholder);\n                    });\n\t\t\t\t\tel.slick(options);\n\t\t\t\t}\n            }, \n\n            gallerySlider : function(el) {\n                el.each(function() {\n\t                var gallery = $(this).find('.gallery-items');\n\t                if(gallery.hasClass('slick-initialized')) return;\n\t                var nav        = $(this).find('.slider-nav');\n\t                var galleryCfg = gallery.data();\n\t                var navCfg \t   = nav.data();\n\t                var isRTL \t   = false;\n\t                if( !navCfg.vertical && $('body').hasClass('rtl') ){\n\t                \tgallery.attr('dir', 'rtl');\n\t                \tnav.attr('dir', 'rtl');\n\t                \tisRTL \t   = true;\n\t                }\n\t                var galleryCfg = $.extend(galleryCfg, {'asNavFor': nav, 'rtl': isRTL});\n\t                var navCfg \t   = $.extend(navCfg, {'asNavFor': gallery, 'rtl': isRTL});\n\t                gallery.slick(galleryCfg);\n\t                nav.slick(navCfg);\n\t            }); \n            },\n\n            productGrid : function(options, returnStyle=false) {\n            \tif(style) return;\n            \tvar padding \t= options.padding;\n\t\t\t\tvar responsive \t= options.responsive;\n\t\t\t\tvar length = Object.keys(responsive).length;\n\t\t\t\tvar float  = $('body').hasClass('rtl') ? 'right' : 'left';\n\t\t\t\tstyle += (typeof padding !== 'undefined') ? classes + '{float: ' + float + '; padding-left: '+padding+'px; padding-right:'+padding+'px} ' + selector + ' .content-products' + '{margin-left: -'+padding+'px; margin-right: -'+padding+'px}' + selector + ' .grid-init{visibility: visible; opacity: 1; display: block}' : '';\n\t\t\t\t\n\t\t\t\t$.each( responsive, function( key, value ) { // data-responsive=\"[{\"1\":\"1\"},{\"361\":\"1\"},{\"480\":\"2\"},{\"640\":\"3\"},{\"768\":\"3\"},{\"992\":\"4\"},{\"1200\":\"4\"}]\"\n\t\t\t\t\tvar col = 0;\n\t\t\t\t\tvar maxWith = 0;\n\t\t\t\t\tvar minWith = 0;\n\t\t\t\t\t$.each( value , function(size, num) { minWith = parseInt(size) + 1; col = num;});\n\t\t\t\t\tif(key+2<length){\n\t\t\t\t\t\t$.each( responsive[key+1], function( size, num) { maxWith = size; col = num;});\n\t\t\t\t\t\t// padding = options.padding*(maxWith/1200); // padding responsive\n\t\t\t\t\t\tstyle += ' @media (min-width: '+minWith+'px) and (max-width: '+maxWith+'px)';\n\t\t\t\t\t} else { \n\t\t\t\t\t\tif(key+2 == length) return; // don't use key = length - 1;\n\t\t\t\t\t\t$.each( responsive[key], function( size, num) { maxWith = size; col = num;});\n\t\t\t\t\t\tstyle += ' @media (min-width: '+maxWith+'px)';\n\t\t\t\t\t}\n\t\t\t\t\tstyle += ' {'+selector + ' .content-products' + '{margin-left: -'+padding+'px; margin-right: -'+padding+'px}'+classes+'{padding-left: '+padding+'px; padding-right:'+padding+'px; width: calc(100% / ' + col + ')} '+classes+':nth-child('+col+'n+1){clear: ' + float + ';}}';\n\t\t\t\t});\n\n\t\t\t\tif(returnStyle) return style;\n\n\t\t\t\t$head.append('<style type=\"text/css\">'+style+'</style>');\n            },\n\n            sendAjax : function(type, infotabs, nextPage=1) {\n            \t$content.addClass('loading');\n\t\t\t\t$loading.show();\n\t\t\t\t$.ajax({\n\t\t\t\t\ttype: 'post',\n\t\t\t\t\tdata: { type: type, info: infotabs, p : nextPage },\n\t\t\t\t\turl : $loading.data('url'),\n\t\t\t\t\tsuccess:function(data){\n\t\t\t\t\t\t$loading.hide();\n\t\t\t\t\t\t$content.removeClass('loading');\n\t\t\t\t\t\t// banner tab\n\t\t\t\t\t\t$content.find('.category-banner').slideUp(500).removeClass('activated');\n\t\t\t\t\t\t$content.find('.banner-'+ type ).slideDown(500).addClass('activated');\n\t\t\t\t\t\t// end banner tab\n\t\t\t\t\t\tvar typeClass = '.mc-'+type;\n\t\t\t\t\t\tvar products  = $content.find(product);\n\t\t\t\t\t\tvar productsActivated = products.find(typeClass);\n\t\t\t\t\t\tvar productMore = $(data);\n\t\t\t\t\t\tvar nextPage \t= productMore.data('next-page');\n\t\t\t\t\t\tif(productsActivated.length){\n\t\t\t\t\t\t\tvar productsActivated = $content.find(product).find(typeClass).addClass('activated');\n\t\t\t\t\t\t\tproductsActivated.data('next-page', nextPage);\n\t\t\t\t\t\t\tvar items = productsActivated.find('.products.items');\n\t\t\t\t\t\t\tif(items.length){\n\t\t\t\t\t\t\t\titems.append(productMore.find('.products.items').html());\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tproductsActivated.html(productMore.html());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tnextPage++; // nextPage + 1 is ajax.\n\t\t\t\t\t\t\tmethods.enableLoadmoreButton(actionmore);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar productsActivated = products.append(data).find(typeClass).addClass('activated');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmethods.loadMoreButton(nextPage); \n\t\t\t\t\t\tproductsActivated.trigger('contentUpdated');\n\t\t\t\t\t\tproductsActivated.siblings().removeClass('activated'); //.hide();  // not fadeOut()\n\t\t\t\t\t\tproductsActivated = productsActivated.find('.products.items');\n\t\t\t\t\t\tproductsActivated.addClass('grid-init');\n\t\t\t\t\t\t$itemtabs.each(function(){\n\t\t\t\t\t\t\tif($(this).data('type') == type) $(this).addClass('loaded');\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif(!isGrid) methods.productSlider(options, productsActivated);\n\t\t\t\t\t\tif($.fn.timer !== undefined){\n\t\t\t\t\t\t\tvar countdown = productsActivated.find('.alo-count-down');\n\t\t\t\t\t\t\tif(countdown.lenght){\n\t\t\t\t\t\t\t\tcountdown.timer({\n\t\t\t\t\t\t\t\t\tclasses\t: '.countdown',\n\t\t\t\t\t\t\t\t\tlayout\t: alo_timer_layout, \n\t\t\t\t\t\t\t\t\ttimeout : alo_timer_timeout\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n            },\n\n            disableLoadmoreButton: function () {\n                var loadmoreButton = actionmore.find(settings.loadmoreSelector);\n                loadmoreButton.text(loadmoreButton.data('loading'));\n                loadmoreButton.attr('title', loadmoreButton.data('loading'));\n            },\n\n            enableLoadmoreButton: function () {\n                var loadmoreButton = actionmore.find(settings.loadmoreSelector);\n                loadmoreButton.text(loadmoreButton.data('loaded'));\n                loadmoreButton.attr('title', loadmoreButton.data('loaded'));\n\n                setTimeout(function () {\n                    loadmoreButton.removeClass(settings.loadmoreDisabledClass);\n                    loadmoreButton.text(loadmoreButton.data('text'));\n                    loadmoreButton.attr('title', loadmoreButton.data('text'));\n                }, 1000);\n            },\n\n\t\t\tgetAppVersion: function (appName, href) {\n\t\t\t\t// this expression is to get the version string\n\t\t\t\tlet regx = new RegExp('.*\\/(.*?)\\/assets\\/', 'i');\n\t\t\t\tlet result = regx.exec(href);\n\t\t\t\tlet version = result ? result[1].replace(/\\D/g, '') : '1.0.0';\n\t\t\t\tconsole.log(`%c ${appName} %c v${version}  %c`, \"background: #555555; padding: 1px; margin-bottom: 2px; border-radius: 3px 0 0 3px; color: #fff\", \"background: #44cc11; padding: 1px; margin-bottom: 2px; border-radius: 0 3px 3px 0; color: #fff\", \"background:transparent\", `\ud83d\ude80 ${href}`);\n\t\n\t\t\t\treturn version;\n\t\t\t}\n        };\n\n        if (methods[options]) {\n            return methods[options].apply(this, Array.prototype.slice.call(arguments, 1));\n        } else if (typeof options === 'object' || !options) {\n            return methods.init.apply(this);\n        } else {\n            $.error('Method \"' + method + '\" does not exist in magiccart plugin!');\n        }\n\t\t\n    }\n\n    $( document ).ready(function($) {\n\t    $(\"*[class^='alo-content-']\").each(function() {\n\t    \tif($(this).hasClass('autoplay')){\n\t\t\t\tvar selector  = $(this).attr('class').split(\" \");\n\t\t\t\tselector.forEach(item => {\n\t\t\t\t\tif(item.indexOf('alo-content-') === 0) {\n\t\t\t\t\t    selector = '.' + item.replace(/[.]/g, ' ').trim();\n\t\t\t\t\t}\n\t\t\t\t});\t    \t\t\n\t    \t\t$(this).magicproduct({selector: selector}); // don't use $(this)\n\t    \t}\n\t    });\n    });\n\n});\n","Staempfli_CheckoutNewsletterSubscription/js/model/newsletter-validator.js":"define(\n    [\n        'jquery',\n        'Magento_Customer/js/model/customer',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/model/url-builder',\n        'Magento_Checkout/js/model/error-processor',\n        'mage/url'\n\n    ],\n    function ($, customer, quote, urlBuilder, errorProcessor, urlFormatter) {\n        'use strict';\n\n        return {\n            validate: function () {\n                var isCustomer = customer.isLoggedIn();\n                var status = $('#newsletter-subscription').is(':checked');\n                var quoteId = quote.getQuoteId();\n                var url;\n\n                if (isCustomer) {\n                    url = urlBuilder.createUrl('/carts/mine/newsletter-subscribe', {})\n                } else {\n                    url = urlBuilder.createUrl('/guest-carts/:cartId/newsletter-subscribe', {cartId: quoteId});\n                }\n\n                var payload = {\n                    cartId: quoteId,\n                    newsletterSubscription: {\n                        subscribe: status\n                    }\n                };\n\n                if (!payload.newsletterSubscription.subscribe) {\n                    return true;\n                }\n\n                var result = true;\n\n                $.ajax({\n                    url: urlFormatter.build(url),\n                    data: JSON.stringify(payload),\n                    global: false,\n                    contentType: 'application/json',\n                    type: 'PUT',\n                    async: false\n                }).done(\n                    function () {\n                        result = true;\n                    }\n                ).fail(\n                    function (response) {\n                        result = false;\n                        errorProcessor.process(response);\n                    }\n                );\n                return result;\n            }\n        };\n    }\n);","Staempfli_CheckoutNewsletterSubscription/js/view/newsletter-validator.js":"define(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/payment/additional-validators',\n        'Staempfli_CheckoutNewsletterSubscription/js/model/newsletter-validator'\n    ],\n    function (Component, additionalValidators, newsletterValidator) {\n        'use strict';\n\n        additionalValidators.registerValidator(newsletterValidator);\n\n        return Component.extend({});\n    }\n);","Staempfli_CheckoutNewsletterSubscription/js/view/newsletter.js":"define([\n    'ko',\n    'jquery',\n    'uiComponent'\n], function (ko, $, Component) {\n    'use strict';\n    return Component.extend({\n        defaults: {\n            template: 'Staempfli_CheckoutNewsletterSubscription/newsletter'\n        }\n    });\n});\n","PayPal_Braintree/js/validator.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\ndefine([\n    'underscore'\n], function (_) {\n    'use strict';\n\n    return {\n        config: {},\n\n        /**\n         * Set configuration\n         * @param {Object} config\n         */\n        setConfig: function (config) {\n            this.config = config;\n        },\n\n        /**\n         * Get List of available card types\n         * @returns {*|exports.defaults.availableCardTypes|{}}\n         */\n        getAvailableCardTypes: function () {\n            return this.config.availableCardTypes;\n        },\n\n        /**\n         * Get list of card types\n         * @returns {Object}\n         */\n        getCcTypesMapper: function () {\n            return this.config.ccTypesMapper;\n        },\n\n        /**\n         * Find mage card type by Braintree type\n         * @param {String} type\n         * @param {Object} availableTypes\n         * @returns {*}\n         */\n        getMageCardType: function (type, availableTypes) {\n            var storedCardType = null,\n                mapper = this.getCcTypesMapper();\n\n            if (type && typeof mapper[type] !== 'undefined') {\n                storedCardType = mapper[type];\n\n                if (_.indexOf(availableTypes, storedCardType) !== -1) {\n                    return storedCardType;\n                }\n            }\n\n            return null;\n        },\n\n        /**\n         * Filter list of available card types\n         * @param {Object} availableTypes\n         * @param {Object} countrySpecificCardTypes\n         * @returns {Object}\n         */\n        collectTypes: function (availableTypes, countrySpecificCardTypes) {\n            var key,\n                filteredTypes = [];\n\n            for (key in availableTypes) {\n                if (_.indexOf(countrySpecificCardTypes, availableTypes[key]) !== -1) {\n                    filteredTypes.push(availableTypes[key]);\n                }\n            }\n\n            return filteredTypes;\n        },\n\n        /**\n         * Get list of card types for country\n         * @param {String} countryId\n         * @returns {*}\n         */\n        getCountrySpecificCardTypes: function (countryId) {\n            if (typeof this.config.countrySpecificCardTypes[countryId] !== 'undefined') {\n                return this.config.countrySpecificCardTypes[countryId];\n            }\n\n            return false;\n        }\n    };\n});\n","PayPal_Braintree/js/form-builder.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine(\n    [\n        'jquery',\n        'underscore',\n        'mage/template'\n    ],\n    function ($, _, mageTemplate) {\n        'use strict';\n\n        return {\n\n            /**\n             * @param {Object} formData\n             * @returns {*|jQuery}\n             */\n            build: function (formData) {\n                var formTmpl = mageTemplate('<form action=\"<%= data.action %>\"' +\n                    ' method=\"POST\" hidden enctype=\"application/x-www-form-urlencoded\">' +\n                        '<% _.each(data.fields, function(val, key){ %>' +\n                            '<input value=\\'<%= val %>\\' name=\"<%= key %>\" type=\"hidden\">' +\n                        '<% }); %>' +\n                    '</form>');\n\n                return $(formTmpl({\n                    data: {\n                        action: formData.action,\n                        fields: formData.fields\n                    }\n                })).appendTo($('[data-container=\"body\"]'));\n            }\n        };\n    }\n);\n","PayPal_Braintree/js/helper/create-client-token.js":"define(['jquery'], function ($) {\n    'use strict';\n\n    return function () {\n        return $.ajax({\n            method: 'POST',\n            url: '/graphql',\n            contentType: 'application/json',\n            data: JSON.stringify({\n                query: `\n                    mutation {\n                      createBraintreeClientToken\n                    }`\n            })\n        });\n    };\n});\n","PayPal_Braintree/js/helper/format-amount.js":"define(function () {\n    'use strict';\n\n    /**\n     * Format amount (string) to two decimals.\n     *\n     * @param {string} str\n     * @return {string}\n     */\n    return function (amount) {\n        return parseFloat(amount).toFixed(2);\n    };\n});\n","PayPal_Braintree/js/helper/get-apple-pay-line-items.js":"/**\n * Braintree Apple Pay helper to get a formatted list of line items.\n **/\ndefine(['PayPal_Braintree/js/helper/get-cart-line-items-helper'], function (getCartLineItems) {\n    'use strict';\n\n    return function (totals, priceIncludesTax) {\n        /**\n         * @returns array\n         */\n        return getCartLineItems(totals, true, priceIncludesTax).map((lineItem) => {\n            return {\n                type: 'final',\n                label: lineItem.name,\n                amount: (lineItem.kind === 'debit' ? 1 : -1) * lineItem.unitAmount * lineItem.quantity\n            }\n        });\n    }\n});\n","PayPal_Braintree/js/helper/remove-non-digit-characters.js":"define([\n    'underscore'\n], function (_) {\n    'use strict';\n\n    /**\n     * Remove any non-digit characters from string.\n     *\n     * @param {string} value\n     * @return {string}\n     */\n    return function (value) {\n        return _.isString(value) ? value.replace(/\\D/g, '') : '';\n    };\n});\n","PayPal_Braintree/js/helper/is-cart-virtual.js":"define([\n    'Magento_Customer/js/customer-data'\n], function (customerData) {\n    'use strict';\n\n    return function () {\n        const cart = customerData.get('cart')();\n\n        if (cart?.items) {\n            return !cart.items.some((cartItem) => !cartItem.is_virtual);\n        }\n\n        return false;\n    }\n});\n","PayPal_Braintree/js/helper/get-cart-line-items-helper.js":"define([\n    'jquery',\n    'underscore',\n    'mage/translate',\n    'PayPal_Braintree/js/helper/format-amount',\n    'PayPal_Braintree/js/helper/replace-unsupported-characters'\n], function (\n    $,\n    _,\n    $t,\n    formatAmount,\n    replaceUnsupportedCharacters\n) {\n    'use strict';\n\n    /**\n     * Get line items\n     *\n     * @returns {Array}\n     */\n    return function (quote, includeShipping = true, priceIncludesTax = true) {\n        let lineItems = [];\n\n        /**\n         * Line items array\n         *\n         * {Array}\n         */\n        const lineItemsArray = [\n            'name',\n            'kind',\n            'quantity',\n            'unitAmount',\n            'productCode',\n            'description'\n        ];\n\n        let giftWrappingItems = 0,\n            giftWrappingOrder = 0,\n            storeCredit = 0,\n            giftCardAccount = 0,\n            giftWrappingPrintedCard = 0,\n            baseDiscountAmount = formatAmount(Math.abs(quote['base_discount_amount']).toString()),\n            baseTaxAmount = formatAmount(quote['base_tax_amount']);\n\n        $.each(quote['total_segments'], function (segmentsKey, segmentsItem) {\n            if (segmentsItem['code'] === 'customerbalance') {\n                storeCredit = formatAmount(Math.abs(segmentsItem['value']).toString());\n            }\n            if (segmentsItem['code'] === 'giftcardaccount') {\n                giftCardAccount = formatAmount(Math.abs(segmentsItem['value']).toString());\n            }\n            if (segmentsItem['code'] === 'giftwrapping') {\n                let extensionAttributes = segmentsItem['extension_attributes'];\n\n                giftWrappingOrder = extensionAttributes['gw_base_price'];\n                giftWrappingItems = extensionAttributes['gw_items_base_price'];\n                giftWrappingPrintedCard = extensionAttributes['gw_card_base_price'];\n            }\n        });\n\n        $.each(quote.items, function (quoteItemKey, quoteItem) {\n            if (quoteItem.parent_item_id || quoteItem.base_price === 0.0) {\n                return true;\n            }\n\n            const unitPrice = (priceIncludesTax\n                ? parseFloat(quoteItem.base_price_incl_tax)\n                : parseFloat(quoteItem.base_price)) || parseFloat(quoteItem.product_price_value);\n\n            let floatQty = parseFloat(quoteItem.qty),\n                itemName = replaceUnsupportedCharacters(quoteItem.name || quoteItem.product_name),\n                itemSku = replaceUnsupportedCharacters(quoteItem.sku || quoteItem.product_sku || ''),\n                hasQty = floatQty > Math.floor(floatQty) && floatQty < Math.ceil(floatQty),\n                description = hasQty\n                    ? 'Item quantity is ' + floatQty.toFixed(2) + ' and per unit amount is '\n                        + unitPrice.toFixed(2)\n                    : '',\n                itemQty = hasQty ? parseFloat('1') : floatQty;\n\n            let lineItemValues = [\n                    itemName,\n                    'debit',\n                    itemQty.toFixed(2),\n                    unitPrice.toFixed(2),\n                    itemSku,\n                    description\n                ],\n\n                mappedLineItems = $.map(lineItemsArray, function (itemElement, itemIndex) {\n                    return [[\n                        lineItemsArray[itemIndex],\n                        lineItemValues[itemIndex]\n                    ]];\n                });\n\n            lineItems[quoteItemKey] = Object.fromEntries(mappedLineItems);\n        });\n\n        /**\n         * Adds credit (refund or discount) kind as LineItems for the\n         * PayPal transaction if discount amount is greater than 0(Zero)\n         * as discountAmount lineItem field is not being used by PayPal.\n         *\n         * developer.paypal.com/braintree/docs/reference/response/transaction-line-item/php#discount_amount\n         */\n        if (baseDiscountAmount > 0) {\n            let discountLineItem = {\n                'name': $t('Discount'),\n                'kind': 'credit',\n                'quantity': 1.00,\n                'unitAmount': baseDiscountAmount\n            };\n\n            lineItems = $.merge(lineItems, [discountLineItem]);\n        }\n\n        /**\n         * Adds Gift Cards as credit LineItems for the PayPal\n         * transaction if it is greater than 0(Zero) to manage\n         * the totals with client-side implementation\n         */\n        if (giftCardAccount > 0) {\n            let giftCardItem = {\n                'name': $t('Gift Cards'),\n                'kind': 'credit',\n                'quantity': 1.00,\n                'unitAmount': giftCardAccount\n            };\n\n            lineItems = $.merge(lineItems, [giftCardItem]);\n        }\n\n        /**\n         * Adds credit (Store Credit) kind as LineItems for the\n         * PayPal transaction if store credit is greater than 0(Zero)\n         * to manage the totals with client-side implementation\n         */\n        if (storeCredit > 0) {\n            let storeCreditItem = {\n                'name': $t('Store Credit'),\n                'kind': 'credit',\n                'quantity': 1.00,\n                'unitAmount': storeCredit\n            };\n\n            lineItems = $.merge(lineItems, [storeCreditItem]);\n        }\n\n        /**\n         * Adds shipping as LineItems for the PayPal transaction\n         * if shipping amount is greater than 0(Zero) to manage\n         * the totals with client-side implementation as there is\n         * no any field exist in the client-side implementation\n         * to send the shipping amount to the Braintree.\n         */\n        if (includeShipping && quote['base_shipping_amount'] > 0) {\n            let shippingLineItem = {\n                'name': $t('Shipping'),\n                'kind': 'debit',\n                'quantity': 1.00,\n                'unitAmount': priceIncludesTax ?\n                    quote['base_shipping_incl_tax'] :\n                    quote['base_shipping_amount']\n            };\n\n            lineItems = $.merge(lineItems, [shippingLineItem]);\n        }\n\n        /**\n         * Adds Gift Wrapping for items as LineItems for the PayPal\n         * transaction if it is greater than 0(Zero) to manage\n         * the totals with client-side implementation\n         */\n        if (giftWrappingItems > 0) {\n            let gwItems = {\n                'name': $t('Gift Wrapping for Items'),\n                'kind': 'debit',\n                'quantity': 1.00,\n                'unitAmount': giftWrappingItems\n            };\n\n            lineItems = $.merge(lineItems, [gwItems]);\n        }\n\n        /**\n         * Adds Gift Wrapping for order as LineItems for the PayPal\n         * transaction if it is greater than 0(Zero) to manage\n         * the totals with client-side implementation\n         */\n        if (giftWrappingOrder > 0) {\n            let gwOrderItem = {\n                'name': $t('Gift Wrapping for Order'),\n                'kind': 'debit',\n                'quantity': 1.00,\n                'unitAmount': giftWrappingOrder\n            };\n\n            lineItems = $.merge(lineItems, [gwOrderItem]);\n        }\n\n        /**\n         * Adds Gift Wrapping Printed Card as LineItems for the PayPal\n         * transaction if it is greater than 0(Zero) to manage\n         * the totals with client-side implementation\n         */\n        if (giftWrappingPrintedCard > 0) {\n            let gwPrintedCard = {\n                'name': $t('Printed Card'),\n                'kind': 'debit',\n                'quantity': 1.00,\n                'unitAmount': giftWrappingPrintedCard\n            };\n\n            lineItems = $.merge(lineItems, [gwPrintedCard]);\n        }\n\n        if (!priceIncludesTax && baseTaxAmount > 0) {\n            let taxLineItem = {\n                'name': $t('Tax'),\n                'kind': 'debit',\n                'quantity': 1.00,\n                'unitAmount': baseTaxAmount\n            };\n\n            lineItems = $.merge(lineItems, [taxLineItem]);\n        }\n\n        if (lineItems.length >= 250) {\n            lineItems = [];\n        }\n\n        return lineItems;\n    };\n});\n","PayPal_Braintree/js/helper/replace-single-quote-character.js":"define([\n    'underscore'\n], function (_) {\n    'use strict';\n\n    /**\n     * Replace single quote character to HTML entity string.\n     *\n     * @param {string} value\n     * @return {string}\n     */\n    return function (value) {\n        return _.isString(value) ? value.replace(/'/g, '&apos;') : '';\n    };\n});\n","PayPal_Braintree/js/helper/is-logged-in.js":"define(['Magento_Customer/js/customer-data'], function (customerData) {\n    'use strict';\n\n    // Magento's Magento_Customer/js/model/customer doesn't always give the correct information about logged in\n    // if you're not in the checkout so look at the localStorage instead using the same logic Magento does.\n    return function () {\n        const customer = customerData.get('customer');\n\n        return customer().firstname;\n    };\n});\n","PayPal_Braintree/js/helper/get-braintree-config.js":"define([\n    'jquery',\n    'mage/url'\n], function ($, urlBuilder) {\n    'use strict';\n\n    return function (storeCode) {\n        return $.ajax({\n            method: 'POST',\n            url: urlBuilder.build('graphql'),\n            headers: {\n                'Store': storeCode\n            },\n            contentType: 'application/json',\n            data: JSON.stringify({\n                query: `{\n                    storeConfig {\n                        braintree_merchant_account_id,\n                        braintree_3dsecure_verify_3dsecure,\n                        braintree_3dsecure_always_request_3ds,\n                        braintree_3dsecure_threshold_amount,\n                        braintree_3dsecure_allowspecific,\n                        braintree_3dsecure_specificcountry\n                    }\n                  }`\n            })\n        });\n    };\n});\n","PayPal_Braintree/js/helper/get-api-url.js":"define([\n        'PayPal_Braintree/js/helper/is-logged-in'\n], function (isLoggedIn) {\n    'use strict';\n\n    return function (uri, storeCode, quoteId) {\n        if (isLoggedIn()) {\n        return \"rest/\" + storeCode + \"/V1/carts/mine/\" + uri;\n        } else {\n            return \"rest/\" + storeCode + \"/V1/guest-carts/\" + quoteId + \"/\" + uri;\n        }\n    };\n});\n","PayPal_Braintree/js/helper/replace-unsupported-characters.js":"define(function () {\n    'use strict';\n\n    /**\n     * Regex to replace all unsupported characters from string.\n     *\n     * @param {String} str\n     * @return {String}\n     */\n    return function (str) {\n        // eslint-disable-next-line no-useless-escape\n        return str.replace('/[^a-zA-Z0-9\\s\\-.\\']/', '').substring(0, 127);\n    };\n});\n","PayPal_Braintree/js/helper/check-guest-checkout.js":"define([\n    'Magento_Customer/js/customer-data',\n    'Magento_Customer/js/model/authentication-popup'\n], function (customerData, authenticationPopup) {\n    'use strict';\n\n    return function () {\n        const cart = customerData.get('cart'),\n            customer = customerData.get('customer');\n\n        // Check if the User is able to checkout as a guest.\n        if (!customer().firstname && cart().isGuestCheckoutAllowed === false) {\n            authenticationPopup.showModal();\n            return false;\n        }\n\n        return true;\n    }\n});\n","PayPal_Braintree/js/helper/get-google-pay-line-items.js":"/**\n * Braintree Google Pay helper to get a formatted list of line items.\n **/\ndefine(['PayPal_Braintree/js/helper/get-cart-line-items-helper'], function (getCartLineItems) {\n    'use strict';\n\n    return function (totals, priceIncludesTax) {\n        /**\n         * @returns array\n         */\n        return getCartLineItems(totals, true, priceIncludesTax).map((lineItem) => {\n            const price = ((parseFloat(lineItem.unitAmount) * 100) * parseFloat(lineItem.quantity)) / 100;\n            return {\n                type: 'LINE_ITEM',\n                label: lineItem.name,\n                price: ((lineItem.kind === 'debit' ? 1 : -1) * price).toString()\n            }\n        });\n    }\n});\n","PayPal_Braintree/js/helper/add-script.js":"define([\n    'jquery',\n    'braintree',\n    'braintreePayPalCheckout'\n], function ($, braintree, paypalCheckout) {\n    'use strict';\n\n    // Create a cache of all the loaded scripts so that we don't load them multiple times.\n    const cache = {};\n\n    return function (clientToken, currency, namespace = 'paypal', pageType = 'checkout') {\n        // If the key has already been used return the existing promise that will already be resolved.\n        if (cache[namespace]) {\n            return cache[namespace];\n        }\n\n        // New keys we will add to the cache and then return the pending promise.\n        cache[namespace] = new Promise((resolve, reject) => {\n            // Load SDK\n            braintree.create({\n                authorization: clientToken\n            }, function (clientErr, clientInstance) {\n                if (clientErr) {\n                    console.error('paypalCheckout error', clientErr);\n                    let error = 'PayPal Checkout could not be initialized. Please contact the store owner.';\n\n                    reject(error);\n                    return;\n                }\n\n                paypalCheckout.create({\n                    client: clientInstance\n                }, function (err, paypalCheckoutInstance) {\n                    if (err) {\n                        console.error('paypalCheckout error', clientErr);\n                        let error = 'PayPal Checkout could not be initialized. Please contact the store owner.';\n\n                        reject(error);\n                        return;\n                    }\n\n                    let configSDK = {\n                        components: 'messages',\n                        currency: currency,\n                        dataAttributes: {\n                            namespace: `paypal_${namespace}`,\n                            'page-type': pageType\n                        }\n                    };\n\n                    // eslint-disable-next-line max-nested-callbacks\n                    paypalCheckoutInstance.loadPayPalSDK(configSDK, function () {\n                        $(document).trigger('paypalBraintreeScriptLoaded', namespace);\n                        resolve();\n                    });\n                });\n            });\n        });\n\n        return cache[namespace];\n    };\n});\n","PayPal_Braintree/js/helper/submit-review-page.js":"define([\n    'jquery',\n    'underscore',\n    'mage/url',\n    'PayPal_Braintree/js/form-builder',\n    'PayPal_Braintree/js/helper/remove-non-digit-characters',\n    'PayPal_Braintree/js/helper/replace-single-quote-character'\n], function (\n    $,\n    _,\n    url,\n    formBuilder,\n    removeNonDigitCharacters,\n    replaceSingleQuoteCharacter\n) {\n    'use strict';\n\n    return function (payload, currentElement, type) {\n        $('#maincontent').trigger('processStart');\n\n        /* Set variables & default values for shipping/recipient name to billing */\n        let accountFirstName = replaceSingleQuoteCharacter(payload.details.firstName),\n            accountLastName = replaceSingleQuoteCharacter(payload.details.lastName),\n            accountEmail = replaceSingleQuoteCharacter(payload.details.email),\n            actionSuccess = url.build(`braintree/${type}/review`);\n\n        payload.details.email = accountEmail;\n        payload.details.firstName = accountFirstName;\n        payload.details.lastName = accountLastName;\n        if (typeof payload.details.businessName !== 'undefined'\n                && _.isString(payload.details.businessName)) {\n            payload.details.businessName\n                    = replaceSingleQuoteCharacter(payload.details.businessName);\n        }\n\n        if (currentElement.data('location') === 'productpage') {\n            let form = $('#product_addtocart_form');\n\n            payload.additionalData = form.serialize();\n        }\n\n        formBuilder.build(\n            {\n                action: actionSuccess,\n                fields: {\n                    result: JSON.stringify(payload)\n                }\n            }\n        ).submit();\n    }\n});\n","PayPal_Braintree/js/helper/addresses/map-paypal-payment-information.js":"define(['PayPal_Braintree/js/model/region-data'], function (regionDataModel) {\n    'use strict';\n\n    return function (payload, isRequiredBillingAddress) {\n        const billingAddress = isRequiredBillingAddress && payload.details?.billingAddress?.line1\n                ? payload.details.billingAddress\n                : payload.details.shippingAddress;\n\n        let recipientFirstName,\n            recipientLastName;\n\n        // get recipient first and last name\n        if (typeof billingAddress.recipientName !== 'undefined') {\n            let recipientName = billingAddress.recipientName.split(' ');\n            recipientFirstName = recipientName[0].replace(/'/g, '&apos;');\n            recipientLastName = recipientName[1].replace(/'/g, '&apos;');\n        } else {\n            recipientFirstName = payload.details.firstName.replace(/'/g, '&apos;');\n            recipientLastName = payload.details.lastName.replace(/'/g, '&apos;');\n        }\n\n        return {\n            'email': payload.details.email.replace(/'/g, '&apos;'),\n            'paymentMethod': {\n                'method': 'braintree_paypal',\n                'additional_data': {\n                    'payment_method_nonce': payload.nonce\n                }\n            },\n            'billing_address': {\n                'email': payload.details.email.replace(/'/g, '&apos;'),\n                'telephone': typeof payload.details.phone !== 'undefined' ? payload.details.phone : '00000000000',\n                'firstname': recipientFirstName,\n                'lastname': recipientLastName,\n                'street': typeof billingAddress.line2 !== 'undefined' ? [billingAddress.line1.replace(/'/g, '&apos;'), billingAddress.line2.replace(/'/g, '&apos;')] : [billingAddress.line1.replace(/'/g, '&apos;')],\n                'city': billingAddress.city.replace(/'/g, '&apos;'),\n                'region': billingAddress?.state?.replace(/'/g, '&apos;') || '',\n                'region_id': regionDataModel.getRegionIdByCode(billingAddress.countryCode, billingAddress?.state?.replace(/'/g, '&apos;') || ''),\n                'region_code': null,\n                'country_id': billingAddress.countryCode,\n                'postcode': billingAddress.postalCode,\n                'same_as_billing': 0,\n                'customer_address_id': 0,\n                'save_in_address_book': 0\n            }\n        };\n    };\n});\n","PayPal_Braintree/js/helper/addresses/map-paypal-shipping-information.js":"define(['PayPal_Braintree/js/model/region-data'], function (regionDataModel) {\n    'use strict';\n\n    return function (payload, shippingMethod) {\n        let address = payload.details.shippingAddress,\n            recipientFirstName,\n            recipientLastName;\n\n        // get recipient first and last name\n        if (typeof address.recipientName !== 'undefined') {\n            let recipientName = address.recipientName.split(' ');\n            recipientFirstName = recipientName[0].replace(/'/g, '&apos;');\n            recipientLastName = recipientName[1].replace(/'/g, '&apos;');\n        } else {\n            recipientFirstName = payload.details.firstName.replace(/'/g, '&apos;');\n            recipientLastName = payload.details.lastName.replace(/'/g, '&apos;');\n        }\n\n        return {\n            addressInformation: {\n                'shipping_method_code': shippingMethod.method_code,\n                'shipping_carrier_code': shippingMethod.carrier_code,\n                'shipping_address': {\n                    'email': payload.details.email.replace(/'/g, '&apos;'),\n                    'telephone': typeof payload.details.phone !== 'undefined' ? payload.details.phone : '00000000000',\n                    'firstname': recipientFirstName,\n                    'lastname': recipientLastName,\n                    'street': typeof address.line2 !== 'undefined' ? [address.line1.replace(/'/g, '&apos;'), address.line2.replace(/'/g, '&apos;')] : [address.line1.replace(/'/g, '&apos;')],\n                    'city': address.city.replace(/'/g, '&apos;'),\n                    'region': address?.state?.replace(/'/g, '&apos;') || '',\n                    'region_id': regionDataModel.getRegionIdByCode(address.countryCode, address?.state?.replace(/'/g, '&apos;') || ''),\n                    'region_code': null,\n                    'country_id': address.countryCode,\n                    'postcode': address.postalCode,\n                    'same_as_billing': 0,\n                    'customer_address_id': 0,\n                    'save_in_address_book': 0\n                }\n            }\n        };\n    };\n});\n","PayPal_Braintree/js/helper/addresses/map-googlepay-payment-information.js":"define([\n    'PayPal_Braintree/js/googlepay/model/payment-data',\n    'PayPal_Braintree/js/model/region-data'\n], function (paymentDataModel, regionDataModel) {\n    'use strict';\n\n    return function (payload, shippingAddress) {\n        const billingAddress = payload.details?.billingAddress?.streetAddress\n                ? payload.details.billingAddress\n                : shippingAddress;\n\n        const [firstname, ...lastname] = billingAddress.name.split(' ');\n\n        return {\n            'email': paymentDataModel.getEmail(),\n            'paymentMethod': {\n                'method': 'braintree_googlepay',\n                'additional_data': {\n                    'payment_method_nonce': payload.nonce\n                }\n            },\n            'billing_address': {\n                'telephone': typeof billingAddress.telephone !== 'undefined' ? billingAddress.telephone : '00000000000',\n                'firstname': firstname,\n                'lastname': lastname.join(' '),\n                'street': billingAddress.streetAddress?.split('\\n') || billingAddress.street,\n                'city': billingAddress.locality,\n                'region': billingAddress.region,\n                'region_id': regionDataModel.getRegionIdByCode(billingAddress.countryCodeAlpha2, billingAddress.region),\n                'region_code': null,\n                'country_id': billingAddress.countryCodeAlpha2,\n                'postcode': billingAddress.postalCode,\n                'same_as_billing': 0,\n                'customer_address_id': 0,\n                'save_in_address_book': 0\n            }\n        };\n    };\n});\n","PayPal_Braintree/js/helper/addresses/map-googlepay-shipping-information.js":"define([\n    'PayPal_Braintree/js/googlepay/model/payment-data',\n    'PayPal_Braintree/js/model/region-data',\n], function (paymentDataModel, regionDataModel) {\n    'use strict';\n\n    return function (payload, shippingMethod) {\n        let address = payload.details.shippingAddress;\n\n        const [firstname, ...lastname] = address.name.split(' ');\n\n        return {\n            addressInformation: {\n                'shipping_method_code': shippingMethod.method_code,\n                'shipping_carrier_code': shippingMethod.carrier_code,\n                'shipping_address': {\n                    'email': paymentDataModel.getEmail(),\n                    'telephone': typeof address.telephone !== 'undefined' ? address.telephone : '00000000000',\n                    'firstname': firstname,\n                    'lastname': lastname.join(' '),\n                    'street': address.streetAddress.split('\\n'),\n                    'city': address.locality,\n                    'region': address.region,\n                    'region_id': regionDataModel.getRegionIdByCode(address.countryCodeAlpha2, address.region),\n                    'region_code': null,\n                    'country_id': address.countryCodeAlpha2,\n                    'postcode': address.postalCode,\n                    'same_as_billing': 0,\n                    'customer_address_id': 0,\n                    'save_in_address_book': 0\n                }\n            }\n        };\n    };\n});\n","PayPal_Braintree/js/applepay/button.js":"/**\n * Braintree Apple Pay button\n **/\ndefine(\n    [\n        'jquery',\n        'braintree',\n        'braintreeDataCollector',\n        'braintreeApplePay',\n        'mage/translate',\n        'Magento_Checkout/js/model/payment/additional-validators',\n        'PayPal_Braintree/js/helper/check-guest-checkout'\n    ],\n    function (\n        $,\n        braintree,\n        dataCollector,\n        applePay,\n        $t,\n        additionalValidators,\n        checkGuestCheckout,\n    ) {\n        'use strict';\n\n        return {\n            init: function (element, context) {\n                // No element or context\n                if (!element || !context) {\n                    return;\n                }\n\n                // Context must implement these methods\n                if (typeof context.getClientToken !== 'function') {\n                    console.error(\n                        'Braintree ApplePay Context passed does not provide a getClientToken method',\n                        context\n                    );\n                    return;\n                }\n                if (typeof context.getPaymentRequest !== 'function') {\n                    console.error(\n                        'Braintree ApplePay Context passed does not provide a getPaymentRequest method',\n                        context\n                    );\n                    return;\n                }\n                if (typeof context.startPlaceOrder !== 'function') {\n                    console.error(\n                        'Braintree ApplePay Context passed does not provide a startPlaceOrder method',\n                        context\n                    );\n                    return;\n                }\n\n                if (this.deviceSupported() === false) {\n                    return;\n                }\n\n                // init braintree api\n                braintree.create({\n                    authorization: context.getClientToken()\n                }, function (clientErr, clientInstance) {\n                    this.initApplePay(clientErr, clientInstance, element, context);\n                }.bind(this));\n            },\n\n            /**\n             * Check the site is using HTTPS & apple pay is supported on this device.\n             * @return boolean\n             */\n            deviceSupported: function () {\n                if (location.protocol !== 'https:') {\n                    console.warn('Braintree Apple Pay requires your checkout be served over HTTPS');\n                    return false;\n                }\n\n                if ((window.ApplePaySession && window.ApplePaySession.canMakePayments()) !== true) {\n                    console.warn('Braintree Apple Pay is not supported on this device/browser');\n                    return false;\n                }\n\n                return true;\n            },\n\n            initApplePay: function (clientErr, clientInstance, element, context) {\n                if (clientErr) {\n                    console.error('Error creating client:', clientErr);\n                    return;\n                }\n\n                dataCollector.create({\n                    client: clientInstance\n                }, function (dataCollectorErr, dataCollectorInstance) {\n                    if (dataCollectorErr) {\n                        return;\n                    }\n\n                    applePay.create({\n                        client: clientInstance\n                    }, function (applePayErr, applePayInstance) {\n                        this.render(applePayErr, applePayInstance, dataCollectorInstance, element, context);\n                    }.bind(this));\n                }.bind(this));\n            },\n\n            render: function (applePayErr, applePayInstance, dataCollectorInstance, element, context) {\n                // No instance\n                if (applePayErr) {\n                    console.error('Braintree ApplePay Error creating applePayInstance:', applePayErr);\n                    return;\n                }\n\n                // Create a button within the KO element, as apple pay can only be instantiated through\n                // a valid on click event (ko onclick bind interferes with this).\n                let el = document.createElement('div');\n\n                el.className = 'braintree-apple-pay-button';\n                el.title = $t('Pay with Apple Pay');\n                el.alt = $t('Pay with Apple Pay');\n                el.addEventListener('click', function (e) {\n                    e.preventDefault();\n\n                    if (!checkGuestCheckout()) {\n                        return false;\n                    }\n\n                    if ($(el).parents('#braintree-applepay-express-payment').length === 0\n                        && !additionalValidators.validate()) {\n                        return false;\n                    }\n\n                    // Payment request object\n                    let paymentRequest = applePayInstance.createPaymentRequest(context.getPaymentRequest());\n\n                    if (!paymentRequest) {\n                        console.error('Braintree ApplePay Unable to create paymentRequest', paymentRequest);\n                        this.showError();\n                        return;\n                    }\n\n                    // Show the loader\n                    $('body').loader('show');\n\n                    // Init apple pay session\n                    try {\n                        let session = new window.ApplePaySession(1, paymentRequest);\n\n                        // Handle invalid merchant\n                        session.onvalidatemerchant = function (event) {\n                            applePayInstance.performValidation({\n                                validationURL: event.validationURL,\n                                displayName: context.getDisplayName()\n                            }, function (validationErr, merchantSession) {\n                                if (validationErr) {\n                                    session.abort();\n                                    console.error('Braintree ApplePay Error validating merchant:', validationErr);\n                                    this.showError();\n                                    return;\n                                }\n\n                                session.completeMerchantValidation(merchantSession);\n                            });\n                        };\n\n                        // Attach payment auth event\n                        session.onpaymentauthorized = function (event) {\n                            applePayInstance.tokenize({\n                                token: event.payment.token\n                            }, function (tokenizeErr, payload) {\n                                if (tokenizeErr) {\n                                    console.error('Error tokenizing Apple Pay:', tokenizeErr);\n                                    session.completePayment(window.ApplePaySession.STATUS_FAILURE);\n                                    return;\n                                }\n\n                                let nonce = payload.nonce;\n\n                                // Pass the nonce back to the payment method\n                                context.startPlaceOrder(nonce, event, session, dataCollectorInstance.deviceData);\n                            });\n                        };\n\n                        // Attach onShippingContactSelect method\n                        if (typeof context.onShippingContactSelect === 'function') {\n                            session.onshippingcontactselected = function (event) {\n                                return context.onShippingContactSelect(event, session);\n                            };\n                        }\n\n                        // Attach onShippingMethodSelect method\n                        if (typeof context.onShippingMethodSelect === 'function') {\n                            session.onshippingmethodselected = function (event) {\n                                return context.onShippingMethodSelect(event, session);\n                            };\n                        }\n\n                        // Hook\n                        if (typeof context.onButtonClick === 'function') {\n                            context.onButtonClick(session, this, e);\n                        } else {\n                            $('body').loader('hide');\n                            session.begin();\n                        }\n                    } catch (err) {\n                        $('body').loader('hide');\n                        console.error('Braintree ApplePay Unable to create ApplePaySession', err);\n                        this.showError();\n                        return false;\n                    }\n                }.bind(this));\n\n                element.appendChild(el);\n            },\n\n            showError() {\n                // eslint-disable-next-line\n                alert($t('We\\'re unable to take payments through Apple Pay at the moment. Please try an alternative payment method.'));\n            }\n        };\n    }\n);\n","PayPal_Braintree/js/applepay/api.js":"/**\n * Braintree Apple Pay button API\n *\n **/\ndefine(\n    [\n        'jquery',\n        'underscore',\n        'uiComponent',\n        'mage/translate',\n        'Magento_Customer/js/customer-data',\n        'PayPal_Braintree/js/actions/create-payment',\n        'PayPal_Braintree/js/actions/get-shipping-methods',\n        'PayPal_Braintree/js/actions/set-shipping-information',\n        'PayPal_Braintree/js/actions/update-totals',\n        'PayPal_Braintree/js/helper/get-apple-pay-line-items',\n        'PayPal_Braintree/js/helper/remove-non-digit-characters',\n        'PayPal_Braintree/js/model/region-data',\n    ],\n    function (\n        $,\n        _,\n        Component,\n        $t,\n        customerData,\n        createPayment,\n        getShippingMethods,\n        setShippingInformation,\n        updateTotals,\n        getApplePayLineItems,\n        removeNonDigitCharacters,\n        regionDataModel,\n    ) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                clientToken: null,\n                quoteId: 0,\n                displayName: null,\n                actionSuccess: null,\n                grandTotalAmount: 0,\n                storeCode: 'default',\n                priceIncludesTax: true,\n                shippingAddress: {},\n                shippingMethods: {}\n            },\n\n            /**\n             * Set & get api token\n             */\n            setClientToken: function (value) {\n                this.clientToken = value;\n            },\n            getClientToken: function () {\n                return this.clientToken;\n            },\n\n            /**\n             * Set and get quote id\n             */\n            setQuoteId: function (value) {\n                this.quoteId = value;\n            },\n            getQuoteId: function () {\n                return this.quoteId;\n            },\n\n            /**\n             * Set and get display name\n             */\n            setDisplayName: function (value) {\n                this.displayName = value;\n            },\n            getDisplayName: function () {\n                return this.displayName;\n            },\n\n            /**\n             * Set and get success redirection url\n             */\n            setActionSuccess: function (value) {\n                this.actionSuccess = value;\n            },\n            getActionSuccess: function () {\n                return this.actionSuccess;\n            },\n\n            /**\n             * Set and get grand total\n             */\n            setGrandTotalAmount: function (value) {\n                this.grandTotalAmount = parseFloat(value).toFixed(2);\n            },\n            getGrandTotalAmount: function () {\n                return parseFloat(this.grandTotalAmount);\n            },\n\n            /**\n             * Set and get store code\n             */\n            setStoreCode: function (value) {\n                this.storeCode = value;\n            },\n            getStoreCode: function () {\n                return this.storeCode;\n            },\n\n            /**\n             * Set and get store code\n             */\n            setPriceIncludesTax: function (value) {\n                this.priceIncludesTax = value;\n            },\n            getPriceIncludesTax: function () {\n                return this.priceIncludesTax;\n            },\n\n            /**\n             * Payment request info\n             */\n            getPaymentRequest: function () {\n                return {\n                    total: {\n                        label: this.getDisplayName(),\n                        amount: this.getGrandTotalAmount()\n                    },\n                    requiredShippingContactFields: ['postalAddress', 'name', 'email', 'phone'],\n                    requiredBillingContactFields: ['postalAddress', 'name']\n                };\n            },\n\n            /**\n             * Retrieve shipping methods based on address\n             */\n            onShippingContactSelect: function (event, session) {\n                // Get the address.\n                let address = event.shippingContact,\n\n                    // Create a payload.\n                    payload = {\n                        address: {\n                            city: address.locality,\n                            region: address.administrativeArea,\n                            country_id: address.countryCode.toUpperCase(),\n                            postcode: address.postalCode,\n                            save_in_address_book: 0\n                        }\n                    };\n\n                this.shippingAddress = payload.address;\n\n                getShippingMethods(payload, this.getStoreCode(), this.getQuoteId())\n                .done(function (result) {\n                    // Stop if no shipping methods.\n                    let virtualFlag = false,\n                        shippingMethods = [],\n                        totalsPayload = {};\n\n                    if (result.length === 0) {\n                        let productItems = customerData.get('cart')().items;\n\n                        _.each(productItems,\n                            function (item) {\n                                if (item.is_virtual || item.product_type === 'bundle') {\n                                    virtualFlag = true;\n                                } else {\n                                    virtualFlag = false;\n                                }\n                            }\n                        );\n                        if (!virtualFlag) {\n                            session.abort();\n                            // eslint-disable-next-line\n                            alert($t('There are no shipping methods available for you right now. Please try again or use an alternative payment method.'));\n                            return false;\n                        }\n                    }\n\n                    this.shippingMethods = {};\n\n                    // Format shipping methods array.\n                    for (let i = 0; i < result.length; i++) {\n                        if (typeof result[i].method_code !== 'string') {\n                            continue;\n                        }\n\n                        let method = {\n                            identifier: result[i].method_code,\n                            label: result[i].method_title,\n                            detail: result[i].carrier_title ? result[i].carrier_title : '',\n                            amount: parseFloat(result[i].amount).toFixed(2)\n                        };\n\n                        // Add method object to array.\n                        shippingMethods.push(method);\n\n                        this.shippingMethods[result[i].method_code] = result[i];\n\n                        if (!this.shippingMethod) {\n                            this.shippingMethod = result[i].method_code;\n                        }\n                    }\n\n                    // Create payload to get totals\n                    totalsPayload = {\n                        'addressInformation': {\n                            'address': {\n                                'countryId': this.shippingAddress.country_id,\n                                'region': this.shippingAddress.region,\n                                'regionId': regionDataModel.getRegionId(\n                                    this.shippingAddress.country_id, this.shippingAddress.region),\n                                'postcode': this.shippingAddress.postcode\n                            },\n                            'shipping_method_code': virtualFlag\n                                ? null : this.shippingMethods[shippingMethods[0].identifier].method_code,\n                            'shipping_carrier_code': virtualFlag\n                                ? null : this.shippingMethods[shippingMethods[0].identifier].carrier_code\n                        }\n                    };\n\n                    // POST to endpoint to get totals, using 1st shipping method\n                    updateTotals(totalsPayload, this.getStoreCode(), this.getQuoteId())\n                    .done(function (totals) {\n                        // Set total\n                        this.setGrandTotalAmount(totals.base_grand_total);\n\n                        // Pass shipping methods back\n                        session.completeShippingContactSelection(\n                            window.ApplePaySession.STATUS_SUCCESS,\n                            shippingMethods,\n                            {\n                                label: this.getDisplayName(),\n                                amount: this.getGrandTotalAmount()\n                            },\n                            getApplePayLineItems(totals, this.getPriceIncludesTax()),\n                        );\n                    }.bind(this)).fail(function (error) {\n                        session.abort();\n                        // eslint-disable-next-line\n                        alert($t('We\\'re unable to fetch the cart totals for you. Please try an alternative payment method.'));\n                        console.error('Braintree ApplePay: Unable to get totals', error);\n                        return false;\n                    });\n\n                }.bind(this)).fail(function (result) {\n                    session.abort();\n                    // eslint-disable-next-line\n                    alert($t('We\\'re unable to find any shipping methods for you. Please try an alternative payment method.'));\n                    // eslint-disable-next-line\n                    console.error('Braintree ApplePay: Unable to find shipping methods for estimate-shipping-methods', result);\n                    return false;\n                });\n            },\n\n            /**\n             * Record which shipping method has been selected & Updated totals\n             */\n            onShippingMethodSelect: function (event, session) {\n                let shippingMethod = event.shippingMethod,\n                    payload = {\n                        'addressInformation': {\n                            'address': {\n                                'countryId': this.shippingAddress.country_id,\n                                'region': this.shippingAddress.region,\n                                'regionId': regionDataModel.getRegionId(this.shippingAddress.country_id,\n                                    this.shippingAddress.region),\n                                'postcode': this.shippingAddress.postcode\n                            },\n                            'shipping_method_code': this.shippingMethods[shippingMethod.identifier].method_code,\n                            'shipping_carrier_code': this.shippingMethods[shippingMethod.identifier].carrier_code\n                        }\n                    };\n\n                this.shippingMethod = shippingMethod.identifier;\n\n                updateTotals(payload, this.getStoreCode(), this.getQuoteId())\n                .done(function (r) {\n                    this.setGrandTotalAmount(r.base_grand_total);\n\n                    session.completeShippingMethodSelection(\n                        window.ApplePaySession.STATUS_SUCCESS,\n                        {\n                            label: this.getDisplayName(),\n                            amount: this.getGrandTotalAmount()\n                        },\n                        getApplePayLineItems(r, this.getPriceIncludesTax())\n                    );\n                }.bind(this));\n            },\n\n            /**\n             * Place the order\n             */\n            startPlaceOrder: function (nonce, event, session, device_data) {\n                let shippingContact = event.payment.shippingContact,\n                    billingContact = event.payment.billingContact,\n                    payload = {\n                        'addressInformation': {\n                            'shipping_address': {\n                                'email': shippingContact.emailAddress,\n                                'telephone': removeNonDigitCharacters(_.get(shippingContact, 'phoneNumber', '')),\n                                'firstname': shippingContact.givenName,\n                                'lastname': shippingContact.familyName,\n                                'street': shippingContact.addressLines,\n                                'city': shippingContact.locality,\n                                'region': shippingContact.administrativeArea,\n                                'region_id': regionDataModel.getRegionId(\n                                    shippingContact.countryCode.toUpperCase(), shippingContact.administrativeArea),\n                                'region_code': null,\n                                'country_id': shippingContact.countryCode.toUpperCase(),\n                                'postcode': shippingContact.postalCode,\n                                'same_as_billing': 0,\n                                'customer_address_id': 0,\n                                'save_in_address_book': 0\n                            },\n                            'billing_address': {\n                                'email': shippingContact.emailAddress,\n                                'telephone': removeNonDigitCharacters(_.get(shippingContact, 'phoneNumber', '')),\n                                'firstname': billingContact.givenName,\n                                'lastname': billingContact.familyName,\n                                'street': billingContact.addressLines,\n                                'city': billingContact.locality,\n                                'region': billingContact.administrativeArea,\n                                'region_id': regionDataModel.getRegionId(\n                                    billingContact.countryCode.toUpperCase(), billingContact.administrativeArea),\n                                'region_code': null,\n                                'country_id': billingContact.countryCode.toUpperCase(),\n                                'postcode': billingContact.postalCode,\n                                'same_as_billing': 0,\n                                'customer_address_id': 0,\n                                'save_in_address_book': 0\n                            },\n                            'shipping_method_code': this.shippingMethod\n                                ? this.shippingMethods[this.shippingMethod].method_code : '' ,\n                            'shipping_carrier_code': this.shippingMethod\n                                ? this.shippingMethods[this.shippingMethod].carrier_code : ''\n                        }\n                    };\n\n                // Set addresses\n\n                setShippingInformation(payload, this.getStoreCode(), this.getQuoteId())\n                    .then(() => {\n                        // Submit payment information\n                        let paymentInformation = {\n                            'email': shippingContact.emailAddress,\n                            'paymentMethod': {\n                                'method': 'braintree_applepay',\n                                'additional_data': {\n                                    'payment_method_nonce': nonce,\n                                    'device_data': device_data\n                                }\n                            }\n                        };\n\n                        return createPayment(paymentInformation, this.getStoreCode(), this.getQuoteId())\n                    })\n                    .then(() => {\n                        session.completePayment(window.ApplePaySession.STATUS_SUCCESS);\n                        document.location = this.getActionSuccess();\n                    })\n                    .catch(function () {\n                        session.completePayment(window.ApplePaySession.STATUS_FAILURE);\n                        alert($t('We\\'re unable to take your payment through Apple Pay. Please try an again or use an alternative payment method.'));\n                        return false;\n                    });\n            }\n        });\n    });\n","PayPal_Braintree/js/applepay/implementations/shortcut.js":"/**\n * Braintree Apple Pay mini cart payment method integration.\n **/\ndefine(\n    [\n        'uiComponent',\n        'PayPal_Braintree/js/applepay/button',\n        'PayPal_Braintree/js/applepay/api',\n        'mage/translate',\n        'domReady!'\n    ],\n    function (\n        Component,\n        button,\n        buttonApi,\n        $t\n    ) {\n        'use strict';\n\n        return Component.extend({\n\n            defaults: {\n                id: null,\n                clientToken: null,\n                quoteId: 0,\n                displayName: null,\n                actionSuccess: null,\n                grandTotalAmount: 0,\n                storeCode: 'default'\n            },\n\n            /**\n             * @returns {Object}\n             */\n            initialize: function () {\n                this._super();\n                if (!this.displayName) {\n                    this.displayName = $t('Store');\n                }\n\n                let api = new buttonApi();\n\n                api.setGrandTotalAmount(parseFloat(this.grandTotalAmount).toFixed(2));\n                api.setClientToken(this.clientToken);\n                api.setDisplayName(this.displayName);\n                api.setQuoteId(this.quoteId);\n                api.setActionSuccess(this.actionSuccess);\n                api.setStoreCode(this.storeCode);\n                api.setPriceIncludesTax(this.priceIncludesTax);\n\n                // Attach the button\n                button.init(\n                    document.getElementById(this.id),\n                    api\n                );\n\n                return this;\n            }\n        });\n    }\n);\n","PayPal_Braintree/js/applepay/implementations/core-checkout/method-applepay.js":"define([\n    'uiComponent',\n    'Magento_Checkout/js/model/payment/renderer-list'\n], function (Component, rendererList) {\n    'use strict';\n\n    let config = window.checkoutConfig.payment;\n\n    if (config['braintree_applepay'].clientToken) {\n        rendererList.push({\n            type: 'braintree_applepay',\n            component: 'PayPal_Braintree/js/applepay/implementations/core-checkout/method-renderer/applepay'\n        });\n    }\n\n    return Component.extend({});\n});\n","PayPal_Braintree/js/applepay/implementations/core-checkout/method-renderer/applepay.js":"/**\n * Braintree Apple Pay payment method integration.\n **/\ndefine([\n    'underscore',\n    'Magento_Checkout/js/view/payment/default',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Vault/js/view/payment/vault-enabler',\n    'PayPal_Braintree/js/applepay/button',\n    'PayPal_Braintree/js/helper/get-apple-pay-line-items'\n], function (\n    _,\n    Component,\n    quote,\n    VaultEnabler,\n    button,\n    getApplePayLineItems\n) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'PayPal_Braintree/applepay/core-checkout',\n            paymentMethodNonce: null,\n            deviceData: null,\n            grandTotalAmount: 0,\n            deviceSupported: button.deviceSupported(),\n            vaultEnabler: null,\n            additionalData: {}\n        },\n\n        /**\n         * @returns {exports.initialize}\n         */\n        initialize: function () {\n            this._super();\n            this.vaultEnabler = new VaultEnabler();\n            this.vaultEnabler.setPaymentCode(this.getVaultCode());\n\n            return this;\n        },\n\n        /**\n         * Inject the apple pay button into the target element\n         */\n        getApplePayBtn: function (id) {\n            button.init(\n                document.getElementById(id),\n                this\n            );\n        },\n\n        /**\n         * Subscribe to grand totals\n         */\n        initObservable: function () {\n            this._super();\n\n            this.vaultEnabler = new VaultEnabler();\n            this.vaultEnabler.setPaymentCode(this.getVaultCode());\n\n            this.grandTotalAmount = parseFloat(quote.totals()['base_grand_total']).toFixed(2);\n\n            quote.totals.subscribe(function () {\n                if (this.grandTotalAmount !== quote.totals()['base_grand_total']) {\n                    this.grandTotalAmount = parseFloat(quote.totals()['base_grand_total']).toFixed(2);\n                }\n            }.bind(this));\n\n            return this;\n        },\n\n        /**\n         * Apple pay place order method\n         */\n        startPlaceOrder: function (nonce, event, session, device_data) {\n            this.setPaymentMethodNonce(nonce);\n            this.setDeviceData(device_data);\n            this.placeOrder();\n\n            session.completePayment(window.ApplePaySession.STATUS_SUCCESS);\n        },\n\n        /**\n         * Save nonce\n         */\n        setPaymentMethodNonce: function (nonce) {\n            this.paymentMethodNonce = nonce;\n        },\n\n        /**\n         * Save nonce\n         */\n        setDeviceData: function (device_data) {\n            this.deviceData = device_data;\n        },\n\n        /**\n         * Retrieve the client token\n         * @returns null|string\n         */\n        getClientToken: function () {\n            return window.checkoutConfig.payment[this.getCode()].clientToken;\n        },\n\n        /**\n         * Get price includes tax configuration.\n         * @returns bool\n         */\n        getPriceIncludesTax: function () {\n            return window.checkoutConfig.payment[this.getCode()].priceIncludesTax;\n        },\n\n        /**\n         * Payment request data\n         */\n        getPaymentRequest: function () {\n            return {\n                total: {\n                    label: this.getDisplayName(),\n                    amount: this.grandTotalAmount\n                },\n                lineItems: getApplePayLineItems(quote.totals(), this.getPriceIncludesTax())\n            };\n        },\n\n        /**\n         * Merchant display name\n         */\n        getDisplayName: function () {\n            return window.checkoutConfig.payment[this.getCode()].merchantName;\n        },\n\n        /**\n         * Get data\n         * @returns {Object}\n         */\n        getData: function () {\n            var data = {\n                'method': this.getCode(),\n                'additional_data': {\n                    'payment_method_nonce': this.paymentMethodNonce,\n                    'device_data': this.deviceData\n                }\n            };\n\n            data['additional_data'] = _.extend(data['additional_data'], this.additionalData);\n\n            this.vaultEnabler.visitAdditionalData(data);\n\n            return data;\n        },\n\n        /**\n         * Return image url for the apple pay mark\n         */\n        getPaymentMarkSrc: function () {\n            return window.checkoutConfig.payment[this.getCode()].paymentMarkSrc;\n        },\n\n        /**\n         * @returns {Boolean}\n         */\n        isVaultEnabled: function () {\n            return this.vaultEnabler.isVaultEnabled();\n        },\n\n        /**\n         * @returns {String}\n         */\n        getVaultCode: function () {\n            return window.checkoutConfig.payment[this.getCode()].vaultCode;\n        }\n    });\n});\n","PayPal_Braintree/js/checkoutAgreements/view/checkout-agreements-mixin.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'underscore'\n], function (_) {\n    'use strict';\n\n    return function (CheckoutAgreements) {\n        return CheckoutAgreements.extend({\n            /**\n             * Replace checkboxes unique id with Braintree PayPal Vault unique id using the index.\n             * First call the original & extend in order to prevent unwanted behaviour.\n             *\n             * @param {Object} context - the ko context\n             * @param {Number} agreementId\n             */\n            getCheckboxId: function (context, agreementId) {\n                let result = this._super(context, agreementId),\n\n                    /* Fetch corresponding payment method from parent context */\n                    paymentMethodRenderer = context.$parents[1],\n                    paymentMethodName;\n\n                /* We only want to check for Braintree PayPal Vault methods with set properties     */\n                if (!paymentMethodRenderer ||\n                    _.get(paymentMethodRenderer, ['code'], null) !== 'braintree_paypal_vault' ||\n                    !_.has(paymentMethodRenderer, 'index')\n                ) {\n                    return result;\n                }\n\n                paymentMethodName = paymentMethodRenderer.index;\n\n                /* Now check that the relevant index `braintree_paypal_vault_X` has global variables set */\n                if (!this.hasVaultInCheckoutConfig(paymentMethodName)) {\n                    return result;\n                }\n\n                /* If yes, use unique name */\n                return 'agreement_' + paymentMethodName + '_' + agreementId;\n            },\n\n            /**\n             * Check whether the current method renderer index has configuration in the checkout global.\n             *\n             * @param {String} vaultIndex\n             * @return {Boolean}\n             */\n            hasVaultInCheckoutConfig: function (vaultIndex) {\n                return _.has(window.checkoutConfig.payment, ['vault', vaultIndex]);\n            }\n        });\n    };\n});\n","PayPal_Braintree/js/customer/utilities.js":"/* eslint-disable max-depth */\ndefine([\n    'jquery',\n    'ko',\n    'mage/url',\n    'mage/translate',\n    'mage/calendar'\n], function ($, ko, urlBuilder) {\n    'use strict';\n    return {\n\n        viewModel: {\n            activeVM: ko.observableArray(null),\n            pausedVM: ko.observableArray(null),\n            pendingVM: ko.observableArray(null),\n\n            updatedOrderEntityId: ko.observable(null),\n            showBanner: ko.observable(false),\n            errorModal: {\n                visible: ko.observable(false),\n                message: ko.observable(null)\n            }\n        },\n        sectionCounter: 0,\n\n        makeCall: function (url, verb, callback, viewModel) {\n            var self = this;\n\n            $.ajax({\n                url: urlBuilder.build(url),\n                contentType: 'application/json',\n                global: true,\n                type: verb,\n                showLoader: true,\n                cache: false,\n                success: function (response) {\n                    callback(response);\n                    self.handleSuccess(self.viewModel.updatedOrderEntityId());\n                },\n                error: function (xhr, status, error) {\n                    $('body').trigger('processStop');\n                    if (viewModel) {\n                        self.hideModal(viewModel);\n                    }\n\n                    self.handleError(xhr, status, error);\n                }\n            });\n        },\n\n        //Get entity ID from response json back from update\n        //After section updates, run this to find the updatedOrderEntityId value and add the class\n        //Find a div with that ID and add a class to it\n        handleSuccess: function (entity_id) {\n            var self = this,\n                successClass = 'updated-success',\n                orderItem = $('.repeat-order-id-' + entity_id),\n                parentContainer = orderItem.closest('.repeat-order');\n\n            // If there is another success message on an item then reset\n            if ($('.updated-success').length) {\n                $(this).removeClass(successClass);\n            }\n\n            orderItem.addClass(successClass);\n            parentContainer.addClass(successClass);\n\n            //Remove the class\n            //Set the entityid value back to null, so the success message is only shown once\n            setTimeout(function () {\n                orderItem.removeClass(successClass);\n                parentContainer.removeClass(successClass);\n                self.viewModel.updatedOrderEntityId(null);\n            }, 20000);\n        },\n\n        hideModal: function (viewModel) {\n            return viewModel.visible(false);\n        },\n\n        //Get a message relating to a particular response and show it on the page in a modal\n        handleError: function (xhr) {\n            this.viewModel.errorModal.message(JSON.parse(xhr.responseText).message);\n            this.viewModel.errorModal.visible(true);\n        },\n\n        formatDate: function (value, format) {\n            if (!format || typeof format == 'undefined') {\n                format = 'MM dd, yy';\n            }\n\n            return $.datepicker.formatDate(format, new Date(value));\n        },\n\n        formatCurrency: function (value) {\n            //If the price is a negative number, make it a positive number. eg -1.25 becomes 1.25\n            var formattedValue = Math.abs(value);\n\n            //Set number to 2 decimal places as it is a price\n            formattedValue = formattedValue.toFixed(2);\n\n            return formattedValue;\n        },\n\n        formatWeeks: function (value) {\n            var dayValue = value / 7;\n\n            return dayValue === 1 ? $.mage.__('Week') : dayValue + ' ' + $.mage.__('Weeks');\n        },\n\n        //Used for payment details as they are formatted as a string of json:\n        //eg '{\"type\":\"VI\",\"maskedCC\":\"1111\",\"expirationDate\":\"11\\/2022\"}'\n        parseStringtoJSON: function (string) {\n            var result = JSON.parse(string);\n\n            return result;\n        },\n\n        //Find the image url in the product.media_gallery_entries array\n        getImgUrl: function (data) {\n            var imgUrl,\n                i = 0,\n                j = 0,\n                dataLength = data.length;\n\n            for (i = 0; i < dataLength; i++) {\n\n                for (j = 0; j < data[i].types.length; j++) {\n                    if (data[i].types[j] === 'thumbnail') {\n                        imgUrl = data[i].file;\n\n                        break;\n                    }\n                }\n            }\n\n            return '/media/catalog/product' + imgUrl;\n        },\n\n        //Find the image label to be used as an alt tag in the product.media_gallery_entries array\n        getImgAltTag: function (data) {\n            var altTag,\n                i = 0,\n                j = 0,\n                dataLength = data.length;\n\n            for (i = 0; i < dataLength; i++) {\n\n                for (j = 0; j < data[i].types.length; j++) {\n                    altTag = this.updateAltTag(data[i].types[j]);\n\n                    if (data[i].types[j] === 'thumbnail') {\n\n                        if (data[i].label === null || data[i].label === '') {\n                            altTag = ' ';\n                        }\n                        else {\n                            altTag = data[i].label;\n                        }\n\n                        break;\n                    }\n                }\n            }\n\n            return altTag;\n        }\n    };\n});\n","PayPal_Braintree/js/customer/payment/update-payment.js":"define([\n    'uiComponent',\n    'jquery',\n    'ko',\n    'uiRegistry'\n], function (Component, $, ko, registry) {\n    'use strict';\n    return Component.extend({\n        defaults: {\n            addNewCardVM: {\n                visible: ko.observable(false)\n            },\n            addNewPayPalVM: {\n                visible: ko.observable(false)\n            },\n            errorModalVM: {\n                visible: ko.observable(false),\n                message: ko.observable(null),\n                header: ko.observable('Error')\n            }\n        },\n\n        /**\n         * Add the repeat order block to the frontend\n         */\n        initialize: function () {\n            this.modifyKnockoutRemovalBehaviour();\n\n            this._super();\n        },\n\n        /**\n         * By moving the billing address form inside of Knockout it\n         * conflicts with the mage.directoryRegionUpdater widget.\n         *\n         * Knockout will run a cleanData method that removes jQuery events so removes the region updater events\n         * so User's will no longer see the correct region fields.\n         */\n        modifyKnockoutRemovalBehaviour: function () {\n            const normalFunction = ko.utils.domNodeDisposal.cleanExternalData;\n\n            ko.utils.domNodeDisposal.cleanExternalData = function (node) {\n                if (node.id === 'country') {\n                    return;\n                }\n\n                normalFunction(node);\n            };\n        },\n\n        /**\n         * Show add card modal\n         */\n        showAddCardModal: function () {\n            this.addNewCardVM.visible(true);\n\n            $('html, body').animate({scrollTop: 0}, 400);\n        },\n\n        /**\n         * Hide add card modal\n         */\n        hideAddCardModal: function () {\n            this.addNewCardVM.visible(false);\n        },\n\n        /**\n         * Show add PayPal modal\n         */\n        showAddPayPalModal: function () {\n            let braintreePaypal = registry.get('new-form-braintree-paypal');\n\n            braintreePaypal.setup();\n            this.addNewPayPalVM.visible(true);\n        },\n\n        /**\n         * Show add PayPal modal\n         */\n        hideAddPayPalModal: function () {\n            let braintreePaypal = registry.get('new-form-braintree-paypal');\n\n            braintreePaypal.teardownPayPalInstance();\n            this.addNewPayPalVM.visible(false);\n        }\n    });\n});\n","PayPal_Braintree/js/customer/payment/address-form-initializer.js":"define([\n    'jquery',\n    'uiComponent',\n    'ko',\n    'PayPal_Braintree/js/customer/modals/address-modal',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'mage/url'\n], function (\n    $,\n    Component,\n    ko,\n    addressModal,\n    additionalValidators,\n    urlBuilder\n) {\n    'use strict';\n    return Component.extend({\n\n        defaults: {\n            addressModal: addressModal,\n            deliveryIntervals: ko.observableArray(null),\n            currentlySelectedInterval: ko.observable(null),\n            minDatePickerValue: 1,\n            standardDeliveryDays: 1,\n            baseUrl: ko.observable(),\n            updatedOrderEntityId: null,\n            countryId: 'GB',\n            submitBtnSelector: '#braintree_submit',\n            phoneNumberMaxLength: ko.observable(11),\n            phoneNumberMinLength: ko.observable(2),\n            phoneNumberMaxLengthErrorVisible: ko.observable(false),\n            phoneNumberMinLengthErrorVisible: ko.observable(false)\n        },\n\n        /**\n         * @inheritDoc\n         */\n        initialize: function (config) {\n            this._super(config);\n            let self = this;\n\n            additionalValidators.registerValidator({\n                validate: function () {\n                    const $form = $('#form-validate');\n\n                    $form.validation();\n                    return $form.validation('isValid');\n                }\n            });\n\n            fetch(urlBuilder.build('graphql'), {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Store': this.storeCode\n                },\n                body: JSON.stringify({\n                    query: `{\n                        countries {\n                            full_name_locale,\n                            two_letter_abbreviation\n                        }\n                    }`\n                })\n            }).then(response => response.json()).then(response => {\n                const countries = response.data.countries || [];\n\n                countries.forEach(country => {\n                    self.addressModal.viewModel.countries.push({\n                        countryCode: country.two_letter_abbreviation,\n                        countryName: country.full_name_locale\n                    });\n                });\n            });\n        },\n\n        /**\n         * Toggle submit\n         *\n         * @param disable\n         */\n        toggleSubmit: function (disable) {\n            let submitBtn = $(this.submitBtnSelector);\n\n            if (submitBtn.length) {\n                submitBtn.attr('disabled', disable);\n            }\n        },\n\n        /**\n         * Show address modal\n         *\n         * @param storeCode\n         */\n        showAddressModal: function (storeCode) {\n            this.addressModal.viewModel.selectExistingVisible(true);\n            this.addressModal.viewModel.currentCountryId(this.countryId);\n            this.addressModal.showAddressModal(storeCode);\n            let addressLength = this.addressModal.viewModel.currentAddresses().length;\n\n            this.addressModal.viewModel.newAddressFormVisible(addressLength === 0);\n            this.showLookupForm();\n            this.toggleSubmit(true);\n        },\n\n        /**\n         * Show add new address form\n         */\n        showNewAddressForm: function () {\n            this.addressModal.toggleNewAddAddressForm(true);\n            if (this.addressModal.toggleNewAddAddressForm) {\n                document.getElementById('form-validate').style.display = 'block';\n            }\n            this.addressModal.viewModel.isLookup(false);\n\n            this.toggleSubmit(false);\n        },\n\n        /**\n         * Show lookup form\n         */\n        showLookupForm: function () {\n            this.addressModal.toggleNewAddAddressForm(true);\n        },\n\n        /**\n         * Show existing selector\n         */\n        showExistingSelector: function () {\n            this.addressModal.toggleNewAddAddressForm(false);\n            if (this.addressModal.toggleNewAddAddressForm) {\n                document.getElementById('form-validate').style.display = 'none';\n            }\n\n            this.toggleSubmit(false);\n        }\n    });\n});\n","PayPal_Braintree/js/customer/payment/braintree-card.js":"define([\n    'uiComponent',\n    'jquery',\n    'ko',\n    'underscore',\n    'mage/translate',\n    'uiRegistry',\n    'braintreeThreeDSecure',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'PayPal_Braintree/js/helper/get-braintree-config',\n    'PayPal_Braintree/js/view/payment/adapter',\n    'mage/url'\n], function (\n    Component,\n    $,\n    ko,\n    _,\n    $t,\n    uiRegistry,\n    threeDSecure,\n    additionalValidators,\n    getBraintreeConfig,\n    braintree,\n    urlBuilder\n) {\n    'use strict';\n\n    /**\n     * braintree is not an instance of Component so we need to merge in our changes\n     * and return an instance of Component with the final merged object.\n     */\n    const uiC = _.extend(braintree, {\n        clientToken: null,\n        uiConfig: null,\n        paymentMethodNonce: null,\n        selectedCardType: null,\n        storeCode: null,\n\n        isValidCardNumber: false,\n        isValidExpirationDate: false,\n        isValidCvvNumber: false,\n\n        viewModel: {\n            paymentMethodNonce: ko.observable(null),\n            publicHash: ko.observable(null),\n            paymentMethodCode: 'braintree',\n            total: ko.observable(0),\n            isThreeDSecureEnabled: ko.observable(false),\n            ipAddress: ko.observable(''),\n            merchantAccountId: ko.observable(),\n            selectedMethod: {\n                price: ko.observable(0)\n            },\n            errorMessage: ko.observable()\n        },\n\n        /**\n         * Additional payment data\n         *\n         * {Object}\n         */\n        additionalData: {},\n\n        /**\n         * @inheritDoc\n         */\n        initialize: async function (uiConfig) {\n            this._super().observe([\n                'selectedCardType'\n            ]);\n\n            this.storeCode = uiConfig.storeCode;\n\n            await this.getBraintreeConfig(this.storeCode);\n\n            this.uiConfig = uiConfig;\n            this.icons = uiConfig.icons;\n            this.cvvImage = uiConfig.cvvImage;\n            this.viewModel.isThreeDSecureEnabled(uiConfig.isThreeDSecureEnabled);\n            this.viewModel.ipAddress(uiConfig.ipAddress);\n            this.viewModel.total(parseFloat(uiConfig.amount).toFixed(2));\n\n            let self = this;\n\n            const elm = await this._waitForElm('#co-transparent-form-braintree');\n\n            if (elm) {\n                this.clientConfig = {\n                    additionalData: {},\n\n                    /**\n                     * Device data initialization\n                     * @param {String} deviceData\n                     */\n                    onDeviceDataReceived: function (deviceData) {\n                        this.additionalData['device_data'] = deviceData;\n                    },\n\n                    /**\n                     * Triggers on any Braintree error\n                     * @param {Object} response\n                     */\n                    onError: function (response) {\n                        self.showError($t('Please enter a valid card number, expiry date and CVV Number.'));\n                        throw response.message;\n                    },\n\n                    /**\n                     * Triggers when customer click \"Cancel\"\n                     */\n                    onCancelled: function () {\n                        self.showError($t('The process has been cancelled'));\n                    },\n\n                    onReady: function (context) {\n                        context.setupHostedFields();\n                    },\n\n                    /**\n                     * Allow a new nonce to be generated\n                     */\n                    onPaymentMethodError: function () {\n                        this.isProcessing = false;\n                    },\n\n                    /**\n                     * Set payment nonce\n                     * @param {String} paymentMethodNonce\n                     */\n                    setPaymentMethodNonce: function (paymentMethodNonce) {\n                        this.paymentMethodNonce = paymentMethodNonce;\n                    },\n\n                    /**\n                     * After Braintree instance initialization\n                     */\n                    onInstanceReady: function (instance) {\n                        instance.on('validityChange', self.onValidityChange.bind(self));\n                        instance.on('cardTypeChange', self.onCardTypeChange.bind(self));\n                    },\n\n                    id: 'co-transparent-form-braintree',\n\n                    hostedFields: {\n                        number: {\n                            selector: '#braintree_cc_number',\n                            placeholder: '4111 1111 1111 1111'\n                        },\n                        expirationDate: {\n                            selector: '#braintree_expirationDate',\n                            placeholder: $t('MM/YYYY')\n                        },\n                        cvv: {\n                            selector: '#braintree_cc_cid',\n                            placeholder: $t('000')\n                        }\n                    },\n\n                    styles: {\n                        'input': {\n                            'font-size': '14px',\n                            'color': '#3A3A3A'\n                        },\n                        ':focus': {\n                            'color': 'black'\n                        },\n                        '.valid': {\n                            'color': 'green'\n                        },\n                        '.invalid': {\n                            'color': 'red'\n                        }\n                    },\n\n                    onPaymentMethodReceived: function (response) {\n                        $.ajax({\n                            url: self.getVaultUrl(),\n                            type: 'POST',\n                            data: JSON.stringify({\n                                billingAddress: {},\n                                payment: {\n                                    payment_method_code: self.viewModel.paymentMethodCode,\n                                    payment_method_nonce: response.nonce,\n                                    device_data: this.additionalData.device_data\n                                }\n                            }),\n                            contentType:'application/json; charset=utf-8',\n                            success: function () {\n                                window.location.reload();\n                            },\n                            error: function (error) {\n                                $('body').trigger('processStop');\n                                console.warn(error.message);\n                            }\n                        });\n                    }\n                };\n\n                this.setConfig(this.clientConfig);\n                this.clientToken = uiConfig.clientToken;\n                this.setup();\n            }\n        },\n\n        /**\n         * Get list of card types\n         *\n         * @returns {Object}\n         */\n        getCcTypesMapper: function () {\n            return this.uiConfig.ccTypeMapper;\n        },\n\n        /**\n         * Find mage card type by Braintree type\n         *\n         * @param {String} type\n         * @param {Object} availableTypes\n         * @returns {*}\n         */\n        getMageCardType: function (type, availableTypes) {\n            let storedCardType = null,\n                mapper = this.getCcTypesMapper();\n\n            if (type && typeof mapper[type] !== 'undefined') {\n                storedCardType = mapper[type];\n\n                if (_.indexOf(availableTypes, storedCardType) !== -1) {\n                    return storedCardType;\n                }\n            }\n\n            return null;\n        },\n\n        /**\n         * Get Braintree config and set merchantAccountId\n         *\n         * @returns {*}\n         */\n        getBraintreeConfig: function (storeCode) {\n            return getBraintreeConfig(storeCode)\n                .then(response => {\n                    this.viewModel.merchantAccountId(response.data.storeConfig.braintree_merchant_account_id);\n                });\n        },\n\n        /**\n         * Triggers on Hosted Field changes\n         *\n         * @param {Object} event\n         * @returns {Boolean}\n         */\n        onValidityChange: function (event) {\n            // Handle a change in validation or card type\n            if (event.emittedBy === 'number') {\n                this.selectedCardType(null);\n\n                if (event.cards.length === 1) {\n                    this.isValidCardNumber = event.fields.number.isValid;\n                    this.selectedCardType(\n                        this.getMageCardType(event.cards[0].type, this.uiConfig.availableCardTypes));\n                    this.validateCardType();\n                } else {\n                    this.isValidCardNumber = event.fields.number.isValid;\n                    this.validateCardType();\n                }\n            }\n\n            // Other field validations\n            if (event.emittedBy === 'expirationDate') {\n                this.isValidExpirationDate = event.fields.expirationDate.isValid;\n            }\n            if (event.emittedBy === 'cvv') {\n                this.isValidCvvNumber = event.fields.cvv.isValid;\n            }\n        },\n\n        /**\n         * Triggers on Hosted Field card type changes\n         * @param {Object} event\n         * @returns {Boolean}\n         */\n        onCardTypeChange: function (event) {\n            if (event.cards.length === 1) {\n                this.selectedCardType(\n                    this.getMageCardType(event.cards[0].type, this.uiConfig.availableCardTypes)\n                );\n            } else {\n                this.selectedCardType(null);\n            }\n        },\n\n        /**\n         * Wait for element to render\n         *\n         * @param selector\n         * @returns {Promise<unknown>}\n         * @private\n         */\n        _waitForElm: function (selector) {\n            return new Promise(resolve => {\n                if (document.querySelector(selector)) {\n                    return resolve(document.querySelector(selector));\n                }\n\n                const observer = new MutationObserver(() => {\n                    if (document.querySelector(selector)) {\n                        resolve(document.querySelector(selector));\n                        observer.disconnect();\n                    }\n                });\n\n                observer.observe(document.body, {\n                    childList: true,\n                    subtree: true\n                });\n            });\n        },\n\n        /**\n         * @inheritDoc\n         */\n        getClientToken: function () {\n            return this.clientToken;\n        },\n\n        /**\n         * Trigger order placing\n         */\n        placeOrderClick: function () {\n            if (this.validateFormFields() && additionalValidators.validate()) {\n                this.handleNonce();\n            }\n        },\n\n        /**\n         * Get jQuery selector\n         * @param {String} field\n         * @returns {String}\n         */\n        getSelector: function (field) {\n            return '#' + this.code + '_' + field;\n        },\n\n        /**\n         * Get card icons\n         *\n         * @param {String} findType\n         * @returns {Object|Boolean}\n         */\n        getIcons: function (findType) {\n            return this.icons.find(({ type }) => type === findType);\n        },\n\n        /**\n         * Toggle invalid class on selector\n         * @param selector\n         * @param state\n         * @returns {boolean}\n         */\n        validateField: function (selector, state) {\n            let $selector = $(this.getSelector(selector)),\n                invalidClass = 'braintree-hosted-fields-invalid';\n\n            if (state === true) {\n                $selector.removeClass(invalidClass);\n                return true;\n            }\n\n            $selector.addClass(invalidClass);\n            return false;\n        },\n\n        /**\n         * Validate all fields\n         * @returns {boolean}\n         */\n        validateFormFields: function () {\n            return (this.validateCardType() && this.validateExpirationDate() && this.validateCvvNumber()) === true;\n        },\n\n        /**\n         * Validate current credit card type\n         * @returns {Boolean}\n         */\n        validateCardType: function () {\n            return this.validateField(\n                'cc_number',\n                this.isValidCardNumber\n            );\n        },\n\n        /**\n         * Validate current expiry date\n         * @returns {boolean}\n         */\n        validateExpirationDate: function () {\n            return this.validateField(\n                'expirationDate',\n                this.isValidExpirationDate === true\n            );\n        },\n\n        /**\n         * Validate current CVV field\n         * @returns {boolean}\n         */\n        validateCvvNumber: function () {\n            return this.validateField(\n                'cc_cid',\n                this.isValidCvvNumber === true\n            );\n        },\n\n        /**\n         * Get image for CVV\n         * @returns {String}\n         */\n        getCvvImageHtml: function () {\n            return '<img src=\"' + this.cvvImage +\n                '\" alt=\"' + $t('Card Verification Number Visual Reference') +\n                '\" title=\"' + $t('Card Verification Number Visual Reference') +\n                '\" />';\n        },\n\n        /**\n         * Prepare data to place order\n         */\n        handleNonce: function () {\n            $('body').trigger('processStart');\n            this.viewModel.errorMessage('');\n\n            let state = $.Deferred(),\n                addressBilling = uiRegistry.get('store-braintree-card-form.address'),\n                shippingId = addressBilling.addressModal.viewModel.currentShippingId(),\n\n                // If we have a shipping ID then get the selected address otherwise use the new address.\n                currentAddress = shippingId\n                    ? addressBilling.addressModal.viewModel.currentAddresses().find(function (address) {\n                        return address.id === shippingId;\n                    }) : {\n                        firstname: document.getElementById('firstname').value,\n                        lastname: document.getElementById('lastname').value,\n                        telephone: document.getElementById('telephone').value,\n                        street: [\n                            document.getElementById('street_1').value,\n                            document.getElementById('street_2').value\n                        ],\n                        city: document.getElementById('city').value,\n                        region: {\n                            region_code: document.getElementById('region_id').value\n                        },\n                        postcode: document.getElementById('zip').value,\n                        country_id: document.getElementById('country').value\n                    };\n\n            const billingAddress = {\n                givenName: currentAddress.firstname,\n                surname: currentAddress.lastname,\n                phoneNumber: currentAddress.telephone,\n                streetAddress: currentAddress.street[0],\n                extendedAddress: currentAddress.street[1],\n                locality: currentAddress.city,\n                region: currentAddress.region.region_code,\n                postalCode: currentAddress.postcode,\n                countryCodeAlpha2: currentAddress.country_id\n            };\n\n            this.hostedFieldsInstance\n                .tokenize({\n                    vault: true,\n                    billingAddress\n                }).then(function (payload) {\n                    this.viewModel.paymentMethodNonce(payload.nonce);\n                    let threeDSEnabled = this.viewModel.isThreeDSecureEnabled();\n\n                    const callback = () => {\n                        const nonce = this.viewModel.paymentMethodNonce();\n\n                        this.clientConfig.onPaymentMethodReceived({ nonce });\n                    };\n\n                    if (threeDSEnabled) {\n                        threeDSecure.create({\n                            version: 2,\n                            client: this.clientInstance\n                        }, function (threeDSecureErr, threeDSecureInstance) {\n                            if (threeDSecureErr) {\n                                console.warn(threeDSecureErr);\n                                return;\n                            }\n\n                            threeDSecureInstance.verifyCard({\n                                amount: this.viewModel.total(),\n                                nonce: payload.nonce,\n                                bin: payload.details.bin,\n                                collectDeviceData: true,\n                                cardAddChallengeRequested: true,\n                                vault: true,\n\n                                additionalInformation: {\n                                    ipAddress: this.viewModel.ipAddress()\n                                },\n\n                                onLookupComplete: function (data, next) {\n                                    next();\n                                }\n                            }, function (err, response) {\n                                if (err) {\n                                    $('body').trigger('processStop');\n                                    this.viewModel.errorMessage($t('Please try again with another form of payment.'));\n                                    return state.reject($t('Please try again with another form of payment.'));\n                                }\n\n                                let liability = {\n                                    shifted: response.liabilityShifted,\n                                    shiftPossible: response.liabilityShiftPossible\n                                };\n\n                                if (liability.shifted || !liability.shifted && !liability.shiftPossible) {\n                                    this.viewModel.paymentMethodNonce(response.nonce);\n                                    state.resolve();\n\n                                    // Validation Passed\n                                    callback();\n                                } else {\n                                    // eslint-disable-next-line max-len\n                                    this.viewModel.errorMessage($t('We could not validate your payment method. Please try again with another form of payment.'));\n                                    $('body').trigger('processStop');\n                                    state.reject($t('Please try again with another form of payment.'));\n                                }\n                            }.bind(this));\n                        }.bind(this));\n                    } else {\n                        callback();\n                    }\n                }.bind(this))\n                .catch(function () {\n                    $('body').trigger('processStop');\n                });\n        },\n\n        /**\n         * Get card vault url\n         *\n         * @returns {*}\n         */\n        getVaultUrl: function () {\n            return urlBuilder.build('rest/' + this.storeCode + '/V1/braintree/mine/payment/vault');\n        }\n    });\n\n    return Component.extend(uiC);\n});\n","PayPal_Braintree/js/customer/payment/braintree-paypal.js":"define([\n    'uiComponent',\n    'jquery',\n    'ko',\n    'underscore',\n    'PayPal_Braintree/js/view/payment/adapter',\n    'braintreePayPalCheckout',\n    'mage/translate',\n    'mage/url'\n], function (\n    Component,\n    $,\n    ko,\n    _,\n    braintree,\n    paypalCheckout,\n    $t,\n    urlBuilder\n) {\n    'use strict';\n\n    /**\n     * braintree is not an instance of Component so we need to merge in our changes\n     * and return an instance of Component with the final merged object.\n     */\n    const uiC = _.extend(braintree, {\n        clientToken: null,\n        uiConfig: null,\n        paymentMethodNonce: null,\n\n        viewModel: {\n            paymentMethodCode: 'braintree_paypal',\n            errorMessage: ko.observable()\n        },\n\n        /**\n         * @inheritDoc\n         */\n        initialize: function (uiConfig) {\n            this._super();\n\n            this.uiConfig = uiConfig;\n            this.merchantName = uiConfig.merchantName;\n            this.locale = uiConfig.locale;\n            this.currency = uiConfig.currency;\n            this.orderAmount = uiConfig.orderAmount;\n            this.storeCode = uiConfig.storeCode;\n            const self = this;\n\n            this.clientConfig = {\n\n                additionalData: {},\n                buttonId: 'paypal_container',\n\n                /**\n                 * Device data initialization\n                 * @param {String} deviceData\n                 */\n                onDeviceDataReceived: function (deviceData) {\n                    this.additionalData['device_data'] = deviceData;\n                },\n\n                /**\n                 * Triggers when widget is loaded\n                 * @param {Object} context\n                 */\n                onReady: function (context) {\n                    paypalCheckout.create({\n                        client: context.clientInstance\n                    }, async function (paypalCheckoutErr, paypalCheckoutInstance) {\n                        self.setPayPalInstance(paypalCheckoutInstance);\n\n                        await paypalCheckoutInstance.loadPayPalSDK({\n                            vault: true\n                        });\n\n                        window.paypal.Buttons({\n                            fundingSource: window.paypal.FUNDING.PAYPAL,\n\n                            createBillingAgreement: function () {\n                                return paypalCheckoutInstance.createPayment({\n                                    flow: 'vault',\n\n                                    enableShippingAddress: false,\n                                    shippingAddressEditable: false,\n\n                                    amount: self.orderAmount,\n                                    currency: self.currency,\n                                    locale: self.locale\n                                });\n                            },\n\n                            onApprove: function (data) {\n                                $('body').trigger('processStart');\n                                return paypalCheckoutInstance.tokenizePayment(data, function (err, payload) {\n                                    if (err) {\n                                        $('body').trigger('processStop');\n                                        self.viewModel.errorMessage(\n                                            $t('Please try again with another form of payment.'));\n                                        return;\n                                    }\n\n                                    $.ajax({\n                                        url: self.getVaultUrl(),\n                                        type: 'POST',\n                                        data: JSON.stringify({\n                                            payment: {\n                                                payment_method_code: self.viewModel.paymentMethodCode,\n                                                payment_method_nonce: payload.nonce,\n                                                device_data: self.deviceData\n                                            }\n                                        }),\n                                        contentType:'application/json; charset=utf-8',\n                                        success: function () {\n                                            window.location.reload();\n                                        },\n                                        error: function (error) {\n                                            $('body').trigger('processStop');\n                                            console.warn(error.message);\n                                        }\n                                    });\n                                });\n                            },\n\n                            onCancel: function (data) {\n                                console.log('PayPal payment canceled', JSON.stringify(data, 0, 2));\n                            },\n\n                            onError: function (err) {\n                                console.error('PayPal error', err);\n                            }\n                        }).render('#paypal_container_account');\n                    });\n                },\n\n                /**\n                 * Triggers on any Braintree error\n                 * @param {Object} response\n                 */\n                onError: function (response) {\n                    self.showError($t('PayPal error msg'));\n                    throw response.message;\n                },\n\n                /**\n                 * Triggers when customer click \"Cancel\"\n                 */\n                onCancelled: function () {\n                    self.showError($t('The process has been cancelled'));\n                },\n\n                onPaymentMethodReceived: function (response) {\n                    self.paymentMethodNonce = response.nonce;\n                    $('#braintree-paypal-payment-method-nonce').val(response.nonce);\n                    $('#braintree-paypal-form').trigger('submit');\n                },\n\n                dataCollector: {\n                    paypal: true\n                },\n                paypal: {\n                    container: 'paypal_container_account',\n                    flow: 'vault',\n                    singleUse: false,\n                    amount: self.orderAmount,\n                    currency: self.currency,\n                    locale: self.locale,\n                    enableShippingAddress: false,\n                    displayName: self.merchantName,\n\n                    /**\n                     * Triggers on any Braintree error\n                     */\n                    onError: function () {\n                        this.paymentMethodNonce = null;\n                    },\n\n                    /**\n                     * Triggers if browser doesn't support PayPal Checkout\n                     */\n                    onUnsupported: function () {\n                        this.paymentMethodNonce = null;\n                    }\n                }\n            };\n\n            this.setConfig(this.clientConfig);\n            this.clientToken = uiConfig.clientToken;\n        },\n\n        /**\n         * @inheritDoc\n         */\n        getClientToken: function () {\n            return this.clientToken;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getColor: function () {\n            return this.color;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getShape: function () {\n            return this.shape;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getLayout: function () {\n            return this.layout;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getSize: function () {\n            return this.size;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getEnvironment: function () {\n            return this.environment;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getDisabledFunding: function () {\n            return this.disabledFunding;\n        },\n\n        /**\n         * Set the PayPal instance or null it by setting the value of the property.\n         *\n         * @param val\n         */\n        setPayPalInstance: function (val) {\n            this.paypalInstance = val;\n        },\n\n        /**\n         * Run the teardown script to remove the PayPal instance.\n         */\n        teardownPayPalInstance: function () {\n            if (this.paypalInstance) {\n                this.paypalInstance.teardown(function () {\n                    $('#paypal_container_account').empty();\n                });\n                this.paypalInstance = null;\n            }\n\n            window.dispatchEvent(new Event('paypal:reinit-express'));\n        },\n\n        /**\n         * Get vault url\n         *\n         * @returns {*}\n         */\n        getVaultUrl: function () {\n            return urlBuilder.build('rest/' + this.storeCode + '/V1/braintree/mine/payment/vault');\n        }\n    });\n\n    return Component.extend(uiC);\n});\n","PayPal_Braintree/js/customer/modals/address-modal.js":"define([\n    'jquery',\n    'ko',\n    'mage/url'\n], function ($, ko, urlBuilder) {\n    'use strict';\n\n    return {\n        viewModel: {\n            visible: ko.observable(false),\n            newAddressFormVisible: ko.observable(false),\n            selectExistingVisible: ko.observable(false),\n            currentAddresses: ko.observableArray([]),\n            currentShippingId: ko.observable(null),\n            useForSelected: ko.observable(false),\n            saveAddressDisabled: ko.observable(true),\n            confirmationVisibleType: ko.observable(null),\n            defaultForAllAddressId: ko.observable(null),\n            isLookup: ko.observable(true),\n            newAddress: {\n                firstName: document.getElementById('firstname').value,\n                lastName: document.getElementById('lastname').value,\n                street: document.getElementById('street_1').value,\n                street2: document.getElementById('street_2').value,\n                city: document.getElementById('city').value,\n                postcode: document.getElementById('zip').value,\n                country: document.getElementById('country').value,\n                telephone: document.getElementById('telephone').value,\n                region: document.getElementById('region_id').value\n            },\n            currentCountryId: ko.observable(null),\n            countries: ko.observableArray(null)\n        },\n        validatedPostCodeExample: [],\n\n        /**\n         * Show address modal\n         *\n         * @param storeCode\n         */\n        showAddressModal: function (storeCode) {\n            let self = this;\n\n            this.viewModel.visible(true);\n            this.viewModel.selectExistingVisible(true);\n            this.viewModel.useForSelected(false);\n            this.clearAddressField();\n\n            fetch(urlBuilder.build('graphql'), {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Store': storeCode\n                },\n                body: JSON.stringify({\n                    query: `{\n                        customer {\n                            addresses {\n                                id,\n                                street,\n                                country_id,\n                                region {\n                                    region_code\n                                },\n                                telephone,\n                                postcode,\n                                firstname,\n                                lastname,\n                                city\n                            }\n                        }\n                    }`\n                })\n            }).then(response => response.json()).then(response => {\n                const addresses = response.data.customer?.addresses || [];\n\n                self.viewModel.currentAddresses.removeAll();\n\n                //Get addresses from response and put them in an observable array\n                //The template looks at the array and builds the <select> dropdown form\n                for (let i = 0; i < addresses.length; i++) {\n                    const address = {\n                        id: addresses[i].id,\n                        firstname: addresses[i].firstname,\n                        lastname: addresses[i].lastname,\n                        region: {\n                            region_code: addresses[i].region.region_code\n                        },\n                        telephone: addresses[i].telephone,\n                        postcode: addresses[i].postcode,\n                        country_id: addresses[i].country_id,\n                        city: addresses[i].city,\n                        street: addresses[i].street.join(', ')\n                    };\n\n                    self.viewModel.currentAddresses.push(address);\n                }\n\n                self.viewModel.saveAddressDisabled(true);\n            });\n        },\n\n        /**\n         * toggle (show/hide) add new address form\n         *\n         * @param show\n         */\n        toggleNewAddAddressForm: function (show) {\n            this.viewModel.newAddressFormVisible(show);\n            this.viewModel.selectExistingVisible(!show);\n            this.viewModel.isLookup(show);\n            this.clearAddressField();\n        },\n\n        /**\n         * Clear address fields\n         */\n        clearAddressField: function () {\n            $('#cc_c2a').remove();\n            this.viewModel.currentShippingId(null);\n            this.viewModel.newAddress.street = null;\n            this.viewModel.newAddress.street = null;\n            this.viewModel.newAddress.street2 = null;\n            this.viewModel.newAddress.city = null;\n            this.viewModel.newAddress.postcode = null;\n            this.viewModel.newAddress.telephone = null;\n            this.viewModel.newAddress.country = this.viewModel.currentCountryId();\n        },\n\n        /**\n         * Update current address ID\n         */\n        updateCurrentAddressId: function () {\n            this.viewModel.useForSelected(false);\n        }\n    };\n});\n","PayPal_Braintree/js/googlepay/api.js":"/**\n * Braintree Google Pay button api\n **/\ndefine([\n    'uiComponent',\n    'underscore',\n    'jquery',\n    'mage/translate',\n    'Magento_Customer/js/customer-data',\n    'Magento_Catalog/js/price-utils',\n    'PayPal_Braintree/js/actions/create-payment',\n    'PayPal_Braintree/js/actions/get-shipping-methods',\n    'PayPal_Braintree/js/actions/set-shipping-information',\n    'PayPal_Braintree/js/actions/update-totals',\n    'PayPal_Braintree/js/form-builder',\n    'PayPal_Braintree/js/googlepay/implementations/shortcut/3d-secure',\n    'PayPal_Braintree/js/googlepay/model/parsed-response',\n    'PayPal_Braintree/js/googlepay/model/payment-data',\n    'PayPal_Braintree/js/helper/addresses/map-googlepay-payment-information',\n    'PayPal_Braintree/js/helper/addresses/map-googlepay-shipping-information',\n    'PayPal_Braintree/js/helper/get-google-pay-line-items',\n    'PayPal_Braintree/js/helper/is-cart-virtual',\n    'PayPal_Braintree/js/helper/remove-non-digit-characters',\n    'PayPal_Braintree/js/helper/submit-review-page',\n    'PayPal_Braintree/js/model/region-data',\n    'PayPal_Braintree/js/view/payment/adapter',\n    'PayPal_Braintree/js/view/payment/validator-manager'\n], function (\n    Component,\n    _,\n    $,\n    $t,\n    customerData,\n    priceUtils,\n    createPayment,\n    getShippingMethods,\n    setShippingInformation,\n    updateTotals,\n    formBuilder,\n    threeDSecureValidator,\n    parsedResponseModel,\n    paymentDataModel,\n    mapGooglePayPaymentInformation,\n    mapGooglePayShippingInformation,\n    getGooglePayLineItems,\n    isCartVirtual,\n    removeNonDigitCharacters,\n    submitReviewPage,\n    regionDataModel,\n    braintreeMainAdapter,\n    validatorManager\n) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            validatorManager: validatorManager,\n            threeDSecureValidator: threeDSecureValidator,\n            clientToken: null,\n            merchantId: null,\n            currencyCode: null,\n            actionSuccess: null,\n            amount: null,\n            cardTypes: [],\n            shippingMethods: {},\n            shippingMethodCode: null,\n            btnColor: 0,\n            email: null,\n            paymentMethodNonce: null,\n            creditCardBin: null,\n            element: null,\n            priceFormat: [],\n        },\n\n        /**\n         * Set & get environment\n         * \"PRODUCTION\" or \"TEST\"\n         */\n        setEnvironment: function (value) {\n            this.environment = value;\n        },\n        getEnvironment: function () {\n            return this.environment;\n        },\n\n        /**\n         * Set & get api token\n         */\n        setClientToken: function (value) {\n            this.clientToken = value;\n        },\n        getClientToken: function () {\n            return this.clientToken;\n        },\n\n        /**\n         * Set and get display name\n         */\n        setMerchantId: function (value) {\n            this.merchantId = value;\n        },\n        getMerchantId: function () {\n            return this.merchantId;\n        },\n\n        /**\n         * Set and get currency code\n         */\n        setAmount: function (value) {\n            this.amount = parseFloat(value).toFixed(2);\n        },\n        getAmount: function () {\n            return this.amount;\n        },\n\n        /**\n         * Set and get currency code\n         */\n        setCurrencyCode: function (value) {\n            this.currencyCode = value;\n        },\n        getCurrencyCode: function () {\n            return this.currencyCode;\n        },\n\n        /**\n         * Set and get success redirection url\n         */\n        setActionSuccess: function (value) {\n            this.actionSuccess = value;\n        },\n        getActionSuccess: function () {\n            return this.actionSuccess;\n        },\n\n        /**\n         * Set and get success redirection url\n         */\n        setCardTypes: function (value) {\n            this.cardTypes = value;\n        },\n        getCardTypes: function () {\n            return this.cardTypes;\n        },\n\n        /**\n         * BTN Color\n         */\n        setBtnColor: function (value) {\n            this.btnColor = value;\n        },\n        getBtnColor: function () {\n            return this.btnColor;\n        },\n\n        /**\n         * Set and get quote id\n         */\n        setQuoteId: function (value) {\n            this.quoteId = value;\n        },\n        getQuoteId: function () {\n            return this.quoteId;\n        },\n\n        /**\n         * Set and get store code\n         */\n        setStoreCode: function (value) {\n            this.storeCode = value;\n        },\n        getStoreCode: function () {\n            return this.storeCode;\n        },\n\n        /**\n         * Set and get success redirection url\n         */\n        setSkipReview: function (value) {\n            this.skipReview = value;\n        },\n        getSkipReview: function () {\n            return this.skipReview;\n        },\n\n        /**\n         * Set and get store code\n         */\n        setPriceIncludesTax: function (value) {\n            this.priceIncludesTax = value;\n        },\n        getPriceIncludesTax: function () {\n            return this.priceIncludesTax;\n        },\n\n        /**\n         * Set and get the current element\n         */\n        setElement: function (value) {\n            this.element = value;\n        },\n        getElement: function () {\n            return this.element;\n        },\n\n        /**\n         * Set and get the current element\n         */\n        setPriceFormat: function (value) {\n            this.priceFormat = value;\n        },\n        getPriceFormat: function () {\n            return this.priceFormat;\n        },\n\n        /**\n         * Add the 3D Secure validator config.\n         *\n         * @param {object} value\n         */\n        setThreeDSecureValidatorConfig: function (value) {\n            this.threeDSecureValidator.setConfig(value);\n        },\n\n        /**\n         * Add the 3D Secure validator to the validation manager with amount & billing address data set.\n         * It will be added only if 3D Secure is active.\n         */\n        addThreeDSecureValidator: function () {\n            this.threeDSecureValidator.setBillingAddress(this.getThreeDSecureBillingAddressData());\n            this.threeDSecureValidator.setShippingAddress(this.getThreeDSecureShippingAddressData());\n            this.threeDSecureValidator.setTotalAmount(this.getAmount());\n\n            this.validatorManager.add(this.threeDSecureValidator);\n        },\n\n        /**\n         * Payment request info\n         */\n        getPaymentRequest: function () {\n            const displayShippingOptions = !isCartVirtual() && this.getSkipReview();\n            const callbackIntents = ['PAYMENT_AUTHORIZATION'];\n\n            if (!isCartVirtual()) {\n                callbackIntents.push('SHIPPING_ADDRESS');\n            }\n\n            if (displayShippingOptions) {\n              callbackIntents.push('SHIPPING_OPTION');\n            }\n\n            const totals = customerData.get('cart')();\n            let result = {\n                transactionInfo: {\n                    totalPriceStatus: 'ESTIMATED',\n                    totalPrice: this.getAmount(),\n                    currencyCode: this.getCurrencyCode(),\n                    displayItems: getGooglePayLineItems(totals, this.getPriceIncludesTax()),\n                    totalPriceLabel: $t('Total'),\n                },\n                allowedPaymentMethods: [\n                    {\n                        'type': 'CARD',\n                        'parameters': {\n                            'allowedCardNetworks': this.getCardTypes(),\n                            'billingAddressRequired': true,\n                            'billingAddressParameters': {\n                                format: 'FULL',\n                                phoneNumberRequired: true\n                            }\n                        }\n\n                    }\n                ],\n                shippingAddressRequired: !isCartVirtual(),\n                shippingOptionRequired: displayShippingOptions,\n                shippingAddressParameters: {\n                    phoneNumberRequired: true\n                },\n                emailRequired: true,\n                callbackIntents,\n            };\n\n            if (this.getEnvironment() !== 'TEST') {\n                result.merchantInfo = { merchantId: this.getMerchantId() };\n            }\n\n            return result;\n        },\n\n        onPaymentDataChanged: function (data) {\n            return new Promise((resolve) => {\n                const payload = {\n                    address: {\n                        city: data.shippingAddress.locality,\n                        region: data.shippingAddress.administrativeArea,\n                        country_id: data.shippingAddress.countryCode,\n                        postcode: data.shippingAddress.postalCode,\n                        save_in_address_book: 0\n                    }\n                };\n\n                let shippingMethods = Promise.resolve();\n\n                if (!isCartVirtual()) {\n                    shippingMethods = getShippingMethods(payload, this.getStoreCode(), this.getQuoteId()).then((response) => {\n                        const methods = response.filter(({ available }) => available);\n\n                        // Any error message means we need to exit by resolving with an error state.\n                        if (!methods.length) {\n                            resolve({\n                                error: {\n                                    reason: 'SHIPPING_ADDRESS_UNSERVICEABLE',\n                                    message: $t('There are no shipping methods available for the selected address.'),\n                                    intent: 'SHIPPING_ADDRESS',\n                                },\n                            });\n                            return;\n                        }\n\n                        const shippingMethods = methods.map((shippingMethod) => {\n                            const price = priceUtils.formatPriceLocale(shippingMethod.price_incl_tax, this.getPriceFormat());\n                            const description = shippingMethod.carrier_title\n                                ? `${price} ${shippingMethod.carrier_title}`\n                                : price;\n\n                            this.shippingMethods[shippingMethod.method_code] = shippingMethod;\n\n                            return {\n                                id: shippingMethod.method_code,\n                                label: shippingMethod.method_title,\n                                description,\n                            };\n                        });\n\n                        return { shippingMethods, methods };\n                    });\n                }\n\n                shippingMethods.then(({ shippingMethods, methods }) => {\n                    let selectedShipping;\n\n                    if (!isCartVirtual() && this.getSkipReview()) {\n                        selectedShipping = data.shippingOptionData.id === 'shipping_option_unselected'\n                            ? methods[0]\n                            : methods.find(({ method_code: id }) => id === data.shippingOptionData.id) || methods[0];\n\n                        this.shippingMethodCode = selectedShipping.method_code;\n                    }\n\n                    // Create payload to get totals\n                    let totalsPayload = {\n                        \"addressInformation\": {\n                            \"address\": {\n                                \"countryId\": data.shippingAddress.countryCode,\n                                \"region\": data.shippingAddress.administrativeArea,\n                                \"regionId\": regionDataModel.getRegionId(data.shippingAddress.countryCode, data.shippingAddress.administrativeArea),\n                                \"postcode\": data.shippingAddress.postalCode\n                            },\n                            \"shipping_method_code\": selectedShipping?.method_code,\n                            \"shipping_carrier_code\": selectedShipping?.method_code\n                        }\n                    };\n\n                    updateTotals(totalsPayload, this.getStoreCode(), this.getQuoteId())\n                        .then((totals) => {\n                            const paymentDataRequestUpdate = {\n                                newTransactionInfo: {\n                                    currencyCode: totals.base_currency_code,\n                                    displayItems: getGooglePayLineItems(totals, this.getPriceIncludesTax()),\n                                    totalPrice: totals.base_grand_total.toString(),\n                                    totalPriceLabel: $t('Total'),\n                                    totalPriceStatus: 'FINAL'\n                                },\n                            };\n\n                            if (shippingMethods && selectedShipping) {\n                                paymentDataRequestUpdate.newShippingOptionParameters = {\n                                    defaultSelectedOptionId: selectedShipping.method_code,\n                                    shippingOptions: shippingMethods,\n                                };\n                            }\n\n                            resolve(paymentDataRequestUpdate);\n                        });\n                });\n            });\n        },\n\n        /**\n         * Place the order\n         */\n        startPlaceOrder: function (paymentData) {\n            // Persist the paymentData (shipping address etc.)\n            return new Promise((resolve) => {\n                paymentDataModel.setPaymentMethodData(_.get(\n                    paymentData,\n                    'paymentMethodData',\n                    null\n                ));\n                paymentDataModel.setEmail(_.get(paymentData, 'email', ''));\n                paymentDataModel.setShippingAddress(_.get(\n                    paymentData,\n                    'shippingAddress',\n                    null\n                ));\n\n                const googlePaymentInstance = braintreeMainAdapter.getGooglePayInstance();\n                googlePaymentInstance.parseResponse(paymentData).then(function (result) {\n                    parsedResponseModel.setNonce(result.nonce);\n                    parsedResponseModel.setIsNetworkTokenized(_.get(\n                        result,\n                        ['details', 'isNetworkTokenized'],\n                        false\n                    ));\n                    parsedResponseModel.setBin(_.get(\n                        result,\n                        ['details', 'bin'],\n                        null\n                    ));\n\n                    let payload = {\n                        details: {\n                            shippingAddress: this.getShippingAddressData(),\n                            billingAddress: this.getBillingAddressData()\n                        },\n                        nonce: this.paymentMethodNonce,\n                        isNetworkTokenized: parsedResponseModel.getIsNetworkTokenized(),\n                        deviceData: braintreeMainAdapter.deviceData\n                    };\n                    payload.details.name = payload.details.shippingAddress?.name || payload.details.billingAddress?.name;\n\n                    this.email = paymentDataModel.getEmail();\n                    this.paymentMethodNonce = parsedResponseModel.getNonce();\n                    this.creditCardBin = parsedResponseModel.getBin();\n\n                    if (parsedResponseModel.getIsNetworkTokenized() === false) {\n                        /* Add 3D Secure verification to payment & validate payment for non network tokenized cards */\n                        this.addThreeDSecureValidator();\n\n                        this.validatorManager.validate(this, function () {\n                            /* Set the new nonce from the 3DS verification */\n                            payload.nonce = this.paymentMethodNonce;\n\n                            if (!this.getSkipReview() || isCartVirtual()) {\n                                return submitReviewPage(payload, this.getElement(), 'googlepay');\n                            }\n\n                            const shippingMethod = this.shippingMethods[this.shippingMethodCode];\n                            const shippingInformation = mapGooglePayShippingInformation(payload, shippingMethod);\n                            const paymentInformation = mapGooglePayPaymentInformation(payload, shippingInformation.addressInformation.shipping_address);\n\n                            return setShippingInformation(shippingInformation, this.getStoreCode(), this.getQuoteId())\n                                .then(() => createPayment(paymentInformation, this.getStoreCode(), this.getQuoteId()))\n                                .then(() => document.location = this.getActionSuccess())\n                                .catch(function (error) {\n                                    alert(error);\n                                });\n                        }.bind(this), function () {\n                            this.paymentMethodNonce = null;\n                            this.creditCardBin = null;\n                        }.bind(this));\n\n                        resolve({\n                            transactionState: 'SUCCESS',\n                        });\n                    } else {\n                        formBuilder.build({\n                            action: this.getActionSuccess(),\n                            fields: {\n                                result: JSON.stringify(payload)\n                            }\n                        }).submit();\n                    }\n                }.bind(this));\n            });\n        },\n\n        /**\n         * Get the shipping address from the payment data model which should already be set by the calling script.\n         *\n         * @return {?Object}\n         */\n        getShippingAddressData: function () {\n            const shippingAddress = paymentDataModel.getShippingAddress();\n\n            if (shippingAddress === null) {\n                return null;\n            }\n\n            return {\n                streetAddress: shippingAddress.address1 + '\\n' + shippingAddress.address2,\n                locality: shippingAddress.locality,\n                postalCode: shippingAddress.postalCode,\n                countryCodeAlpha2: shippingAddress.countryCode,\n                email: paymentDataModel.getEmail(),\n                name: shippingAddress.name,\n                telephone: removeNonDigitCharacters(_.get(shippingAddress, 'phoneNumber', '')),\n                region: _.get(shippingAddress, 'administrativeArea', '')\n            };\n        },\n\n        /**\n         * Get the billing address from the payment data model which should already be set by the calling script.\n         *\n         * @return {?Object}\n         */\n        getBillingAddressData: function () {\n            const paymentMethodData = paymentDataModel.getPaymentMethodData(),\n                billingAddress = _.get(paymentMethodData, ['info', 'billingAddress'], null);\n\n            if (paymentMethodData === null) {\n                return null;\n            }\n\n\n            if (billingAddress === null) {\n                return null;\n            }\n\n            return {\n                streetAddress: billingAddress.address1 + '\\n' + billingAddress.address2,\n                locality: billingAddress.locality,\n                postalCode: billingAddress.postalCode,\n                countryCodeAlpha2: billingAddress.countryCode,\n                email: paymentDataModel.getEmail(),\n                name: billingAddress.name,\n                telephone: removeNonDigitCharacters(_.get(billingAddress, 'phoneNumber', '')),\n                region: _.get(billingAddress, 'administrativeArea', '')\n            };\n        },\n\n        /**\n         * Get the billing address data as required for 3D Secure verification.\n         *\n         * For First & last name, use a simple split by space.\n         *\n         * @return {?Object}\n         */\n        getThreeDSecureBillingAddressData: function () {\n            let paymentMethodData = paymentDataModel.getPaymentMethodData(),\n                billingAddress = _.get(paymentMethodData, ['info', 'billingAddress'], null);\n\n            if (paymentMethodData === null) {\n                return null;\n            }\n\n            if (billingAddress === null) {\n                return null;\n            }\n\n            return {\n                firstname: billingAddress.name.substring(0, billingAddress.name.indexOf(' ')),\n                lastname: billingAddress.name.substring(billingAddress.name.indexOf(' ') + 1),\n                telephone: removeNonDigitCharacters(_.get(billingAddress, 'phoneNumber', '')),\n                street: [\n                    billingAddress.address1,\n                    billingAddress.address2\n                ],\n                city: billingAddress.locality,\n                regionCode: _.get(billingAddress, 'administrativeArea', ''),\n                postcode: billingAddress.postalCode,\n                countryId: billingAddress.countryCode\n            };\n        },\n\n        /**\n         * Get the shipping address data as required for 3D Secure verification.\n         *\n         * For First & last name, use a simple split by space.\n         *\n         * @return {?Object}\n         */\n        getThreeDSecureShippingAddressData: function () {\n            let shippingAddress = paymentDataModel.getShippingAddress();\n\n            if (shippingAddress === null) {\n                return null;\n            }\n\n            return {\n                firstname: shippingAddress.name.substring(0, shippingAddress.name.indexOf(' ')),\n                lastname: shippingAddress.name.substring(shippingAddress.name.indexOf(' ') + 1),\n                telephone: removeNonDigitCharacters(_.get(shippingAddress, 'phoneNumber', '')),\n                street: [\n                    shippingAddress.address1,\n                    shippingAddress.address2\n                ],\n                city: shippingAddress.locality,\n                regionCode: _.get(shippingAddress, 'administrativeArea', ''),\n                postcode: shippingAddress.postalCode,\n                countryId: shippingAddress.countryCode\n            };\n        }\n    });\n});\n","PayPal_Braintree/js/googlepay/button.js":"/**\n * Braintree Google Pay button\n **/\ndefine(\n    [\n        'underscore',\n        'jquery',\n        'Magento_Checkout/js/model/payment/additional-validators',\n        'Magento_CheckoutAgreements/js/view/checkout-agreements',\n        'PayPal_Braintree/js/googlepay/model/parsed-response',\n        'PayPal_Braintree/js/helper/check-guest-checkout',\n        'PayPal_Braintree/js/helper/is-cart-virtual',\n        'PayPal_Braintree/js/view/payment/adapter',\n        'braintree',\n        'braintreeDataCollector',\n        'braintreeGooglePay',\n        'mage/translate',\n        'googlePayLibrary'\n    ],\n    function (\n        _,\n        $,\n        additionalValidators,\n        checkoutAgreements,\n        parsedResponseModel,\n        checkGuestCheckout,\n        isCartVirtual,\n        braintreeMainAdapter,\n        braintree,\n        dataCollector,\n        googlePay,\n        $t\n    ) {\n        'use strict';\n\n        return {\n            init: function (element, context) {\n\n                // No element or context\n                if (!element || !context) {\n                    return;\n                }\n\n                // Context must implement these methods\n                if (typeof context.getClientToken !== 'function') {\n                    console.error(\n                        'Braintree GooglePay Context passed does not provide a getClientToken method',\n                        context\n                    );\n                    return;\n                }\n                if (typeof context.getPaymentRequest !== 'function') {\n                    console.error(\n                        'Braintree GooglePay Context passed does not provide a getPaymentRequest method',\n                        context\n                    );\n                    return;\n                }\n                if (typeof context.startPlaceOrder !== 'function') {\n                    console.error(\n                        'Braintree GooglePay Context passed does not provide a startPlaceOrder method',\n                        context\n                    );\n                    return;\n                }\n\n                const paymentDataCallbacks = {\n                    onPaymentAuthorized: context.startPlaceOrder.bind(context)\n                }\n\n                if (!isCartVirtual() && context.onPaymentDataChanged) {\n                    paymentDataCallbacks.onPaymentDataChanged = context.onPaymentDataChanged.bind(context);\n                }\n\n                // init google pay object\n                let paymentsClient = new window.google.payments.api.PaymentsClient({\n                        environment: context.getEnvironment(),\n                        paymentDataCallbacks,\n                    }),\n\n                    // Create a button within the KO element, as Google Pay can only be instantiated through\n                    // a valid on click event (ko onclick bind interferes with this).\n                    button = document.createElement('button'),\n                    color = context.getBtnColor() === 1 ? 'black' : 'white';\n\n                button.className = 'braintree-googlepay-button long ' + color;\n                button.title = $t('Buy with Google Pay');\n\n                // init braintree api\n                braintree.create({\n                    authorization: context.getClientToken()\n                }, function (clientErr, clientInstance) {\n                    this.initGooglePay(clientErr, clientInstance, paymentsClient, button, element, context);\n                }.bind(this));\n            },\n\n            initGooglePay: function (clientErr, clientInstance, paymentsClient, button, element, context) {\n                if (clientErr) {\n                    console.error('Error creating client:', clientErr);\n                    return;\n                }\n                dataCollector.create({\n                    client: clientInstance\n                }, function (dataCollectorErr, dataCollectorInstance) {\n                    if (dataCollectorErr) {\n                        return;\n                    }\n                    googlePay.create({\n                        client: clientInstance,\n                        googlePayVersion: 2\n                    }, function (googlePayErr, googlePaymentInstance) {\n                        this.render(\n                            clientInstance,\n                            googlePayErr,\n                            googlePaymentInstance,\n                            dataCollectorInstance,\n                            paymentsClient,\n                            button,\n                            element,\n                            context\n                        );\n                    }.bind(this));\n                }.bind(this));\n            },\n\n            render: function (clientInstance, googlePayErr, googlePaymentInstance,\n                dataCollectorInstance, paymentsClient, button, element, context) {\n                // No instance\n                if (googlePayErr) {\n                    console.error('Braintree GooglePay Error creating googlePayInstance:', googlePayErr);\n                    return;\n                }\n\n                /**\n                 * Assign existing client instance to braintree adapter to use existing one\n                 * otherwise new client instance needs to be created for 3DS verification\n                 * which calls the Braintree Client & Device Collector SDK twice and\n                 * makes process slow.\n                 */\n                braintreeMainAdapter.clientInstance = clientInstance;\n                braintreeMainAdapter.deviceData = dataCollectorInstance.deviceData;\n\n                paymentsClient.isReadyToPay({\n                    apiVersion: 2,\n                    apiVersionMinor: 0,\n                    allowedPaymentMethods: googlePaymentInstance.createPaymentDataRequest().allowedPaymentMethods\n                }).then(function (response) {\n                    if (response.result) {\n                        button.addEventListener('click', function (event) {\n                            let agreements = checkoutAgreements().agreements,\n                                shouldDisableActions = false;\n\n                            _.each(agreements, function (item) {\n                                if (checkoutAgreements().isAgreementRequired(item)) {\n                                    let inputId = '#agreement_braintree_googlepay_' + item.agreementId,\n                                        inputEl = document.querySelector(inputId);\n\n                                    if (inputEl !== null && !inputEl.checked) {\n                                        shouldDisableActions = true;\n                                    }\n\n                                }\n                            });\n\n                            if (!checkGuestCheckout()) {\n                                return false;\n                            }\n\n                            if ($(button).parents('#braintree-googlepay-express-payment').length === 0\n                                && !additionalValidators.validate(false)) {\n                                event.preventDefault();\n                                return false;\n                            }\n\n                            if (!shouldDisableActions) {\n                                event.preventDefault();\n                                $('body').loader('show');\n\n                                braintreeMainAdapter.setGooglePayInstance(googlePaymentInstance);\n\n                                let paymentDataRequest = googlePaymentInstance.createPaymentDataRequest(\n                                    context.getPaymentRequest()\n                                );\n\n                                paymentsClient.loadPaymentData(paymentDataRequest).catch(function (err) {\n                                    // Handle errors\n                                    // err = {statusCode: \"CANCELED\"}\n                                    console.error(err);\n                                    parsedResponseModel.resetDefaultData();\n                                    $('body').loader('hide');\n                                });\n                            }\n                        });\n                        element.append(button);\n                    }\n                }).catch(function (err) {\n                    console.error(err);\n                    $('body').loader('hide');\n                });\n            }\n        };\n    }\n);\n","PayPal_Braintree/js/googlepay/implementations/shortcut.js":"/**\n * Braintree Google Pay mini cart payment method integration.\n **/\ndefine(\n    [\n        'uiComponent',\n        'jquery',\n        'PayPal_Braintree/js/googlepay/button',\n        'PayPal_Braintree/js/googlepay/api',\n        'domReady!'\n    ],\n    function (\n        Component,\n        $,\n        button,\n        buttonApi\n    ) {\n        'use strict';\n\n        return Component.extend({\n\n            defaults: {\n                id: null,\n                clientToken: null,\n                merchantId: null,\n                currencyCode: null,\n                actionSuccess: null,\n                amount: null,\n                environment: 'TEST',\n                cardType: [],\n                btnColor: 0,\n                threeDSecure: null,\n                quoteId: 0,\n                storeCode: 'default',\n                skipOrderReviewStep: false,\n                priceFormat: [],\n            },\n\n            /**\n             * @returns {Object}\n             */\n            initialize: function () {\n                this._super();\n\n                /* Add client token & environment to 3DS Config */\n                this.threeDSecure.clientToken = this.clientToken;\n                this.threeDSecure.environment = this.environment;\n\n                const element = $(`#${this.id}`);\n                let api = new buttonApi();\n\n                api.setEnvironment(this.environment);\n                api.setCurrencyCode(this.currencyCode);\n                api.setClientToken(this.clientToken);\n                api.setMerchantId(this.merchantId);\n                api.setActionSuccess(this.actionSuccess);\n                api.setAmount(this.amount);\n                api.setCardTypes(this.cardTypes);\n                api.setBtnColor(this.btnColor);\n                api.setThreeDSecureValidatorConfig(this.threeDSecure);\n                api.setStoreCode(this.storeCode);\n                api.setQuoteId(this.quoteId);\n                api.setSkipReview(this.skipOrderReviewStep);\n                api.setPriceIncludesTax(this.priceIncludesTax);\n                api.setElement(element);\n                api.setPriceFormat(this.priceFormat);\n\n                // Attach the button\n                button.init(\n                    element,\n                    api\n                );\n\n                return this;\n            }\n        });\n    }\n);\n","PayPal_Braintree/js/googlepay/implementations/shortcut/form.js":"/*browser:true*/\ndefine([\n    'underscore',\n    'uiComponent'\n], function (_, Component) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            braintreeClient: null,\n            code: 'braintree',\n            isProcessing: false,\n\n            /**\n             * Braintree client configuration\n             *\n             * {Object}\n             */\n            clientConfig: {\n                onReady: function () {},\n\n                /**\n                 * Triggers on payment nonce receive\n                 */\n                onPaymentMethodReceived: function () {\n                    this.isProcessing = false;\n                },\n\n                /**\n                 * Allow a new nonce to be generated\n                 */\n                onPaymentMethodError: function () {\n                    this.isProcessing = false;\n                },\n\n                /**\n                 * After Braintree instance initialization\n                 */\n                onInstanceReady: function () {},\n\n                /**\n                 * Triggers on any Braintree error\n                 * @param {Object} response\n                 */\n                onError: function (response) {\n                    this.isProcessing = false;\n                    throw response.message;\n                },\n\n                /**\n                 * Triggers when customer click \"Cancel\"\n                 */\n                onCancelled: function () {\n                    this.isProcessing = false;\n                }\n            }\n        },\n\n        /**\n         * Set list of observable attributes\n         *\n         * @returns {exports.initObservable}\n         */\n        initObservable: function () {\n            this._super();\n\n            this.initClientConfig();\n\n            return this;\n        },\n\n        /**\n         * Get payment name\n         *\n         * @returns {String}\n         */\n        getCode: function () {\n            return this.code;\n        },\n\n        /**\n         * Init config\n         */\n        initClientConfig: function () {\n            _.each(this.clientConfig, function (fn, name) {\n                if (typeof fn === 'function') {\n                    this.clientConfig[name] = fn.bind(this);\n                }\n            }, this);\n        }\n    });\n});\n","PayPal_Braintree/js/googlepay/implementations/shortcut/adapter.js":"/*browser:true*/\ndefine([\n    'underscore',\n    'mage/translate',\n    'braintree',\n    'PayPal_Braintree/js/model/full-screen-loader',\n    'Magento_Ui/js/model/messageList'\n], function (\n    _,\n    $t,\n    client,\n    defaultFullScreenLoader,\n    globalMessageList\n) {\n    'use strict';\n\n    /**\n     * Braintree Client adapter implementation generic enough to be used for GooglePay button payments.\n     *\n     * This can be used in other pages along with the basket page, but not in the checkout page when placing an order.\n     */\n    return {\n        fullScreenLoader: defaultFullScreenLoader,\n        apiClient: null,\n        config: {},\n        checkout: null,\n        clientInstance: null,\n        code: 'braintree',\n\n        /**\n         * {Object}\n         */\n        events: {\n            onClick: null,\n            onCancel: null,\n            onError: null\n        },\n\n        /**\n         * Get Braintree api client.\n         *\n         * @returns {Object}\n         */\n        getApiClient: function () {\n            return this.clientInstance;\n        },\n\n        /**\n         * Set configuration.\n         *\n         * @param {Object} config\n         */\n        setConfig: function (config) {\n            this.config = config;\n\n            if (_.has(this.config, 'code')) {\n                this.code = this.config.code;\n            }\n        },\n\n        /**\n         * Get payment name.\n         *\n         * @returns {string}\n         */\n        getCode: function () {\n            return this.code;\n        },\n\n        /**\n         * Get client token\n         *\n         * @returns {string|*}\n         */\n        getClientToken: function () {\n            return this.config.hasOwnProperty('clientToken') ? this.config.clientToken : null;\n        },\n\n        /**\n         * @returns {string}\n         */\n        getEnvironment: function () {\n            return this.config.hasOwnProperty('environment') ? this.config.environment : null;\n        },\n\n        /**\n         * Set fullscreen loader implementation allowing to use custom.\n         *\n         * @param {Function} fullScreenLoader\n         */\n        setFullScreenLoader: function (fullScreenLoader) {\n            this.fullScreenLoader = fullScreenLoader;\n        },\n\n        /**\n         * Get the full screen loader implementation.\n         *\n         * @return {Object}\n         */\n        getFullScreenLoader: function () {\n            return this.fullScreenLoader;\n        },\n\n        /**\n         * Show error message\n         *\n         * @param {string} errorMessage\n         */\n        showError: function (errorMessage) {\n            globalMessageList.addErrorMessage({\n                message: errorMessage\n            });\n\n            this.getFullScreenLoader().stopLoader(true);\n        },\n\n        /**\n         * Setup Braintree SDK.\n         *\n         * @param {Function|null} callback\n         */\n        setup: function (callback = null) {\n            if (!this.getClientToken()) {\n                this.showError($t('Sorry, but something went wrong.'));\n                return;\n            }\n\n            if (this.clientInstance) {\n                if (typeof this.config.onReady === 'function') {\n                    this.config.onReady(this);\n                }\n\n                if (typeof callback === 'function') {\n                    callback(this.clientInstance);\n                }\n\n                return;\n            }\n\n            client.create({\n                authorization: this.getClientToken()\n            }, function (clientErr, clientInstance) {\n                if (clientErr) {\n                    console.error('Braintree Setup Error', clientErr);\n                    return this.showError('Sorry, but something went wrong. Please contact the store owner.');\n                }\n\n                this.clientInstance = clientInstance;\n\n                if (typeof this.config.onReady === 'function') {\n                    this.config.onReady(this);\n                }\n\n                if (typeof callback === 'function') {\n                    callback(this.clientInstance);\n                }\n            }.bind(this));\n        }\n    };\n});\n","PayPal_Braintree/js/googlepay/implementations/shortcut/3d-secure.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\ndefine([\n    'underscore',\n    'jquery',\n    'mage/translate',\n    'braintreeThreeDSecure',\n    'PayPal_Braintree/js/googlepay/implementations/shortcut/adapter',\n    'PayPal_Braintree/js/helper/remove-non-digit-characters',\n    'PayPal_Braintree/js/helper/format-amount',\n    'PayPal_Braintree/js/helper/is-cart-virtual',\n    'PayPal_Braintree/js/model/full-screen-loader'\n], function (\n    _,\n    $,\n    $t,\n    threeDSecure,\n    braintree,\n    removeNonDigitCharacters,\n    formatAmount,\n    isCartVirtual,\n    defaultFullScreenLoader\n) {\n    'use strict';\n\n    /**\n     * 3D Secure implementation generic enough to be used for GooglePay button payments.\n     *\n     * This can be used in other pages along with the basket page, but not in the checkout page when placing an order.\n     */\n    return {\n        code: 'three_d_secure',\n        fullScreenLoader: defaultFullScreenLoader,\n        config: null,\n        billingAddress: null,\n        shippingAddress: null,\n        totalAmount: null,\n\n        /**\n         * Get code.\n         *\n         * @returns {string}\n         */\n        getCode: function () {\n            return this.code;\n        },\n\n        /**\n         *\n         * @return {boolean}\n         */\n        isEnabled: function () {\n            return this.config !== null ? _.get(this.config, ['enabled'], false) : false;\n        },\n\n        /**\n         * Set the full screen loader implementation.\n         *\n         * @param fullScreenLoader\n         */\n        setFullScreenLoader: function (fullScreenLoader) {\n            this.fullScreenLoader = fullScreenLoader;\n        },\n\n        /**\n         * Get the full screen loader implementation.\n         */\n        getFullScreenLoader: function () {\n            return this.fullScreenLoader;\n        },\n\n        /**\n         * Set 3d secure config.\n         *\n         * @param {object} config\n         */\n        setConfig: function (config) {\n            this.config = config;\n            this.config.thresholdAmount = parseFloat(_.get(config, 'thresholdAmount', '0.0'));\n        },\n\n        /**\n         * Get the billing address data.\n         */\n        getBillingAddress: function () {\n            return this.billingAddress;\n        },\n\n        /**\n         * Set the billing address data.\n         *\n         * @param {object} value\n         */\n        setBillingAddress: function (value) {\n            this.billingAddress = value;\n        },\n\n        /**\n         * Get the shipping address data.\n         */\n        getShippingAddress: function () {\n            return this.shippingAddress;\n        },\n\n        /**\n         * Set the shipping address data.\n         *\n         * @param {object} value\n         */\n        setShippingAddress: function (value) {\n            this.shippingAddress = value;\n        },\n\n        /**\n         * Get the total amount to be charged.\n         */\n        getTotalAmount: function () {\n            return this.totalAmount;\n        },\n\n        /**\n         * Set the full screen loader implementation.\n         *\n         * @param {string} value\n         */\n        setTotalAmount: function (value) {\n            this.totalAmount = formatAmount(value);\n        },\n\n        /**\n         * Get the Braintree environment.\n         *\n         * @return {string|null}\n         */\n        getEnvironment: function () {\n            return _.get(this.config, 'environment', 'TEST');\n        },\n\n        /**\n         * Get the Braintree Client Token.\n         *\n         * @return {string|null}\n         */\n        getClientToken: function () {\n            return _.get(this.config, 'clientToken', null);\n        },\n\n        /**\n         * Check minimal amount for 3d secure activation.\n         *\n         * @param {Number} amount\n         * @returns {Boolean}\n         */\n        isAmountAvailable: function (amount) {\n            amount = parseFloat(amount.toString());\n\n            return amount >= this.config.thresholdAmount;\n        },\n\n        /**\n         * Check if current country is available for 3d secure.\n         *\n         * @param {String} countryId\n         * @returns {Boolean}\n         */\n        isCountryAvailable: function (countryId) {\n            let key,\n                specificCountries = _.get(this.config, 'specificCountries', []);\n\n            // all countries are available\n            if (!specificCountries.length) {\n                return true;\n            }\n\n            for (key in specificCountries) {\n                if (countryId === specificCountries[key]) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        /**\n         * Check billing/shipping address line lengths\n         *\n         * @param errorMessage\n         * @param billingAddress\n         * @param shippingAddress\n         * @returns {*}\n         */\n        checkBillingLineLengths: function (errorMessage, billingAddress, shippingAddress) {\n            let lineError = null;\n\n            if (billingAddress.street[0].length > 50 ||\n                shippingAddress.street !== undefined && shippingAddress.street[0].length > 50) {\n                lineError = 'line1';\n            } else if (billingAddress.street[1].length > 50 ||\n                shippingAddress.street !== undefined && shippingAddress.street[1].length > 50) {\n                lineError = 'line2';\n            }\n\n            if (lineError) {\n                let error = `Billing/Shipping ${lineError} must be string and less than 50 characters.`;\n\n                return $t(`${error} Please update the address and try again.`);\n            }\n        },\n\n        /**\n         * Get the challenge requested config (default false).\n         *\n         * @returns {Boolean}\n         */\n        getChallengeRequested: function () {\n            return _.get(this.config, 'challengeRequested', false);\n        },\n\n        /**\n         * Get Customer's IP Address\n         *\n         * @returns {Boolean}\n         */\n        getIpAddress: function () {\n            return _.get(this.config, 'ipAddress', '');\n        },\n\n        /**\n         * Trigger 3DS verification & validate Braintree payment nonce.\n         *\n         * @param {Object} context\n         * @returns {Object}\n         */\n        validate: function (context) {\n            let self = this,\n                clientInstance = braintree.getApiClient(),\n                state = $.Deferred(),\n                billingAddress = self.getBillingAddress(),\n                shippingAddress = self.getShippingAddress(),\n                setup3d;\n\n            // Handle billing address region code\n            if (billingAddress.regionCode == null) {\n                billingAddress.regionCode = undefined;\n            }\n            if (billingAddress.regionCode !== undefined && billingAddress.regionCode.length > 2) {\n                billingAddress.regionCode = undefined;\n            }\n\n            // Handle shipping address region code\n            if (!isCartVirtual()) {\n                // Handle shipping address region code\n                if (shippingAddress.regionCode == null) {\n                    shippingAddress.regionCode = undefined;\n                }\n                if (shippingAddress.regionCode !== undefined && shippingAddress.regionCode.length > 2) {\n                    shippingAddress.regionCode = undefined;\n                }\n            }\n\n            if (!self.isAmountAvailable(self.getTotalAmount()) || !self.isCountryAvailable(billingAddress.countryId)) {\n                state.resolve();\n                return state.promise();\n            }\n\n            self.getFullScreenLoader().startLoader();\n\n            setup3d = function (client) {\n                threeDSecure.create({\n                    version: 2,\n                    client: client\n                }, function (threeDSecureErr, threeDSecureInstance) {\n                    if (threeDSecureErr) {\n                        self.getFullScreenLoader().stopLoader();\n                        return state.reject($t('Please try again with another form of payment.'));\n                    }\n\n                    let threeDSContainer = document.createElement('div'),\n                        tdMask = document.createElement('div'),\n                        tdFrame = document.createElement('div'),\n                        tdBody = document.createElement('div'),\n                        threeDSecureParameters;\n\n                    threeDSContainer.className = 'braintree-three-d-modal';\n                    tdMask.className = 'bt-mask';\n                    tdFrame.className = 'bt-modal-frame';\n                    tdBody.className = 'bt-modal-body';\n\n                    tdFrame.appendChild(tdBody);\n                    threeDSContainer.appendChild(tdMask);\n                    threeDSContainer.appendChild(tdFrame);\n\n                    threeDSecureParameters = {\n                        amount: self.getTotalAmount(),\n                        nonce: context.paymentMethodNonce,\n                        bin: context.creditCardBin,\n                        collectDeviceData: true,\n                        challengeRequested: self.getChallengeRequested(),\n                        billingAddress: {\n                            givenName: billingAddress.firstname,\n                            surname: billingAddress.lastname,\n                            phoneNumber: billingAddress.telephone !== null\n                                ? removeNonDigitCharacters(billingAddress.telephone)\n                                : billingAddress.telephone,\n                            streetAddress: billingAddress.street[0],\n                            extendedAddress: billingAddress.street[1],\n                            locality: billingAddress.city,\n                            region: billingAddress.regionCode,\n                            postalCode: billingAddress.postcode,\n                            countryCodeAlpha2: billingAddress.countryId\n                        },\n                        additionalInformation: {\n                            ipAddress: self.getIpAddress()\n                        },\n                        onLookupComplete: function (data, next) {\n                            next();\n                        },\n                        addFrame: function (err, iframe) {\n                            self.getFullScreenLoader().stopLoader();\n\n                            if (err) {\n                                console.log('Unable to verify card over 3D Secure', err);\n                                return state.reject($t('Please try again with another form of payment.'));\n                            }\n\n                            tdBody.appendChild(iframe);\n                            document.body.appendChild(threeDSContainer);\n                        },\n                        removeFrame: function () {\n                            self.getFullScreenLoader().startLoader();\n                            document.body.removeChild(threeDSContainer);\n                        }\n                    };\n\n                    if (_.has(context, 'email') && context.email !== null) {\n                        threeDSecureParameters.email = context.email;\n                    }\n\n                    if (!isCartVirtual()) {\n                        threeDSecureParameters.additionalInformation = {\n                            shippingGivenName: shippingAddress.firstname,\n                            shippingSurname: shippingAddress.lastname,\n                            shippingAddress: {\n                                streetAddress: shippingAddress.street[0],\n                                extendedAddress: shippingAddress.street[1],\n                                locality: shippingAddress.city,\n                                region: shippingAddress.regionCode,\n                                postalCode: shippingAddress.postcode,\n                                countryCodeAlpha2: shippingAddress.countryId\n                            },\n                            shippingPhone: shippingAddress.telephone !== null\n                                ? removeNonDigitCharacters(shippingAddress.telephone)\n                                : shippingAddress.telephone,\n                            ipAddress: self.getIpAddress()\n                        };\n                    }\n\n                    threeDSecureInstance.verifyCard(threeDSecureParameters, function (err, response) {\n                        self.getFullScreenLoader().stopLoader();\n\n                        if (err) {\n                            console.error('3DSecure validation failed', err);\n                            if (err.code === 'THREEDS_LOOKUP_VALIDATION_ERROR') {\n                                let errorMessage = err.details.originalError.details.originalError.error.message,\n                                    error = self.checkBillingLineLengths(errorMessage, billingAddress, shippingAddress);\n\n                                return error ? state.reject(error) : state.reject($t(errorMessage));\n                            }\n\n                            return state.reject($t('Please try again with another form of payment.'));\n                        }\n\n                        let liability = {\n                            shifted: response.liabilityShifted,\n                            shiftPossible: response.liabilityShiftPossible\n                        };\n\n                        if (liability.shifted || !liability.shifted && !liability.shiftPossible) {\n                            context.paymentMethodNonce = response.nonce;\n                            state.resolve();\n                        } else {\n                            state.reject($t('Please try again with another form of payment.'));\n                        }\n                    }.bind(this)); //eslint-disable-line no-extra-bind\n                });\n            };\n\n            if (!clientInstance) {\n                self.createClientInstance(setup3d);\n            } else {\n                setup3d(clientInstance);\n            }\n\n            return state.promise();\n        },\n\n        /**\n         * Create a Braintree client instance with simplified form.\n         *\n         * @param {Function} setupThreeDSecureCallback\n         * @return {*}\n         */\n        createClientInstance: function (setupThreeDSecureCallback) {\n            let self = this;\n\n            return require(['PayPal_Braintree/js/googlepay/implementations/shortcut/form'], function (c) {\n                c.defaults.clientConfig.clientToken = self.getClientToken();\n                c.defaults.clientConfig.environment = self.getEnvironment();\n                braintree.setConfig(c.defaults.clientConfig);\n                braintree.setup(setupThreeDSecureCallback);\n            });\n        }\n    };\n});\n","PayPal_Braintree/js/googlepay/implementations/core-checkout/method-googlepay.js":"define([\n    'uiComponent',\n    'Magento_Checkout/js/model/payment/renderer-list'\n], function (Component, rendererList) {\n    'use strict';\n\n    let config = window.checkoutConfig.payment;\n\n    if (config['braintree_googlepay'].clientToken) {\n        rendererList.push({\n            type: 'braintree_googlepay',\n            component: 'PayPal_Braintree/js/googlepay/implementations/core-checkout/method-renderer/googlepay'\n        });\n    }\n\n    return Component.extend({});\n});\n","PayPal_Braintree/js/googlepay/implementations/core-checkout/method-renderer/googlepay.js":"/**\n * Braintree Google Pay payment method integration.\n **/\ndefine([\n    'underscore',\n    'mage/translate',\n    'Magento_Checkout/js/view/payment/default',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Vault/js/view/payment/vault-enabler',\n    'PayPal_Braintree/js/googlepay/button',\n    'PayPal_Braintree/js/googlepay/model/parsed-response',\n    'PayPal_Braintree/js/googlepay/model/payment-data',\n    'PayPal_Braintree/js/helper/get-google-pay-line-items',\n    'PayPal_Braintree/js/view/payment/adapter',\n    'PayPal_Braintree/js/view/payment/validator-handler'\n], function (\n    _,\n    $t,\n    Component,\n    quote,\n    VaultEnabler,\n    GooglePayButton,\n    parsedResponseModel,\n    paymentDataModel,\n    getGooglePayLineItems,\n    braintreeMainAdapter,\n    validatorManager\n) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'PayPal_Braintree/googlepay/core-checkout',\n            validatorManager: validatorManager,\n            paymentMethodNonce: null,\n            creditCardBin: null,\n            deviceData: null,\n            grandTotalAmount: 0,\n            vaultEnabler: null,\n            additionalData: {}\n        },\n\n        /**\n         * @returns {exports.initialize}\n         */\n        initialize: function () {\n            this._super();\n            this.vaultEnabler = new VaultEnabler();\n            this.vaultEnabler.setPaymentCode(this.getVaultCode());\n\n            return this;\n        },\n\n        /**\n         * Inject the Google Pay button into the target element\n         */\n        getGooglePayBtn: function (id) {\n            GooglePayButton.init(\n                document.getElementById(id),\n                this\n            );\n        },\n\n        /**\n         * Subscribe to grand totals\n         */\n        initObservable: function () {\n            this._super();\n            this.vaultEnabler = new VaultEnabler();\n            this.vaultEnabler.setPaymentCode(this.getVaultCode());\n\n            this.validatorManager.initialize();\n\n            this.grandTotalAmount = parseFloat(quote.totals()['base_grand_total']).toFixed(2);\n            this.currencyCode = quote.totals()['base_currency_code'];\n\n            quote.totals.subscribe(function () {\n                if (this.grandTotalAmount !== quote.totals()['base_grand_total']) {\n                    this.grandTotalAmount = parseFloat(quote.totals()['base_grand_total']).toFixed(2);\n                }\n            }.bind(this));\n\n            return this;\n        },\n\n        /**\n         * Google Pay place order method\n         */\n        startPlaceOrder: function (paymentData) {\n            return new Promise((resolve) => {\n                paymentDataModel.setPaymentMethodData(_.get(\n                    paymentData,\n                    'paymentMethodData',\n                    null\n                ));\n                paymentDataModel.setEmail(_.get(paymentData, 'email', ''));\n                paymentDataModel.setShippingAddress(_.get(\n                    paymentData,\n                    'shippingAddress',\n                    null\n                ));\n\n                const googlePaymentInstance = braintreeMainAdapter.getGooglePayInstance();\n                googlePaymentInstance.parseResponse(paymentData).then(function (result) {\n                    parsedResponseModel.setNonce(result.nonce);\n                    parsedResponseModel.setIsNetworkTokenized(_.get(\n                        result,\n                        ['details', 'isNetworkTokenized'],\n                        false\n                    ));\n                    parsedResponseModel.setBin(_.get(\n                        result,\n                        ['details', 'bin'],\n                        null\n                    ));\n\n                    this.email = paymentDataModel.getEmail();\n                    this.paymentMethodNonce = parsedResponseModel.getNonce();\n                    this.creditCardBin = parsedResponseModel.getBin();\n\n                    if (parsedResponseModel.getIsNetworkTokenized() === false) {\n                        // place order on success validation\n                        this.validatorManager.validate(this, function () {\n                            this.setDeviceData(braintreeMainAdapter.deviceData);\n                            return this.placeOrder('parent');\n                        }.bind(this), function () {\n                            this.paymentMethodNonce = null;\n                            this.creditCardBin = null;\n                        }.bind(this));\n                    } else {\n                        this.setDeviceData(braintreeMainAdapter.deviceData);\n                        this.placeOrder();\n                    }\n\n                    resolve({\n                        transactionState: 'SUCCESS',\n                    });\n                }.bind(this));\n            });\n\n        },\n\n        /**\n         * Save device_data\n         */\n        setDeviceData: function (device_data) {\n            this.deviceData = device_data;\n        },\n\n        /**\n         * Retrieve the client token\n         * @returns null|string\n         */\n        getClientToken: function () {\n            return window.checkoutConfig.payment[this.getCode()].clientToken;\n        },\n\n        /**\n         * Get price includes tax configuration.\n         * @returns bool\n         */\n        getPriceIncludesTax: function () {\n            return window.checkoutConfig.payment[this.getCode()].priceIncludesTax;\n        },\n\n        /**\n         * Payment request info\n         */\n        getPaymentRequest: function () {\n            let result = {\n                transactionInfo: {\n                    currencyCode: this.currencyCode,\n                    displayItems: getGooglePayLineItems(quote.totals(), this.getPriceIncludesTax()),\n                    totalPrice: this.grandTotalAmount,\n                    totalPriceLabel: $t('Total'),\n                    totalPriceStatus: 'FINAL'\n                },\n                allowedPaymentMethods: [\n                    {\n                        'type': 'CARD',\n                        'parameters': {\n                            'allowedCardNetworks': this.getCardTypes(),\n                            'billingAddressRequired': true,\n                            'billingAddressParameters': {\n                                format: 'FULL',\n                                phoneNumberRequired: true\n                            }\n                        }\n\n                    }\n                ],\n                shippingAddressRequired: false,\n                emailRequired: false,\n                callbackIntents: ['PAYMENT_AUTHORIZATION']\n            };\n\n            if (this.getEnvironment() !== 'TEST') {\n                result.merchantInfo = { merchantId: this.getMerchantId() };\n            }\n\n            return result;\n        },\n\n        /**\n         * Merchant display name\n         */\n        getMerchantId: function () {\n            return window.checkoutConfig.payment[this.getCode()].merchantId;\n        },\n\n        /**\n         * Environment\n         */\n        getEnvironment: function () {\n            return window.checkoutConfig.payment[this.getCode()].environment;\n        },\n\n        /**\n         * Card Types\n         */\n        getCardTypes: function () {\n            return window.checkoutConfig.payment[this.getCode()].cardTypes;\n        },\n\n        /**\n         * BTN Color\n         */\n        getBtnColor: function () {\n            return window.checkoutConfig.payment[this.getCode()].btnColor;\n        },\n\n        /**\n         * Return the skip review state for the Google Pay at end of checkout.\n         * @returns bool\n         */\n        getSkipReview: function () {\n            return false;\n        },\n\n        /**\n         * Get data\n         * @returns {Object}\n         */\n        getData: function () {\n            let data = {\n                'method': this.getCode(),\n                'additional_data': {\n                    'payment_method_nonce': this.paymentMethodNonce,\n                    'device_data': this.deviceData,\n                    'is_network_tokenized': parsedResponseModel.getIsNetworkTokenized()\n                }\n            };\n\n            if (parsedResponseModel.getIsNetworkTokenized() === false) {\n                data['additional_data'] = _.extend(data['additional_data'], this.additionalData);\n                this.vaultEnabler.visitAdditionalData(data);\n            }\n\n            return data;\n        },\n\n        /**\n         * Return image url for the Google Pay mark\n         */\n        getPaymentMarkSrc: function () {\n            return window.checkoutConfig.payment[this.getCode()].paymentMarkSrc;\n        },\n\n        /**\n         * @returns {Boolean}\n         */\n        isVaultEnabled: function () {\n            return this.vaultEnabler.isVaultEnabled();\n        },\n\n        /**\n         * @returns {String}\n         */\n        getVaultCode: function () {\n            return window.checkoutConfig.payment[this.getCode()].vaultCode;\n        }\n    });\n});\n","PayPal_Braintree/js/googlepay/model/payment-data.js":"define([\n    'underscore',\n    'ko'\n], function (_, ko) {\n    'use strict';\n\n    let paymentMethodData = ko.observable(null),\n        email = ko.observable(null),\n        shippingAddress = ko.observable(null);\n\n    return {\n        paymentMethodData: paymentMethodData,\n        email: email,\n        shippingAddress: shippingAddress,\n\n        /**\n         * Get Google Pay payment method data details.\n         *\n         * @return {?Object}\n         */\n        getPaymentMethodData: function () {\n            return this.paymentMethodData();\n        },\n\n        /**\n         * Set Google Pay payment method data details.\n         *\n         * @param {?Object} value\n         * @return {void}\n         */\n        setPaymentMethodData: function (value) {\n            this.paymentMethodData(_.isObject(value) ? value : null);\n        },\n\n        /**\n         * Get Google Pay email.\n         *\n         * @return {?string}\n         */\n        getEmail: function () {\n            return this.email();\n        },\n\n        /**\n         * Set Google Pay email.\n         *\n         * @param {?string} value\n         * @return {void}\n         */\n        setEmail: function (value) {\n            this.email(_.isString(value) ? value : null);\n        },\n\n        /**\n         * Get Google Pay shipping address.\n         *\n         * @return {?Object}\n         */\n        getShippingAddress: function () {\n            return shippingAddress();\n        },\n\n        /**\n         * Set Google Pay shipping address.\n         *\n         * @param {?Object} value\n         * @return {void}\n         */\n        setShippingAddress: function (value) {\n            this.shippingAddress(_.isObject(value) ? value : null);\n        },\n\n        /**\n         * Reset data to default.\n         */\n        resetDefaultData: function () {\n            this.setPaymentMethodData(null);\n            this.setEmail(null);\n            this.setShippingAddress(null);\n        }\n    };\n});\n","PayPal_Braintree/js/googlepay/model/parsed-response.js":"define([\n    'underscore',\n    'ko'\n], function (_, ko) {\n    'use strict';\n\n    let nonce = ko.observable(null),\n        isNetworkTokenized = ko.observable(false),\n        bin = ko.observable(null);\n\n    return {\n        nonce: nonce,\n        isNetworkTokenized: isNetworkTokenized,\n        bin: bin,\n\n        /**\n         * Get the payment nonce.\n         *\n         * @return {?string}\n         */\n        getNonce: function () {\n            return this.nonce();\n        },\n\n        /**\n         * Set the payment nonce.\n         *\n         * @param {?string} value\n         * @return {void}\n         */\n        setNonce: function (value) {\n            this.nonce(_.isString(value) ? value : null);\n        },\n\n        /**\n         * Get is network tokenized property for used card.\n         *\n         * @return {boolean}\n         */\n        getIsNetworkTokenized: function () {\n            return this.isNetworkTokenized();\n        },\n\n        /**\n         * Set is network tokenized property for used card.\n         *\n         * @param {boolean} value\n         * @return {void}\n         */\n        setIsNetworkTokenized: function (value) {\n            this.isNetworkTokenized(_.isBoolean(value) ? value : false);\n        },\n\n        /**\n         * Get card bin.\n         *\n         * @return {?string}\n         */\n        getBin: function () {\n            return this.bin();\n        },\n\n        /**\n         * Set the card bin.\n         *\n         * @param {?string} value\n         * @return {void}\n         */\n        setBin: function (value) {\n            this.bin(_.isString(value) ? value : null);\n        },\n\n        /**\n         * Reset data to default.\n         */\n        resetDefaultData: function () {\n            this.setNonce(null);\n            this.setIsNetworkTokenized(false);\n            this.setBin(null);\n        }\n    };\n});\n","PayPal_Braintree/js/messages/paylater.js":"define([\n    'uiComponent',\n    'jquery',\n    'Magento_Customer/js/customer-data',\n    'PayPal_Braintree/js/helper/add-script'\n], function (Component, $, customerData, addScript) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            code: 'paypal_braintree_messages',\n            messageElement: ''\n        },\n\n        /**\n         * Initialize message element\n         *\n         * @param config\n         */\n        initialize: function (config) {\n            this._super(config);\n\n            // Return early if we are running in the minicart.\n            if (config.parentName === 'minicart_content.extra_info') {\n                return;\n            }\n\n            this.messageElement = config.messageElement;\n\n            this.renderMessage(config);\n\n            if (config.placement === 'product') {\n                // Attach a listener to the price update event so that we are always using the correct values.\n                this.attachPriceUpdateSubscription(config);\n            } else if (config.placement === 'cart') {\n                this.attachCartUpdateSubscription(config);\n            }\n        },\n\n        /**\n         * Is cart active\n         *\n         * @returns {*|boolean}\n         */\n        hasCartContent: function () {\n            const cart = customerData.get('cart')();\n\n            return cart && cart.summary_count > 0;\n        },\n\n        /**\n         * Because the PayPal SDK isn't loaded synchronously we may need to attach a listener to wait\n         * until it's loaded.\n         */\n        attachPayLaterMessageSubscription: function (config, amount) {\n            if (!this.getMessageConfig(config, amount)) {\n                return;\n            }\n\n            const clientToken = config.clientToken || window.checkout.payPalBraintreeClientToken,\n                currency = config.currency || window.checkout.paypalBraintreeCurrencyCode;\n\n            return addScript(clientToken, currency, this.code, config.placement)\n                .then(() => this.renderMessage(config, amount));\n        },\n\n        /**\n         * On PDP the price can change on configurable so we need to listen for those changes\n         * and re-render the button with the updated price.\n         */\n        attachPriceUpdateSubscription: function (config) {\n            $(document).on('priceUpdated', (event, displayPrices) => {\n                this.renderMessage(config, displayPrices.finalPrice.amount);\n            });\n        },\n\n        /**\n         * Cart update event\n         *\n         * @param config\n         */\n        attachCartUpdateSubscription: function (config) {\n            const cartData = customerData.get('cart-data');\n\n            cartData.subscribe(({totals}) => {\n                if (totals) {\n                    this.renderMessage(config, totals.grand_total);\n                }\n            });\n        },\n\n        /**\n         * Get message config\n         *\n         * @returns {{amount: string, currency: string, style: *, placement: string}} | Boolean.\n         */\n        getMessageConfig: function (config, amount) {\n            const configuration = config || window?.checkoutConfig?.payment?.braintree || {};\n\n            if (!configuration.messageStyles) {\n                return false;\n            }\n\n            return {\n                amount: amount || configuration.amount,\n                currency: configuration.currency,\n                pageType: configuration.placement,\n                style: configuration.messageStyles\n            };\n        },\n\n        /**\n         * Render the message using the SDK provided message.\n         */\n        renderMessage: function (config, amount) {\n            // Check that the messages component is available before calling it.\n            if (window[`paypal_${this.code}`]?.Messages) {\n                const messageConfig = this.getMessageConfig(config, amount);\n                let message;\n\n                if (!messageConfig) {\n                    return;\n                }\n\n                message = window[`paypal_${this.code}`].Messages(messageConfig);\n\n                message.render(this.messageElement);\n            } else {\n                // Otherwise attach a wait for the component to load.\n                this.attachPayLaterMessageSubscription(config, amount);\n            }\n        }\n    });\n});\n","PayPal_Braintree/js/messages/mini-cart.js":"define([\n    'PayPal_Braintree/js/messages/paylater',\n    'Magento_Customer/js/customer-data'\n], function (Component, customerData) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            messageElement: '#paypal-braintree-mini-cart-paylater-container-message',\n            template: 'PayPal_Braintree/messages/mini-cart'\n        },\n\n        /**\n         * Initialize pay later messaging\n         *\n         * @param config\n         */\n        initialize: function (config) {\n            config.currency = window.checkout?.paypalBraintreeCurrencyCode;\n            config.messageStyles = window.checkout?.payPalBraintreePaylaterMessageConfig;\n\n            this._super(config);\n\n            this.attachCartUpdateSubscription(config);\n        },\n\n        /**\n         * Get amount\n         *\n         * @returns {*}\n         */\n        getAmount: function () {\n            const cart = customerData.get('cart')();\n\n            return cart.subtotalAmount;\n        },\n\n        /**\n         * Cart update event (subscription)\n         *\n         * @param config\n         */\n        attachCartUpdateSubscription: function (config) {\n            const cart = customerData.get('cart');\n\n            cart.subscribe(({subtotalAmount}) => {\n                if (subtotalAmount) {\n                    this.renderMessage(config, subtotalAmount);\n                }\n            });\n        },\n\n        /**\n         * Render pay later message\n         */\n        renderMessage: function () {\n            const element = document.querySelector(this.messageElement),\n                amount = this.getAmount();\n\n            if (!this.hasCartContent() || !element) {\n                return;\n            }\n\n            // Check that the messages component is available before calling it.\n            if (window[`paypal_${this.code}`]?.Messages) {\n                const messageConfig = this.getMessageConfig(this, amount);\n                let message;\n\n                if (!messageConfig) {\n                    return;\n                }\n\n                message = window[`paypal_${this.code}`].Messages(messageConfig);\n\n                message.render(this.messageElement);\n            } else {\n                // Otherwise attach a wait for the component to load.\n                this.attachPayLaterMessageSubscription(this, amount);\n            }\n        }\n    });\n});\n","PayPal_Braintree/js/paypal/button.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine(\n    [\n        'uiComponent',\n        'underscore',\n        'jquery',\n        'Magento_Customer/js/customer-data',\n        'mage/translate',\n        'braintree',\n        'braintreeCheckoutPayPalAdapter',\n        'braintreeDataCollector',\n        'braintreePayPalCheckout',\n        'PayPal_Braintree/js/actions/create-payment',\n        'PayPal_Braintree/js/actions/get-shipping-methods',\n        'PayPal_Braintree/js/actions/set-shipping-information',\n        'PayPal_Braintree/js/actions/update-totals',\n        'PayPal_Braintree/js/helper/check-guest-checkout',\n        'PayPal_Braintree/js/helper/is-cart-virtual',\n        'PayPal_Braintree/js/helper/addresses/map-paypal-payment-information',\n        'PayPal_Braintree/js/helper/addresses/map-paypal-shipping-information',\n        'PayPal_Braintree/js/helper/submit-review-page',\n        'PayPal_Braintree/js/helper/remove-non-digit-characters',\n        'PayPal_Braintree/js/helper/replace-single-quote-character',\n        'PayPal_Braintree/js/model/region-data',\n        'domReady!'\n    ],\n    function (\n        Component,\n        _,\n        $,\n        customerData,\n        $t,\n        braintree,\n        Braintree,\n        dataCollector,\n        paypalCheckout,\n        createPayment,\n        getShippingMethods,\n        setShippingInformation,\n        updateTotals,\n        checkGuestCheckout,\n        isCartVirtual,\n        mapPayPalPaymentInformation,\n        mapPayPalShippingInformation,\n        submitReviewPage,\n        removeNonDigitCharacters,\n        replaceSingleQuoteCharacter,\n        regionDataModel\n    ) {\n        'use strict';\n\n        return Component.extend({\n            events: {\n                onClick: null,\n                onCancel: null,\n                onError: null\n            },\n            currencyCode: null,\n            amount: 0,\n            quoteId: 0,\n            storeCode: 'default',\n            shippingAddress: {},\n            shippingMethods: {},\n            shippingMethodCode: null,\n            buttonIds: [],\n            skipReview: null,\n            buttonConfig: {},\n            pageType: null,\n\n            /**\n             * Initialize button\n             *\n             * @param config\n             * @param element\n             */\n            initialize: function (config, element) {\n                this._super(config);\n\n                $(document).on('priceUpdated', (event, displayPrices) => {\n                    $('.action-braintree-paypal-message[data-pp-type=\"product\"]')\n                        .attr('data-pp-amount', displayPrices.finalPrice.amount);\n                });\n\n                this.buttonConfig = config.buttonConfig;\n                this.buttonIds = config.buttonIds;\n                this.loadSDK(this.buttonConfig);\n\n                window.addEventListener('hashchange', function () {\n                    const step = window.location.hash.replace('#', '');\n\n                    if (step === 'shipping') {\n                        Braintree.getPayPalInstance()?.teardown(function () {\n                            this.loadSDK(this.buttonConfig);\n                        }.bind(this));\n                    }\n\n                }.bind(this));\n\n                window.addEventListener('paypal:reinit-express', function () {\n                    this.loadSDK(this.buttonConfig);\n                }.bind(this));\n\n                const cart = customerData.get('cart');\n\n                cart.subscribe(({ braintree_masked_id }) => {\n                    this.setQuoteId(braintree_masked_id);\n                });\n\n                if (cart()?.braintree_masked_id) {\n                    this.setQuoteId(cart().braintree_masked_id);\n                }\n            },\n\n            /**\n             * Set and get quote id\n             */\n            setQuoteId: function (value) {\n                this.quoteId = value;\n            },\n            getQuoteId: function () {\n                return this.quoteId;\n            },\n\n            /**\n             * Set and get success redirection url\n             */\n            setActionSuccess: function (value) {\n                this.actionSuccess = value;\n            },\n            getActionSuccess: function () {\n                return this.actionSuccess;\n            },\n\n            /**\n             * Set and get success redirection url\n             */\n            setSkipReview: function (value) {\n                this.skipReview = value;\n            },\n            getSkipReview: function () {\n                return this.skipReview;\n            },\n\n            /**\n             * Set and get amount\n             */\n            setAmount: function (value) {\n                this.amount = parseFloat(value).toFixed(2);\n            },\n            getAmount: function () {\n                return parseFloat(this.amount).toFixed(2);\n            },\n\n            /**\n             * Set and get store code\n             */\n            setStoreCode: function (value) {\n                this.storeCode = value;\n            },\n            getStoreCode: function () {\n                return this.storeCode;\n            },\n\n            /**\n             * Set and get store code\n             */\n            setCurrencyCode: function (value) {\n                this.currencyCode = value;\n            },\n            getCurrencyCode: function () {\n                return this.currencyCode;\n            },\n\n            /**\n             * Load Braintree PayPal SDK\n             *\n             * @param buttonConfig\n             */\n            loadSDK: function (buttonConfig) {\n                // Load SDK\n                braintree.create({\n                    authorization: buttonConfig.clientToken\n                }, function (clientErr, clientInstance) {\n                    if (clientErr) {\n                        console.error('paypalCheckout error', clientErr);\n                        let error = 'PayPal Checkout could not be initialized. Please contact the store owner.';\n\n                        return Braintree.showError(error);\n                    }\n                    dataCollector.create({\n                        client: clientInstance,\n                        paypal: true\n                    }, function (err) {\n                        if (err) {\n                            return console.log(err);\n                        }\n                    });\n                    paypalCheckout.create({\n                        client: clientInstance\n                    }, function (err, paypalCheckoutInstance) {\n                        if (typeof paypal !== 'undefined' ) {\n                            this.renderPayPalButtons(paypalCheckoutInstance);\n                        } else {\n                            let configSDK = {\n                                    components: 'buttons,funding-eligibility',\n                                    'enable-funding': this.isCreditActive(buttonConfig) ? 'credit' : 'paylater',\n                                    currency: buttonConfig.currency,\n                                    commit: buttonConfig.skipOrderReviewStep && !isCartVirtual(),\n                                },\n                                buyerCountry = this.getMerchantCountry(buttonConfig);\n\n                            if (buttonConfig.environment === 'sandbox'\n                                && (buyerCountry !== '' || buyerCountry !== 'undefined')) {\n                                configSDK['buyer-country'] = buyerCountry;\n                            }\n\n                            if (buttonConfig.pageType) {\n                                configSDK.dataAttributes = {\n                                    'page-type': buttonConfig.pageType\n                                }\n                            }\n\n                            paypalCheckoutInstance.loadPayPalSDK(configSDK, function () {\n                                this.renderPayPalButtons(paypalCheckoutInstance);\n                            }.bind(this));\n                        }\n                    }.bind(this));\n                }.bind(this));\n            },\n\n            /**\n             * Is Credit enabled\n             *\n             * @param buttonConfig\n             * @returns {boolean}\n             */\n            isCreditActive: function (buttonConfig) {\n                return buttonConfig.isCreditActive;\n            },\n\n            /**\n             * Get merchant country\n             *\n             * @param buttonConfig\n             * @returns {string}\n             */\n            getMerchantCountry: function (buttonConfig) {\n                return buttonConfig.merchantCountry;\n            },\n\n            /**\n             * Render PayPal buttons\n             *\n             * @param paypalCheckoutInstance\n             */\n            renderPayPalButtons: function (paypalCheckoutInstance) {\n                this.payPalButton(paypalCheckoutInstance);\n            },\n\n            /**\n             * @param paypalCheckoutInstance\n             */\n            payPalButton: function (paypalCheckoutInstance) {\n                let self = this;\n                $(this.buttonIds.join(',')).each(function (index, element) {\n                    $(element).html('');\n\n                    let currentElement = $(element),\n                        style = {\n                            label: currentElement.data('label'),\n                            color: currentElement.data('color'),\n                            shape: currentElement.data('shape')\n                        };\n\n                    if (currentElement.data('fundingicons')) {\n                        style.fundingicons = currentElement.data('fundingicons');\n                    }\n\n                    // set values\n                    self.setCurrencyCode(currentElement.data('currency'));\n                    self.setAmount(currentElement.data('amount'));\n                    self.setStoreCode(currentElement.data('storecode'));\n                    self.setActionSuccess(currentElement.data('actionsuccess'));\n\n                    self.setSkipReview(currentElement.data('skiporderreviewstep'));\n\n                    // Render\n                    const fundingSource = currentElement.data('funding'),\n                        config = {\n                            fundingSource,\n                            style: style,\n                            message: Braintree.getMessage(\n                                fundingSource,\n                                self.getAmount(),\n                                self.buttonConfig.pageType\n                            ),\n\n                            createOrder: () => self.createOrder(paypalCheckoutInstance, currentElement),\n\n                            validate: function (actions) {\n                                let cart = customerData.get('cart'),\n                                    customer = customerData.get('customer'),\n                                    declinePayment = false,\n                                    isGuestCheckoutAllowed;\n\n                                isGuestCheckoutAllowed = cart().isGuestCheckoutAllowed;\n                                declinePayment = !customer().firstname && !isGuestCheckoutAllowed\n                                    && typeof isGuestCheckoutAllowed !== 'undefined';\n\n                                if (declinePayment) {\n                                    actions.disable();\n                                }\n                            },\n\n                            onCancel: function () {\n                                $('#maincontent').trigger('processStop');\n                            },\n\n                            onError: function (errorData) {\n                                console.error('paypalCheckout button render error', errorData);\n                                $('#maincontent').trigger('processStop');\n                            },\n\n                            onClick: self.onClick.bind(self),\n\n                            onApprove: function (approveData) {\n                                return paypalCheckoutInstance.tokenizePayment(approveData, function (err, payload) {\n                                    if (!self.getSkipReview() || isCartVirtual()) {\n                                        payload.details.shippingAddress = self.getShippingAddressData(payload);\n                                        payload.details.billingAddress = self.getBillingAddressData(payload, currentElement);\n\n                                        return submitReviewPage(payload, currentElement, 'paypal');\n                                    }\n\n                                    const shippingMethod = self.shippingMethods[self.shippingMethodCode];\n                                    const shippingInformation = mapPayPalShippingInformation(payload, shippingMethod);\n                                    const paymentInformation = mapPayPalPaymentInformation(payload, currentElement.data('requiredbillingaddress'));\n\n                                    return setShippingInformation(shippingInformation, self.getStoreCode(), self.getQuoteId())\n                                        .then(() => createPayment(paymentInformation, self.getStoreCode(), self.getQuoteId()))\n                                        .then(() => document.location = self.getActionSuccess())\n                                        .catch(function (error) {\n                                            alert(error);\n                                        });\n                                });\n                            }\n                        };\n\n                        if (self.getSkipReview()) {\n                            config.onShippingChange = async function (data) {\n                                // Create a payload to get estimated shipping methods\n                                let payload = {\n                                    address: {\n                                        city: data.shipping_address.city,\n                                        region: data.shipping_address.state,\n                                        country_id: data.shipping_address.country_code,\n                                        postcode: data.shipping_address.postal_code,\n                                        save_in_address_book: 0\n                                    }\n                                };\n\n                                this.shippingAddress = payload.address;\n\n                                // POST to endpoint for shipping methods.\n                                const result = await getShippingMethods(\n                                    payload,\n                                    self.getStoreCode(),\n                                    self.getQuoteId()\n                                );\n\n                                // Stop if no shipping methods.\n                                let virtualFlag = false;\n                                if (result.length === 0) {\n                                    let productItems = customerData.get('cart')().items;\n                                    _.each(productItems,\n                                        function (item) {\n                                            if (item.is_virtual || item.product_type === 'bundle') {\n                                                virtualFlag = true;\n                                            } else {\n                                                virtualFlag = false;\n                                            }\n                                        }\n                                    );\n                                    if (!virtualFlag) {\n                                        alert($t(\"There are no shipping methods available for you right now. Please try again or use an alternative payment method.\"));\n                                        return false;\n                                    }\n                                }\n\n                                let shippingMethods = [];\n                                // Format shipping methods array.\n                                for (let i = 0; i < result.length; i++) {\n                                    if (typeof result[i].method_code !== 'string') {\n                                        continue;\n                                    }\n\n                                    let selected = false;\n                                    if (!data.selected_shipping_option) {\n                                        if (i === 0) {\n                                            selected = true;\n                                            self.shippingMethodCode = result[i].method_code;\n                                        }\n                                    } else {\n                                        if (data.selected_shipping_option.id === result[i].method_code) {\n                                            selected = true;\n                                            self.shippingMethodCode = result[i].method_code;\n                                        }\n                                    }\n\n                                    // get shipping type\n                                    let shippingType = 'SHIPPING';\n                                    if (result[i].method_code === 'pickup') {\n                                        shippingType = 'PICKUP';\n                                    }\n\n                                    let method = {\n                                        id: result[i].method_code,\n                                        type: shippingType,\n                                        label: result[i].method_title,\n                                        selected: selected,\n                                        amount: {\n                                            value: parseFloat(result[i].price_excl_tax).toFixed(2),\n                                            currency: self.getCurrencyCode()\n                                        },\n                                    };\n\n                                    // Add method object to array.\n                                    shippingMethods.push(method);\n\n                                    self.shippingMethods[result[i].method_code] = result[i];\n                                }\n\n                                // Create payload to get totals\n                                let shippingInformationPayload = {\n                                    \"addressInformation\": {\n                                        \"shipping_address\": {\n                                            \"countryId\": this.shippingAddress.country_id,\n                                            \"region\": this.shippingAddress.region,\n                                            \"regionId\": regionDataModel.getRegionIdByCode(this.shippingAddress.country_id, this.shippingAddress.region),\n                                            \"postcode\": this.shippingAddress.postcode\n                                        },\n                                        \"shipping_method_code\": virtualFlag ? null : self.shippingMethods[self.shippingMethodCode].method_code,\n                                        \"shipping_carrier_code\": virtualFlag ? null : self.shippingMethods[self.shippingMethodCode].carrier_code\n                                    }\n                                };\n\n                                // Set shipping information to the quote\n                                await setShippingInformation(shippingInformationPayload, self.getStoreCode(), self.getQuoteId());\n\n                                const totalsPayload = {\n                                    addressInformation: {\n                                        address: shippingInformationPayload.addressInformation.shipping_address,\n                                        \"shipping_method_code\": shippingInformationPayload.addressInformation.shipping_method_code,\n                                        \"shipping_carrier_code\": shippingInformationPayload.addressInformation.shipping_carrier_code\n                                    }\n                                }\n\n                                // POST to endpoint to get totals, using 1st shipping method\n                                const totals = await updateTotals(totalsPayload, self.getStoreCode(), self.getQuoteId());\n\n                                // In rare cases the estimated shipping value doesn't match the true value when added\n                                // to the quote due to rounding within Magento. Update the shipping price of the\n                                // selected method to be that as provided by the totals information as this is correct.\n                                const shippingIndex = shippingMethods.findIndex((shippingMethod) => {\n                                    return shippingMethod.id === shippingInformationPayload.addressInformation.shipping_method_code;\n                                });\n                                shippingMethods[shippingIndex].amount.value = parseFloat(totals.shipping_amount).toFixed(2);\n\n                                // Set total\n                                self.setAmount(totals.base_grand_total);\n\n                                // update payments to PayPal\n                                return paypalCheckoutInstance.updatePayment({\n                                    paymentId: data.paymentId,\n                                    amount: self.getAmount(),\n                                    currency: self.getCurrencyCode(),\n                                    shippingOptions: shippingMethods\n                                });\n                            };\n                        }\n\n                    const button = window.paypal.Buttons(config);\n\n                    if (!button.isEligible()) {\n                        console.log('PayPal button is not elligible');\n                        currentElement.parent().remove();\n                        return;\n                    }\n                    if (button.isEligible() && $('#' + currentElement.attr('id')).length) {\n                        button.render('#' + currentElement.attr('id'));\n                    }\n                });\n            },\n\n            createOrder: function (paypalCheckoutInstance, currentElement) {\n                return paypalCheckoutInstance.createPayment({\n                    amount: currentElement.data('amount'),\n                    locale: currentElement.data('locale'),\n                    currency: currentElement.data('currency'),\n                    flow: 'checkout',\n                    enableShippingAddress: true,\n                    displayName: currentElement.data('displayname'),\n                    shippingOptions: []\n                });\n            },\n\n            onClick: function (data, actions) {\n                if (!checkGuestCheckout()) {\n                    return false;\n                }\n\n                return true;\n            },\n\n            /**\n             * Get the shipping address from the payment data model which should already be set by the calling script.\n             *\n             * @return {?Object}\n             */\n            getShippingAddressData: function (payload) {\n                let accountFirstName = replaceSingleQuoteCharacter(payload.details.firstName),\n                    accountLastName = replaceSingleQuoteCharacter(payload.details.lastName),\n                    accountEmail = replaceSingleQuoteCharacter(payload.details.email),\n                    recipientFirstName = accountFirstName,\n                    recipientLastName = accountLastName,\n                    recipientName = null,\n                    address = payload.details.shippingAddress,\n                    phone = _.get(payload, ['details', 'phone'], '');\n\n                    // Map the shipping address correctly\n                    if (!_.isUndefined(address.recipientName) && _.isString(address.recipientName)) {\n                        /*\n                            * Trim leading/ending spaces before splitting,\n                            * filter to remove array keys with empty values\n                            * & set to variable.\n                            */\n                        recipientName = address.recipientName.trim().split(' ').filter(n => n);\n                    }\n\n                    /*\n                        * If the recipientName is not null, and it is an array with\n                        * first/last name, use it. Otherwise, keep the default billing first/last name.\n                        * This is to avoid cases of old accounts where spaces were allowed to first or\n                        * last name in PayPal and the result was an array with empty fields\n                        * resulting in empty names in the system.\n                        */\n                    if (!_.isNull(recipientName) && !_.isUndefined(recipientName[1])) {\n                        recipientFirstName = replaceSingleQuoteCharacter(recipientName[0]);\n                        recipientLastName = replaceSingleQuoteCharacter(recipientName[1]);\n                    }\n\n                return {\n                    streetAddress: typeof address.line2 !== 'undefined' && _.isString(address.line2)\n                        ? replaceSingleQuoteCharacter(address.line1)\n                                + ' ' + replaceSingleQuoteCharacter(address.line2)\n                        : replaceSingleQuoteCharacter(address.line1),\n                    locality: replaceSingleQuoteCharacter(address.city),\n                    postalCode: address.postalCode,\n                    countryCodeAlpha2: address.countryCode,\n                    email: accountEmail,\n                    recipientFirstName: recipientFirstName,\n                    recipientLastName: recipientLastName,\n                    telephone: removeNonDigitCharacters(phone),\n                    region: typeof address.state !== 'undefined'\n                        ? replaceSingleQuoteCharacter(address.state)\n                        : ''\n                };\n            },\n\n            /**\n             * Get the billing address from the payment data model which should already be set by the calling script.\n             *\n             * @return {?Object}\n             */\n            getBillingAddressData: function (payload, currentElement) {\n                // Map the billing address correctly\n                const isRequiredBillingAddress = currentElement.data('requiredbillingaddress');\n\n                if (isRequiredBillingAddress\n                            && typeof payload.details.billingAddress !== 'undefined') {\n\n                    if (!payload.details?.billingAddress?.streetAddress) {\n                        return payload.details.shippingAddress;\n                    }\n                    const billingAddress = payload.details.billingAddress,\n                        phone = _.get(payload, ['details', 'phone'], '');\n\n                    return {\n                        streetAddress: typeof billingAddress.line2 !== 'undefined'\n                                && _.isString(billingAddress.line2)\n                            ? replaceSingleQuoteCharacter(billingAddress.line1)\n                                    + ' ' + replaceSingleQuoteCharacter(billingAddress.line2)\n                            : replaceSingleQuoteCharacter(billingAddress.line1),\n                        locality: replaceSingleQuoteCharacter(billingAddress.city),\n                        postalCode: billingAddress.postalCode,\n                        countryCodeAlpha2: billingAddress.countryCode,\n                        telephone: removeNonDigitCharacters(phone),\n                        region: typeof billingAddress.state !== 'undefined'\n                            ? replaceSingleQuoteCharacter(billingAddress.state)\n                            : ''\n                    };\n                }\n\n            },\n        });\n    }\n);\n","PayPal_Braintree/js/paypal/form-builder.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine(\n    [\n        'jquery',\n        'underscore',\n        'mage/template'\n    ],\n    function ($, _, mageTemplate) {\n        'use strict';\n\n        return {\n\n            /**\n             * @param {Object} formData\n             * @returns {*|jQuery}\n             */\n            build: function (formData) {\n                var formTmpl = mageTemplate('<form action=\"<%= data.action %>\"' +\n                    ' method=\"POST\" hidden enctype=\"application/x-www-form-urlencoded\">' +\n                        '<% _.each(data.fields, function(val, key){ %>' +\n                            '<input value=\\'<%= val %>\\' name=\"<%= key %>\" type=\"hidden\">' +\n                        '<% }); %>' +\n                    '</form>');\n\n                return $(formTmpl({\n                    data: {\n                        action: formData.action,\n                        fields: formData.fields\n                    }\n                })).appendTo($('[data-container=\"body\"]'));\n            }\n        };\n    }\n);\n","PayPal_Braintree/js/paypal/product-page.js":"define([\n    'jquery',\n    'Magento_Customer/js/customer-data',\n    'PayPal_Braintree/js/helper/check-guest-checkout',\n    'PayPal_Braintree/js/paypal/button',\n], function ($, customerData, checkGuestCheckout, button) {\n    'use strict';\n\n    return button.extend({\n        defaults: {\n            branding: true,\n            label: 'buynow',\n            productFormSelector: '#product_addtocart_form',\n            productAddedToCart: false,\n            addToCartPromise: null,\n        },\n\n        createOrder: function (paypalCheckoutInstance, currentElement) {\n            return this.addToCartPromise.then((cartData) => {\n                if (!checkGuestCheckout()) {\n                    return false;\n                }\n\n                return paypalCheckoutInstance.createPayment({\n                    amount: cartData.subtotalAmount,\n                    locale: currentElement.data('locale'),\n                    currency: currentElement.data('currency'),\n                    flow: 'checkout',\n                    enableShippingAddress: true,\n                    displayName: currentElement.data('displayname'),\n                    shippingOptions: []\n                });\n            });\n        },\n\n        /**\n         * On click add the current product to the quote and proceed with PayPal checkout.\n         */\n        onClick: function (data, actions) {\n            const isAllowed = this._super();\n\n            if (!isAllowed) {\n                return actions.reject();\n            }\n\n            let $form = $(this.productFormSelector);\n\n            if (!this.productAddedToCart) {\n                // Attach cart subscription to listen for the successful add to cart.\n                const cart = customerData.get('cart');\n\n                $form.trigger('submit');\n\n                if ($form.validation('isValid')) {\n                    $('body').trigger('processStart');\n\n                    this.addToCartPromise = new Promise((resolve) => {\n                        cart.subscribe((cartData) => {\n                            this.setQuoteId(cartData.braintree_masked_id);\n                            this.productAddedToCart = true;\n                            $('body').trigger('processStop');\n                            actions.resolve();\n                            resolve(cartData);\n                        });\n                    });\n\n                    return;\n                }\n\n                return actions.reject();\n            }\n\n            return actions.resolve();\n        }\n    });\n});\n","PayPal_Braintree/js/paypal/credit/calculator.js":"define([\n    'underscore',\n    'uiComponent'\n], function (_, Component) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'PayPal_Braintree/credit/calculator',\n            displaySummary: true, // \"From X per month\"\n            displayInterestDetails: false, // Display the more in-depth summary of interest rates\n            instalmentsFrom: 0,\n            currentInstalment: {\n                term: 0,\n                monthlyPayment: 0,\n                apr: 0,\n                cost: 0,\n                costIncInterest: 0\n            },\n            endpoint: null,\n            instalments: [],\n            visible: false,\n            merchantName: ''\n        },\n\n        /**\n         * initialize and observe the default variables\n         *\n         * @returns {*}\n         */\n        initObservable: function () {\n            this._super();\n            if (this.instalments.length > 0) {\n                this.currentInstalment = this.instalments[0];\n                this.instalmentsFrom = this.instalments[this.instalments.length - 1].monthlyPayment;\n                this.visible = true;\n            } else {\n                this.loadInstalments();\n            }\n\n            this.observe(['instalments', 'currentInstalment', 'instalmentsFrom', 'visible']);\n            return this;\n        },\n\n        /**\n         * check current instalment\n         *\n         * @param term\n         * @returns {boolean}\n         */\n        isCurrentInstalment: function (term) {\n            return this.currentInstalment().term === term;\n        },\n\n        /**\n         * set current instalment\n         *\n         * @param instalment\n         */\n        setCurrentInstalment: function (instalment) {\n            this.currentInstalment(instalment);\n        },\n\n        /**\n         * load instalments\n         *\n         * @returns {boolean}\n         */\n        loadInstalments: function () {\n            if (!this.endpoint) {\n                return false;\n            }\n\n            let self = this;\n\n            require(['Magento_Checkout/js/model/quote', 'jquery'], function (quote, $) {\n                if (typeof quote.totals()['base_grand_total'] === 'undefined') {\n                    return false;\n                }\n\n                $.getJSON(self.endpoint, {amount: quote.totals()['base_grand_total']}, function (response) {\n                    self.instalments(response);\n                    self.setCurrentInstalment(response[0]);\n                    self.visible(true);\n                });\n            });\n        }\n    });\n});\n","PayPal_Braintree/js/model/vault-enabler.js":"define([\n    'Magento_Vault/js/view/payment/vault-enabler'\n], function (VaultEnabler) {\n    'use strict';\n\n    return {\n        // Initialise a single VaultEnabler instance.\n        vaultEnabler: new VaultEnabler(),\n\n        /**\n         * @returns {VaultEnabler}\n         */\n        getVaultEnabler() {\n            return this.vaultEnabler;\n        },\n\n        /**\n         * Set the payment code against the vault enabler.\n         *\n         * @param {string} code\n         */\n        setPaymentCode(code) {\n            this.vaultEnabler.setPaymentCode(code);\n        },\n\n        /**\n         * Returns the vault enabled state.\n         *\n         * @returns {boolean}\n         */\n        isVaultEnabled() {\n            return this.vaultEnabler.isVaultEnabled();\n        },\n\n        /**\n         * Returns the active payment token enabler state.\n         *\n         * @returns {boolean}\n         */\n        isActivePaymentTokenEnabler() {\n            return this.vaultEnabler.isActivePaymentTokenEnabler();\n        },\n\n        /**\n         * @param {Object} data\n         */\n        visitAdditionalData(data) {\n            this.vaultEnabler.visitAdditionalData(data);\n        }\n    };\n});\n","PayPal_Braintree/js/model/step-navigator-mixin.js":"define([\n    'mage/utils/wrapper'\n], function (wrapper) {\n    'use strict';\n\n    let mixin = {\n        handleHash: function (originalFn) {\n            var hashString = window.location.hash.replace('#', '');\n\n            if (hashString.indexOf('venmo') > -1) {\n                return false;\n            }\n\n            return originalFn();\n        }\n    };\n\n    return function (target) {\n        return wrapper.extend(target, mixin);\n    };\n});\n","PayPal_Braintree/js/model/full-screen-loader.js":"define([\n    'jquery',\n    'rjsResolver'\n], function ($, resolver) {\n    'use strict';\n\n    /**\n     * New full screen loader (spinner) implementation with configurable container.\n     * It can be used across website areas including checkout.\n     */\n    return {\n        container: 'body',\n\n        /**\n         * Set the container element with its ID to replace default container.\n         *\n         * Only allow to set elements by ID (as expected to be unique.\n         * If the container has already been changed, do not allow changing again as this be set once per component.\n         *\n         * @param {string} value\n         */\n        setContainer: function (value) {\n            if (this.container !== 'body' || !value.startsWith('#')) {\n                return;\n            }\n\n            this.container = value;\n        },\n\n        /**\n         * Get the container element.\n         *\n         * @return {string}\n         */\n        getContainer: function () {\n            return this.container;\n        },\n\n        /**\n         * Start full page loader action\n         */\n        startLoader: function () {\n            $(this.getContainer()).trigger('processStart');\n        },\n\n        /**\n         * Stop full page loader action\n         *\n         * @param {Boolean} [forceStop]\n         */\n        stopLoader: function (forceStop) {\n            let $elem = $(this.getContainer()),\n                stop = $elem.trigger.bind($elem, 'processStop'); //eslint-disable-line jquery-no-bind-unbind\n\n            forceStop ? stop() : resolver(stop);\n        }\n    };\n});\n","PayPal_Braintree/js/model/region-data.js":"define([\n    'knockout',\n    'PayPal_Braintree/js/actions/get-country-directory',\n], function (ko, getCountryDirectory) {\n    'use strict';\n\n    const _countryDirectory = ko.observable({});\n    const _countryList = ko.observable({});\n\n    getCountryDirectory().then(({countryDirectory, countryList}) => {\n        _countryDirectory(countryDirectory);\n        _countryList(countryList);\n    });\n\n    return {\n        getCountryDirectory: function () {\n            return _countryDirectory();\n        },\n\n        getCountryList: function () {\n            return _countryList();\n        },\n\n        /**\n         * Get Region ID\n         *\n         * @param countryCode\n         * @param regionName\n         * @returns {number|*|null}\n         */\n        getRegionId: function (countryCode, regionName) {\n            if (typeof regionName !== 'string') {\n                return null;\n            }\n\n            regionName = regionName.toLowerCase().replace(/[^A-Z0-9]/ig, '');\n\n            if (typeof this.getCountryDirectory()[countryCode] !== 'undefined'\n                && typeof this.getCountryDirectory()[countryCode][regionName] !== 'undefined')\n            {\n                return this.getCountryDirectory()[countryCode][regionName];\n            }\n\n            return 0;\n        },\n\n        /**\n         * Get Region ID by region code\n         *\n         * @param countryCode\n         * @param regionCode\n         * @returns {number|*|null}\n         */\n        getRegionIdByCode: function (countryCode, regionCode) {\n            if (typeof regionCode !== 'string') {\n                return null;\n            }\n\n            if (typeof this.getCountryList()[countryCode] !== 'undefined'\n                && typeof this.getCountryList()[countryCode][regionCode] !== 'undefined')\n            {\n                return this.getCountryList()[countryCode][regionCode];\n            }\n\n            return 0;\n        },\n\n    };\n});\n","PayPal_Braintree/js/model/place-order-mixin.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/* eslint-disable max-nested-callbacks */\n\ndefine([\n    'jquery',\n    'mage/utils/wrapper',\n    'Magento_ReCaptchaWebapiUi/js/webapiReCaptchaRegistry'\n], function ($, wrapper, recaptchaRegistry) {\n    'use strict';\n\n    return function (placeOrder) {\n        return wrapper.wrap(placeOrder, function (originalAction, serviceUrl, payload, messageContainer) {\n            var recaptchaDeferred;\n\n            if (recaptchaRegistry.triggers.hasOwnProperty('recaptcha-checkout-braintree')) {\n                //ReCaptcha is present for checkout\n                recaptchaDeferred = $.Deferred();\n                recaptchaRegistry.addListener('recaptcha-checkout-braintree', function (token) {\n                    //Add reCaptcha value to place-order request and resolve deferred with the API call results\n                    payload.xReCaptchaValue = token;\n                    originalAction(serviceUrl, payload, messageContainer).done(function () {\n                        recaptchaDeferred.resolve.apply(recaptchaDeferred, arguments);\n                    }).fail(function () {\n                        recaptchaDeferred.reject.apply(recaptchaDeferred, arguments);\n                    });\n                });\n                //Trigger ReCaptcha validation\n                recaptchaRegistry.triggers['recaptcha-checkout-braintree']();\n\n                if (!recaptchaRegistry._isInvisibleType.hasOwnProperty('recaptcha-checkout-braintree') ||\n                    recaptchaRegistry._isInvisibleType['recaptcha-checkout-braintree'] === false\n                ) {\n                    //remove listener so that place order action is only triggered by the 'Place Order' button\n                    recaptchaRegistry.removeListener('recaptcha-checkout-braintree');\n                }\n                return recaptchaDeferred;\n            }\n\n            //No ReCaptcha, just sending the request\n            return originalAction(serviceUrl, payload, messageContainer);\n        });\n    };\n});\n","PayPal_Braintree/js/view/product-page.js":"define(\n    ['uiComponent'],\n    function (Component) {\n        'use strict';\n\n        return Component.extend({\n\n        });\n    }\n);\n","PayPal_Braintree/js/view/payment/adapter.js":"/**\n * Copyright 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\ndefine([\n    'jquery',\n    'braintree',\n    'braintreeDataCollector',\n    'braintreeHostedFields',\n    'Magento_Checkout/js/model/full-screen-loader',\n    'Magento_Ui/js/model/messageList',\n    'mage/translate'\n], function ($, client, dataCollector, hostedFields, fullScreenLoader, globalMessageList, $t) {\n    'use strict';\n\n    return {\n        apiClient: null,\n        config: {},\n        checkout: null,\n        deviceData: null,\n        clientInstance: null,\n        hostedFieldsInstance: null,\n        paypalInstance: null,\n        googlePaymentInstance: null,\n        code: 'braintree',\n\n        /**\n         * {Object}\n         */\n        events: {\n            onClick: null,\n            onCancel: null,\n            onError: null\n        },\n\n        /**\n         * Get Braintree api client\n         * @returns {Object}\n         */\n        getApiClient: function () {\n            return this.clientInstance;\n        },\n\n        /**\n         * Set configuration\n         * @param {Object} config\n         */\n        setConfig: function (config) {\n            this.config = config;\n        },\n\n        /**\n         * Get payment name\n         * @returns {String}\n         */\n        getCode: function () {\n            if (window.checkoutConfig.payment[this.code]) {\n                return this.code;\n            }\n            return 'braintree_paypal';\n\n        },\n\n        /**\n         * Get client token\n         * @returns {String|*}\n         */\n        getClientToken: function () {\n            return window.checkoutConfig.payment[this.getCode()].clientToken;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getEnvironment: function () {\n            return window.checkoutConfig.payment[this.getCode()].environment;\n        },\n\n        getCurrentCode: function (paypalType = null) {\n            var code = 'braintree_paypal';\n\n            if (paypalType !== 'paypal') {\n                code = code + '_' + paypalType;\n            }\n            return code;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getColor: function (paypalType = null) {\n            return window.checkoutConfig.payment[this.getCurrentCode(paypalType)].style.color;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getShape: function (paypalType = null) {\n            return window.checkoutConfig.payment[this.getCurrentCode(paypalType)].style.shape;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getLabel: function (paypalType = null) {\n            return window.checkoutConfig.payment[this.getCurrentCode(paypalType)].style.label;\n        },\n\n        /**\n         * Get Message\n         *\n         * @param paypalType\n         * @param amount\n         * @param pageType\n         * @returns {{amount, color: (string|*), align: *}|null}\n         */\n        getMessage: function (paypalType = null, amount, pageType) {\n            if (pageType === 'checkout') {\n                if (!window.checkoutConfig?.payment?.[this.getCurrentCode(paypalType)]) {\n                    return null;\n                }\n\n                const messageActive = window.checkoutConfig.payment[this.getCurrentCode(paypalType)].isMessageActive,\n                    messageStyles = window.checkoutConfig.payment[this.getCurrentCode(paypalType)].messageStyles;\n\n                if (!messageActive || !messageStyles) {\n                    return null;\n                }\n\n                return {\n                    align: messageStyles.text_align,\n                    amount,\n                    // Button doesn't support monochrome or greyscale so in either of these cases return black.\n                    color: messageStyles.text_color !== 'black' && messageStyles.text_color !== 'white' ? 'black' : messageStyles.text_color\n                };\n            } else {\n                return null;\n            }\n        },\n\n        /**\n         * @returns {String}\n         */\n        getBranding: function () {\n            return null;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getFundingIcons: function () {\n            return null;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getDisabledFunding: function () {\n            return window.checkoutConfig.payment[this.getCode()].disabledFunding;\n        },\n\n        /**\n         * Show error message\n         *\n         * @param {String} errorMessage\n         */\n        showError: function (errorMessage) {\n            globalMessageList.addErrorMessage({\n                message: errorMessage\n            });\n            fullScreenLoader.stopLoader(true);\n        },\n\n        /**\n         * Disable submit button\n         */\n        disableButton: function () {\n            // stop any previous shown loaders\n            fullScreenLoader.stopLoader(true);\n            fullScreenLoader.startLoader();\n            $('[data-button=\"place\"]').attr('disabled', 'disabled');\n        },\n\n        /**\n         * Enable submit button\n         */\n        enableButton: function () {\n            $('[data-button=\"place\"]').removeAttr('disabled');\n            fullScreenLoader.stopLoader();\n        },\n\n        /**\n         * Has PayPal been init'd already\n         */\n        getPayPalInstance: function () {\n            if (typeof this.config.paypalInstance !== 'undefined' && this.config.paypalInstance) {\n                return this.config.paypalInstance;\n            }\n\n            return null;\n        },\n\n        setPayPalInstance: function (val) {\n            this.config.paypalInstance = val;\n        },\n\n        /**\n         * Has Google Pay been init'd already\n         */\n        getGooglePayInstance: function () {\n            if (typeof this.googlePaymentInstance !== 'undefined' && this.googlePaymentInstance) {\n                return this.googlePaymentInstance;\n            }\n\n            return null;\n        },\n\n        setGooglePayInstance: function (val) {\n            this.googlePaymentInstance = val;\n        },\n\n        /**\n         * Setup Braintree SDK\n         *\n         * @param {Function|null} callback\n         */\n        setup: function (callback = null) {\n            if (!this.getClientToken()) {\n                this.showError($t('Sorry, but something went wrong.'));\n                return;\n            }\n\n            if (this.clientInstance) {\n                if (typeof this.config.onReady === 'function') {\n                    this.config.onDeviceDataReceived(this.deviceData);\n                    this.config.onReady(this);\n                }\n\n                if (typeof callback === 'function') {\n                    callback(this.clientInstance);\n                }\n                return;\n            }\n\n            client.create({\n                authorization: this.getClientToken()\n            }, function (clientErr, clientInstance) {\n                if (clientErr) {\n                    console.error('Braintree Setup Error', clientErr);\n                    return this.showError('Sorry, but something went wrong. Please contact the store owner.');\n                }\n\n                let options = {\n                    client: clientInstance\n                };\n\n                if (typeof this.config.dataCollector === 'object'\n                    && typeof this.config.dataCollector.paypal === 'boolean'\n                ) {\n                    options.paypal = true;\n                }\n\n                this.clientInstance = clientInstance;\n\n                if (typeof this.config.onReady === 'function') {\n                    this.config.onReady(this);\n                }\n\n                dataCollector.create(options, function (err, dataCollectorInstance) {\n                    if (err) {\n                        return console.log(err);\n                    }\n\n                    this.deviceData = dataCollectorInstance.deviceData;\n                    this.config.onDeviceDataReceived(this.deviceData);\n\n                    if (typeof callback === 'function') {\n                        callback(this.clientInstance);\n                    }\n                }.bind(this));\n            }.bind(this));\n        },\n\n        /**\n         * Setup hosted fields instance\n         */\n        setupHostedFields: function () {\n            var self = this;\n\n            if (this.hostedFieldsInstance) {\n                this.hostedFieldsInstance.teardown(function () {\n                    this.hostedFieldsInstance = null;\n                    this.setupHostedFields();\n                }.bind(this));\n                return;\n            }\n\n            hostedFields.create({\n                client: this.clientInstance,\n                fields: this.config.hostedFields,\n                styles: this.config.styles\n            }, function (createErr, hostedFieldsInstance) {\n                if (createErr) {\n                    let error = 'Braintree hosted fields could not be initialized. Please contact the store owner.';\n\n                    self.showError($t(error));\n                    console.error('Braintree hosted fields error', createErr);\n                    return;\n                }\n\n                this.config.onInstanceReady(hostedFieldsInstance);\n                this.hostedFieldsInstance = hostedFieldsInstance;\n            }.bind(this));\n        },\n\n        tokenizeHostedFields: function () {\n            this.hostedFieldsInstance.tokenize({}, function (tokenizeErr, payload) {\n                if (tokenizeErr) {\n                    switch (tokenizeErr.code) {\n                    case 'HOSTED_FIELDS_FIELDS_EMPTY':\n                        // occurs when none of the fields are filled in\n                        console.error('All fields are empty! Please fill out the form.');\n                        break;\n                    case 'HOSTED_FIELDS_FIELDS_INVALID':\n                        // occurs when certain fields do not pass client side validation\n                        console.error('Some fields are invalid:', tokenizeErr.details.invalidFieldKeys);\n                        break;\n                    case 'HOSTED_FIELDS_TOKENIZATION_FAIL_ON_DUPLICATE':\n                        // occurs when:\n                        //   * the client token used for client authorization was generated\n                        //     with a customer ID and the fail on duplicate payment method\n                        //     option is set to true\n                        //   * the card being tokenized has previously been vaulted (with any customer)\n                        // eslint-disable-next-line\n                            // See: https://developers.braintreepayments.com/reference/request/client-token/generate/#options.fail_on_duplicate_payment_method\n                        console.error('This payment method already exists in your vault.');\n                        break;\n                    case 'HOSTED_FIELDS_TOKENIZATION_CVV_VERIFICATION_FAILED':\n                        // occurs when:\n                        //   * the client token used for client authorization was generated\n                        //     with a customer ID and the verify card option is set to true\n                        //     and you have credit card verification turned on in the Braintree\n                        //     control panel\n                        //   * the cvv does not pass verfication\n                        //   (developers.braintreepayments.com/reference/general/testing/#avs-and-cvv/cid-responses)\n                        // eslint-disable-next-line\n                            // See: developers.braintreepayments.com/reference/request/client-token/generate/#options.verify_card\n                        console.error('CVV did not pass verification');\n                        break;\n                    case 'HOSTED_FIELDS_FAILED_TOKENIZATION':\n                        // occurs for any other tokenization error on the server\n                        console.error('Tokenization failed server side. Is the card valid?');\n                        break;\n                    case 'HOSTED_FIELDS_TOKENIZATION_NETWORK_ERROR':\n                        // occurs when the Braintree gateway cannot be contacted\n                        console.error('Network error occurred when tokenizing.');\n                        break;\n                    default:\n                        console.error('Something bad happened!', tokenizeErr);\n                    }\n                } else {\n                    this.config.onPaymentMethodReceived(payload);\n                }\n            }.bind(this));\n        }\n    };\n});\n\n","PayPal_Braintree/js/view/payment/validator-handler.js":"/**\n * Copyright 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n\ndefine([\n    'jquery',\n    'Magento_Ui/js/model/messageList',\n    'PayPal_Braintree/js/view/payment/3d-secure',\n    'Magento_Checkout/js/model/full-screen-loader'\n], function ($, globalMessageList, verify3DSecure, fullScreenLoader) {\n    'use strict';\n\n    return {\n        validators: [],\n\n        /**\n         * Get payment config\n         * @returns {Object}\n         */\n        getConfig: function () {\n            return window.checkoutConfig.payment;\n        },\n\n        /**\n         * Init list of validators\n         */\n        initialize: function () {\n            let config = this.getConfig();\n\n            if (config[verify3DSecure.getCode()].enabled) {\n                verify3DSecure.setConfig(config[verify3DSecure.getCode()]);\n                this.add(verify3DSecure);\n            }\n        },\n\n        /**\n         * Add new validator\n         * @param {Object} validator\n         */\n        add: function (validator) {\n            this.validators.push(validator);\n        },\n\n        /**\n         * Run pull of validators\n         * @param {Object} context\n         * @param {Function} callback\n         */\n        validate: function (context, callback, errorCallback) {\n            var self = this,\n                deferred;\n\n            // no available validators\n            if (!self.validators.length) {\n                callback();\n\n                return;\n            }\n\n            // get list of deferred validators\n            deferred = $.map(self.validators, function (current) {\n                return current.validate(context);\n            });\n\n            $.when.apply($, deferred)\n                .done(function () {\n                    callback();\n                }).fail(function (error) {\n                    errorCallback();\n                    self.showError(error);\n                });\n        },\n\n        /**\n         * Show error message\n         * @param {String} errorMessage\n         */\n        showError: function (errorMessage) {\n            globalMessageList.addErrorMessage({\n                message: errorMessage\n            });\n            fullScreenLoader.stopLoader(true);\n        }\n    };\n});\n","PayPal_Braintree/js/view/payment/3d-secure.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n\ndefine([\n    'jquery',\n    'PayPal_Braintree/js/view/payment/adapter',\n    'Magento_Checkout/js/model/quote',\n    'mage/translate',\n    'braintreeThreeDSecure',\n    'Magento_Checkout/js/model/full-screen-loader',\n    'PayPal_Braintree/js/helper/remove-non-digit-characters',\n    'PayPal_Braintree/js/model/vault-enabler'\n], function (\n    $,\n    braintree,\n    quote,\n    $t,\n    threeDSecure,\n    fullScreenLoader,\n    removeNonDigitCharacters,\n    vaultEnablerModel\n) {\n    'use strict';\n\n    return {\n        config: null,\n\n        /**\n         * Set 3d secure config\n         * @param {Object} config\n         */\n        setConfig: function (config) {\n            this.config = config;\n            this.config.thresholdAmount = parseFloat(config.thresholdAmount);\n\n            // Initialize vault enabler to check is it actually enabled or passed\n            vaultEnablerModel.setPaymentCode(this.config.ccVaultCode);\n        },\n\n        /**\n         * Get code\n         * @returns {String}\n         */\n        getCode: function () {\n            return 'three_d_secure';\n        },\n\n        /**\n         * Check billing/shipping address line lengths\n         *\n         * @param errorMessage\n         * @param billingAddress\n         * @param shippingAddress\n         * @returns {*}\n         */\n        checkBillingLineLengths: function (errorMessage, billingAddress, shippingAddress) {\n            let lineError = null;\n\n            if (billingAddress.street[0].length > 50 ||\n                shippingAddress.street !== undefined && shippingAddress.street[0].length > 50) {\n                lineError = 'line1';\n            } else if (billingAddress.street[1].length > 50 ||\n                shippingAddress.street !== undefined && shippingAddress.street[1].length > 50) {\n                lineError = 'line2';\n            }\n\n            if (lineError) {\n                let error = `Billing/Shipping ${lineError} must be string and less than 50 characters.`;\n\n                return $t(`${error} Please update the address and try again.`);\n            }\n        },\n\n        /**\n         * Validate Braintree payment nonce\n         * @param {Object} context\n         * @returns {Object}\n         */\n        validate: function (context) {\n            let self = this,\n                clientInstance = braintree.getApiClient(),\n                state = $.Deferred(),\n                baseGrandTotal = parseFloat(window.checkoutConfig.quoteData?.is_multi_shipping)\n                    ? window.checkoutConfig.quoteData.base_grand_total\n                    : quote.totals()['base_grand_total'],\n                totalAmount = parseFloat(baseGrandTotal).toFixed(2),\n                billingAddress = quote.billingAddress(),\n                shippingAddress = quote.shippingAddress(),\n                setup3d;\n\n            // Handle billing address region code\n            if (billingAddress.regionCode == null) {\n                billingAddress.regionCode = undefined;\n            }\n            if (billingAddress.regionCode !== undefined && billingAddress.regionCode.length > 2) {\n                billingAddress.regionCode = undefined;\n            }\n\n            // Handle shipping address region code\n            if (!quote.isVirtual() && shippingAddress !== null) {\n                if (shippingAddress.regionCode == null) {\n                    shippingAddress.regionCode = undefined;\n                }\n                if (shippingAddress.regionCode !== undefined && shippingAddress.regionCode.length > 2) {\n                    shippingAddress.regionCode = undefined;\n                }\n            }\n\n            // No 3d secure if using CVV verification on vaulted cards\n            if (quote.paymentMethod().method.indexOf('braintree_cc_vault_') !== -1) {\n                if (this.config.useCvvVault === true) {\n                    state.resolve();\n                    return state.promise();\n                }\n            }\n\n            if (!this.isAmountAvailable(totalAmount) || !this.isCountryAvailable(billingAddress.countryId)) {\n                state.resolve();\n                return state.promise();\n            }\n\n            fullScreenLoader.startLoader();\n\n            setup3d = function (client) {\n                threeDSecure.create({\n                    version: 2,\n                    client: client\n                }, function (threeDSecureErr, threeDSecureInstance) {\n                    if (threeDSecureErr) {\n                        fullScreenLoader.stopLoader();\n                        return state.reject($t('Please try again with another form of payment.'));\n                    }\n\n                    let threeDSContainer = document.createElement('div'),\n                        tdMask = document.createElement('div'),\n                        tdFrame = document.createElement('div'),\n                        tdBody = document.createElement('div'),\n                        threeDSecureParameters;\n\n                    threeDSContainer.className = 'braintree-three-d-modal';\n                    tdMask.className = 'bt-mask';\n                    tdFrame.className = 'bt-modal-frame';\n                    tdBody.className = 'bt-modal-body';\n\n                    tdFrame.appendChild(tdBody);\n                    threeDSContainer.appendChild(tdMask);\n                    threeDSContainer.appendChild(tdFrame);\n\n                    threeDSecureParameters = {\n                        amount: totalAmount,\n                        nonce: context.paymentMethodNonce,\n                        bin: context.creditCardBin,\n                        collectDeviceData: true,\n                        challengeRequested: self.getChallengeRequested(),\n                        cardAddChallengeRequested: self.getCardAddChallengeRequested(),\n                        billingAddress: {\n                            givenName: billingAddress.firstname,\n                            surname: billingAddress.lastname,\n                            phoneNumber: billingAddress.telephone !== null\n                                ? removeNonDigitCharacters(billingAddress.telephone)\n                                : billingAddress.telephone,\n                            streetAddress: billingAddress.street[0],\n                            extendedAddress: billingAddress.street[1],\n                            locality: billingAddress.city,\n                            region: billingAddress.regionCode,\n                            postalCode: billingAddress.postcode,\n                            countryCodeAlpha2: billingAddress.countryId\n                        },\n                        additionalInformation: {\n                            ipAddress: self.getIpAddress()\n                        },\n                        onLookupComplete: function (data, next) {\n                            next();\n                        },\n                        addFrame: function (err, iframe) {\n                            fullScreenLoader.stopLoader();\n\n                            if (err) {\n                                console.log('Unable to verify card over 3D Secure', err);\n                                return state.reject($t('Please try again with another form of payment.'));\n                            }\n\n                            tdBody.appendChild(iframe);\n                            document.body.appendChild(threeDSContainer);\n                        },\n                        removeFrame: function () {\n                            fullScreenLoader.startLoader();\n                            document.body.removeChild(threeDSContainer);\n                        }\n                    };\n\n                    if (context.hasOwnProperty('email') && context.email !== null) {\n                        threeDSecureParameters.email = context.email;\n                    }\n\n                    if (!quote.isVirtual() && shippingAddress !== null) {\n                        threeDSecureParameters.additionalInformation = {\n                            shippingGivenName: shippingAddress.firstname,\n                            shippingSurname: shippingAddress.lastname,\n                            shippingAddress: {\n                                streetAddress: shippingAddress.street[0],\n                                extendedAddress: shippingAddress.street[1],\n                                locality: shippingAddress.city,\n                                region: shippingAddress.regionCode,\n                                postalCode: shippingAddress.postcode,\n                                countryCodeAlpha2: shippingAddress.countryId\n                            },\n                            shippingPhone: shippingAddress.telephone !== null\n                                ? removeNonDigitCharacters(shippingAddress.telephone)\n                                : shippingAddress.telephone,\n                            ipAddress: threeDSecureParameters.additionalInformation.ipAddress\n                        };\n                    }\n\n                    threeDSecureInstance.verifyCard(threeDSecureParameters, function (err, response) {\n                        fullScreenLoader.stopLoader();\n\n                        if (err) {\n                            console.error('3DSecure validation failed', err);\n                            if (err.code === 'THREEDS_LOOKUP_VALIDATION_ERROR') {\n                                let errorMessage = err.details.originalError.details.originalError.error.message,\n                                    error = self.checkBillingLineLengths(errorMessage, billingAddress, shippingAddress);\n\n                                return error ? state.reject(error) : state.reject($t(errorMessage));\n                            }\n\n                            return state.reject($t('Please try again with another form of payment.'));\n                        }\n\n                        let liability = {\n                            shifted: response.liabilityShifted,\n                            shiftPossible: response.liabilityShiftPossible\n                        };\n\n                        if (liability.shifted || !liability.shifted && !liability.shiftPossible) {\n                            context.paymentMethodNonce = response.nonce;\n                            state.resolve();\n                        } else {\n                            state.reject($t('Please try again with another form of payment.'));\n                        }\n                    });\n                });\n            };\n\n            if (!clientInstance) {\n                require(['PayPal_Braintree/js/view/payment/method-renderer/cc-form'], function (c) {\n                    let config = c.extend({\n                        defaults: {\n                            clientConfig: {\n                                onReady: function () {}\n                            }\n                        }\n                    });\n\n                    braintree.setConfig(config.defaults.clientConfig);\n                    braintree.setup(setup3d);\n                });\n            } else {\n                setup3d(clientInstance);\n            }\n\n            return state.promise();\n        },\n\n        /**\n         * Check minimal amount for 3d secure activation\n         * @param {Number} amount\n         * @returns {Boolean}\n         */\n        isAmountAvailable: function (amount) {\n            amount = parseFloat(amount.toString());\n\n            return amount >= this.config.thresholdAmount;\n        },\n\n        /**\n         * Check if current country is available for 3d secure\n         * @param {String} countryId\n         * @returns {Boolean}\n         */\n        isCountryAvailable: function (countryId) {\n            let key,\n                specificCountries = this.config.specificCountries;\n\n            // all countries are available\n            if (!specificCountries.length) {\n                return true;\n            }\n\n            for (key in specificCountries) {\n                if (countryId === specificCountries[key]) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        /**\n         * Get the challenge requested config\n         * it will only be returned TRUE when Vault is disabled(FALSE)\n         * and 'PaymentTokenEnabler' is set to FALSE.\n         *\n         * @returns {Boolean}\n         */\n        getChallengeRequested: function () {\n            if (vaultEnablerModel.isVaultEnabled() && vaultEnablerModel.isActivePaymentTokenEnabler()) {\n                return false;\n            }\n            return this.config.challengeRequested;\n        },\n\n        /**\n         * This parameter will be passed as TRUE when\n         * Vault is enabled(TRUE) and 'PaymentTokenEnabler'\n         * is set to TRUE.\n         *\n         * @returns {boolean}\n         */\n        getCardAddChallengeRequested: function () {\n            if (vaultEnablerModel.isVaultEnabled() && vaultEnablerModel.isActivePaymentTokenEnabler()) {\n                return true;\n            }\n            return false;\n        },\n\n        /**\n         * Get the Customer's IP Address\n         *\n         * @returns {*}\n         */\n        getIpAddress: function () {\n            return this.config.ipAddress;\n        }\n    };\n});\n","PayPal_Braintree/js/view/payment/ach.js":"define(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/payment/renderer-list'\n    ],\n    function (\n        Component,\n        rendererList\n    ) {\n        'use strict';\n\n        rendererList.push(\n            {\n                type: 'braintree_ach_direct_debit',\n                component: 'PayPal_Braintree/js/view/payment/method-renderer/ach'\n            }\n        );\n\n        return Component.extend({});\n    }\n);\n","PayPal_Braintree/js/view/payment/braintree.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\ndefine([\n    'uiComponent',\n    'Magento_Checkout/js/model/payment/renderer-list',\n    'Magento_Customer/js/customer-data',\n    'Magento_Ui/js/model/messageList'\n], function (Component, rendererList, customerData, globalMessageList) {\n    'use strict';\n\n    let config = window.checkoutConfig.payment,\n        braintreeType = 'braintree',\n        payPalType = 'braintree_paypal',\n        braintreeAchDirectDebit = 'braintree_ach_direct_debit',\n        braintreeVenmo = 'braintree_venmo',\n        braintreeLocalPayment = 'braintree_local_payment';\n\n    if (config[braintreeType] && config[braintreeType].isActive && config[braintreeType].clientToken) {\n        rendererList.push({\n            type: braintreeType,\n            component: 'PayPal_Braintree/js/view/payment/method-renderer/hosted-fields'\n        });\n    }\n\n    if (config[payPalType] && config[payPalType].isActive) {\n        rendererList.push({\n            type: payPalType,\n            component: 'PayPal_Braintree/js/view/payment/method-renderer/paypal'\n        });\n    }\n\n    if (config[braintreeVenmo] && config[braintreeVenmo].isAllowed && config[braintreeVenmo].clientToken) {\n        rendererList.push({\n            type: braintreeVenmo,\n            component: 'PayPal_Braintree/js/view/payment/method-renderer/venmo'\n        });\n    }\n\n    if (config[braintreeAchDirectDebit] && config[braintreeAchDirectDebit].isActive\n        && config[braintreeAchDirectDebit].clientToken) {\n        rendererList.push({\n            type: braintreeAchDirectDebit,\n            component: 'PayPal_Braintree/js/view/payment/method-renderer/ach'\n        });\n    }\n\n    if (config[braintreeLocalPayment] && config[braintreeLocalPayment].clientToken) {\n        rendererList.push({\n            type: braintreeLocalPayment,\n            component: 'PayPal_Braintree/js/view/payment/method-renderer/lpm'\n        });\n    }\n\n    /** Add view logic here if needed */\n    return Component.extend({\n        initialize: function () {\n            this._super();\n\n            let braintreeData = customerData.get('braintree')(),\n                errors = braintreeData.errors || [];\n\n            errors.forEach(function (error) {\n                globalMessageList.addErrorMessage({ 'message': error });\n            });\n\n            customerData.set('braintree', { errors: [] });\n\n            return this;\n        }\n    });\n});\n","PayPal_Braintree/js/view/payment/venmo.js":"define(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/payment/renderer-list'\n    ],\n    function (\n        Component,\n        rendererList\n    ) {\n        'use strict';\n\n        rendererList.push(\n            {\n                type: 'braintree_venmo',\n                component: 'PayPal_Braintree/js/view/payment/method-renderer/venmo'\n            }\n        );\n\n        return Component.extend({});\n    }\n);\n","PayPal_Braintree/js/view/payment/lpm.js":"define(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/payment/renderer-list'\n    ],\n    function (\n        Component,\n        rendererList\n    ) {\n        'use strict';\n\n        rendererList.push(\n            {\n                type: 'braintree_local_payment',\n                component: 'PayPal_Braintree/js/view/payment/method-renderer/lpm'\n            }\n        );\n\n        return Component.extend({});\n    }\n);\n","PayPal_Braintree/js/view/payment/validator-manager.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n\ndefine([\n    'jquery',\n    'Magento_Ui/js/model/messageList',\n    'PayPal_Braintree/js/model/full-screen-loader'\n], function (\n    $,\n    globalMessageList,\n    defaultFullScreenLoader\n) {\n    'use strict';\n\n    /**\n     * New Validator handler implementation that can be used across website areas including checkout.\n     */\n    return {\n        fullScreenLoader: defaultFullScreenLoader,\n        validators: [],\n\n        /**\n         * Set the full screen loader implementation.\n         *\n         * @param fullScreenLoader\n         */\n        setFullScreenLoader: function (fullScreenLoader) {\n            this.fullScreenLoader = fullScreenLoader;\n        },\n\n        /**\n         * Get the full screen loader implementation.\n         */\n        getFullScreenLoader: function () {\n            return this.fullScreenLoader;\n        },\n\n        /**\n         * Add new validator if enabled.\n         *\n         * Always expect the validator to have the isEnabled method (property), if not skip.\n         *\n         * @param {Object} validator\n         */\n        add: function (validator) {\n            if (!validator.hasOwnProperty('isEnabled')\n                || typeof validator.isEnabled !== 'function'\n                || !validator.isEnabled()\n            ) {\n                return;\n            }\n\n            this.validators.push(validator);\n        },\n\n        /**\n         * Run pull of validators.\n         *\n         * @param {Object} context\n         * @param {Function} callback\n         * @param {Function} errorCallback\n         */\n        validate: function (context, callback, errorCallback) {\n            let self = this,\n                deferred;\n\n            // no available validators\n            if (!self.validators.length) {\n                callback();\n\n                return;\n            }\n\n            // get list of deferred validators\n            deferred = $.map(self.validators, function (current) {\n                return current.validate(context);\n            });\n\n            $.when.apply($, deferred)\n                .done(function () {\n                    callback();\n                }).fail(function (error) {\n                    errorCallback();\n                    self.showError(error);\n                });\n        },\n\n        /**\n         * Show error message.\n         *\n         * @param {string} errorMessage\n         */\n        showError: function (errorMessage) {\n            // Global message list only exists on the checkout page.\n            if ($('.checkout-index-index').length) {\n                globalMessageList.addErrorMessage({\n                    message: errorMessage\n                });\n            } else {\n                alert(errorMessage);\n            }\n\n            this.getFullScreenLoader().stopLoader(true);\n        }\n    };\n});\n","PayPal_Braintree/js/view/payment/express/express-paypal-paylater.js":"/**\n * Express PayLater button component\n */\ndefine([\n    'jquery',\n    'underscore',\n    'uiComponent',\n    'mage/url',\n    'domReady!'\n], function ($, _, Component, url) {\n    'use strict';\n\n    const config = _.get(window.checkoutConfig.payment, 'braintree_paypal_paylater', {});\n\n    return Component.extend({\n        defaults: {\n            template: 'PayPal_Braintree/express/express-paypal-paylater',\n            isActive: _.get(config, 'isActive', false),\n            checkoutCurrency: window.checkoutConfig.quoteData.base_currency_code,\n            checkoutAmount: window.checkoutConfig.quoteData.base_grand_total,\n            checkoutLocale: _.get(config, 'locale', null),\n            buttonLabel: _.get(config, ['style', 'label'], null),\n            buttonColor: _.get(config, ['style', 'color'], null),\n            buttonShape: _.get(config, ['style', 'shape'], null),\n            skipOrderReviewStep: _.get(config, 'skipOrderReviewStep', true),\n            actionSuccess: _.get(config, 'skipOrderReviewStep', true)\n                ? url.build('checkout/onepage/success')\n                : url.build('braintree/paypal/review'),\n            storeCode: window.checkoutConfig.storeCode,\n            quoteId: window.checkoutConfig.quoteData.entity_id,\n            isMessageActive: _.get(config, 'isMessageActive', false),\n            messageTextColor: _.get(config ,['message', 'text_color'], null),\n            messageLayout: _.get(config ,['message', 'layout'], null),\n            messageLogoPosition: _.get(config ,['message', 'logo_position'], null),\n            messageLogo: _.get(config ,['message', 'logo'], null),\n        },\n\n        /**\n         * Initializes regular properties of instance.\n         *\n         * @returns {Object} Chainable.\n         */\n        initConfig: function () {\n            this._super();\n\n            return this;\n        },\n\n        /**\n         * Is the payment method active.\n         *\n         * @return {boolean}\n         */\n        isMethodActive: function () {\n            return this.isActive;\n        },\n\n        /**\n         * Is the payment method message active.\n         *\n         * @return {boolean}\n         */\n        isMethodMessageActive: function () {\n            return this.isMessageActive;\n        },\n\n        /**\n         * Is Billing address required.\n         *\n         * @return {string}\n         */\n        getIsRequiredBillingAddress: function () {\n            return _.get(config, 'isRequiredBillingAddress', '0') === '0' ? '' : 'true';\n        },\n\n        /**\n         * Is Customer LoggedIn.\n         *\n         * @return {string}\n         */\n        getIsCustomerLoggedIn: function () {\n            return _.get(window.checkoutConfig, 'isCustomerLoggedIn', false) === false ? '' : true;\n        },\n\n        /**\n         * Get the merchant's name config.\n         *\n         * @return {string}\n         */\n        getMerchantName: function () {\n            return _.get(config, 'merchantName', '');\n        }\n    });\n});\n","PayPal_Braintree/js/view/payment/express/express-paypal.js":"/**\n * Express Paypal button component\n */\n\ndefine([\n    'underscore',\n    'uiComponent',\n    'mage/url',\n    'Magento_Checkout/js/model/quote',\n    'PayPal_Braintree/js/paypal/button',\n    'domReady!'\n], function (_, Component, url, quote, payPalButton) {\n    'use strict';\n\n    const config = _.get(window.checkoutConfig.payment, 'braintree_paypal', {});\n\n    return Component.extend({\n        defaults: {\n            template: 'PayPal_Braintree/express/express-paypal',\n            isActive: _.get(config, 'isActive', false),\n            clientToken: _.get(config, 'clientToken', null),\n            checkoutCurrency: window.checkoutConfig.quoteData.base_currency_code,\n            checkoutAmount: window.checkoutConfig.quoteData.base_grand_total,\n            checkoutLocale: _.get(config, 'locale', null),\n            buttonLabel: _.get(config, ['style', 'label'], null),\n            buttonColor: _.get(config, ['style', 'color'], null),\n            buttonShape: _.get(config, ['style', 'shape'], null),\n            skipOrderReviewStep: _.get(config, 'skipOrderReviewStep', true),\n            actionSuccess: _.get(config, 'skipOrderReviewStep', true)\n                ? url.build('checkout/onepage/success')\n                : url.build('braintree/paypal/review'),\n            storeCode: window.checkoutConfig.storeCode,\n            quoteId: window.checkoutConfig.quoteData.entity_id\n        },\n\n        /**\n         * Initializes regular properties of instance.\n         *\n         * @returns {Object} Chainable.\n         */\n        initConfig: function () {\n            this._super();\n\n            return this;\n        },\n\n        /**\n         * Is the payment method active.\n         *\n         * @return {boolean}\n         */\n        isMethodActive: function () {\n            return this.isActive;\n        },\n\n        /**\n         * Is Billing address required.\n         *\n         * @return {string}\n         */\n        getIsRequiredBillingAddress: function () {\n            return _.get(config, 'isRequiredBillingAddress', '0') === '0' ? '' : 'true';\n        },\n\n        /**\n         * Is Customer LoggedIn.\n         *\n         * @return {string}\n         */\n        getIsCustomerLoggedIn: function () {\n            return _.get(window.checkoutConfig, 'isCustomerLoggedIn', false) === false ? '' : true;\n        },\n\n        /**\n         * Get the merchant's name config.\n         *\n         * @return {string}\n         */\n        getMerchantName: function () {\n            return _.get(config, 'merchantName', '');\n        },\n\n        /**\n         * Initialize Braintree PayPal buttons.\n         *\n         * PayPal Credit & PayPal Pay Later & PayPal Pay Later Messaging rely on PayPal to be enabled.\n         */\n        initPayPalButtons: function () {\n            if (!this.isMethodActive() || !this.clientToken) {\n                return;\n            }\n\n            let buttonConfig = {\n                    'buttonConfig': {\n                        'clientToken': this.clientToken,\n                        'currency': this.checkoutCurrency,\n                        'environment': config.environment,\n                        'merchantCountry': config.merchantCountry,\n                        'isCreditActive': _.get(\n                            window.checkoutConfig.payment,\n                            ['braintree_paypal_credit', 'isActive'],\n                            false\n                        ),\n                        'skipOrderReviewStep': this.skipOrderReviewStep,\n                        'pageType': 'checkout'\n                    },\n                    'buttonIds': [\n                        '#paypal-braintree-express-payment',\n                        '#paypal-braintree-express-credit-payment',\n                        '#paypal-braintree-express-paylater'\n                    ]\n                };\n\n            payPalButton(buttonConfig);\n        }\n    });\n});\n","PayPal_Braintree/js/view/payment/express/express-applepay.js":"/**\n * Braintree Apple Pay express payment method integration.\n **/\ndefine([\n    'underscore',\n    'uiComponent',\n    'PayPal_Braintree/js/applepay/button',\n    'PayPal_Braintree/js/applepay/api',\n    'PayPal_Braintree/js/helper/format-amount',\n    'mage/translate',\n    'mage/url',\n    'domReady!'\n], function (\n    _,\n    Component,\n    button,\n    buttonApi,\n    formatAmount,\n    $t,\n    url\n) {\n    'use strict';\n\n    const config = _.get(window.checkoutConfig.payment, 'braintree_applepay', {});\n\n    return Component.extend({\n\n        defaults: {\n            template: 'PayPal_Braintree/express/express-applepay',\n            id: 'braintree-applepay-express-payment',\n            isActive: !_.isEmpty(config),\n            clientToken: _.get(config, 'clientToken', null),\n            quoteId: window.checkoutConfig.quoteData.entity_id,\n            displayName: _.get(config, 'merchantName', null),\n            actionSuccess: url.build('checkout/onepage/success'),\n            grandTotalAmount: window.checkoutConfig.quoteData.base_grand_total,\n            storeCode: window.checkoutConfig.storeCode,\n            priceIncludesTax: _.get(config, 'priceIncludesTax', true)\n        },\n\n        /**\n         * Is the payment method active.\n         *\n         * @return {boolean}\n         */\n        isMethodActive: function () {\n            return this.isActive;\n        },\n\n        /**\n         * Initialize Apple Pay express.\n         */\n        initApplePayExpress: function () {\n            if (!this.isMethodActive() || !this.clientToken) {\n                return;\n            }\n\n            if (!this.displayName) {\n                this.displayName = $t('Store');\n            }\n\n            let api = new buttonApi();\n\n            api.setGrandTotalAmount(formatAmount(this.grandTotalAmount));\n            api.setClientToken(this.clientToken);\n            api.setDisplayName(this.displayName);\n            api.setQuoteId(this.quoteId);\n            api.setActionSuccess(this.actionSuccess);\n            api.setStoreCode(this.storeCode);\n            api.setPriceIncludesTax(this.priceIncludesTax);\n\n            // Attach the button\n            button.init(\n                document.getElementById(this.id),\n                api\n            );\n        },\n\n        /**\n         * @returns {Object}\n         */\n        initialize: function () {\n            this._super();\n\n            return this;\n        }\n    });\n});\n","PayPal_Braintree/js/view/payment/express/express-googlepay.js":"/**\n * Express GooglePay button component\n */\n\ndefine([\n    'jquery',\n    'underscore',\n    'uiComponent',\n    'mage/url',\n    'PayPal_Braintree/js/googlepay/button',\n    'PayPal_Braintree/js/googlepay/api',\n    'domReady!'\n], function ($, _, Component, url, button, buttonApi) {\n    'use strict';\n\n    const config = _.get(window.checkoutConfig.payment, 'braintree_googlepay', {});\n\n    return Component.extend({\n\n        defaults: {\n            template: 'PayPal_Braintree/express/express-googlepay',\n            id: 'braintree-googlepay-express-payment',\n            isActive: !_.isEmpty(config),\n            clientToken: _.get(config, 'clientToken', null),\n            merchantId: _.get(config, 'merchantId', null),\n            currencyCode: window.checkoutConfig.quoteData.base_currency_code,\n            skipOrderReviewStep: _.get(config, 'skipOrderReviewStep', true),\n            actionSuccess: _.get(config, 'skipOrderReviewStep', true)\n                ? url.build('checkout/onepage/success')\n                : url.build('braintree/googlepay/review'),\n            amount: window.checkoutConfig.quoteData.base_grand_total,\n            environment: _.get(config, 'environment', 'TEST'),\n            cardTypes: _.get(config, 'cardTypes', []),\n            btnColor: _.get(config, 'btnColor', ''),\n            threeDSecure: null,\n            storeCode: window.checkoutConfig.storeCode,\n            quoteId: window.checkoutConfig.quoteData.entity_id\n        },\n\n        /**\n         * Is the payment method active.\n         *\n         * @return {boolean}\n         */\n        isMethodActive: function () {\n            return this.isActive;\n        },\n\n        /**\n         * Get the 3D Secure config object.\n         *\n         * @return {\n        *   {\n        *      thresholdAmount: (number|*),\n        *      specificCountries: ([]|*),\n        *      challengeRequested: (boolean|*),\n        *      enabled: boolean\n        *   } ||\n        *   {\n        *      thresholdAmount: number,\n        *      specificCountries: *[],\n        *      challengeRequested: boolean,\n        *      enabled: boolean\n        *   }\n        * }\n         */\n        get3DSecureConfig: function () {\n            let secureConfig = _.get(window.checkoutConfig.payment, 'three_d_secure', {});\n\n            if (_.isEmpty(secureConfig)) {\n                return {\n                    'enabled': false,\n                    'challengeRequested': false,\n                    'thresholdAmount': 0.0,\n                    'specificCountries': [],\n                    'ipAddress': ''\n                };\n            }\n\n            return {\n                'enabled': secureConfig.enabled,\n                'challengeRequested': secureConfig.challengeRequested,\n                'thresholdAmount': secureConfig.thresholdAmount,\n                'specificCountries': secureConfig.specificCountries,\n                'ipAddress': secureConfig.ipAddress\n            };\n        },\n\n        /**\n         * Initialize Google Pay express.\n         */\n        initGooglePayExpress: function () {\n            if (!this.isMethodActive()) {\n                return;\n            }\n\n            this.threeDSecure = this.get3DSecureConfig();\n\n            /* Add client token & environment to 3DS Config */\n            this.threeDSecure.clientToken = this.clientToken;\n            this.threeDSecure.environment = this.environment;\n\n            const element = $(`#${this.id}`);\n            let api = new buttonApi();\n\n            api.setEnvironment(this.environment);\n            api.setCurrencyCode(this.currencyCode);\n            api.setClientToken(this.clientToken);\n            api.setMerchantId(this.merchantId);\n            api.setActionSuccess(this.actionSuccess);\n            api.setAmount(this.amount);\n            api.setCardTypes(this.cardTypes);\n            api.setBtnColor(this.btnColor);\n            api.setThreeDSecureValidatorConfig(this.threeDSecure);\n            api.setStoreCode(this.storeCode);\n            api.setQuoteId(this.quoteId);\n            api.setSkipReview(this.skipOrderReviewStep);\n            api.setElement(element);\n\n            // Attach the button\n            button.init(\n                element,\n                api\n            );\n        },\n\n        /**\n         * @returns {Object}\n         */\n        initialize: function () {\n            this._super();\n\n            return this;\n        }\n    });\n});\n","PayPal_Braintree/js/view/payment/express/express-paypal-credit.js":"/**\n * Express Paypal Credit button component\n */\ndefine([\n    'underscore',\n    'uiComponent',\n    'mage/url',\n    'domReady!'\n], function (_, Component, url) {\n    'use strict';\n\n    const config = _.get(window.checkoutConfig.payment, 'braintree_paypal_credit', {});\n\n    return Component.extend({\n        defaults: {\n            template: 'PayPal_Braintree/express/express-paypal-credit',\n            isActive: _.get(config, 'isActive', false),\n            checkoutCurrency: window.checkoutConfig.quoteData.base_currency_code,\n            checkoutAmount: window.checkoutConfig.quoteData.base_grand_total,\n            checkoutLocale: _.get(config, 'locale', null),\n            buttonLabel: _.get(config, ['style', 'label'], null),\n            buttonColor: _.get(config, ['style', 'color'], null),\n            buttonShape: _.get(config, ['style', 'shape'], null),\n            skipOrderReviewStep: _.get(config, 'skipOrderReviewStep', true),\n            actionSuccess: _.get(config, 'skipOrderReviewStep', true)\n                ? url.build('checkout/onepage/success')\n                : url.build('braintree/paypal/review'),\n            storeCode: window.checkoutConfig.storeCode,\n            quoteId: window.checkoutConfig.quoteData.entity_id\n        },\n\n        /**\n         * Initializes regular properties of instance.\n         *\n         * @returns {Object} Chainable.\n         */\n        initConfig: function () {\n            this._super();\n\n            return this;\n        },\n\n        /**\n         * Is the payment method active.\n         *\n         * @return {boolean}\n         */\n        isMethodActive: function () {\n            return this.isActive;\n        },\n\n        /**\n         * Is Billing address required.\n         *\n         * @return {string}\n         */\n        getIsRequiredBillingAddress: function () {\n            return _.get(config, 'isRequiredBillingAddress', '0') === '0' ? '' : 'true';\n        },\n\n        /**\n         * Is Customer LoggedIn.\n         *\n         * @return {string}\n         */\n        getIsCustomerLoggedIn: function () {\n            return _.get(window.checkoutConfig, 'isCustomerLoggedIn', false) === false ? '' : true;\n        },\n\n        /**\n         * Get the merchant's name config.\n         *\n         * @return {string}\n         */\n        getMerchantName: function () {\n            return _.get(config, 'merchantName', '');\n        }\n    });\n});\n","PayPal_Braintree/js/view/payment/express/express-payment.js":"/**\n * General express payment component that initializes braintree payment buttons\n */\ndefine([\n    'uiComponent',\n    'domReady!'\n], function (Component) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'PayPal_Braintree/express/express-payment'\n        },\n\n        /**\n         * Initializes regular properties of instance.\n         *\n         * @returns {Object} Chainable.\n         */\n        initConfig: function () {\n            this._super();\n\n            return this;\n        }\n    });\n});\n","PayPal_Braintree/js/view/payment/method-renderer/cc-form.js":"/**\n * Copyright 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\ndefine(\n    [\n        'underscore',\n        'jquery',\n        'Magento_Payment/js/view/payment/cc-form',\n        'Magento_Checkout/js/model/quote',\n        'PayPal_Braintree/js/view/payment/adapter',\n        'mage/translate',\n        'PayPal_Braintree/js/validator',\n        'PayPal_Braintree/js/view/payment/validator-handler',\n        'Magento_Checkout/js/model/full-screen-loader'\n    ],\n    function (\n        _,\n        $,\n        Component,\n        quote,\n        braintree,\n        $t,\n        validator,\n        validatorManager,\n        fullScreenLoader\n    ) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                active: false,\n                braintreeClient: null,\n                braintreeDeviceData: null,\n                paymentMethodNonce: null,\n                lastBillingAddress: null,\n                validatorManager: validatorManager,\n                code: 'braintree',\n                isProcessing: false,\n                creditCardBin: null,\n\n                /**\n                 * Additional payment data\n                 *\n                 * {Object}\n                 */\n                additionalData: {},\n\n                /**\n                 * Braintree client configuration\n                 *\n                 * {Object}\n                 */\n                clientConfig: {\n                    onReady: function (context) {\n                        context.setupHostedFields();\n                    },\n\n                    /**\n                     * Triggers on payment nonce receive\n                     * @param {Object} response\n                     */\n                    onPaymentMethodReceived: function (response) {\n                        this.handleNonce(response);\n                        this.isProcessing = false;\n                    },\n\n                    /**\n                     * Allow a new nonce to be generated\n                     */\n                    onPaymentMethodError: function () {\n                        this.isProcessing = false;\n                    },\n\n                    /**\n                     * Device data initialization\n                     * @param {String} deviceData\n                     */\n                    onDeviceDataReceived: function (deviceData) {\n                        if (this.additionalData === undefined) {\n                            this.additionalData = {};\n                        }\n                        this.additionalData['device_data'] = deviceData;\n                    },\n\n                    /**\n                     * After Braintree instance initialization\n                     */\n                    onInstanceReady: function () {},\n\n                    /**\n                     * Triggers on any Braintree error\n                     * @param {Object} response\n                     */\n                    onError: function (response) {\n                        this.isProcessing = false;\n                        braintree.showError($t('Payment ' + this.getTitle() + ' can\\'t be initialized'));\n                        throw response.message;\n                    },\n\n                    /**\n                     * Triggers when customer click \"Cancel\"\n                     */\n                    onCancelled: function () {\n                        this.paymentMethodNonce = null;\n                        this.isProcessing = false;\n                    }\n                },\n                imports: {\n                    onActiveChange: 'active'\n                }\n            },\n\n            /**\n             * Set list of observable attributes\n             *\n             * @returns {exports.initObservable}\n             */\n            initObservable: function () {\n                validator.setConfig(window.checkoutConfig.payment[this.getCode()]);\n                this._super()\n                    .observe(['active']);\n                this.validatorManager.initialize();\n                this.initClientConfig();\n\n                return this;\n            },\n\n            /**\n             * Store the CC message container so it can be switched if required later on.\n             *\n             * @returns {Object}\n             */\n            initialize: function () {\n                this._super();\n                this.ccMessageContainer = this.messageContainer;\n            },\n\n            /**\n             * Get payment name\n             *\n             * @returns {String}\n             */\n            getCode: function () {\n                return this.code;\n            },\n\n            /**\n             * Check if payment is active\n             *\n             * @returns {Boolean}\n             */\n            isActive: function () {\n                let active = this.getCode() === this.isChecked();\n\n                this.active(active);\n\n                return active;\n            },\n\n            /**\n             * Triggers when payment method change\n             * @param {Boolean} isActive\n             */\n            onActiveChange: function (isActive) {\n                if (!isActive) {\n                    return;\n                }\n\n                this.initBraintree();\n            },\n\n            /**\n             * Init config\n             */\n            initClientConfig: function () {\n                _.each(this.clientConfig, function (fn, name) {\n                    if (typeof fn === 'function') {\n                        this.clientConfig[name] = fn.bind(this);\n                    }\n                }, this);\n            },\n\n            /**\n             * Init Braintree configuration\n             */\n            initBraintree: function () {\n                let intervalId = setInterval(function () {\n                    // stop loader when frame will be loaded\n                    if ($('#braintree-hosted-field-number').length) {\n                        clearInterval(intervalId);\n                        fullScreenLoader.stopLoader(true);\n                    }\n                }, 500);\n\n                if (braintree.checkout) {\n                    braintree.checkout.teardown(function () {\n                        braintree.checkout = null;\n                    });\n                }\n\n                fullScreenLoader.startLoader();\n                braintree.setConfig(this.clientConfig);\n                braintree.setup();\n            },\n\n            /**\n             * Get full selector name\n             *\n             * @param {String} field\n             * @returns {String}\n             */\n            getSelector: function (field) {\n                return '#' + this.getCode() + '_' + field;\n            },\n\n            /**\n             * Get list of available CC types\n             *\n             * @returns {Object}\n             */\n            getCcAvailableTypes: function () {\n                let availableTypes = validator.getAvailableCardTypes(),\n                    billingAddress = quote.billingAddress(),\n                    billingCountryId;\n\n                this.lastBillingAddress = quote.shippingAddress();\n\n                if (!billingAddress) {\n                    billingAddress = this.lastBillingAddress;\n                }\n\n                billingCountryId = billingAddress.countryId;\n\n                if (billingCountryId && validator.getCountrySpecificCardTypes(billingCountryId)) {\n                    return validator.collectTypes(\n                        availableTypes,\n                        validator.getCountrySpecificCardTypes(billingCountryId)\n                    );\n                }\n\n                return availableTypes;\n            },\n\n            /**\n             * @returns {String}\n             */\n            getEnvironment: function () {\n                return window.checkoutConfig.payment[this.getCode()].environment;\n            },\n\n            /**\n             * Get data\n             *\n             * @returns {Object}\n             */\n            getData: function () {\n                let data = {\n                    'method': this.getCode(),\n                    'additional_data': {\n                        'payment_method_nonce': this.paymentMethodNonce,\n                        'g-recaptcha-response' : $('#token-grecaptcha-braintree').val()\n                    }\n                };\n\n                data['additional_data'] = _.extend(data['additional_data'], this.additionalData);\n\n                return data;\n            },\n\n            /**\n             * Set payment nonce\n             * @param {String} paymentMethodNonce\n             */\n            setPaymentMethodNonce: function (paymentMethodNonce) {\n                this.paymentMethodNonce = paymentMethodNonce;\n            },\n\n            /**\n             * Set credit card bin\n             * @param creditCardBin\n             */\n            setCreditCardBin: function (creditCardBin) {\n                this.creditCardBin = creditCardBin;\n            },\n\n            /**\n             * Prepare payload to place order\n             * @param {Object} payload\n             */\n            handleNonce: function (payload) {\n                let self = this;\n\n                this.setPaymentMethodNonce(payload.nonce);\n                this.setCreditCardBin(payload.details.bin);\n                this.messageContainer = this.ccMessageContainer;\n\n                // place order on success validation\n                self.validatorManager.validate(self, function () {\n                    return self.placeOrder('parent');\n                }, function () {\n                    self.isProcessing = false;\n                    self.paymentMethodNonce = null;\n                    self.creditCardBin = null;\n                });\n            },\n\n            /**\n             * Action to place order\n             * @param {String} key\n             */\n            placeOrder: function (key) {\n                if (key) {\n                    return this._super();\n                }\n\n                if (this.isProcessing) {\n                    return false;\n                }\n                this.isProcessing = true;\n\n\n                braintree.tokenizeHostedFields();\n                return false;\n            },\n\n            /**\n             * Get payment icons\n             * @param {String} type\n             * @returns {Boolean}\n             */\n            getIcons: function (type) {\n                return window.checkoutConfig.payment.braintree.icons.hasOwnProperty(type) ?\n                    window.checkoutConfig.payment.braintree.icons[type]\n                    : false;\n            }\n        });\n    }\n);\n","PayPal_Braintree/js/view/payment/method-renderer/paypal-customer-vault.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\ndefine([\n    'jquery',\n    'underscore',\n    'mage/translate',\n    'braintree',\n    'braintreeDataCollector',\n    'braintreePayPalCheckout',\n    'PayPal_Braintree/js/helper/format-amount',\n    'PayPal_Braintree/js/helper/remove-non-digit-characters',\n    'PayPal_Braintree/js/helper/replace-unsupported-characters',\n    'Magento_Checkout/js/action/create-billing-address',\n    'Magento_Checkout/js/action/select-billing-address',\n    'Magento_Checkout/js/model/full-screen-loader',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'Magento_CheckoutAgreements/js/view/checkout-agreements',\n    'Magento_Vault/js/view/payment/method-renderer/vault',\n    'Magento_Ui/js/model/messageList'\n], function (\n    $,\n    _,\n    $t,\n    client,\n    dataCollector,\n    paypalCheckout,\n    formatAmount,\n    removeNonDigitCharacters,\n    replaceUnsupportedCharacters,\n    createBillingAddress,\n    selectBillingAddress,\n    fullScreenLoader,\n    quote,\n    additionalValidators,\n    checkoutAgreements,\n    VaultComponent,\n    globalMessageList\n) {\n    'use strict';\n\n    return VaultComponent.extend({\n        defaults: {\n            template: 'PayPal_Braintree/payment/paypal/customer-vault',\n\n            /**\n             * Component config set via provider.\n             */\n            code: null,\n            nonceUrl: null,\n            publicHash: null,\n            clientToken: null,\n            clientInstance: null,\n            checkout: null,\n            details: {},\n\n            /**\n             * {Object}\n             */\n            events: {\n                onClick: null,\n                onCancel: null,\n                onError: null,\n                onRender: null\n            },\n\n            /**\n             * Additional payment data\n             *\n             * {Object}\n             */\n            additionalData: {},\n\n            /**\n             * Placeholders for PayPal instance vaulted payment.\n             */\n            paypalInstance: null,\n            paymentMethodNonce: null,\n            grandTotalAmount: null,\n            isReviewRequired: false,\n            customerEmail: null,\n\n            /**\n             * PayPal client configuration\n             *\n             * {Object}\n             */\n            clientConfig: {\n                dataCollector: {\n                    paypal: true\n                },\n\n                /**\n                 * Triggers when widget is loaded\n                 */\n                onReady: function () {\n                    this.setupPayPal();\n                },\n\n                /**\n                 * Triggers on payment nonce receive\n                 * @param {Object} response\n                 */\n                onPaymentMethodReceived: function (response) {\n                    this.beforePlaceOrder(response);\n                }\n            },\n\n            imports: {\n                onActiveChange: 'active'\n            }\n        },\n\n        /**\n         * Set list of observable attributes\n         *\n         * @returns {exports.initObservable}\n         */\n        initObservable: function () {\n            let self = this;\n\n            this._super().observe(['active', 'isReviewRequired', 'customerEmail']);\n\n            window.addEventListener('hashchange', function (e) {\n                let methodCode = quote.paymentMethod();\n\n                if (methodCode && methodCode.method === self.getId()) {\n                    if (e.newURL.indexOf('payment') > 0 && self.grandTotalAmount !== null) {\n                        self.reInitPayPalVault();\n                    }\n                }\n            });\n\n            quote.paymentMethod.subscribe(function (value) {\n                if (value.method && value.method === self.getId()) {\n                    self.reInitPayPalVault();\n                }\n            });\n\n            self.grandTotalAmount = quote.totals()['base_grand_total'];\n\n            quote.totals.subscribe(function () {\n                if (self.grandTotalAmount !== quote.totals()['base_grand_total']) {\n                    self.grandTotalAmount = quote.totals()['base_grand_total'];\n                    let methodCode = quote.paymentMethod();\n\n                    if (methodCode && methodCode.method === self.getId()) {\n                        self.reInitPayPalVault();\n                    }\n                }\n            });\n\n            self.isReviewRequired(false);\n            self.initClientConfig();\n\n            return this;\n        },\n\n        /**\n         * Triggers when payment method change\n         *\n         * @param {Boolean} isActive\n         */\n        onActiveChange: function (isActive) {\n            if (!isActive) {\n                return;\n            }\n\n            // need always re-init Braintree with PayPal configuration\n            this.reInitPayPalVault();\n        },\n\n        /**\n         * Init config\n         */\n        initClientConfig: function () {\n            this.clientConfig = _.extend(this.clientConfig, this.getPayPalConfig());\n\n            _.each(this.clientConfig, function (fn, name) {\n                if (typeof fn === 'function') {\n                    this.clientConfig[name] = fn.bind(this);\n                }\n            }, this);\n        },\n\n        /**\n         * Get configuration for PayPal\n         *\n         * @returns {Object}\n         */\n        getPayPalConfig: function () {\n            let totals = quote.totals(),\n                config = {};\n\n            config.paypal = {\n                flow: 'checkout',\n                amount: formatAmount(this.grandTotalAmount),\n                currency: totals['base_currency_code'],\n                locale: this.getLocale(),\n\n                /**\n                 * Triggers on any Braintree error\n                 */\n                onError: function () {\n                    this.paymentMethodNonce = null;\n                },\n\n                /**\n                 * Triggers if browser doesn't support PayPal Checkout\n                 */\n                onUnsupported: function () {\n                    this.paymentMethodNonce = null;\n                }\n            };\n\n            if (!quote.isVirtual()) {\n                config.paypal.enableShippingAddress = true;\n                config.paypal.shippingAddressEditable = false;\n                config.paypal.shippingAddressOverride = this.getShippingAddress();\n            }\n\n            if (this.getMerchantName()) {\n                config.paypal.displayName = this.getMerchantName();\n            }\n\n            return config;\n        },\n\n        /**\n         * Re-init PayPal Vault Auth Flow\n         */\n        reInitPayPalVault: function () {\n            this.disableButton();\n            this.clientConfig.paypal.amount = formatAmount(this.grandTotalAmount);\n\n            if (!quote.isVirtual()) {\n                this.clientConfig.paypal.enableShippingAddress = true;\n                this.clientConfig.paypal.shippingAddressEditable = false;\n                this.clientConfig.paypal.shippingAddressOverride = this.getShippingAddress();\n            }\n\n            if (this.getPayPalInstance()) {\n                this.getPayPalInstance().teardown(function () {\n                    this.setPayPalInstance(null);\n                    this.createClientInstance(null);\n                }.bind(this));\n            } else {\n                this.createClientInstance(null);\n                this.enableButton();\n            }\n        },\n\n        /**\n         * Get the current Braintree client instance.\n         *\n         * Null if not set.\n         *\n         * @return {*|null}\n         */\n        getClientInstance: function () {\n            if (typeof this.clientInstance !== 'undefined' && this.clientInstance) {\n                return this.clientInstance;\n            }\n\n            return null;\n        },\n\n        /**\n         * Set the Braintree client instance or null it.\n         *\n         * @param val\n         */\n        setClientInstance: function (val) {\n            this.clientInstance = val;\n        },\n\n        /**\n         * Get the PayPal instance if already instantiated, otherwise null.\n         *\n         * @return {*|null}\n         */\n        getPayPalInstance: function () {\n            if (typeof this.paypalInstance !== 'undefined' && this.paypalInstance) {\n                return this.paypalInstance;\n            }\n\n            return null;\n        },\n\n        /**\n         * Set the PayPal instance or null it by setting the value of the property.\n         *\n         * @param val\n         */\n        setPayPalInstance: function (val) {\n            this.paypalInstance = val;\n        },\n\n        /**\n         * Create the Braintree client instance.\n         *\n         * @param {Function|null} callback\n         */\n        createClientInstance: function (callback = null) {\n            if (this.getClientToken() === null) {\n                this.showError($t('Sorry, but something went wrong.'));\n                return;\n            }\n\n            if (this.getClientInstance()) {\n                if (typeof this.clientConfig.onReady === 'function') {\n                    this.clientConfig.onReady(this);\n                }\n\n                if (typeof callback === 'function') {\n                    callback(this.clientInstance);\n                }\n\n                return;\n            }\n\n            client.create({\n                authorization: this.getClientToken()\n            }, function (clientErr, clientInstance) {\n                if (clientErr) {\n                    console.error('Braintree Setup Error', clientErr);\n                    return this.showError('Sorry, but something went wrong. Please contact the store owner.');\n                }\n\n                let options = {\n                    client: clientInstance\n                };\n\n                if (typeof this.clientConfig.dataCollector === 'object'\n                    && typeof this.clientConfig.dataCollector.paypal === 'boolean')\n                {\n                    options.paypal = true;\n                }\n\n                dataCollector.create(options, function (err, dataCollectorInstance) {\n                    if (err) {\n                        return console.log(err);\n                    }\n                    this.additionalData['device_data'] = dataCollectorInstance.deviceData;\n                }.bind(this));\n\n                this.setClientInstance(clientInstance);\n\n                if (typeof this.clientConfig.onReady === 'function') {\n                    this.clientConfig.onReady(this);\n                }\n\n                if (typeof callback === 'function') {\n                    callback(this.getClientInstance());\n                }\n            }.bind(this));\n        },\n\n        /**\n         * Get Environment\n         *\n         * @returns {String}\n         */\n        getEnvironment: function () {\n            return window.checkoutConfig.payment['braintree_paypal'].environment;\n        },\n\n        /**\n         * Setup PayPal instance\n         */\n        setupPayPal: function () {\n            if (this.getPayPalInstance()) {\n                fullScreenLoader.stopLoader(true);\n                return;\n            }\n\n            paypalCheckout.create({\n                autoSetDataUserIdToken: true,\n                client: this.getClientInstance()\n            }, function (createErr, paypalCheckoutInstance) {\n                if (createErr) {\n                    this.showError(\n                        $t('PayPal Checkout could not be initialized. Please contact the store owner.')\n                    );\n                    console.error('paypalCheckout error', createErr);\n                    return;\n                }\n\n                let quoteObj = quote.totals(),\n\n                    configSDK = {\n                        components: 'buttons,messages,funding-eligibility',\n                        'enable-funding': 'paylater',\n                        currency: quoteObj['base_currency_code']\n                    },\n\n                    buyerCountry = this.getMerchantCountry();\n\n                if (this.getEnvironment() === 'sandbox' && buyerCountry !== null) {\n                    configSDK['buyer-country'] = buyerCountry;\n                }\n\n                paypalCheckoutInstance.loadPayPalSDK(configSDK, function () {\n                    this.loadPayPalButton(paypalCheckoutInstance, 'paypal');\n\n                    if (this.isPayLaterEnabled()) {\n                        this.loadPayPalButton(paypalCheckoutInstance, 'paylater');\n                    }\n                }.bind(this));\n            }.bind(this));\n        },\n\n        /**\n         * Load PayPal buttons\n         *\n         * @param paypalCheckoutInstance\n         * @param funding\n         */\n        loadPayPalButton: function (paypalCheckoutInstance, funding) {\n            let paypalPayment = this.clientConfig.paypal,\n                onPaymentMethodReceived = this.clientConfig.onPaymentMethodReceived,\n\n                style = {\n                    label: this.getLabelByFunding(funding),\n                    color: this.getColorByFunding(funding),\n                    shape: this.getShapeByFunding(funding)\n                },\n\n                payPalButtonId = this.getButtonIdByFunding(funding),\n                payPalButtonElement = $('#' + payPalButtonId),\n                button,\n                events = this.events;\n\n            payPalButtonElement.html('');\n\n            // Render\n            this.setPayPalInstance(paypalCheckoutInstance);\n\n            button = window.paypal.Buttons({\n                fundingSource: funding,\n                env: this.getEnvironment(),\n                style: style,\n                commit: true,\n                locale: this.clientConfig.paypal.locale,\n\n                onInit: function (data, actions) {\n                    let agreements = checkoutAgreements().agreements,\n                        shouldDisableActions = false;\n\n                    actions.disable();\n\n                    _.each(agreements, function (item) {\n                        if (checkoutAgreements().isAgreementRequired(item)) {\n                            let paymentMethodCode = quote.paymentMethod().method,\n                                inputId = '#agreement_' + paymentMethodCode + '_' + item.agreementId,\n                                inputEl = document.querySelector(inputId);\n\n                            if (!inputEl.checked) {\n                                shouldDisableActions = true;\n                            }\n\n                            inputEl.addEventListener('change', function () {\n                                if (additionalValidators.validate(false)) {\n                                    actions.enable();\n                                } else {\n                                    actions.disable();\n                                }\n                            });\n                        }\n                    });\n\n                    if (!shouldDisableActions) {\n                        actions.enable();\n                    }\n                },\n\n                createOrder: function () {\n                    return paypalCheckoutInstance.createPayment(paypalPayment).catch(function (err) {\n                        throw err.details.originalError.details.originalError.paymentResource;\n                    });\n                },\n\n                onCancel: function (data) {\n                    console.log('checkout.js payment cancelled', JSON.stringify(data, 0, 2));\n\n                    if (typeof events.onCancel === 'function') {\n                        events.onCancel();\n                    }\n                },\n\n                onError: function (err) {\n                    if (err.errorName === 'VALIDATION_ERROR'\n                        && err.errorMessage.indexOf('Value is invalid') !== -1\n                    ) {\n                        this.showError(\n                            $t('Address failed validation. Please check and confirm your City, State, and Postal Code')\n                        );\n                    } else {\n                        this.showError($t('PayPal Checkout could not be initialized. Please contact the store owner.'));\n                    }\n\n                    this.setPayPalInstance(null);\n                    console.error('Paypal checkout.js error', err);\n\n                    if (typeof events.onError === 'function') {\n                        events.onError(err);\n                    }\n                }.bind(this),\n\n                onClick: function (data) {\n                    if (!quote.isVirtual()) {\n                        this.clientConfig.paypal.enableShippingAddress = true;\n                        this.clientConfig.paypal.shippingAddressEditable = false;\n                        this.clientConfig.paypal.shippingAddressOverride = this.getShippingAddress();\n                    }\n\n                    // To check term & conditions input checked - validate additional validators.\n                    if (!additionalValidators.validate(false)) {\n                        return false;\n                    }\n\n                    if (typeof events.onClick === 'function') {\n                        events.onClick(data);\n                    }\n                }.bind(this),\n\n                onApprove: function (data) {\n                    return paypalCheckoutInstance.tokenizePayment(data)\n                        .then(function (payload) {\n                            onPaymentMethodReceived(payload);\n                        });\n                }\n\n            });\n\n            if (button.isEligible() && payPalButtonElement.length) {\n                button.render('#' + payPalButtonId).then(function () {\n                    this.enableButton();\n\n                    if (typeof this.clientConfig.onPaymentMethodError === 'function') {\n                        this.clientConfig.onPaymentMethodError();\n                    }\n                }.bind(this)).then(function (data) {\n                    if (typeof events.onRender === 'function') {\n                        events.onRender(data);\n                    }\n                });\n            }\n        },\n\n        /**\n         * Prepare data to place order\n         *\n         * @param {Object} data\n         */\n        beforePlaceOrder: function (data) {\n            this.setPaymentMethodNonce(data.nonce);\n            this.customerEmail(data.details.email);\n            if (quote.isVirtual()) {\n                this.isReviewRequired(true);\n            } else if (this.isRequiredBillingAddress() === '1' && quote.billingAddress() === null) {\n                if (data.details?.billingAddress?.line1) {\n                    this.setBillingAddress(data.details, data.details.billingAddress);\n                } else {\n                    this.setBillingAddress(data.details, data.details.shippingAddress);\n                }\n            } else if (quote.shippingAddress() === quote.billingAddress()) {\n                selectBillingAddress(quote.shippingAddress());\n            } else {\n                selectBillingAddress(quote.billingAddress());\n            }\n            this.placeOrder();\n        },\n\n        /**\n         * Get the component's client token.\n         *\n         * @return {String}\n         */\n        getClientToken: function () {\n            return this.clientToken;\n        },\n\n        /**\n         * Get merchant country\n         *\n         * @returns {*}\n         */\n        getMerchantCountry: function () {\n            return _.get(window.checkoutConfig.payment, ['braintree_paypal', 'merchantCountry'], null);\n        },\n\n        /**\n         * Get PayPal payer email\n         *\n         * @returns {String}\n         */\n        getPayerEmail: function () {\n            return this.details.payerEmail;\n        },\n\n        /**\n         * Get type of payment\n         *\n         * @returns {String}\n         */\n        getPaymentIcon: function () {\n            return window.checkoutConfig.payment['braintree_paypal'].paymentIcon;\n        },\n\n        /**\n         * Get merchant name\n         *\n         * @returns {String}\n         */\n        getMerchantName: function () {\n            return window.checkoutConfig.payment['braintree_paypal'].merchantName;\n        },\n\n        /**\n         * Get payment method data\n         *\n         * @returns {Object}\n         */\n        getData: function () {\n            let data = {\n                'method': this.code,\n                'additional_data': {\n                    'public_hash': this.publicHash,\n                    'payment_method_nonce': this.paymentMethodNonce\n                }\n            };\n\n            data['additional_data'] = _.extend(data['additional_data'], this.additionalData);\n\n            return data;\n        },\n\n        /**\n         * Set payment nonce.\n         *\n         * @param {String} paymentMethodNonce\n         */\n        setPaymentMethodNonce: function (paymentMethodNonce) {\n            this.paymentMethodNonce = paymentMethodNonce;\n        },\n\n        /**\n         * Get shipping address\n         *\n         * @returns {Object}\n         */\n        getShippingAddress: function () {\n            let address = quote.shippingAddress();\n\n            return {\n                recipientName: address.firstname + ' ' + address.lastname,\n                line1: address.street[0],\n                line2: typeof address.street[2] === 'undefined'\n                    ? address.street[1]\n                    : address.street[1] + ' ' + address.street[2],\n                city: address.city,\n                countryCode: address.countryId,\n                postalCode: address.postcode,\n                state: address.regionCode\n            };\n        },\n\n        /**\n         * Update quote billing address\n         *\n         * @param {Object}customer\n         * @param {Object}address\n         */\n        setBillingAddress: function (customer, address) {\n            let billingAddress = {\n                street: [address.line1],\n                city: address.city,\n                postcode: address.postalCode,\n                countryId: address.countryCode,\n                email: customer.email,\n                firstname: customer.firstName,\n                lastname: customer.lastName,\n                telephone: removeNonDigitCharacters(_.get(customer, 'phone', '00000000000'))\n            };\n\n            billingAddress['region_code'] = typeof address.state === 'string' ? address.state : '';\n            billingAddress = createBillingAddress(billingAddress);\n            quote.billingAddress(billingAddress);\n        },\n\n        /**\n         * Disable submit button\n         */\n        disableButton: function () {\n            // stop any previous shown loaders\n            fullScreenLoader.stopLoader(true);\n            fullScreenLoader.startLoader();\n            $('[data-button=\"place\"]').attr('disabled', 'disabled');\n        },\n\n        /**\n         * Enable submit button\n         */\n        enableButton: function () {\n            $('[data-button=\"place\"]').removeAttr('disabled');\n            fullScreenLoader.stopLoader(true);\n        },\n\n        /**\n         * Triggers when customer click \"Continue to PayPal\" button\n         */\n        payWithPayPal: function () {\n            if (additionalValidators.validate(false)) {\n                this.checkout.paypal.initAuthFlow();\n            }\n        },\n\n        /**\n         * Get a kebab case formatted string of the component ID (normally with `_`).\n         *\n         * @return {String|null}\n         */\n        getKebabCaseId: function () {\n            if (this.getId() === null) {\n                return null;\n            }\n\n            return this.getId().replace('_', '-');\n        },\n\n        /**\n         * Get the PayPal button placeholder id.\n         *\n         * @returns {String}\n         */\n        getPayPalButtonId: function () {\n            return this.getId() + '_placeholder';\n        },\n\n        /**\n         * Get PayPal Pay Later button placeholder id.\n         *\n         * @returns {String}\n         */\n        getPayLaterButtonId: function () {\n            return this.getId() + '_paylater_placeholder';\n        },\n\n        /**\n         * Check if Pay Later enabled.\n         *\n         * @returns {boolean}\n         */\n        isPayLaterEnabled: function () {\n            return _.get(window.checkoutConfig.payment, ['braintree_paypal_paylater', 'isActive'], false);\n        },\n\n        /**\n         * Check if Pay Later messaging enabled.\n         *\n         * @returns {boolean}\n         */\n        isPayLaterMessageEnabled: function () {\n            return _.get(window.checkoutConfig.payment, ['braintree_paypal_paylater', 'isMessageActive'], false);\n        },\n\n        /**\n         * Get the formatted grand total.\n         *\n         * @return {string}\n         */\n        getGrandTotalAmount: function () {\n            return formatAmount(this.grandTotalAmount);\n        },\n\n        /**\n         * Get locale\n         *\n         * @returns {String}\n         */\n        getLocale: function () {\n            return _.get(window.checkoutConfig.payment, ['braintree_paypal', 'locale'], '');\n        },\n\n        /**\n         * Is Billing Address required from PayPal side.\n         *\n         * @returns {exports.isRequiredBillingAddress|(function())|boolean|String}\n         */\n        isRequiredBillingAddress: function () {\n            return window.checkoutConfig.payment['braintree_paypal'].isRequiredBillingAddress;\n        },\n\n        /**\n         * Show error message\n         *\n         * @param {String} errorMessage\n         */\n        showError: function (errorMessage) {\n            globalMessageList.addErrorMessage({\n                message: errorMessage\n            });\n            fullScreenLoader.stopLoader(true);\n        },\n\n        /**\n         * Get the Button ID for the required funding\n         *\n         * @param {string} funding\n         * @return {string}\n         */\n        getButtonIdByFunding: function (funding) {\n            if (funding === 'paylater') {\n                return this.getPayLaterButtonId();\n            }\n\n            return this.getPayPalButtonId();\n        },\n\n        /**\n         * Get the label config associated to the PayPal funding source.\n         *\n         * @param {string} funding\n         * @return {string}\n         */\n        getLabelByFunding: function (funding) {\n            return _.get(\n                window.checkoutConfig.payment,\n                [this.getPaymentMethodCodeByFunding(funding), 'style', 'label'],\n                ''\n            );\n        },\n\n        /**\n         * Get the color config associated to the PayPal funding source.\n         *\n         * @param {string} funding\n         * @return {string}\n         */\n        getColorByFunding: function (funding) {\n            return _.get(\n                window.checkoutConfig.payment,\n                [this.getPaymentMethodCodeByFunding(funding), 'style', 'color'],\n                ''\n            );\n        },\n\n        /**\n         * Get the shape config associated to the PayPal funding source.\n         *\n         * @param {string} funding\n         * @return {string}\n         */\n        getShapeByFunding: function (funding) {\n            return _.get(\n                window.checkoutConfig.payment,\n                [this.getPaymentMethodCodeByFunding(funding), 'style', 'shape'],\n                ''\n            );\n        },\n\n        /**\n         * Get the payment method code related to the PayPal funding source.\n         *\n         * @param {string} funding\n         * @return {string}\n         */\n        getPaymentMethodCodeByFunding: function (funding) {\n            if (funding === 'paylater') {\n                return 'braintree_paypal_paylater';\n            }\n\n            return 'braintree_paypal';\n        }\n    });\n});\n","PayPal_Braintree/js/view/payment/method-renderer/hosted-fields.js":"/**\n * Copyright 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n\ndefine([\n    'jquery',\n    'PayPal_Braintree/js/view/payment/method-renderer/cc-form',\n    'PayPal_Braintree/js/model/vault-enabler',\n    'PayPal_Braintree/js/validator',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'mage/translate'\n], function ($, Component, vaultEnablerModel, validator, additionalValidators, $t) {\n    'use strict';\n\n    return Component.extend({\n\n        defaults: {\n            template: 'PayPal_Braintree/payment/form',\n            clientConfig: {\n\n                /**\n                 * {String}\n                 */\n                id: 'co-transparent-form-braintree'\n            },\n            isValidCardNumber: false,\n            isValidExpirationDate: false,\n            isValidCvvNumber: false,\n\n            onInstanceReady: function (instance) {\n                instance.on('validityChange', this.onValidityChange.bind(this));\n                instance.on('cardTypeChange', this.onCardTypeChange.bind(this));\n            }\n        },\n\n        /**\n         * @returns {exports.initialize}\n         */\n        initialize: function () {\n            this._super();\n            this.vaultEnabler = vaultEnablerModel.getVaultEnabler();\n            vaultEnablerModel.setPaymentCode(this.getVaultCode());\n\n            return this;\n        },\n\n        /**\n         * Init config\n         */\n        initClientConfig: function () {\n            this._super();\n\n            this.clientConfig.hostedFields = this.getHostedFields();\n            this.clientConfig.styles = {\n                'input': {\n                    'font-size': '14pt',\n                    'color': '#3A3A3A'\n                },\n                ':focus': {\n                    'color': 'black'\n                },\n                '.valid': {\n                    'color': 'green'\n                },\n                '.invalid': {\n                    'color': 'red'\n                }\n            };\n            this.clientConfig.onInstanceReady = this.onInstanceReady.bind(this);\n        },\n\n        /**\n         * @returns {Object}\n         */\n        getData: function () {\n            var data = this._super();\n\n            vaultEnablerModel.visitAdditionalData(data);\n\n            return data;\n        },\n\n        /**\n         * @returns {Bool}\n         */\n        isVaultEnabled: function () {\n            return vaultEnablerModel.isVaultEnabled();\n        },\n\n        /**\n         * Get Braintree Hosted Fields\n         * @returns {Object}\n         */\n        getHostedFields: function () {\n            var self = this,\n                fields = {\n                    number: {\n                        selector: self.getSelector('cc_number'),\n                        placeholder: $t('4111 1111 1111 1111')\n                    },\n                    expirationDate: {\n                        selector: self.getSelector('expirationDate'),\n                        placeholder: $t('MM/YYYY')\n                    }\n                };\n\n            if (self.hasVerification()) {\n                fields.cvv = {\n                    selector: self.getSelector('cc_cid'),\n                    placeholder: $t('123')\n                };\n            }\n\n            return fields;\n        },\n\n        /**\n         * Triggers on Hosted Field changes\n         * @param {Object} event\n         * @returns {Boolean}\n         */\n        onValidityChange: function (event) {\n            // Handle a change in validation or card type\n            if (event.emittedBy === 'number') {\n                this.selectedCardType(null);\n\n                if (event.cards.length === 1) {\n                    this.isValidCardNumber = event.fields.number.isValid;\n                    this.selectedCardType(\n                        validator.getMageCardType(event.cards[0].type, this.getCcAvailableTypes())\n                    );\n                    this.validateCardType();\n                } else {\n                    this.isValidCardNumber = event.fields.number.isValid;\n                    this.validateCardType();\n                }\n            }\n\n            // Other field validations\n            if (event.emittedBy === 'expirationDate') {\n                this.isValidExpirationDate = event.fields.expirationDate.isValid;\n            }\n            if (event.emittedBy === 'cvv') {\n                this.isValidCvvNumber = event.fields.cvv.isValid;\n            }\n        },\n\n        /**\n         * Triggers on Hosted Field card type changes\n         * @param {Object} event\n         * @returns {Boolean}\n         */\n        onCardTypeChange: function (event) {\n            if (event.cards.length === 1) {\n                this.selectedCardType(\n                    validator.getMageCardType(event.cards[0].type, this.getCcAvailableTypes())\n                );\n            } else {\n                this.selectedCardType(null);\n            }\n        },\n\n        /**\n         * Toggle invalid class on selector\n         * @param selector\n         * @param state\n         * @returns {boolean}\n         */\n        validateField: function (selector, state) {\n            var $selector = $(this.getSelector(selector)),\n                invalidClass = 'braintree-hosted-fields-invalid';\n\n            if (state === true) {\n                $selector.removeClass(invalidClass);\n                return true;\n            }\n\n            $selector.addClass(invalidClass);\n            return false;\n        },\n\n        /**\n         * Validate current credit card type\n         * @returns {Boolean}\n         */\n        validateCardType: function () {\n            return this.validateField(\n                'cc_number',\n                this.isValidCardNumber\n            );\n        },\n\n        /**\n         * Validate current expiry date\n         * @returns {boolean}\n         */\n        validateExpirationDate: function () {\n            return this.validateField(\n                'expirationDate',\n                this.isValidExpirationDate === true\n            );\n        },\n\n        /**\n         * Validate current CVV field\n         * @returns {boolean}\n         */\n        validateCvvNumber: function () {\n            var self = this;\n\n            if (self.hasVerification() === false) {\n                return true;\n            }\n\n            return this.validateField(\n                'cc_cid',\n                this.isValidCvvNumber === true\n            );\n        },\n\n        /**\n         * Validate all fields\n         * @returns {boolean}\n         */\n        validateFormFields: function () {\n            return (this.validateCardType() && this.validateExpirationDate() && this.validateCvvNumber()) === true;\n        },\n\n        /**\n         * Trigger order placing\n         */\n        placeOrderClick: function () {\n            if (this.validateFormFields() && additionalValidators.validate()) {\n                this.placeOrder();\n            }\n        },\n\n        /**\n         * @returns {String}\n         */\n        getVaultCode: function () {\n            return window.checkoutConfig.payment[this.getCode()].ccVaultCode;\n        }\n    });\n});\n","PayPal_Braintree/js/view/payment/method-renderer/venmo.js":"define(\n    [\n        'Magento_Checkout/js/view/payment/default',\n        'braintree',\n        'braintreeDataCollector',\n        'braintreeVenmo',\n        'PayPal_Braintree/js/form-builder',\n        'Magento_Ui/js/model/messageList',\n        'Magento_Checkout/js/model/full-screen-loader',\n        'Magento_Checkout/js/model/payment/additional-validators',\n        'mage/translate',\n        'Magento_Vault/js/view/payment/vault-enabler',\n        'underscore'\n    ],\n    function (\n        Component,\n        braintree,\n        dataCollector,\n        venmo,\n        formBuilder,\n        messageList,\n        fullScreenLoader,\n        additionalValidators,\n        $t,\n        VaultEnabler,\n        _\n    ) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                deviceData: null,\n                paymentMethodNonce: null,\n                template: 'PayPal_Braintree/payment/venmo',\n                venmoInstance: null,\n                vaultEnabler: null\n            },\n\n            clickVenmoBtn: function () {\n                var self = this;\n\n                if (!additionalValidators.validate()) {\n                    return false;\n                }\n\n                if (!this.venmoInstance) {\n                    this.setErrorMsg($t('Venmo not initialized, please try reloading.'));\n                    return;\n                }\n\n                this.venmoInstance.tokenize(function (tokenizeErr, payload) {\n                    if (tokenizeErr) {\n                        if (tokenizeErr.code === 'VENMO_CANCELED') {\n                            self.setErrorMsg($t('Venmo app is not available or the payment flow was cancelled.'));\n                        } else if (tokenizeErr.code === 'VENMO_APP_CANCELED') {\n                            self.setErrorMsg($t('Venmo payment flow cancelled.'));\n                        } else {\n                            self.setErrorMsg(tokenizeErr.message);\n                        }\n                    } else {\n                        self.handleVenmoSuccess(payload);\n                    }\n                });\n            },\n\n            collectDeviceData: function (clientInstance, callback) {\n                var self = this;\n\n                dataCollector.create({\n                    client: clientInstance,\n                    paypal: true\n                }, function (dataCollectorErr, dataCollectorInstance) {\n                    if (dataCollectorErr) {\n                        return;\n                    }\n                    self.deviceData = dataCollectorInstance.deviceData;\n                    callback();\n                });\n            },\n\n            getClientToken: function () {\n                return window.checkoutConfig.payment[this.getCode()].clientToken;\n            },\n\n            getCode: function () {\n                return 'braintree_venmo';\n            },\n\n            getData: function () {\n                let data = {\n                    'method': this.getCode(),\n                    'additional_data': {\n                        'payment_method_nonce': this.paymentMethodNonce,\n                        'device_data': this.deviceData\n                    }\n                };\n\n                data['additional_data'] = _.extend(data['additional_data'], this.additionalData);\n                this.vaultEnabler.visitAdditionalData(data);\n\n                return data;\n            },\n\n            getPaymentMarkSrc: function () {\n                return window.checkoutConfig.payment[this.getCode()].paymentMarkSrc;\n            },\n\n            getTitle: function () {\n                return 'Venmo';\n            },\n\n            handleVenmoSuccess: function (payload) {\n                this.setPaymentMethodNonce(payload.nonce);\n                this.placeOrder();\n            },\n\n            initialize: function () {\n                var self = this;\n\n                this._super();\n                this.vaultEnabler = new VaultEnabler();\n                this.vaultEnabler.setPaymentCode(this.getVaultCode());\n\n                this.vaultEnabler.isActivePaymentTokenEnabler.subscribe(function () {\n                    self.venmoInstance.teardown(function () {\n                        self.initVenmo();\n                    });\n\n                });\n                this.initVenmo();\n                return this;\n            },\n\n            isAllowed: function () {\n                return window.checkoutConfig.payment[this.getCode()].isAllowed;\n            },\n\n            setErrorMsg: function (message) {\n                messageList.addErrorMessage({\n                    message: message\n                });\n            },\n\n            setPaymentMethodNonce: function (nonce) {\n                this.paymentMethodNonce = nonce;\n            },\n\n            setVenmoInstance: function (instance) {\n                this.venmoInstance = instance;\n            },\n\n            isVaultEnabled: function () {\n                return this.vaultEnabler.isVaultEnabled();\n            },\n\n            /**\n             * @returns {String}\n             */\n            getVaultCode: function () {\n                return window.checkoutConfig.payment[this.getCode()].vaultCode;\n            },\n\n            getPaymentMethodUsage: function () {\n                return this.vaultEnabler.isActivePaymentTokenEnabler()\n                    ? 'multi_use'\n                    : 'single_use';\n            },\n\n            initVenmo: function () {\n                var self = this;\n\n                braintree.create({\n                    authorization: self.getClientToken()\n                }, function (clientError, clientInstance) {\n                    if (clientError) {\n                        this.setErrorMsg($t('Unable to initialize Braintree Client.'));\n                        return;\n                    }\n\n                    // Collect device data\n                    self.collectDeviceData(clientInstance, function () {\n                        // callback from collectDeviceData\n                        venmo.create({\n                            client: clientInstance,\n                            allowDesktop: true,\n                            allowDesktopWebLogin: true,\n                            mobileWebFallBack: true,\n                            paymentMethodUsage: self.getPaymentMethodUsage(),\n                            allowNewBrowserTab: false\n                        }, function (venmoErr, venmoInstance) {\n                            if (venmoErr) {\n                                self.setErrorMsg($t('Error initializing Venmo: %1').replace('%1', venmoErr));\n                                return;\n                            }\n\n                            if (!venmoInstance.isBrowserSupported()) {\n                                console.log('Browser does not support Venmo');\n                                return;\n                            }\n\n                            self.setVenmoInstance(venmoInstance);\n                        });\n                    });\n                });\n            }\n        });\n    }\n);\n","PayPal_Braintree/js/view/payment/method-renderer/lpm.js":"define(\n    [\n        'Magento_Checkout/js/view/payment/default',\n        'ko',\n        'underscore',\n        'jquery',\n        'braintree',\n        'braintreeLpm',\n        'PayPal_Braintree/js/form-builder',\n        'Magento_Ui/js/model/messageList',\n        'Magento_Checkout/js/action/select-billing-address',\n        'PayPal_Braintree/js/helper/remove-non-digit-characters',\n        'Magento_Checkout/js/model/full-screen-loader',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/model/payment/additional-validators',\n        'mage/url',\n        'mage/translate'\n    ],\n    function (\n        Component,\n        ko,\n        _,\n        $,\n        braintree,\n        lpm,\n        formBuilder,\n        messageList,\n        selectBillingAddress,\n        removeNonDigitCharacters,\n        fullScreenLoader,\n        quote,\n        additionalValidators,\n        url,\n        $t\n    ) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                code: 'braintree_local_payment',\n                paymentMethodsAvailable: ko.observable(false),\n                paymentMethodNonce: null,\n                template: 'PayPal_Braintree/payment/lpm'\n            },\n\n            clickPaymentBtn: function (method) {\n                let self = this;\n\n                if (additionalValidators.validate()) {\n                    fullScreenLoader.startLoader();\n\n                    braintree.create({\n                        authorization: self.getClientToken()\n                    }, function (clientError, clientInstance) {\n                        if (clientError) {\n                            self.setErrorMsg($t('Unable to initialize Braintree Client.'));\n                            fullScreenLoader.stopLoader();\n                            return;\n                        }\n\n                        lpm.create({\n                            client: clientInstance,\n                            merchantAccountId: self.getMerchantAccountId()\n                        }, function (lpmError, lpmInstance) {\n                            if (lpmError) {\n                                self.setErrorMsg(lpmError);\n                                fullScreenLoader.stopLoader();\n                                return;\n                            }\n\n                            lpmInstance.startPayment({\n                                amount: self.getAmount(),\n                                currencyCode: self.getCurrencyCode(),\n                                email: self.getCustomerDetails().email,\n                                phone: removeNonDigitCharacters(_.get(self.getCustomerDetails(), 'phone', '')),\n                                givenName: self.getCustomerDetails().firstName,\n                                surname: self.getCustomerDetails().lastName,\n                                shippingAddressRequired: !quote.isVirtual(),\n                                address: self.getAddress(),\n                                paymentType: method,\n                                onPaymentStart: function (data, start) {\n                                    start();\n                                },\n                                // This is a required option, however it will apparently never be used in the current\n                                // payment flow. Therefore, both values are set to allow the payment flow to continue,\n                                // rather than error out.\n                                fallback: {\n                                    url: self.getFallbackUrl(),\n                                    buttonText: self.getFallbackButtonText()\n                                }\n                            }, function (startPaymentError, payload) {\n                                fullScreenLoader.stopLoader();\n                                if (startPaymentError) {\n                                    switch (startPaymentError.code) {\n                                    case 'LOCAL_PAYMENT_POPUP_CLOSED':\n                                        self.setErrorMsg($t('Local Payment popup was closed unexpectedly.'));\n                                        break;\n                                    case 'LOCAL_PAYMENT_WINDOW_OPEN_FAILED':\n                                        self.setErrorMsg($t('Local Payment popup failed to open.'));\n                                        break;\n                                    case 'LOCAL_PAYMENT_WINDOW_CLOSED':\n                                        self.setErrorMsg($t('Local Payment popup was closed. Payment cancelled.'));\n                                        break;\n                                    default:\n                                        self.setErrorMsg('Error! ' + startPaymentError);\n                                        break;\n                                    }\n                                } else {\n                                    // Send the nonce to your server to create a transaction\n                                    self.setPaymentMethodNonce(payload.nonce);\n                                    self.placeOrder();\n                                }\n                            });\n                        });\n                    });\n                }\n            },\n\n            getAddress: function () {\n                let shippingAddress = quote.shippingAddress();\n\n                if (quote.isVirtual()) {\n                    return {\n                        countryCode: shippingAddress.countryId\n                    };\n                }\n\n                return {\n                    streetAddress: shippingAddress.street[0],\n                    extendedAddress: shippingAddress.street[1],\n                    locality: shippingAddress.city,\n                    postalCode: shippingAddress.postcode,\n                    region: shippingAddress.region,\n                    countryCode: shippingAddress.countryId\n                };\n            },\n\n            getAmount: function () {\n                return quote.totals()['base_grand_total'].toString();\n            },\n\n            getBillingAddress: function () {\n                return quote.billingAddress();\n            },\n\n            getClientToken: function () {\n                return window.checkoutConfig.payment[this.getCode()].clientToken;\n            },\n\n            getCode: function () {\n                return this.code;\n            },\n\n            getCurrencyCode: function () {\n                return quote.totals()['base_currency_code'];\n            },\n\n            getCustomerDetails: function () {\n                let billingAddress = quote.billingAddress();\n\n                return {\n                    firstName: billingAddress.firstname,\n                    lastName: billingAddress.lastname,\n                    phone: billingAddress.telephone !== null ? billingAddress.telephone : '',\n                    email: typeof quote.guestEmail === 'string'\n                        ? quote.guestEmail : window.checkoutConfig.customerData.email\n                };\n            },\n\n            getData: function () {\n                let data = {\n                    'method': this.getCode(),\n                    'additional_data': {\n                        'payment_method_nonce': this.paymentMethodNonce\n                    }\n                };\n\n                data['additional_data'] = _.extend(data['additional_data'], this.additionalData);\n\n                return data;\n            },\n\n            getMerchantAccountId: function () {\n                return window.checkoutConfig.payment[this.getCode()].merchantAccountId;\n            },\n\n            getPaymentMethod: function (method) {\n                let methods = this.getPaymentMethods();\n\n                for (let i = 0; i < methods.length; i++) {\n                    if (methods[i].method === method) {\n                        return methods[i];\n                    }\n                }\n            },\n\n            /**\n             * Get allowed local payment methods\n             *\n             * @returns {*}\n             */\n            getPaymentMethods: function () {\n                return window.checkoutConfig.payment[this.getCode()].allowedMethods;\n            },\n\n            /**\n             * Get payment icons\n             *\n             * @returns {*}\n             */\n            getPaymentMarkSrc: function () {\n                return window.checkoutConfig.payment[this.getCode()].paymentIcons;\n            },\n\n            /**\n             * Get title\n             *\n             * @returns {*}\n             */\n            getTitle: function () {\n                return window.checkoutConfig.payment[this.getCode()].title;\n            },\n\n            /**\n             * Get fallback url\n             *\n             * @returns {String}\n             */\n            getFallbackUrl: function () {\n                return window.checkoutConfig.payment[this.getCode()].fallbackUrl;\n            },\n\n            /**\n             * Get fallback button text\n             * @returns {String}\n             */\n            getFallbackButtonText: function () {\n                return window.checkoutConfig.payment[this.getCode()].fallbackButtonText;\n            },\n\n            /**\n             * Initialize\n             *\n             * @returns {*}\n             */\n            initialize: function () {\n                this._super();\n                return this;\n            },\n\n            /**\n             * Is payment method active?\n             *\n             * @returns {boolean}\n             */\n            isActive: function () {\n                let address = quote.billingAddress() || quote.shippingAddress(),\n                    methods = this.getPaymentMethods();\n\n                for (let i = 0; i < methods.length; i++) {\n                    if (methods[i].countries.includes(address.countryId)) {\n                        return true;\n                    }\n                }\n\n                return false;\n            },\n\n            /**\n             * Is country and currency valid?\n             *\n             * @param method\n             * @returns {boolean}\n             */\n            isValidCountryAndCurrency: function (method) {\n                let address = quote.billingAddress(),\n                    countryId = address?.countryId,\n                    quoteCurrency = quote.totals()['base_currency_code'],\n                    paymentMethodDetails = this.getPaymentMethod(method);\n\n                if (!address) {\n                    this.paymentMethodsAvailable(false);\n                    return false;\n                }\n\n                if (countryId !== 'GB' && paymentMethodDetails.countries.includes(countryId)\n                    && (quoteCurrency === 'EUR' || quoteCurrency === 'PLN') || countryId === 'GB'\n                    && paymentMethodDetails.countries.includes(countryId) && quoteCurrency === 'GBP') {\n                    this.paymentMethodsAvailable(true);\n                    return true;\n                }\n\n                return false;\n            },\n\n            /**\n             * Set error message\n             *\n             * @param message\n             */\n            setErrorMsg: function (message) {\n                messageList.addErrorMessage({\n                    message: message\n                });\n            },\n\n            /**\n             * Set payment method nonce\n             *\n             * @param nonce\n             */\n            setPaymentMethodNonce: function (nonce) {\n                this.paymentMethodNonce = nonce;\n            },\n\n            /**\n             * Validate form\n             *\n             * @param form\n             * @returns {*|jQuery}\n             */\n            validateForm: function (form) {\n                return $(form).validation() && $(form).validation('isValid');\n            }\n        });\n    }\n);\n","PayPal_Braintree/js/view/payment/method-renderer/googlepay-vault.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\ndefine([\n    'ko',\n    'jquery',\n    'underscore',\n    'Magento_Vault/js/view/payment/method-renderer/vault',\n    'Magento_Ui/js/model/messageList',\n    'PayPal_Braintree/js/view/payment/validator-handler',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'Magento_Checkout/js/model/full-screen-loader'\n], function (\n    ko,\n    $,\n    _,\n    VaultComponent,\n    globalMessageList,\n    validatorManager,\n    additionalValidators,\n    fullScreenLoader\n) {\n    'use strict';\n\n    return VaultComponent.extend({\n        defaults: {\n            active: false,\n            imports: {\n                onActiveChange: 'active'\n            },\n            template: 'PayPal_Braintree/googlepay/vault',\n            validatorManager: validatorManager,\n            additionalData: {}\n        },\n\n        /**\n         * @returns {exports}\n         */\n        initObservable: function () {\n            this._super().observe(['active']);\n            this.validatorManager.initialize();\n            return this;\n        },\n\n        /**\n         * Is payment option active?\n         *\n         * @returns {boolean}\n         */\n        isActive: function () {\n            let active = this.getId() === this.isChecked();\n\n            this.active(active);\n            return active;\n        },\n\n        /**\n         * Return the payment method code.\n         *\n         * @returns {string}\n         */\n        getCode: function () {\n            return this.code;\n        },\n\n        /**\n         * Get last 4 digits of card.\n         *\n         * @returns {String}\n         */\n        getMaskedCard: function () {\n            return this.details.maskedCC;\n        },\n\n        /**\n         * Get expiration date.\n         *\n         * @returns {String}\n         */\n        getExpirationDate: function () {\n            return this.details.expirationDate;\n        },\n\n        /**\n         * Get card type.\n         *\n         * @returns {String}\n         */\n        getCardType: function () {\n            return this.details.type;\n        },\n\n        /**\n         * trigger Place order action.\n         *\n         * Set payment method nonce & place order.\n         */\n        triggerPlaceOrder: function () {\n            this.getPaymentMethodNonce();\n        },\n\n        /**\n         * Send request to get payment method nonce & places order.\n         */\n        getPaymentMethodNonce: function () {\n            let self = this;\n\n            fullScreenLoader.startLoader();\n            $.getJSON(self.nonceUrl, {\n                'public_hash': self.publicHash\n            }).done(function (response) {\n                fullScreenLoader.stopLoader();\n                self.additionalData['payment_method_nonce'] = response.paymentMethodNonce;\n                self.placeOrder();\n            }).fail(function (response) {\n                let error = JSON.parse(response.responseText);\n\n                fullScreenLoader.stopLoader();\n                globalMessageList.addErrorMessage({\n                    message: error.message\n                });\n            });\n        },\n\n        /**\n         * Get payment method data.\n         *\n         * @returns {Object}\n         */\n        getData: function () {\n            let data = {\n                'method': this.code,\n                'additional_data': {\n                    'public_hash': this.publicHash\n                }\n            };\n\n            data['additional_data'] = _.extend(data['additional_data'], this.additionalData);\n\n            return data;\n        },\n\n        /**\n         * Return image url for the Google Pay mark\n         */\n        getPaymentMarkSrc: function () {\n            return window.checkoutConfig.payment['braintree_googlepay'].paymentMarkSrc;\n        }\n    });\n});\n","PayPal_Braintree/js/view/payment/method-renderer/applepay-vault.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\ndefine([\n    'ko',\n    'jquery',\n    'underscore',\n    'Magento_Vault/js/view/payment/method-renderer/vault',\n    'Magento_Ui/js/model/messageList',\n    'PayPal_Braintree/js/view/payment/validator-handler',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'Magento_Checkout/js/model/full-screen-loader'\n], function (\n    ko,\n    $,\n    _,\n    VaultComponent,\n    globalMessageList,\n    validatorManager,\n    additionalValidators,\n    fullScreenLoader\n) {\n    'use strict';\n\n    return VaultComponent.extend({\n        defaults: {\n            active: false,\n            imports: {\n                onActiveChange: 'active'\n            },\n            template: 'PayPal_Braintree/applepay/vault',\n            validatorManager: validatorManager,\n            additionalData: {}\n        },\n\n        /**\n         * @returns {exports}\n         */\n        initObservable: function () {\n            this._super().observe(['active']);\n            this.validatorManager.initialize();\n            return this;\n        },\n\n        /**\n         * Is payment option active?\n         *\n         * @returns {boolean}\n         */\n        isActive: function () {\n            let active = this.getId() === this.isChecked();\n\n            this.active(active);\n            return active;\n        },\n\n        /**\n         * Return the payment method code.\n         *\n         * @returns {string}\n         */\n        getCode: function () {\n            return 'braintree_applepay_vault';\n        },\n\n        /**\n         * Get last 4 digits of card.\n         *\n         * @returns {String}\n         */\n        getMaskedCard: function () {\n            return this.details.maskedCC;\n        },\n\n        /**\n         * Get expiration date.\n         *\n         * @returns {String}\n         */\n        getExpirationDate: function () {\n            return this.details.expirationDate;\n        },\n\n        /**\n         * Get card type.\n         *\n         * @returns {String}\n         */\n        getCardType: function () {\n            return this.details.type;\n        },\n\n        /**\n         * trigger Place order action.\n         *\n         * Set payment method nonce & place order.\n         */\n        triggerPlaceOrder: function () {\n            this.getPaymentMethodNonce();\n        },\n\n        /**\n         * Send request to get payment method nonce & places order.\n         */\n        getPaymentMethodNonce: function () {\n            let self = this;\n\n            fullScreenLoader.startLoader();\n            $.getJSON(self.nonceUrl, {\n                'public_hash': self.publicHash\n            }).done(function (response) {\n                fullScreenLoader.stopLoader();\n                self.additionalData['payment_method_nonce'] = response.paymentMethodNonce;\n                self.placeOrder();\n            }).fail(function (response) {\n                let error = JSON.parse(response.responseText);\n\n                fullScreenLoader.stopLoader();\n                globalMessageList.addErrorMessage({\n                    message: error.message\n                });\n            });\n        },\n\n        /**\n         * Get payment method data.\n         *\n         * @returns {Object}\n         */\n        getData: function () {\n            let data = {\n                'method': this.code,\n                'additional_data': {\n                    'public_hash': this.publicHash\n                }\n            };\n\n            data['additional_data'] = _.extend(data['additional_data'], this.additionalData);\n\n            return data;\n        },\n\n        /**\n         * Return image url for the apple pay mark\n         */\n        getPaymentMarkSrc: function () {\n            return window.checkoutConfig.payment['braintree_applepay'].paymentMarkSrc;\n        }\n    });\n});\n","PayPal_Braintree/js/view/payment/method-renderer/venmo-vault.js":"/*browser:true*/\n\ndefine([\n    'ko',\n    'jquery',\n    'underscore',\n    'Magento_Vault/js/view/payment/method-renderer/vault',\n    'Magento_Ui/js/model/messageList',\n    'PayPal_Braintree/js/view/payment/validator-handler',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'Magento_Checkout/js/model/full-screen-loader'\n], function (\n    ko,\n    $,\n    _,\n    VaultComponent,\n    globalMessageList,\n    validatorManager,\n    additionalValidators,\n    fullScreenLoader\n) {\n    'use strict';\n\n    return VaultComponent.extend({\n        defaults: {\n            active: false,\n            imports: {\n                onActiveChange: 'active'\n            },\n            template: 'PayPal_Braintree/payment/venmo/vault',\n            validatorManager: validatorManager,\n            additionalData: {}\n        },\n\n        /**\n         * @returns {exports}\n         */\n        initObservable: function () {\n            this._super().observe(['active']);\n            this.validatorManager.initialize();\n            return this;\n        },\n\n        /**\n         * Is payment option active?\n         *\n         * @returns {boolean}\n         */\n        isActive: function () {\n            let active = this.getId() === this.isChecked();\n\n            this.active(active);\n            return active;\n        },\n\n        /**\n         * Return the payment method code.\n         *\n         * @returns {string}\n         */\n        getCode: function () {\n            return 'braintree_venmo_vault';\n        },\n\n        /**\n         * Get venmo username\n         *\n         * @returns {String}\n         */\n        getVenmoUsername: function () {\n            return this.details.username;\n        },\n\n        /**\n         * Get the Venmo icon\n         *\n         * @param type\n         * @return {*|boolean}\n         */\n        getVenmoIcon() {\n            return window.checkoutConfig.payment.braintree_venmo.paymentMarkSrc;\n        },\n\n        /**\n         * trigger Place order action.\n         *\n         * Set payment method nonce & place order.\n         */\n        triggerPlaceOrder: function () {\n            this.getPaymentMethodNonce();\n        },\n\n        /**\n         * Send request to get payment method nonce & places order.\n         */\n        getPaymentMethodNonce: function () {\n            let self = this;\n\n            fullScreenLoader.startLoader();\n            $.getJSON(self.nonceUrl, {\n                'public_hash': self.publicHash\n            }).done(function (response) {\n                fullScreenLoader.stopLoader();\n                self.additionalData['payment_method_nonce'] = response.paymentMethodNonce;\n                self.placeOrder();\n            }).fail(function (response) {\n                let error = JSON.parse(response.responseText);\n\n                fullScreenLoader.stopLoader();\n                globalMessageList.addErrorMessage({\n                    message: error.message\n                });\n            });\n        },\n\n        /**\n         * Get payment method data.\n         *\n         * @returns {Object}\n         */\n        getData: function () {\n            let data = {\n                'method': this.code,\n                'additional_data': {\n                    'public_hash': this.publicHash\n                }\n            };\n\n            data['additional_data'] = _.extend(data['additional_data'], this.additionalData);\n\n            return data;\n        }\n    });\n});\n","PayPal_Braintree/js/view/payment/method-renderer/paypal-vault.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\ndefine([\n    'jquery',\n    'underscore',\n    'Magento_Vault/js/view/payment/method-renderer/vault',\n    'Magento_Ui/js/model/messageList',\n    'Magento_Checkout/js/model/full-screen-loader'\n], function ($, _, VaultComponent, globalMessageList, fullScreenLoader) {\n    'use strict';\n\n    return VaultComponent.extend({\n        defaults: {\n            template: 'PayPal_Braintree/payment/paypal/vault',\n            additionalData: {}\n        },\n\n        /**\n         * Get PayPal payer email\n         * @returns {String}\n         */\n        getPayerEmail: function () {\n            return this.details.payerEmail;\n        },\n\n        /**\n         * Get type of payment\n         * @returns {String}\n         */\n        getPaymentIcon: function () {\n            return window.checkoutConfig.payment['braintree_paypal'].paymentIcon;\n        },\n\n        /**\n         * Place order\n         */\n        beforePlaceOrder: function () {\n            this.getPaymentMethodNonce();\n        },\n\n        /**\n         * Send request to get payment method nonce\n         */\n        getPaymentMethodNonce: function () {\n            var self = this;\n\n            fullScreenLoader.startLoader();\n            $.getJSON(self.nonceUrl, {\n                'public_hash': self.publicHash\n            })\n                .done(function (response) {\n                    fullScreenLoader.stopLoader();\n                    self.additionalData['payment_method_nonce'] = response.paymentMethodNonce;\n                    self.placeOrder();\n                })\n                .fail(function (response) {\n                    var error = JSON.parse(response.responseText);\n\n                    fullScreenLoader.stopLoader();\n                    globalMessageList.addErrorMessage({\n                        message: error.message\n                    });\n                });\n        },\n\n        /**\n         * Get payment method data\n         * @returns {Object}\n         */\n        getData: function () {\n            var data = {\n                'method': this.code,\n                'additional_data': {\n                    'public_hash': this.publicHash\n                }\n            };\n\n            data['additional_data'] = _.extend(data['additional_data'], this.additionalData);\n\n            return data;\n        }\n    });\n});\n","PayPal_Braintree/js/view/payment/method-renderer/ach-vault.js":"/*browser:true*/\ndefine([\n    'ko',\n    'jquery',\n    'underscore',\n    'Magento_Vault/js/view/payment/method-renderer/vault',\n    'Magento_Ui/js/model/messageList',\n    'PayPal_Braintree/js/view/payment/validator-handler',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'Magento_Checkout/js/model/full-screen-loader'\n], function (\n    ko,\n    $,\n    _,\n    VaultComponent,\n    globalMessageList,\n    validatorManager,\n    additionalValidators,\n    fullScreenLoader\n) {\n    'use strict';\n\n    return VaultComponent.extend({\n        defaults: {\n            active: false,\n            imports: {\n                onActiveChange: 'active'\n            },\n            template: 'PayPal_Braintree/payment/ach/vault',\n            validatorManager: validatorManager,\n            additionalData: {}\n        },\n\n        /**\n         * @returns {exports}\n         */\n        initObservable: function () {\n            this._super().observe(['active']);\n            this.validatorManager.initialize();\n            return this;\n        },\n\n        /**\n         * Is payment option active?\n         *\n         * @returns {boolean}\n         */\n        isActive: function () {\n            let active = this.getId() === this.isChecked();\n\n            this.active(active);\n            return active;\n        },\n\n        /**\n         * Return the payment method code.\n         *\n         * @returns {String}\n         */\n        getCode: function () {\n            return 'braintree_ach_direct_debit_vault';\n        },\n\n        /**\n         * Get Bank Account last 4 digits.\n         *\n         * @returns {String}\n         */\n        getAccountNumberLastFourDigits: function () {\n            return this.details.last4;\n        },\n\n        /**\n         *\n         * Get bank's routing number\n         *\n         * @returns {String}\n         */\n        getRoutingNumber: function () {\n            return this.details.routingNumber;\n        },\n\n        /**\n         * Get the ACH icon.\n         *\n         * @return {String}\n         */\n        getPaymentIcon() {\n            return window.checkoutConfig.payment['braintree_ach_direct_debit'].paymentIcon;\n        },\n\n        /**\n         * Trigger Place order action.\n         *\n         * Set payment method nonce & place order.\n         */\n        triggerPlaceOrder: function () {\n            this.getPaymentMethodNonce();\n        },\n\n        /**\n         * Send request to get payment method nonce & places order.\n         */\n        getPaymentMethodNonce: function () {\n            let self = this;\n\n            fullScreenLoader.startLoader();\n            $.getJSON(self.nonceUrl, {\n                'public_hash': self.publicHash\n            }).done(function (response) {\n                fullScreenLoader.stopLoader();\n                self.additionalData['payment_method_nonce'] = response.paymentMethodNonce;\n                self.placeOrder();\n            }).fail(function (response) {\n                let error = JSON.parse(response.responseText);\n\n                fullScreenLoader.stopLoader();\n                globalMessageList.addErrorMessage({\n                    message: error.message\n                });\n            });\n        },\n\n        /**\n         * Get payment method data.\n         *\n         * @returns {Object}\n         */\n        getData: function () {\n            let data = {\n                'method': this.code,\n                'additional_data': {\n                    'public_hash': this.publicHash\n                }\n            };\n\n            data['additional_data'] = _.extend(data['additional_data'], this.additionalData);\n\n            return data;\n        }\n    });\n});\n","PayPal_Braintree/js/view/payment/method-renderer/vault.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\ndefine([\n    'ko',\n    'jquery',\n    'Magento_Vault/js/view/payment/method-renderer/vault',\n    'PayPal_Braintree/js/view/payment/adapter',\n    'Magento_Ui/js/model/messageList',\n    'PayPal_Braintree/js/view/payment/validator-handler',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'Magento_Checkout/js/model/full-screen-loader',\n    'braintree',\n    'braintreeHostedFields',\n    'braintreeDataCollector',\n    'mage/url'\n], function (\n    ko,\n    $,\n    VaultComponent,\n    Braintree,\n    globalMessageList,\n    validatorManager,\n    additionalValidators,\n    fullScreenLoader,\n    client,\n    hostedFields,\n    dataCollector,\n    url\n) {\n    'use strict';\n\n    return VaultComponent.extend({\n        defaults: {\n            active: false,\n            hostedFieldsInstance: null,\n            imports: {\n                onActiveChange: 'active'\n            },\n            modules: {\n                hostedFields: '${ $.parentName }.braintree'\n            },\n            template: 'PayPal_Braintree/payment/cc/vault',\n            updatePaymentUrl: url.build('braintree/payment/updatepaymentmethod'),\n            vaultedCVV: ko.observable(''),\n            validatorManager: validatorManager,\n            isValidCvv: false,\n            deviceData: null,\n            onInstanceReady: function (instance) {\n                instance.on('validityChange', this.onValidityChange.bind(this));\n            }\n        },\n\n        /**\n         * Event fired by Braintree SDK whenever input value length matches the validation length.\n         * In the case of a CVV, this is 3, or 4 for AMEX.\n         *\n         * @param event\n         */\n        onValidityChange: function (event) {\n            if (event.emittedBy === 'cvv') {\n                this.isValidCvv = event.fields.cvv.isValid;\n            }\n        },\n\n        /**\n         * @returns {exports}\n         */\n        initObservable: function () {\n            this._super().observe(['active']);\n            this.validatorManager.initialize();\n            return this;\n        },\n\n        /**\n         * Is payment option active?\n         *\n         * @returns {boolean}\n         */\n        isActive: function () {\n            let active = this.getId() === this.isChecked();\n\n            this.active(active);\n            return active;\n        },\n\n        /**\n         * Fired whenever a payment option is changed.\n         *\n         * @param isActive\n         */\n        onActiveChange: function (isActive) {\n            let self = this;\n\n            if (!isActive) {\n                return;\n            }\n\n            if (self.showCvvVerify()) {\n                if (self.hostedFieldsInstance) {\n                    self.hostedFieldsInstance.teardown(function (teardownError) {\n                        if (teardownError) {\n                            globalMessageList.addErrorMessage({\n                                message: teardownError.message\n                            });\n                        }\n                        self.hostedFieldsInstance = null;\n                        self.initHostedCvvField();\n                    });\n                    return;\n                }\n                self.initHostedCvvField();\n            }\n        },\n\n        /**\n         * Initialize the CVV input field with the Braintree Hosted Fields SDK.\n         */\n        initHostedCvvField: function () {\n            let self = this;\n\n            client.create({\n                authorization: Braintree.getClientToken()\n            }, function (clientError, clientInstance) {\n                if (clientError) {\n                    globalMessageList.addErrorMessage({\n                        message: clientError.message\n                    });\n                }\n\n                let options = {\n                    client: clientInstance\n                };\n\n                if (typeof Braintree.config.dataCollector === 'object'\n                    && typeof Braintree.config.dataCollector.paypal === 'boolean'\n                ) {\n                    options.paypal = true;\n                }\n\n                dataCollector.create(options, function (err, dataCollectorInstance) {\n                    if (err) {\n                        return console.log(err);\n                    }\n                    self.deviceData = dataCollectorInstance.deviceData;\n                }.bind(this)); //eslint-disable-line no-extra-bind\n\n                hostedFields.create({\n                    client: clientInstance,\n                    fields: {\n                        cvv: {\n                            selector: '#' + self.getId() + '_cid',\n                            placeholder: '123'\n                        }\n                    }\n                }, function (hostedError, hostedFieldsInstance) {\n                    if (hostedError) {\n                        globalMessageList.addErrorMessage({\n                            message: hostedError.message\n                        });\n                        return;\n                    }\n\n                    self.hostedFieldsInstance = hostedFieldsInstance;\n                    self.onInstanceReady(self.hostedFieldsInstance);\n                });\n            });\n        },\n\n        /**\n         * Return the payment method code.\n         *\n         * @returns {string}\n         */\n        getCode: function () {\n            return 'braintree_cc_vault';\n        },\n\n        /**\n         * Get last 4 digits of card\n         *\n         * @returns {String}\n         */\n        getMaskedCard: function () {\n            return this.details.maskedCC;\n        },\n\n        /**\n         * Get expiration date\n         *\n         * @returns {String}\n         */\n        getExpirationDate: function () {\n            return this.details.expirationDate;\n        },\n\n        /**\n         * Get card type\n         *\n         * @returns {String}\n         */\n        getCardType: function () {\n            return this.details.type;\n        },\n\n        /**\n         * Get card icons\n         *\n         * @param {String} type\n         * @returns {Boolean}\n         */\n        getIcons: function (type) {\n            return window.checkoutConfig.payment.braintree.icons.hasOwnProperty(type) ?\n                window.checkoutConfig.payment.braintree.icons[type]\n                : false;\n        },\n\n        /**\n         * Get show CVV Field\n         *\n         * @returns {Boolean}\n         */\n        showCvvVerify: function () {\n            return window.checkoutConfig.payment[this.code].cvvVerify;\n        },\n\n        /**\n         * Show or hide the error message.\n         *\n         * @param selector\n         * @param state\n         * @returns {boolean}\n         */\n        validateCvv: function (selector, state) {\n            let $selector = $(selector),\n                invalidClass = 'braintree-hosted-fields-invalid';\n\n            if (state === true) {\n                $selector.removeClass(invalidClass);\n                return true;\n            }\n\n            $selector.addClass(invalidClass);\n            return false;\n        },\n\n        /**\n         * Place order\n         */\n        placeOrder: function () {\n            let self = this;\n\n            if (self.showCvvVerify()) {\n                if (!self.validateCvv('#' + self.getId() + '_cid', self.isValidCvv)\n                    || !additionalValidators.validate()) {\n                    return;\n                }\n            } else if (!additionalValidators.validate()) {\n                return;\n            }\n\n            fullScreenLoader.startLoader();\n\n            if (self.showCvvVerify() && typeof self.hostedFieldsInstance !== 'undefined') {\n                self.hostedFieldsInstance.tokenize({}, function (error, payload) {\n                    if (error) {\n                        fullScreenLoader.stopLoader();\n                        globalMessageList.addErrorMessage({\n                            message: error.message\n                        });\n                        return;\n                    }\n                    $.getJSON(self.updatePaymentUrl, {\n                        'nonce': payload.nonce,\n                        'public_hash': self.publicHash\n                    }).done(function (response) {\n                        if (response.success === false) {\n                            fullScreenLoader.stopLoader();\n                            globalMessageList.addErrorMessage({\n                                message: 'CVV verification failed.'\n                            });\n                            return;\n                        }\n                        self.getPaymentMethodNonce();\n                    });\n                });\n            } else {\n                self.getPaymentMethodNonce();\n            }\n        },\n\n        /**\n         * Send request to get payment method nonce\n         */\n        getPaymentMethodNonce: function () {\n            let self = this;\n\n            fullScreenLoader.startLoader();\n            $.getJSON(self.nonceUrl, {\n                'public_hash': self.publicHash,\n                'cvv': self.vaultedCVV()\n            }).done(function (response) {\n                fullScreenLoader.stopLoader();\n                self.hostedFields(function (formComponent) {\n                    formComponent.setPaymentMethodNonce(response.paymentMethodNonce);\n                    formComponent.setCreditCardBin(response.details.bin);\n                    formComponent.additionalData['public_hash'] = self.publicHash;\n                    formComponent.additionalData['device_data'] = self.deviceData;\n                    formComponent.code = self.code;\n                    formComponent.messageContainer = self.messageContainer;\n                    if (self.vaultedCVV()) {\n                        formComponent.additionalData['cvv'] = self.vaultedCVV();\n                    }\n\n                    self.validatorManager.validate(formComponent, function () {\n                        fullScreenLoader.stopLoader();\n                        return formComponent.placeOrder('parent');\n                    }, function () {\n                        // No teardown actions required.\n                        fullScreenLoader.stopLoader();\n                        formComponent.setPaymentMethodNonce(null);\n                        formComponent.setCreditCardBin(null);\n                    });\n\n                });\n            }).fail(function (response) {\n                let error = JSON.parse(response.responseText);\n\n                fullScreenLoader.stopLoader();\n                globalMessageList.addErrorMessage({\n                    message: error.message\n                });\n            });\n        }\n    });\n});\n","PayPal_Braintree/js/view/payment/method-renderer/paypal.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\ndefine([\n    'jquery',\n    'underscore',\n    'Magento_Checkout/js/view/payment/default',\n    'braintree',\n    'braintreeCheckoutPayPalAdapter',\n    'braintreePayPalCheckout',\n    'PayPal_Braintree/js/helper/format-amount',\n    'PayPal_Braintree/js/helper/remove-non-digit-characters',\n    'PayPal_Braintree/js/helper/replace-unsupported-characters',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Checkout/js/model/full-screen-loader',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'Magento_Checkout/js/model/step-navigator',\n    'Magento_Vault/js/view/payment/vault-enabler',\n    'Magento_Checkout/js/action/create-billing-address',\n    'Magento_Checkout/js/action/select-billing-address',\n    'Magento_CheckoutAgreements/js/view/checkout-agreements',\n    'mage/translate'\n], function (\n    $,\n    _,\n    Component,\n    braintree,\n    Braintree,\n    paypalCheckout,\n    formatAmount,\n    removeNonDigitCharacters,\n    replaceUnsupportedCharacters,\n    quote,\n    fullScreenLoader,\n    additionalValidators,\n    stepNavigator,\n    VaultEnabler,\n    createBillingAddress,\n    selectBillingAddress,\n    checkoutAgreements,\n    $t\n) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'PayPal_Braintree/payment/paypal',\n            code: 'braintree_paypal',\n            active: false,\n            paypalInstance: null,\n            paymentMethodNonce: null,\n            grandTotalAmount: null,\n            isReviewRequired: false,\n            customerEmail: null,\n\n            /**\n             * Additional payment data\n             *\n             * {Object}\n             */\n            additionalData: {},\n\n            /**\n             * PayPal client configuration\n             *\n             * {Object}\n             */\n            clientConfig: {\n                offerCredit: false,\n                offerCreditOnly: false,\n                dataCollector: {\n                    paypal: true\n                },\n\n                buttonPayPalId: 'braintree_paypal_placeholder',\n                buttonCreditId: 'braintree_paypal_credit_placeholder',\n                buttonPayLaterId: 'braintree_paypal_paylater_placeholder',\n\n                onDeviceDataReceived: function (deviceData) {\n                    this.additionalData['device_data'] = deviceData;\n                },\n\n                /**\n                 * Triggers when widget is loaded\n                 */\n                onReady: function () {\n                    this.setupPayPal();\n                },\n\n                /**\n                 * Triggers on payment nonce receive\n                 *\n                 * @param {Object} response\n                 */\n                onPaymentMethodReceived: function (response) {\n                    this.beforePlaceOrder(response);\n                }\n            },\n            imports: {\n                onActiveChange: 'active'\n            }\n        },\n\n        /**\n         * Set list of observable attributes\n         *\n         * @returns {exports.initObservable}\n         */\n        initObservable: function () {\n            let self = this;\n\n            this._super()\n                .observe(['active', 'isReviewRequired', 'customerEmail']);\n\n            window.addEventListener('hashchange', function (e) {\n                let methodCode = quote.paymentMethod();\n\n                if (methodCode === 'braintree_paypal' || methodCode === 'braintree_paypal_vault') {\n                    if (e.newURL.indexOf('payment') > 0 && self.grandTotalAmount !== null) {\n                        self.reInitPayPal();\n                    }\n                }\n            });\n\n            quote.paymentMethod.subscribe(function (value) {\n                let methodCode = value;\n\n                if (methodCode === 'braintree_paypal' || methodCode === 'braintree_paypal_vault') {\n                    self.reInitPayPal();\n                }\n            });\n\n            this.vaultEnabler = new VaultEnabler();\n            this.vaultEnabler.setPaymentCode(this.getVaultCode());\n            this.vaultEnabler.isActivePaymentTokenEnabler.subscribe(function () {\n                self.onVaultPaymentTokenEnablerChange();\n            });\n\n            this.grandTotalAmount = quote.totals()['base_grand_total'];\n\n            quote.totals.subscribe(function () {\n                if (self.grandTotalAmount !== quote.totals()['base_grand_total']) {\n                    self.grandTotalAmount = quote.totals()['base_grand_total'];\n                    let methodCode = quote.paymentMethod();\n\n                    if (methodCode &&\n                        (methodCode.method === 'braintree_paypal' || methodCode.method === 'braintree_paypal_vault')) {\n                        self.reInitPayPal();\n                    }\n                }\n            });\n\n            // for each component initialization need update property\n            this.isReviewRequired(false);\n            this.initClientConfig();\n\n            return this;\n        },\n\n        /**\n         * Get payment name\n         *\n         * @returns {String}\n         */\n        getCode: function () {\n            return this.code;\n        },\n\n        /**\n         * Get payment title\n         *\n         * @returns {String}\n         */\n        getTitle: function () {\n            return window.checkoutConfig.payment[this.getCode()].title;\n        },\n\n        /**\n         * Check if payment is active\n         *\n         * @returns {Boolean}\n         */\n        isActive: function () {\n            let active = this.getCode() === this.isChecked();\n\n            this.active(active);\n\n            return active;\n        },\n\n        /**\n         * Triggers when payment method change\n         *\n         * @param {Boolean} isActive\n         */\n        onActiveChange: function (isActive) {\n            if (!isActive) {\n                return;\n            }\n\n            // need always re-init Braintree with PayPal configuration\n            this.reInitPayPal();\n        },\n\n        /**\n         * Init config\n         */\n        initClientConfig: function () {\n            this.clientConfig = _.extend(this.clientConfig, this.getPayPalConfig());\n\n            _.each(this.clientConfig, function (fn, name) {\n                if (typeof fn === 'function') {\n                    this.clientConfig[name] = fn.bind(this);\n                }\n            }, this);\n        },\n\n        /**\n         * Set payment nonce\n         *\n         * @param {String} paymentMethodNonce\n         */\n        setPaymentMethodNonce: function (paymentMethodNonce) {\n            this.paymentMethodNonce = paymentMethodNonce;\n        },\n\n        /**\n         * Update quote billing address\n         *\n         * @param {Object}customer\n         * @param {Object}address\n         */\n        setBillingAddress: function (customer, address) {\n            let billingAddress = {\n                street: [address.line1],\n                city: address.city,\n                postcode: address.postalCode,\n                countryId: address.countryCode,\n                email: customer.email,\n                firstname: customer.firstName,\n                lastname: customer.lastName,\n                telephone: removeNonDigitCharacters(_.get(customer, 'phone', '00000000000'))\n            };\n\n            billingAddress['region_code'] = typeof address.state === 'string' ? address.state : '';\n            billingAddress = createBillingAddress(billingAddress);\n            quote.billingAddress(billingAddress);\n        },\n\n        /**\n         * Prepare data to place order\n         *\n         * @param {Object} data\n         */\n        beforePlaceOrder: function (data) {\n            this.setPaymentMethodNonce(data.nonce);\n            this.customerEmail(data.details.email);\n            if (quote.isVirtual()) {\n                this.isReviewRequired(true);\n            } else if (this.isRequiredBillingAddress() === '1' && quote.billingAddress() === null) {\n                if (data.details?.billingAddress?.line1) {\n                    this.setBillingAddress(data.details, data.details.billingAddress);\n                } else {\n                    this.setBillingAddress(data.details, data.details.shippingAddress);\n                }\n            } else if (quote.shippingAddress() === quote.billingAddress()) {\n                selectBillingAddress(quote.shippingAddress());\n            } else {\n                selectBillingAddress(quote.billingAddress());\n            }\n            this.placeOrder();\n        },\n\n        /**\n         * Re-init PayPal Auth Flow\n         */\n        reInitPayPal: function () {\n            this.disableButton();\n            this.clientConfig.paypal.amount = formatAmount(this.grandTotalAmount);\n\n            if (!quote.isVirtual()) {\n                this.clientConfig.paypal.enableShippingAddress = true;\n                this.clientConfig.paypal.shippingAddressEditable = false;\n                this.clientConfig.paypal.shippingAddressOverride = this.getShippingAddress();\n            }\n\n            Braintree.setConfig(this.clientConfig);\n\n            if (Braintree.getPayPalInstance()) {\n                Braintree.getPayPalInstance().teardown(function () {\n                    Braintree.setup();\n                });\n                Braintree.setPayPalInstance(null);\n            } else {\n                Braintree.setup();\n                this.enableButton();\n            }\n        },\n\n        /**\n         * Setup PayPal instance\n         */\n        setupPayPal: function () {\n            if (Braintree.config.paypalInstance) {\n                fullScreenLoader.stopLoader(true);\n                return;\n            }\n\n            paypalCheckout.create({\n                client: Braintree.clientInstance\n            }, function (createErr, paypalCheckoutInstance) {\n                if (createErr) {\n                    Braintree.showError(\n                        $t('PayPal Checkout could not be initialized. Please contact the store owner.'));\n                    console.error('paypalCheckout error', createErr);\n                    return;\n                }\n                let quoteObj = quote.totals(),\n                    configSDK = {\n                        components: 'buttons,messages,funding-eligibility',\n                        'enable-funding': this.isCreditEnabled() ? 'credit' : 'paylater',\n                        currency: quoteObj['base_currency_code'],\n                        dataAttributes: {\n                            'page-type': 'checkout'\n                        }\n                    },\n                    buyerCountry = this.getMerchantCountry();\n\n                if (Braintree.getEnvironment() === 'sandbox' && buyerCountry !== null) {\n                    configSDK['buyer-country'] = buyerCountry;\n                }\n                paypalCheckoutInstance.loadPayPalSDK(configSDK, function () {\n                    this.loadPayPalButton(paypalCheckoutInstance, 'paypal');\n                    if (this.isCreditEnabled()) {\n                        this.loadPayPalButton(paypalCheckoutInstance, 'credit');\n                    }\n                    if (this.isPayLaterEnabled()) {\n                        this.loadPayPalButton(paypalCheckoutInstance, 'paylater');\n                    }\n\n                }.bind(this));\n            }.bind(this));\n        },\n\n        loadPayPalButton: function (paypalCheckoutInstance, funding) {\n            let paypalPayment = Braintree.config.paypal,\n                onPaymentMethodReceived = Braintree.config.onPaymentMethodReceived,\n                style = {\n                    label: Braintree.getLabel(funding),\n                    color: Braintree.getColor(funding),\n                    shape: Braintree.getShape(funding)\n                },\n                button,\n                events = Braintree.events,\n                payPalButtonId,\n                payPalButtonElement;\n\n            if (funding === 'credit') {\n                Braintree.config.buttonId = this.getCreditButtonId();\n            } else if (funding === 'paylater') {\n                Braintree.config.buttonId = this.getPayLaterButtonId();\n            } else {\n                Braintree.config.buttonId = this.getPayPalButtonId();\n            }\n\n            payPalButtonId = Braintree.config.buttonId;\n            payPalButtonElement = $('#' + Braintree.config.buttonId);\n            payPalButtonElement.html('');\n\n            // Render\n            Braintree.config.paypalInstance = paypalCheckoutInstance;\n\n            button = window.paypal.Buttons({\n                fundingSource: funding,\n                env: Braintree.getEnvironment(),\n                style: style,\n                commit: true,\n                locale: Braintree.config.paypal.locale,\n\n                onInit: function (data, actions) {\n                    let agreements = checkoutAgreements().agreements,\n                        shouldDisableActions = false;\n\n                    actions.disable();\n\n                    _.each(agreements, function (item) {\n                        if (checkoutAgreements().isAgreementRequired(item)) {\n                            let paymentMethodCode = quote.paymentMethod().method,\n                                inputId = '#agreement_' + paymentMethodCode + '_' + item.agreementId,\n                                inputEl = document.querySelector(inputId);\n\n                            if (!inputEl.checked) {\n                                shouldDisableActions = true;\n                            }\n\n                            inputEl.addEventListener('change', function () {\n                                if (additionalValidators.validate()) {\n                                    actions.enable();\n                                } else {\n                                    actions.disable();\n                                }\n                            });\n                        }\n                    });\n\n                    if (!shouldDisableActions) {\n                        actions.enable();\n                    }\n                },\n\n                createOrder: function () {\n                    return paypalCheckoutInstance.createPayment(paypalPayment).catch(function (err) {\n                        throw err.details.originalError.details.originalError.paymentResource;\n                    });\n                },\n\n                onCancel: function (data) {\n                    console.log('checkout.js payment cancelled', JSON.stringify(data, 0, 2));\n\n                    if (typeof events.onCancel === 'function') {\n                        events.onCancel();\n                    }\n                },\n\n                onError: function (err) {\n                    if (err.errorName === 'VALIDATION_ERROR' && err.errorMessage.indexOf('Value is invalid') !== -1) {\n                        Braintree.showError(\n                            $t(\n                                'Address failed validation. Please check and confirm your City, State, and Postal Code'\n                            )\n                        );\n                    } else {\n                        Braintree.showError(\n                            $t('PayPal Checkout could not be initialized. Please contact the store owner.'));\n                    }\n                    Braintree.config.paypalInstance = null;\n                    console.error('Paypal checkout.js error', err);\n\n                    if (typeof events.onError === 'function') {\n                        events.onError(err);\n                    }\n                },\n\n                onClick: function (data) {\n                    if (!quote.isVirtual()) {\n                        this.clientConfig.paypal.enableShippingAddress = true;\n                        this.clientConfig.paypal.shippingAddressEditable = false;\n                        this.clientConfig.paypal.shippingAddressOverride = this.getShippingAddress();\n                    }\n\n                    // To check term & conditions input checked - validate additional validators.\n                    if (!additionalValidators.validate()) {\n                        return false;\n                    }\n\n                    if (typeof events.onClick === 'function') {\n                        events.onClick(data);\n                    }\n                }.bind(this),\n\n                onApprove: function (data) {\n                    return paypalCheckoutInstance.tokenizePayment(data)\n                        .then(function (payload) {\n                            onPaymentMethodReceived(payload);\n                        });\n                }\n            });\n\n            if (funding === 'paylater') {\n                button.updateProps({\n                    message: Braintree.getMessage(\n                        funding,\n                        paypalPayment.amount,\n                        'checkout'\n                    )\n                });\n            }\n\n            if (button.isEligible() && payPalButtonElement.length) {\n                button.render('#' + payPalButtonId).then(function () {\n                    Braintree.enableButton();\n                    if (typeof Braintree.config.onPaymentMethodError === 'function') {\n                        Braintree.config.onPaymentMethodError();\n                    }\n                }).then(function (data) {\n                    if (typeof events.onRender === 'function') {\n                        events.onRender(data);\n                    }\n                });\n            }\n        },\n\n        /**\n         * Get locale\n         *\n         * @returns {String}\n         */\n        getLocale: function () {\n            return window.checkoutConfig.payment[this.getCode()].locale;\n        },\n\n        /**\n         * Is Billing Address required from PayPal side\n         *\n         * @returns {exports.isRequiredBillingAddress|(function())|boolean}\n         */\n        isRequiredBillingAddress: function () {\n            return window.checkoutConfig.payment[this.getCode()].isRequiredBillingAddress;\n        },\n\n        /**\n         * Get configuration for PayPal\n         *\n         * @returns {Object}\n         */\n        getPayPalConfig: function () {\n            let totals = quote.totals(),\n                config = {},\n                isActiveVaultEnabler = this.isActiveVault();\n\n            config.paypal = {\n                flow: 'checkout',\n                amount: formatAmount(this.grandTotalAmount),\n                currency: totals['base_currency_code'],\n                locale: this.getLocale(),\n\n                /**\n                 * Triggers on any Braintree error\n                 */\n                onError: function () {\n                    this.paymentMethodNonce = null;\n                },\n\n                /**\n                 * Triggers if browser doesn't support PayPal Checkout\n                 */\n                onUnsupported: function () {\n                    this.paymentMethodNonce = null;\n                }\n            };\n\n            if (isActiveVaultEnabler) {\n                config.paypal.requestBillingAgreement = true;\n            }\n\n            if (!quote.isVirtual()) {\n                config.paypal.enableShippingAddress = true;\n                config.paypal.shippingAddressEditable = false;\n                config.paypal.shippingAddressOverride = this.getShippingAddress();\n            }\n\n            if (this.getMerchantName()) {\n                config.paypal.displayName = this.getMerchantName();\n            }\n\n            return config;\n        },\n\n        /**\n         * Get shipping address\n         *\n         * @returns {Object}\n         */\n        getShippingAddress: function () {\n            let address = quote.shippingAddress();\n\n            return {\n                recipientName: address.firstname + ' ' + address.lastname,\n                line1: address.street[0],\n                line2: typeof address.street[2] === 'undefined'\n                    ? address.street[1] : address.street[1] + ' ' + address.street[2],\n                city: address.city,\n                countryCode: address.countryId,\n                postalCode: address.postcode,\n                state: address.regionCode\n            };\n        },\n\n        /**\n         * Get merchant name\n         *\n         * @returns {String}\n         */\n        getMerchantName: function () {\n            return window.checkoutConfig.payment[this.getCode()]['merchantName'];\n        },\n\n        /**\n         * Get data\n         *\n         * @returns {Object}\n         */\n        getData: function () {\n            let data = {\n                'method': this.getCode(),\n                'additional_data': {\n                    'payment_method_nonce': this.paymentMethodNonce\n                }\n            };\n\n            data['additional_data'] = _.extend(data['additional_data'], this.additionalData);\n\n            this.vaultEnabler.visitAdditionalData(data);\n\n            return data;\n        },\n\n        /**\n         * Returns payment acceptance mark image path\n         *\n         * @returns {String}\n         */\n        getPaymentAcceptanceMarkSrc: function () {\n            return window.checkoutConfig.payment[this.getCode()]['paymentAcceptanceMarkSrc'];\n        },\n\n        /**\n         * Get paypal vault payment method code\n         *\n         * @returns {String}\n         */\n        getVaultCode: function () {\n            return window.checkoutConfig.payment[this.getCode()]['vaultCode'];\n        },\n\n        /**\n         * Check if vault is active\n         *\n         * @returns {Boolean}\n         */\n        isActiveVault: function () {\n            return this.vaultEnabler.isVaultEnabled() && this.vaultEnabler.isActivePaymentTokenEnabler();\n        },\n\n        /**\n         * Re-init PayPal Auth flow to use Vault\n         */\n        onVaultPaymentTokenEnablerChange: function () {\n            this.clientConfig.paypal.singleUse = !this.isActiveVault();\n            this.reInitPayPal();\n        },\n\n        /**\n         * Disable submit button\n         */\n        disableButton: function () {\n            // stop any previous shown loaders\n            fullScreenLoader.stopLoader(true);\n            fullScreenLoader.startLoader();\n            $('[data-button=\"place\"]').attr('disabled', 'disabled');\n        },\n\n        /**\n         * Enable submit button\n         */\n        enableButton: function () {\n            $('[data-button=\"place\"]').removeAttr('disabled');\n            fullScreenLoader.stopLoader(true);\n        },\n\n        /**\n         * Triggers when customer click \"Continue to PayPal\" button\n         */\n        payWithPayPal: function () {\n            if (additionalValidators.validate()) {\n                Braintree.checkout.paypal.initAuthFlow();\n            }\n        },\n\n        /**\n         * Get PayPal button id\n         *\n         * @returns {String}\n         */\n        getPayPalButtonId: function () {\n            return this.clientConfig.buttonPayPalId;\n        },\n\n        /**\n         * Get Credit button id\n         *\n         * @returns {String}\n         */\n        getCreditButtonId: function () {\n            return this.clientConfig.buttonCreditId;\n        },\n\n        /**\n         * Get Pay Later button id\n         *\n         * @returns {String}\n         */\n        getPayLaterButtonId: function () {\n            return this.clientConfig.buttonPayLaterId;\n        },\n\n        /**\n         * Check if Pay Later enabled\n         *\n         * @returns {*}\n         */\n        isPayLaterEnabled: function () {\n            return window.checkoutConfig.payment['braintree_paypal_paylater']['isActive'];\n        },\n\n        /**\n         * Check if Pay Later messaging enabled\n         *\n         * @returns {*}\n         */\n        isPayLaterMessageEnabled: function () {\n            return window.checkoutConfig.payment['braintree_paypal_paylater']['isMessageActive'];\n        },\n\n        /**\n         * Get grand total\n         *\n         * @returns {string}\n         */\n        getGrandTotalAmount: function () {\n            return formatAmount(this.grandTotalAmount);\n        },\n\n        /**\n         * Check if PayPal Credit enabled\n         *\n         * @returns {*}\n         */\n        isCreditEnabled: function () {\n            return window.checkoutConfig.payment['braintree_paypal_credit']['isActive'];\n        },\n\n        /**\n         * Get merchant country\n         *\n         * @returns {*}\n         */\n        getMerchantCountry: function () {\n            return window.checkoutConfig.payment[this.getCode()]['merchantCountry'];\n        },\n\n        /**\n         * Regex to replace all unsupported characters.\n         *\n         * @param str\n         */\n        replaceUnsupportedCharacters: function (str) {\n            // eslint-disable-next-line no-useless-escape\n            str.replace('/[^a-zA-Z0-9\\s\\-.\\']/', '');\n            return str.substr(0, 127);\n        }\n    });\n});\n","PayPal_Braintree/js/view/payment/method-renderer/ach.js":"define(\n    [\n        'Magento_Checkout/js/view/payment/default',\n        'ko',\n        'jquery',\n        'braintree',\n        'braintreeDataCollector',\n        'braintreeAch',\n        'PayPal_Braintree/js/form-builder',\n        'Magento_Ui/js/model/messageList',\n        'Magento_Checkout/js/action/select-billing-address',\n        'Magento_Checkout/js/model/full-screen-loader',\n        'Magento_Checkout/js/model/quote',\n        'mage/translate',\n        'Magento_Vault/js/view/payment/vault-enabler',\n        'underscore'\n    ],\n    function (\n        Component,\n        ko,\n        $,\n        braintree,\n        dataCollector,\n        ach,\n        formBuilder,\n        messageList,\n        selectBillingAddress,\n        fullScreenLoader,\n        quote,\n        $t,\n        VaultEnabler,\n        _\n    ) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                deviceData: null,\n                paymentMethodNonce: null,\n                template: 'PayPal_Braintree/payment/ach',\n                achInstance: null,\n                routingNumber: ko.observable(''),\n                accountNumber: ko.observable(''),\n                accountType: ko.observable('checking'),\n                ownershipType: ko.observable('personal'),\n                firstName: ko.observable(''),\n                lastName: ko.observable(''),\n                businessName: ko.observable(''),\n                hasAuthorization: ko.observable(false),\n                business: ko.observable(false), // for ownership type\n                personal: ko.observable(true), // for ownership type\n                vaultEnabler: null\n            },\n\n            clickAchBtn: function () {\n                if (!this.validateForm('#' + this.getCode() + '-form')) {\n                    return;\n                }\n\n                fullScreenLoader.startLoader();\n\n                let self = this,\n\n                    billingAddress = quote.billingAddress(),\n\n                    regionCode,\n\n                    bankDetails = {\n                        routingNumber: self.routingNumber(),\n                        accountNumber: self.accountNumber(),\n                        accountType: self.accountType(),\n                        ownershipType: self.ownershipType(),\n                        billingAddress: {\n                            streetAddress: billingAddress.street[0],\n                            extendedAddress: billingAddress.street[1],\n                            locality: billingAddress.city,\n                            region: billingAddress.regionCode,\n                            postalCode: billingAddress.postcode\n                        }\n                    },\n\n                    mandateText = document.getElementById(self.isVaultActive()\n                        ? 'braintree-ach-mandate-vault'\n                        : 'braintree-ach-mandate'\n                    ).textContent;\n\n                if (bankDetails.ownershipType === 'personal') {\n                    bankDetails.firstName = self.firstName();\n                    bankDetails.lastName = self.lastName();\n                } else {\n                    bankDetails.businessName = self.businessName();\n                }\n\n                // if no region code is available, lets find one!\n                if (typeof billingAddress.regionCode === 'undefined') {\n                    $.get('/rest/V1/directory/countries/' + billingAddress.countryId).done(function (data) {\n                        if (typeof data.available_regions !== 'undefined') {\n                            data.available_regions.forEach(function (availableRegion) {\n                                if (availableRegion.id === billingAddress.regionId) {\n                                    regionCode = availableRegion.code;\n                                    bankDetails.billingAddress.region = regionCode;\n                                    self.tokenizeAch(bankDetails, mandateText);\n                                }\n                            });\n                        } else {\n                            fullScreenLoader.stopLoader();\n                            self.tokenizeAch(bankDetails, mandateText);\n                        }\n                    }).fail(function () {\n                        fullScreenLoader.stopLoader();\n                    });\n                } else {\n                    self.tokenizeAch(bankDetails, mandateText);\n                }\n            },\n\n            tokenizeAch: function (bankDetails, mandateText) {\n                let self = this;\n\n                self.achInstance.tokenize({\n                    bankDetails: bankDetails,\n                    mandateText: mandateText\n                }, function (tokenizeErr, tokenizedPayload) {\n                    if (tokenizeErr) {\n                        let error = 'There was an error with the provided bank details. Please check and try again.';\n\n                        self.setErrorMsg($t(error));\n                        self.hasAuthorization(false);\n                        fullScreenLoader.stopLoader();\n                    } else {\n                        fullScreenLoader.stopLoader();\n                        self.handleAchSuccess(tokenizedPayload);\n                    }\n                });\n            },\n\n            getClientToken: function () {\n                return window.checkoutConfig.payment[this.getCode()].clientToken;\n            },\n\n            getCode: function () {\n                return 'braintree_ach_direct_debit';\n            },\n\n            getStoreName: function () {\n                return window.checkoutConfig.payment[this.getCode()].storeName;\n            },\n\n            getData: function () {\n                let data = {\n                    'method': this.getCode(),\n                    'additional_data': {\n                        'payment_method_nonce': this.paymentMethodNonce,\n                        'device_data': this.deviceData\n                    }\n                };\n\n                data['additional_data'] = _.extend(data['additional_data'], this.additionalData);\n                this.vaultEnabler.visitAdditionalData(data);\n\n                return data;\n            },\n\n            getTitle: function () {\n                return 'ACH Direct Debit';\n            },\n\n            handleAchSuccess: function (payload) {\n                this.setPaymentMethodNonce(payload.nonce);\n                this.placeOrder();\n            },\n\n            initialize: function () {\n                this._super();\n                this.vaultEnabler = new VaultEnabler();\n                this.vaultEnabler.setPaymentCode(this.getVaultCode());\n\n                let self = this;\n\n                this.vaultEnabler.isActivePaymentTokenEnabler.subscribe(function () {\n                    self.achInstance.teardown(function () {\n                        self.initAch();\n                    });\n                });\n\n                this.initAch();\n\n                return this;\n            },\n\n            isAllowed: function () {\n                return window.checkoutConfig.payment[this.getCode()].isAllowed;\n            },\n\n            /**\n             * Change the account type.\n             *\n             * @param data\n             * @param event\n             */\n            changeOwnershipType: function (data, event) {\n                let self = this;\n\n                if (event.currentTarget.value === 'business') {\n                    self.business(true);\n                    self.personal(false);\n                } else {\n                    self.business(false);\n                    self.personal(true);\n                }\n            },\n\n            /**\n             * Is Business type account.\n             *\n             * @returns {Boolean}\n             */\n            isBusiness: function () {\n                return this.business;\n            },\n\n            /**\n             * Is Personal type account.\n             *\n             * @returns {Boolean}\n             */\n            isPersonal: function () {\n                return this.personal;\n            },\n\n            /**\n             * Get the account holder name input.\n             *\n             * @returns {String}\n             */\n            getAccountHolderName: function () {\n                if (this.firstName() !== '' || this.lastName() !== '') {\n                    return this.firstName() + ' ' + this.lastName();\n                }\n\n                return 'XXXX';\n            },\n\n            /**\n             * Get the account number input.\n             *\n             * @returns {String}\n             */\n            getAccountNumber: function () {\n                return this.accountNumber() !== '' ? this.accountNumber() : 'XXXX';\n            },\n\n            /**\n             * Get the Bank Routing Number input.\n             *\n             * @returns {String}\n             */\n            getRoutingNumber: function () {\n                return this.routingNumber() !== '' ? this.routingNumber() : 'XXXX';\n            },\n\n            /**\n             * Get the quote totals value.\n             *\n             * @returns {String}\n             */\n            getGrandTotal: function () {\n                let totals = quote.getTotals()();\n\n                if (totals) {\n                    return totals['grand_total'];\n                }\n\n                return quote['grand_total'];\n            },\n\n            /**\n             * Get the current date in US format (ACH is US only).\n             *\n             * @returns {String}\n             */\n            getCurrentDate: function () {\n                const today = new Date();\n\n                return today.toLocaleDateString('en-US');\n            },\n\n            setErrorMsg: function (message) {\n                messageList.addErrorMessage({\n                    message: message\n                });\n            },\n\n            setPaymentMethodNonce: function (nonce) {\n                this.paymentMethodNonce = nonce;\n            },\n\n            /**\n             * Set the ACH instance.\n             *\n             * @param {*} instance\n             */\n            setAchInstance: function (instance) {\n                this.achInstance = instance;\n            },\n\n            /**\n             * Validate ACH form.\n             *\n             * @param {*} form\n             * @returns {*|jQuery}\n             */\n            validateForm: function (form) {\n                return $(form).validation() && $(form).validation('isValid');\n            },\n\n            /**\n             * Get ACH's should vault checkbox element ID.\n             *\n             * @returns {String}\n             */\n            getVaultCheckboxId: function () {\n                return this.getCode() + '_enable_vault';\n            },\n\n            /**\n             * Check whether Vault is enabled.\n             *\n             * @returns {Boolean}\n             */\n            isVaultEnabled: function () {\n                return this.vaultEnabler.isVaultEnabled();\n            },\n\n            /**\n             * Is Vault enabled & vaulting payment active (checked)\n             *\n             * @returns {Boolean}\n             */\n            isVaultActive: function () {\n                return this.isVaultEnabled() && this.vaultEnabler.isActivePaymentTokenEnabler();\n            },\n\n            /**\n             * Get ACH vault payment method code.\n             *\n             * @returns {String}\n             */\n            getVaultCode: function () {\n                return window.checkoutConfig.payment[this.getCode()]['vaultCode'];\n            },\n\n            /**\n             * Initialize ACH component.\n             *\n             * @returns {void}\n             */\n            initAch: function () {\n                let self = this;\n\n                braintree.create({\n                    authorization: self.getClientToken()\n                }, function (clientError, clientInstance) {\n                    if (clientError) {\n                        this.setErrorMsg($t('Unable to initialize Braintree Client.'));\n                        return;\n                    }\n\n                    /* Collect device data */\n                    self.collectDeviceData(clientInstance, function () {\n                        /* callback from collectDeviceData */\n                        ach.create({\n                            client: clientInstance\n                        }, function (achErr, achInstance) {\n                            if (achErr) {\n                                self.setErrorMsg($t('Error initializing ACH: %1').replace('%1', achErr));\n                                return;\n                            }\n\n                            self.setAchInstance(achInstance);\n                        });\n                    });\n                });\n            },\n\n            /**\n             * Collect device data.\n             *\n             * @param clientInstance\n             * @param {Function} callback\n             * @returns {void}\n             */\n            collectDeviceData: function (clientInstance, callback) {\n                let self = this;\n\n                dataCollector.create({\n                    client: clientInstance,\n                    paypal: true\n                }, function (dataCollectorErr, dataCollectorInstance) {\n                    if (dataCollectorErr) {\n                        return;\n                    }\n\n                    self.deviceData = dataCollectorInstance.deviceData;\n                    callback();\n                });\n            }\n        });\n    }\n);\n","PayPal_Braintree/js/view/payment/method-renderer/multishipping/paypal.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\ndefine([\n    'jquery',\n    'underscore',\n    'braintreeCheckoutPayPalAdapter',\n    'Magento_Checkout/js/model/quote',\n    'PayPal_Braintree/js/view/payment/method-renderer/paypal',\n    'PayPal_Braintree/js/helper/format-amount',\n    'Magento_Checkout/js/action/set-payment-information',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'Magento_Checkout/js/model/full-screen-loader',\n    'mage/translate'\n], function (\n    $,\n    _,\n    Braintree,\n    quote,\n    Component,\n    formatAmount,\n    setPaymentInformationAction,\n    additionalValidators,\n    fullScreenLoader,\n    $t\n) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'PayPal_Braintree/payment/multishipping/paypal',\n            submitButtonSelector: '[id=\"parent-payment-continue\"]',\n            reviewButtonHtml: ''\n        },\n\n        /**\n         * @override\n         */\n        initObservable: function () {\n            this.reviewButtonHtml = $(this.submitButtonSelector).html();\n            return this._super();\n        },\n\n        initClientConfig: function () {\n            this.clientConfig = _.extend(this.clientConfig, this.getPayPalConfig());\n            this.clientConfig.paypal.enableShippingAddress = false;\n\n            _.each(this.clientConfig, function (fn, name) {\n                if (typeof fn === 'function') {\n                    this.clientConfig[name] = fn.bind(this);\n                }\n            }, this);\n            this.clientConfig.buttonPayPalId = 'parent-payment-continue';\n        },\n\n        /**\n         * @override\n         */\n        onActiveChange: function (isActive) {\n            this.updateSubmitButtonHtml(isActive);\n            this._super(isActive);\n        },\n\n        /**\n         * @override\n         */\n        beforePlaceOrder: function (data) {\n            this._super(data);\n        },\n\n        /**\n         * Re-init PayPal Auth Flow\n         */\n        reInitPayPal: function () {\n            this.disableButton();\n            this.clientConfig.paypal.amount = formatAmount(this.grandTotalAmount);\n\n            if (!quote.isVirtual()) {\n                this.clientConfig.paypal.enableShippingAddress = false;\n                this.clientConfig.paypal.shippingAddressEditable = false;\n            }\n\n            Braintree.setConfig(this.clientConfig);\n\n            if (Braintree.getPayPalInstance()) {\n                Braintree.getPayPalInstance().teardown(function () {\n                    Braintree.setup();\n                });\n                Braintree.setPayPalInstance(null);\n            } else {\n                Braintree.setup();\n                this.enableButton();\n            }\n        },\n\n        loadPayPalButton: function (paypalCheckoutInstance, funding) {\n            if (funding === 'credit') {\n                Braintree.config.buttonId = this.getCreditButtonId();\n            } else if (funding === 'paylater') {\n                Braintree.config.buttonId = this.getPayLaterButtonId();\n            } else {\n                Braintree.config.buttonId = this.getPayPalButtonId();\n            }\n\n            let paypalPayment = Braintree.config.paypal,\n                onPaymentMethodReceived = Braintree.config.onPaymentMethodReceived,\n                style = {\n                    label: Braintree.getLabel(funding),\n                    color: Braintree.getColor(funding),\n                    shape: Braintree.getShape(funding)\n                },\n                payPalButtonId = Braintree.config.buttonId,\n                payPalButtonElement = $('#' + Braintree.config.buttonId),\n                events = Braintree.events,\n\n                button = window.paypal.Buttons({\n                    fundingSource: funding,\n                    env: Braintree.getEnvironment(),\n                    style: style,\n                    commit: true,\n                    locale: Braintree.config.paypal.locale,\n\n                    createOrder: function () {\n                        return paypalCheckoutInstance.createPayment(paypalPayment);\n                    },\n\n                    onCancel: function (data) {\n                        console.log('checkout.js payment cancelled', JSON.stringify(data, 0, 2));\n\n                        if (typeof events.onCancel === 'function') {\n                            events.onCancel();\n                        }\n                    },\n\n                    onError: function (err) {\n                        let error = 'PayPal Checkout could not be initialized. Please contact the store owner.';\n\n                        Braintree.showError($t(error));\n                        Braintree.config.paypalInstance = null;\n                        console.error('Paypal checkout.js error', err);\n\n                        if (typeof events.onError === 'function') {\n                            events.onError(err);\n                        }\n                    },\n\n                    onClick: function (data) {\n                    // To check term & conditions input checked - validate additional validators.\n                        if (!additionalValidators.validate()) {\n                            return false;\n                        }\n\n                        if (typeof events.onClick === 'function') {\n                            events.onClick(data);\n                        }\n                    },\n\n                    onApprove: function (data) {\n                        return paypalCheckoutInstance.tokenizePayment(data)\n                            .then(function (payload) {\n                                onPaymentMethodReceived(payload);\n                            });\n                    }\n                });\n\n            payPalButtonElement.html('');\n\n            // Render\n            Braintree.config.paypalInstance = paypalCheckoutInstance;\n\n            if (button.isEligible() && payPalButtonElement.length) {\n                button.render('#' + payPalButtonId).then(function () {\n                    Braintree.enableButton();\n                    if (typeof Braintree.config.onPaymentMethodError === 'function') {\n                        Braintree.config.onPaymentMethodError();\n                    }\n                }).then(function (data) {\n                    if (typeof events.onRender === 'function') {\n                        events.onRender(data);\n                    }\n                });\n            }\n        },\n\n        /**\n         * Get configuration for PayPal\n         *\n         * @returns {Object}\n         */\n        getPayPalConfig: function () {\n            let totals = quote.totals(),\n                config = {};\n\n            config.paypal = {\n                flow: 'checkout',\n                amount: formatAmount(this.grandTotalAmount),\n                currency: totals['base_currency_code'],\n                locale: this.getLocale(),\n                requestBillingAgreement: true,\n\n                /**\n                 * Triggers on any Braintree error\n                 */\n                onError: function () {\n                    this.paymentMethodNonce = null;\n                },\n\n                /**\n                 * Triggers if browser doesn't support PayPal Checkout\n                 */\n                onUnsupported: function () {\n                    this.paymentMethodNonce = null;\n                }\n            };\n\n            if (!quote.isVirtual()) {\n                config.paypal.enableShippingAddress = false;\n                config.paypal.shippingAddressEditable = false;\n            }\n\n            if (this.getMerchantName()) {\n                config.paypal.displayName = this.getMerchantName();\n            }\n\n            return config;\n        },\n\n        /**\n         * Get shipping address\n         *\n         * @returns {{}}\n         */\n        getShippingAddress: function () {\n            return {};\n        },\n\n        /**\n         * @override\n         */\n        getData: function () {\n            let data = this._super();\n\n            data['additional_data']['is_active_payment_token_enabler'] = true;\n\n            return data;\n        },\n\n        /**\n         * @override\n         */\n        isActiveVault: function () {\n            return true;\n        },\n\n        /**\n         * Checks if payment method nonce is already received.\n         *\n         * @returns {Boolean}\n         */\n        isPaymentMethodNonceReceived: function () {\n            return this.paymentMethodNonce !== null;\n        },\n\n        /**\n         * Update submit button on multi-addresses checkout billing form.\n         *\n         * @param {Boolean} isActive\n         */\n        updateSubmitButtonHtml: function (isActive) {\n            $(this.submitButtonSelector).removeClass('primary');\n            if (this.isPaymentMethodNonceReceived() || !isActive) {\n                $(this.submitButtonSelector).addClass('primary');\n                $(this.submitButtonSelector).html(this.reviewButtonHtml);\n            }\n        },\n\n        /**\n         * @override\n         */\n        placeOrder: function () {\n            if (!this.isPaymentMethodNonceReceived()) {\n                this.payWithPayPal();\n            } else {\n                fullScreenLoader.startLoader();\n\n                $.when(\n                    setPaymentInformationAction(\n                        this.messageContainer,\n                        this.getData()\n                    )\n                ).done(this.done.bind(this))\n                    .fail(this.fail.bind(this));\n            }\n        },\n\n        /**\n         * {Function}\n         */\n        fail: function () {\n            fullScreenLoader.stopLoader();\n\n            return this;\n        },\n\n        /**\n         * {Function}\n         */\n        done: function () {\n            fullScreenLoader.stopLoader();\n            $('#multishipping-billing-form').trigger('submit');\n\n            return this;\n        }\n    });\n});\n","PayPal_Braintree/js/view/payment/method-renderer/multishipping/hosted-fields.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n\ndefine([\n    'jquery',\n    'PayPal_Braintree/js/view/payment/method-renderer/hosted-fields',\n    'PayPal_Braintree/js/validator',\n    'Magento_Ui/js/model/messageList',\n    'mage/translate',\n    'Magento_Checkout/js/model/full-screen-loader',\n    'Magento_Checkout/js/action/set-payment-information',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'PayPal_Braintree/js/view/payment/adapter'\n], function (\n    $,\n    Component,\n    validator,\n    messageList,\n    $t,\n    fullScreenLoader,\n    setPaymentInformationAction,\n    additionalValidators,\n    braintree\n) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'PayPal_Braintree/payment/multishipping/form'\n        },\n\n        /**\n         * Get list of available CC types\n         *\n         * @returns {Object}\n         */\n        getCcAvailableTypes: function () {\n            let availableTypes = validator.getAvailableCardTypes(),\n                billingCountryId;\n\n            billingCountryId = $('#multishipping_billing_country_id').val();\n\n            if (billingCountryId && validator.getCountrySpecificCardTypes(billingCountryId)) {\n                return validator.collectTypes(\n                    availableTypes, validator.getCountrySpecificCardTypes(billingCountryId)\n                );\n            }\n\n            return availableTypes;\n        },\n\n        /**\n         * @override\n         */\n        handleNonce: function (payload) {\n            let self = this;\n\n            this.setPaymentMethodNonce(payload.nonce);\n            this.setCreditCardBin(payload.details.bin);\n\n            // place order on success validation\n            self.validatorManager.validate(self, function () {\n                return self.setPaymentInformation();\n            }, function () {\n                self.isProcessing = false;\n                self.paymentMethodNonce = null;\n                self.creditCardBin = null;\n            });\n        },\n\n        /**\n         * @override\n         */\n        placeOrder: function () {\n            if (this.isProcessing) {\n                return false;\n            }\n            this.isProcessing = true;\n\n\n            braintree.tokenizeHostedFields();\n            return false;\n        },\n\n        /**\n         * @override\n         */\n        getData: function () {\n            let data = this._super();\n\n            data['additional_data']['is_active_payment_token_enabler'] = true;\n\n            return data;\n        },\n\n        /**\n         * @override\n         */\n        setPaymentInformation: function () {\n            if (additionalValidators.validate()) {\n                fullScreenLoader.startLoader();\n                $.when(\n                    setPaymentInformationAction(\n                        this.messageContainer,\n                        this.getData()\n                    )\n                ).done(this.done.bind(this))\n                    .fail(this.fail.bind(this));\n            }\n        },\n\n        /**\n         * {Function}\n         */\n        fail: function () {\n            fullScreenLoader.stopLoader();\n\n            return this;\n        },\n\n        /**\n         * {Function}\n         */\n        done: function () {\n            fullScreenLoader.stopLoader();\n            $('#multishipping-billing-form').trigger('submit');\n\n            return this;\n        }\n    });\n});\n","PayPal_Braintree/js/reCaptcha/webapiReCaptchaRegistry-mixin.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([], function () {\n    'use strict';\n\n    return function (originalFunction) {\n        /**\n         * {@inheritDoc}\n         */\n        originalFunction.addListener = function (id , func) {\n            this._listeners[id] = func;\n        };\n\n        return originalFunction;\n    };\n});\n","PayPal_Braintree/js/lpm/process-fallback-response.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\ndefine([\n    'Magento_Checkout/js/view/payment/default',\n    'Magento_Customer/js/customer-data',\n    'Magento_Checkout/js/model/quote',\n    'jquery',\n    'braintree',\n    'braintreeLpm',\n    'PayPal_Braintree/js/model/full-screen-loader',\n    'mage/translate',\n    'underscore'\n], function (Component, customerData, quote, $, braintree, lpm, fullScreenLoader, $t, _) {\n    'use strict';\n\n    return Component.extend({\n        code: 'braintree_local_payment',\n        paymentMethodNonce: null,\n        config: {\n            clientToken: null,\n            merchantAccountId: null,\n            redirectOnFail: null\n        },\n\n        /**\n         * Initialize config values\n         *\n         * @param config\n         */\n        initialize: function (config) {\n            this._super();\n            this.config.clientToken = config.clientToken;\n            this.config.merchantAccountId = config.merchantAccountId;\n            this.config.redirectOnFail = config.redirectOnFail;\n            this.setupLpmFallback();\n        },\n\n        /**\n         * Setup local payment fallback scenario\n         */\n        setupLpmFallback: function () {\n            let self = this;\n\n            fullScreenLoader.startLoader();\n\n            braintree.create({\n                authorization: self.config.clientToken\n            }, function (clientError, clientInstance) {\n                if (clientError) {\n                    self.redirectCustomerOnFailure($t('Unable to initialize Braintree Client.'));\n                    return;\n                }\n\n                lpm.create({\n                    client: clientInstance,\n                    merchantAccountId: self.config.merchantAccountId\n                }, function (lpmError, lpmInstance) {\n                    if (lpmError) {\n                        self.redirectCustomerOnFailure($t(lpmError.message));\n                    }\n\n                    if (lpmInstance.hasTokenizationParams()) {\n                        lpmInstance.tokenize(function (tokenizeError, payload) {\n                            if (tokenizeError) {\n                                self.redirectCustomerOnFailure($t(tokenizeError.message));\n                            } else {\n                                // Send the nonce to the server to create a transaction\n                                self.setPaymentMethodNonce(payload.nonce);\n                                self.isPlaceOrderActionAllowed(true);\n\n                                if (!window.checkoutConfig.isCustomerLoggedIn) {\n                                    // Set the email to the quote.\n                                    let checkoutData = customerData.get('checkout-data')();\n\n                                    quote.guestEmail = checkoutData.inputFieldEmailValue;\n                                }\n\n                                // Check all agreements if any available.\n                                let agreements = $('.checkout-agreements input[type=\"checkbox\"]');\n\n                                if (agreements.length) {\n                                    agreements.prop('checked', true);\n                                }\n\n                                self.placeOrder();\n                            }\n                        });\n                    } else {\n                        let error = 'Payment can not be processed as invalid parameters received';\n\n                        self.redirectCustomerOnFailure($t(error));\n                    }\n                });\n            });\n        },\n\n        /**\n         * Get code\n         *\n         * @returns {string}\n         */\n        getCode: function () {\n            return this.code;\n        },\n\n        /**\n         * Set payment method nonce\n         *\n         * @param nonce\n         */\n        setPaymentMethodNonce: function (nonce) {\n            this.paymentMethodNonce = nonce;\n        },\n\n        /**\n         * Get data\n         *\n         * @returns {{additional_data: {payment_method_nonce: null}, method: string}}\n         */\n        getData: function () {\n            let data = {\n                'method': this.getCode(),\n                'additional_data': {\n                    'payment_method_nonce': this.paymentMethodNonce\n                }\n            };\n\n            data['additional_data'] = _.extend(data['additional_data'], this.additionalData);\n\n            return data;\n        },\n\n        /**\n         * redirect customer to the configured page if any error/failure/cancelled.\n         */\n        redirectCustomerOnFailure: function (message) {\n            if (message) {\n                let braintreeData = customerData.get('braintree')(),\n                    errors = braintreeData.errors || [];\n\n                errors.push(message);\n\n                customerData.set('braintree', { errors: errors });\n            }\n\n            window.location.href = this.config.redirectOnFail;\n        }\n    });\n});\n","PayPal_Braintree/js/actions/set-shipping-information.js":"define([\n    'jquery',\n    'mage/storage',\n    'mage/translate',\n    'PayPal_Braintree/js/helper/get-api-url',\n    'PayPal_Braintree/js/helper/is-cart-virtual'\n], function ($, storage, $t, getApiUrl, isCartVirtual) {\n    'use strict';\n\n    // TODO: Remove need for storeCode to be passed in.\n    return function (payload, storeCode, quoteId) {\n        if (!isCartVirtual()) {\n            $('body').trigger('processStart');\n\n            return storage.post(\n                getApiUrl('shipping-information', storeCode, quoteId),\n                JSON.stringify(payload)\n            ).catch(function (r) {\n                console.error('Braintree PayPal unable to set shipping information', r);\n                throw new Error($t('Braintree PayPal unable to set shipping information.'));\n            }).always(function () {\n                $('body').trigger('processStop');\n            });\n        }\n\n        return Promise.resolve();\n    };\n});\n","PayPal_Braintree/js/actions/create-payment.js":"define([\n    'jquery',\n    'underscore',\n    'mage/storage',\n    'mage/translate',\n    'PayPal_Braintree/js/helper/get-api-url'\n], function (\n    $,\n    _,\n    storage,\n    $t,\n    getApiUrl\n) {\n    'use strict';\n\n    return function (payload, storeCode, quoteId) {\n        $('body').trigger('processStart');\n\n        if (window.checkout || window.checkoutConfig) {\n            let agreementIds = [];\n            if (window?.checkout?.agreementIds) {\n                agreementIds = window.checkout.agreementIds;\n            }\n            if (window?.checkoutConfig?.checkoutAgreements\n                && window?.checkoutConfig?.checkoutAgreements?.isEnabled) {\n                let agreements = window.checkoutConfig.checkoutAgreements.agreements;\n                _.each(agreements, function (item) {\n                    agreementIds.push(item.agreementId);\n                });\n            }\n            if (agreementIds.length) {\n                payload.paymentMethod.extension_attributes = {\n                    'agreement_ids': agreementIds\n                };\n            }\n        }\n        return storage.post(\n            getApiUrl('payment-information', storeCode, quoteId),\n            JSON.stringify(payload)\n        ).catch(function (r) {\n            console.error('Braintree PayPal Unable to take payment', r);\n            throw new Error($t('We\\'re unable to take payment through PayPal. Please try with different payment method.'));\n        }).always(function () {\n            $('body').trigger('processStop');\n        });\n    }\n});\n","PayPal_Braintree/js/actions/get-shipping-methods.js":"define([\n    'mage/storage',\n    'PayPal_Braintree/js/helper/get-api-url'\n], function (storage, getApiUrl) {\n    'use strict';\n\n    // TODO: Remove need for storeCode to be passed in.\n    return function (payload, storeCode, quoteId) {\n        return storage.post(\n            getApiUrl(\"estimate-shipping-methods\", storeCode, quoteId),\n            JSON.stringify(payload)\n        );\n    };\n});\n","PayPal_Braintree/js/actions/update-totals.js":"define([\n    'mage/storage',\n    'PayPal_Braintree/js/helper/get-api-url'\n], function (storage, getApiUrl) {\n    'use strict';\n\n    // TODO: Remove need for storeCode to be passed in.\n    return function (payload, storeCode, quoteId) {\n        return storage.post(\n            getApiUrl(\"totals-information\", storeCode, quoteId),\n            JSON.stringify(payload)\n        );\n    };\n});\n","PayPal_Braintree/js/actions/get-country-directory.js":"define(['mage/storage'], function (storage) {\n    'use strict';\n\n    return function () {\n        return storage.get(\"rest/V1/directory/countries\").then(function (result) {\n            const countryDirectory = {};\n            const countryList = {};\n            let i, data, x, region;\n            for (i = 0; i < result.length; ++i) {\n                data = result[i];\n                countryDirectory[data.two_letter_abbreviation] = {};\n                countryList[data.two_letter_abbreviation] = {};\n                if (typeof data.available_regions !== 'undefined') {\n                    for (x = 0; x < data.available_regions.length; ++x) {\n                        region = data.available_regions[x];\n                        countryDirectory[data.two_letter_abbreviation][region.name.toLowerCase().replace(/[^A-Z0-9]/ig, '')] = region.id;\n                        countryList[data.two_letter_abbreviation][region.code] = region.id;\n                    }\n                }\n            }\n\n            return {countryDirectory, countryList};\n        }.bind(this));\n    };\n});\n","Lens_Manager/js/lensoption.js":"define([\n    \"jquery\",\n    'Magento_Ui/js/modal/alert',\n    \"jquery/ui\",\n    'mage/cookies',\n], function ($, alert) {\n    'use strict';\n    $.widget('mage.lensoption', {\n        _create: function () {\n            var self = this;\n            var options = self.options.optionsData;\n            var inventoryStatus = false;\n            $(document).ready(function() {\n                $('.product-options-bottom').after($(\".time-to-free-delivery\"));\n                tick();\n            })\n            $('select').on('change', function(){\n                var optionId = $(this).attr('id').split('_')[1];\n                var side = $(this).attr('data-side');\n                var value = this.value;\n                $(this).closest('li').next().find('select').removeAttr('disabled');\n                updateOptions(optionId, value, side);\n            });\n            $('select').on('change', function(){\n                $(this).closest('li').next().find('select').val('');\n                $(this).closest('li').nextAll(\":gt(0)\").find('select').val('').prop('disabled','disabled');\n            })\n            \n            function updateOptions(optionId, value, side) {\n                var arrayToUpdate = options[optionId];\n                var valuesToUpdate = arrayToUpdate[value];\n                if (!$.isEmptyObject(valuesToUpdate)) {\n                    $('#'+side+'_main #select_'+optionId).closest('li').nextAll().find('select option:gt(0)').remove();\n                    $.each(valuesToUpdate, function(index, value){\n                        $.each(value, function(optionValue, optionText){\n                            $('#'+side+'_main #select_'+index).append(`<option value=\"${optionValue}\">${optionText}</option>`);\n                        })\n                    });\n                }\n            }\n            $('#left_checked').click(function(){\n                if ($(this).prop(\"checked\") == false) {\n                    reset('left');\n                } else if ($(this).prop(\"checked\") == true) {\n                    $(\"#left_main\").find(\"select:nth(0)\").removeAttr('disabled');\n                }\n            });\n            $('#right_checked').click(function(){\n                if ($(this).prop(\"checked\") == false) {\n                    reset('right');\n                } else if ($(this).prop(\"checked\") == true) {\n                    $(\"#right_main\").find(\"select:nth(0)\").removeAttr('disabled');\n                }\n            });\n\n            function reset(side) {\n                $(\"#\"+side+\"_main\").find(\"select\").prop('disabled', 'disabled');\n                $(\"#\"+side+\"_main\").find(\"select\").val('');\n                // $(\"#\"+side+\"_main\").find(\"select:gt(0) option\").remove();\n                // $(\"#\"+side+\"_main\").find(\"select:gt(0)\").append(\"<option>-- Please Select --</option>\");\n            }\n\n            function checkProductAvailability() {\n                var selectedData = getSelectedOptionData();\n                $.ajax({\n                    showLoader: true,\n                    type: \"POST\",\n                    dataType: \"json\",\n                    url: self.options.url,\n                    data: {\n                        'selectedData': selectedData,\n                        'productId' : $(\"input[name=product]\").val(),\n                        'form_key': $.mage.cookies.get('form_key'),\n                    },\n                    cache: false,\n                    success: function(data){\n                        inventoryStatus = data.status;\n                    }\n                });\n            }\n\n            function getSelectedOptionData()\n            {\n                var selectedOptionsData = {};\n                selectedOptionsData['rightEye'] = {};\n                selectedOptionsData['leftEye'] = {};\n                var isRightChecked = $('#right_checked').is(':checked');\n                var isLeftChecked = $('#left_checked').is(':checked');\n                if (isRightChecked) {\n                    $('#right_main select').each(function() {\n                        selectedOptionsData['rightEye'][$(this).attr('data-label')] = $(this).find('option:selected').text();\n                    });\n                }\n                if (isLeftChecked) {\n                    $('#left_main select').each(function() {\n                        selectedOptionsData['leftEye'][$(this).attr('data-label')] = $(this).find('option:selected').text();\n                    });\n                }\n                return selectedOptionsData;\n            }\n\n            $(\".quantity-manager .add-action\").click(function(){\n                if ($(this).hasClass('add-up') ) {\n                    if (parseInt($(this).parent().parent().find('.quantity-number input.qty').val()) < 12) {\n                        $(this).parent().parent().find('.quantity-number input.qty').val(parseInt($(this).parent().parent().find('.quantity-number input.qty').val()) + 1);\n                    }\n                } else {\n                    if (parseInt($(this).parent().parent().find('.quantity-number input.qty').val()) > 1) {\n                        $(this).parent().parent().find('.quantity-number input.qty').val(parseInt($(this).parent().parent().find('.quantity-number input.qty').val()) - 1);\n                    }\n                }\n            })\n\n            jQuery('#right_checked').click(function () {\n                updateMessage();\n            })\n            jQuery('#left_checked').click(function () {\n                updateMessage();\n            })\n            jQuery(\"#right_main select\").on('change', function(){\n                updateMessage();\n            })\n            jQuery(\"#left_main select\").on('change', function(){\n                updateMessage();\n            })        \n            function updateMessage() {\n                var rightFlag = true;\n                var leftFlag = true;\n                var isRightChecked = jQuery('#right_checked').is(':checked');\n                var isLeftChecked = jQuery('#left_checked').is(':checked');\n                if (isRightChecked) {\n                    jQuery('#right_main select').each(function() {\n                        if (jQuery(this).val() == \"\") {\n                            rightFlag = false;\n                            return false;\n                        }\n                    });\n                } else {\n                    rightFlag = true;\n                }\n                if (isLeftChecked) {\n                    jQuery('#left_main select').each(function() {\n                        if (jQuery(this).val() == \"\") {\n                            leftFlag = false;\n                            return false;\n                        }\n                    });\n                } else {\n                    leftFlag = true;\n                }\n                if (!isRightChecked && !isLeftChecked) {\n                    jQuery('#demo').addClass('do_not_show');\n                    jQuery(\".warning_message\").removeClass('do_not_show');\n                } else {\n                    if (rightFlag && leftFlag) {\n                        checkProductAvailability();\n                        jQuery('#demo').removeClass('do_not_show');\n                        jQuery(\".warning_message\").addClass('do_not_show');\n                    } else {\n                        jQuery('#demo').addClass('do_not_show');\n                        jQuery(\".warning_message\").removeClass('do_not_show');\n                    }\n                }\n            }\n            var start = new Date;\n            var date = new Date();\n            var todayDay = date.getDay();\n            if (todayDay == 6) {\n                start.setHours(12, 0, 0);\t// 12 noon\n            } else if (todayDay != 0) {\n                start.setHours(17, 0, 0); // 5pm\n            } else {\n                start.setHours(0, 0, 0); // midnight\n            }\n            function pad(num) {\n                return (\"0\" + parseInt(num)).substr(-2);\n            }\n\n            function tick() {\n                var showFlag = false;\n                var now = new Date;\n                var remain = ((start - now) / 1000);\n                var hh = pad((remain / 60 / 60) % 60);\n                var mm = pad((remain / 60) % 60);\n                var ss = pad(remain % 60);\n                var stockStatus = \"<p><span class='hemag_stock_status'>-- In Stock --</span></p>\";\n                var dispatchToday = \"<span class='hj_normal_text'>Order within </span> <span class='hj_time_text'>\"+ hh + \":\" + mm + \":\" + ss + \"</span><span class='hj_normal_text'> for Dispatch Today</span>\";\n                if (todayDay == 0 || todayDay == 6) {\n                    var dispatchTomorrow = \"<span class='hj_normal_text'>This Order will be Dispatched on Monday</span>\";\n                } else {\n                    var dispatchTomorrow = \"<span class='hj_normal_text'>This Order will be Dispatched Tomorrow</span>\";\n                }\n                var dispatchLater = \"<span class = 'dispatch_later'>The product will be dispatched in</span></br><span> 1-2 working days</span>\"\n                console.log(inventoryStatus);\n                if (inventoryStatus) {\n                    if (now < start) {\n                        var messageString = stockStatus + dispatchToday;\n                    } else {\n                        var messageString = stockStatus + dispatchTomorrow;\n                    }\n                } else {\n                    var messageString = dispatchLater;\n                }\n                $('#demo').html(messageString);\n                setTimeout(tick, 1000);\n            }\n            document.addEventListener('DOMContentLoaded', tick);\n        }\n    });\n    return $.mage.lensoption;\n});","Lens_Manager/js/reorder.js":"define([\n    \"jquery\",\n    'Magento_Ui/js/modal/alert',\n    \"jquery/ui\",\n    'mage/cookies',\n], function ($, alert) {\n    'use strict';\n    $.widget('mage.lensoption', {\n        _create: function () {\n            var self = this;\n            var options = self.options;\n            var reorderUrl = options.reorderUrl;\n            var checkoutUrl = options.checkoutUrl;\n            $(document).on('click','#reorder-history-new', function(){\n                var orderId = $(this).attr('data-id');\n                $.ajax({\n                    showLoader: true,\n                    type: \"POST\",\n                    dataType: \"json\",\n                    url: reorderUrl,\n                    data: {\n                        'order_id': orderId,\n                        'form_key': $.mage.cookies.get('form_key'),\n                    },\n                    cache: false,\n                    success: function(data) {\n                        console.log(data);\n                        if (data.success) {\n                            window.location.replace(checkoutUrl);\n                        } else {\n                            alert({\n                                content: $.mage.__('The product Does Not exist. Sorry for inconvience. Please proceed with a new order.'),\n                            });\n                        }\n                        return true\n                    }\n                });\n            });\n            \n        }\n    });\n    return $.mage.lensoption;\n});","Amasty_GoogleAddressAutocomplete/js/autocompleteApi.js":"/* global google, console */\n/**\n * New Google Autocomplete Places API\n */\ndefine([\n    'Magento_Ui/js/lib/view/utils/async',\n    'uiRegistry',\n    'ko',\n    'underscore',\n    'uiLayout',\n    'rjsResolver',\n    './model/requestModel',\n    './model/placeProcessor',\n    'Amasty_GoogleAddressAutocomplete/js/action/selectPlace'\n], function ($, registry, ko, _, layout, rjsResolver, requestModel, placeProcessor, selectPlace) {\n    'use strict';\n\n    return {\n        includedCounties: {},\n        placeSubscription: null,\n\n        /**\n         * @returns {void}\n         */\n        init: function () {\n            $.async({\n                selector: 'input[name=\"street[0]\"]'\n            }, input => {\n                const inputComponent = ko.dataFor(input),\n                    fieldsetComponent = inputComponent?.containers[0]?.containers[0];\n\n                if (fieldsetComponent) {\n                    this.initInputBinding(input, fieldsetComponent);\n                    this.initView(fieldsetComponent, input);\n                }\n            });\n        },\n\n        /**\n         * @param {HTMLInputElement} input\n         * @param {UiElement} fieldsetComponent\n         * @returns {void}\n         */\n        initInputBinding: function (input, fieldsetComponent) {\n            input.addEventListener('focus', (event) => {\n                if (requestModel.input === input) {\n                    return;\n                }\n\n                requestModel.activate(\n                    input,\n                    this.includedCounties\n                );\n\n                if (this.placeSubscription) {\n                    this.placeSubscription.dispose();\n                }\n\n                this.placeSubscription = requestModel.selectedPlace.subscribe((place) => {\n                    if (place) {\n                        selectPlace(fieldsetComponent, place);\n                    }\n                });\n            });\n\n            input.addEventListener('blur', (event) => {\n                requestModel.deactivate(input);\n                if (this.placeSubscription) {\n                    this.placeSubscription.dispose();\n                    this.placeSubscription = null;\n                }\n            });\n        },\n\n        initView: function (fieldsetComponent, input) {\n            const component = registry.get(fieldsetComponent.name + '.autocomplete-suggestions');\n\n            if (component) {\n                component.input = input;\n                component.updateInput();\n            } else {\n                layout([ {\n                    'name': 'autocomplete-suggestions',\n                    'parent': fieldsetComponent.name,\n                    'component': 'Amasty_GoogleAddressAutocomplete/js/view/suggestionsList',\n                    'template': 'Amasty_GoogleAddressAutocomplete/suggestion-list',\n                    'input': input\n                } ], fieldsetComponent);\n            }\n        }\n    };\n});\n","Amasty_GoogleAddressAutocomplete/js/autocomplete.js":"/* global google */\n/**\n * Google Autocomplete initializer\n * Deprecated\n */\ndefine([\n    'Magento_Ui/js/lib/view/utils/async',\n    'uiRegistry',\n    'ko',\n    'underscore'\n], function ($, registry, ko, _) {\n    'use strict';\n\n    return {\n        isReady: ko.observable(false),\n        options: {},\n        restrictedCountryList: {},\n\n        /**\n         * @param {Object} autocomplete - Google Autocomplete object\n         * @returns {void}\n         */\n        geolocate: function (autocomplete) {\n            if (navigator.geolocation) {\n                navigator.geolocation.getCurrentPosition(function (position) {\n                    var geolocation = {\n                            lat: position.coords.latitude,\n                            lng: position.coords.longitude\n                        },\n                        circle = new google.maps.Circle({\n                            center: geolocation,\n                            radius: position.coords.accuracy\n                        });\n\n                    autocomplete.setBounds(circle.getBounds());\n                });\n            }\n        },\n\n        /**\n         * @param {UIComponent} component\n         * @returns {null|void}\n         */\n        registerField: function (component) {\n            var self = this;\n\n            if (this.isReady()) {\n                return this.init(component);\n            }\n\n            this.isReady.subscribe(function (isReady) {\n                if (isReady) {\n                    return self.init(component);\n                }\n\n                return null;\n            });\n\n            return null;\n        },\n\n        /**\n         * @param {UIComponent} component\n         * @returns {void}\n         */\n        init: function (component) {\n            var self = this;\n\n            registry.get(component, function (rootComponent) {\n                registry.get(component + '.street.0', function (inputComponent) {\n                    $.async({\n                        selector: '#' + inputComponent.uid\n                    }, function (input) {\n                        var autocomplete = new google.maps.places.Autocomplete(\n                            input,\n                            {\n                                types: ['geocode'],\n                                componentRestrictions: {country: self.restrictedCountryList}\n                            }\n                        );\n\n                        autocomplete.setFields(['address_components', 'name']);\n\n                        // eslint-disable-next-line max-nested-callbacks\n                        autocomplete.addListener('place_changed', function () {\n                            self.fillInAddress(autocomplete, rootComponent);\n                        });\n\n                        self.geolocate(autocomplete);\n                    });\n                });\n            });\n        },\n\n        /**\n         * @param {Object} autocomplete - Google Autocomplete object\n         * @param {UIComponent} rootComponent\n         * @returns {void}\n         */\n        fillInAddress: function (autocomplete, rootComponent) {\n            var self = this,\n                place = autocomplete.getPlace(),\n                street = place.name.replace(',', ''),\n                postcode = false,\n                postcodeSuffix = false,\n                isRegionApplied = false,\n                streetComponent = rootComponent.getChild('street').getChild(0),\n                stateSelect = rootComponent.getChild('region_id'),\n                stateInput = rootComponent.getChild('region_id_input'),\n                country,\n                shortValue,\n                longValue,\n                addressType;\n\n            if (!place.address_components) {\n                return;\n            }\n\n            if (street && (streetComponent.value() === street)) {\n                streetComponent.value.valueHasMutated();\n            } else {\n                streetComponent.value(street);\n            }\n\n            if (rootComponent.hasChild('postcode')) {\n                rootComponent.getChild('postcode').value('');\n            }\n\n            if (rootComponent.hasChild('region_id_input')) {\n                rootComponent.getChild('region_id_input').value('');\n            }\n\n            if (rootComponent.hasChild('city')) {\n                rootComponent.getChild('city').value('');\n            }\n\n            if (rootComponent.hasChild('country_id')) {\n                rootComponent.getChild('country_id').value('');\n            }\n\n            place.address_components.reverse();\n            _.each(place.address_components, function (addressComponent) {\n                addressType = addressComponent.types[0];\n                shortValue = addressComponent.short_name;\n                longValue = addressComponent.long_name;\n\n                switch (addressType) {\n                    case 'postal_code':\n                        if (rootComponent.hasChild('postcode')) {\n                            postcode = longValue;\n\n                            if (postcodeSuffix) {\n                                postcode = postcode + '-' + postcodeSuffix;\n                            }\n\n                            rootComponent.getChild('postcode').value(postcode);\n                        }\n\n                        break;\n                    case 'postal_code_suffix':\n                        postcodeSuffix = longValue;\n\n                        break;\n                    case 'country':\n                        if (rootComponent.hasChild('country_id')) {\n                            rootComponent.getChild('country_id').value(shortValue);\n                            country = shortValue;\n                        }\n\n                        break;\n                    case 'administrative_area_level_1':\n                        country = rootComponent.getChild('country_id').value();\n\n                        if (stateSelect && stateSelect.visible()) {\n                            if (country === 'DE') {\n                                self.changeRegions(self.options.regions, country);\n                            }\n\n                            if (shortValue in self.options.regions[country]) {\n                                stateSelect.value(self.options.regions[country][shortValue]);\n                                isRegionApplied = true;\n                            }\n\n                            break;\n                        }\n\n                        if (stateInput && stateInput.visible()) {\n                            stateInput.value(longValue);\n                        }\n\n                        break;\n                    case 'administrative_area_level_2':\n                        if (stateSelect && stateSelect.visible() && !isRegionApplied) {\n                            if (shortValue in self.options.regions[country]) {\n                                stateSelect.value(self.options.regions[country][shortValue]);\n                            }\n                        }\n\n                        break;\n                    case 'locality':\n                    case 'postal_town':\n                        if (rootComponent.hasChild('city')) {\n                            rootComponent.getChild('city').value(longValue);\n                        }\n\n                        break;\n                    default: break;\n                }\n            });\n        },\n\n        /**\n         * Changes regions for compatibility with Google Autocomplete API\n         *\n         * @param {Object} regions\n         * @param {string} country\n         * @returns {Object}\n         */\n        changeRegions: function (regions, country) {\n            var googleGermanyStates = {\n                BW: '80',\n                BY: '81',\n                BE: '82',\n                BB: '83',\n                HB: '84',\n                HH: '85',\n                HE: '86',\n                MV: '87',\n                NDS: '79',\n                NRW: '88',\n                RP: '89',\n                SL: '90',\n                SN: '91',\n                SA: '92',\n                SH: '93',\n                TH: '94'\n            };\n\n            regions[country] = googleGermanyStates;\n\n            return regions[country];\n        }\n    };\n});\n","Amasty_GoogleAddressAutocomplete/js/view/suggestionsList.js":"define([\n    'jquery',\n    'underscore',\n    'uiElement',\n    'mage/utils/misc',\n    'Amasty_GoogleAddressAutocomplete/js/model/requestModel'\n], function ($, _, Element, utils, requestModel) {\n    'use strict';\n\n    return Element.extend({\n        defaults: {\n            /**\n             * @type {HTMLInputElement}\n             */\n            input: null,\n            template: 'Amasty_GoogleAddressAutocomplete/suggestion-list',\n            elementWidth: 0,\n            elementTop: 0,\n            elementLeft: 0,\n            activeIndex: 0,\n            defaultIndex: -1,\n            gap: 4\n        },\n        suggestions: requestModel.suggestions,\n        isActive: requestModel.isActive,\n        isLoading: requestModel.isLoading,\n        /**\n         * @type {HTMLDivElement}\n         */\n        element: null,\n        _activeScrollListener: null,\n        _parentPositionCache: null,\n\n        /**\n         * @api\n         */\n        updateInput: function () {\n            this.clearCache();\n            this.bindToInput();\n        },\n\n        clearCache: function () {\n            this._parentPositionCache = null;\n            this._activeScrollListener = null;\n        },\n\n        isActual: function () {\n            return this.input === requestModel.input;\n        },\n\n        initObservable: function () {\n            this._super();\n\n            this.observe(['activeIndex', 'elementWidth', 'elementTop', 'elementLeft']);\n\n            this.suggestions.subscribe((suggestions) => {\n                this.activeIndex(this.defaultIndex);\n            });\n\n            this.isActive.subscribe((isActive) => {\n                if (!this.isActual()) {\n                    return;\n                }\n\n                if (isActive) {\n                    this.updateElementView();\n                }\n\n                this.input.setAttribute('aria-expanded', isActive);\n            });\n\n            this.activeIndex.subscribe((index) => {\n                if (!this.isActual()) {\n                    return;\n                }\n\n                let activeUid = this.getActiveUid();\n\n                if (activeUid) {\n                    this.input.setAttribute('aria-activedescendant', activeUid);\n                } else {\n                    this.input.removeAttribute('aria-activedescendant');\n                }\n            });\n\n            return this;\n        },\n\n        initConfig: function () {\n            this._super();\n\n            this.uid = this.uid || utils.uniqueid();\n\n            return this;\n        },\n\n        updateElementView: function () {\n            if (!this.isActual()) {\n                return;\n            }\n\n            const $input = $(this.input),\n                offset = $input.offset(),\n                fixedParent = this.getPositionedParent();\n\n            this.elementWidth($input.outerWidth());\n\n            if (fixedParent) {\n                const $fixedParent = $(fixedParent),\n                    parentOffset = $fixedParent.offset();\n\n                this.elementTop(offset.top - parentOffset.top + $input.outerHeight() + this.gap);\n                this.elementLeft(offset.left - parentOffset.left);\n                if (!this._activeScrollListener && $fixedParent.css(\"position\").toLowerCase() !== 'relative') {\n                    let scrollParent = this.getScrollParent(this.element.parentNode);\n\n                    scrollParent.addEventListener('scroll', this.scrollHandler.bind(this));\n                    this._activeScrollListener = true;\n                }\n            } else {\n                this.elementTop(offset.top + $input.outerHeight() + this.gap);\n                this.elementLeft(offset.left);\n            }\n        },\n\n        scrollHandler: function () {\n            if (this.isActive()) {\n                this.updateElementView();\n            }\n        },\n\n        /**\n         * @param {Node} node\n         * @returns {HTMLElement|null}\n         */\n        getScrollParent: function (node) {\n            if (!node) {\n                return null;\n            }\n\n            if (node.scrollHeight > node.clientHeight) {\n                return node;\n            }\n\n            return this.getScrollParent(node.parentNode);\n        },\n\n        /**\n         * @returns {HTMLElement|null}\n         */\n        getPositionedParent: function () {\n            if (this._parentPositionCache !== null) {\n                return this._parentPositionCache;\n            }\n\n            const $element = $(this.element);\n\n            return this._parentPositionCache = _.find($element.parents(), item => {\n                const position = $(item).css(\"position\").toLowerCase();\n\n                return position === 'absolute'\n                    || position === 'fixed'\n                    || position === 'relative';\n            });\n        },\n\n        /**\n         * @param {HTMLDivElement} element\n         */\n        registerElement: function (element) {\n            this.element = element;\n            this.updateInput();\n        },\n\n        bindToInput: function () {\n            this.input.setAttribute('aria-autocomplete', 'list');\n            this.input.setAttribute('aria-controls', this.uid);\n            this.input.addEventListener('keydown', this.keydownListener.bind(this));\n        },\n\n        /**\n         * @param {KeyboardEvent} event\n         */\n        keydownListener: function (event) {\n            switch (event.key) {\n                case 'ArrowDown':\n                    event.preventDefault();\n                    if (event.altKey) {\n                        // Alt + Down Arrow. Opens the listbox without moving focus or changing selection.\n                        this.isActive(true);\n\n                        return;\n                    }\n\n                    if (this.activeIndex() < this.suggestions().length - 1) {\n                        this.activeIndex(this.activeIndex() + 1);\n                    } else {\n                        this.activeIndex(this.defaultIndex);\n                    }\n                    break;\n\n                case 'ArrowUp':\n                    event.preventDefault();\n                    if (this.activeIndex() === this.defaultIndex) {\n                        this.activeIndex(this.suggestions().length - 1);\n                    } else if (this.activeIndex() > 0) {\n                        this.activeIndex(this.activeIndex() - 1);\n                    } else {\n                        this.activeIndex(this.defaultIndex);\n                    }\n                    break;\n\n                case 'Enter':\n                    if (this.isActive()) {\n                        event.preventDefault();\n                        requestModel.selectSuggestion(this.suggestions()[this.activeIndex()]);\n                    }\n                    break;\n\n                case 'Escape':\n                    if (this.isActive()) {\n                        event.preventDefault();\n                        this.isActive(false);\n                    }\n                    break;\n            }\n        },\n\n        /**\n         * @param {AmSuggestion} suggestion\n         * @param {Event} event\n         */\n        handleClick: function (suggestion, event) {\n            // Prevent the default mousedown behavior,\n            // which would typically cause the input to lose focus and blur.\n            event.preventDefault();\n            requestModel.selectSuggestion(suggestion);\n        },\n\n        /**\n         * @returns {string|undefined}\n         */\n        getActiveUid: function () {\n            return this.suggestions()[this.activeIndex()]?.uid;\n        },\n\n        /**\n         * @param {AmSuggestion} suggestion\n         * @returns {string}\n         */\n        getDisplayText: function (suggestion) {\n            let result = '', offset = 0;\n\n            _.each(suggestion.matches, (match) => {\n                result += suggestion.text.substring(offset, match.startOffset);\n                result += '<b>' + suggestion.text.substring(match.startOffset, match.endOffset) + '<\\/b>';\n                offset = match.endOffset;\n            });\n\n            result += suggestion.text.substring(offset)\n\n            return result;\n        }\n    });\n});\n","Amasty_GoogleAddressAutocomplete/js/action/selectPlace.js":"define([\n    'underscore',\n    'Amasty_GoogleAddressAutocomplete/js/model/placeProcessor'\n], function (_, placeProcessor) {\n    \"use strict\";\n\n    let componentValueIterator = function (fieldsetComponent, value, key) {\n        if (fieldsetComponent.hasChild(key)) {\n            const child = fieldsetComponent.getChild(key);\n\n            if (_.isArray(value)) {\n                _.each(value, componentValueIterator.bind(this, child));\n            } else {\n                child.value(value);\n            }\n        } else {\n            console.warn(`During address autocomplete: ${key} not found`);\n        }\n    };\n\n    return function (fieldsetComponent, place) {\n        if (place) {\n            let street = fieldsetComponent.getChild('street');\n\n            if (street.hasChild(3)) {\n                placeProcessor.streetFieldsCount = 4;\n            } else if (street.hasChild(2)) {\n                placeProcessor.streetFieldsCount = 3;\n            } else if (street.hasChild(1)) {\n                placeProcessor.streetFieldsCount = 2;\n            } else {\n                placeProcessor.streetFieldsCount = 1;\n            }\n\n            placeProcessor.convertToAddress(place).then((address) => {\n                if (address) {\n                    _.each(address, componentValueIterator.bind(this, fieldsetComponent));\n                }\n            });\n        }\n    };\n});\n","Amasty_GoogleAddressAutocomplete/js/model/placeProcessor.js":"/* global google */\n/**\n * Google Autocomplete Place processor\n */\ndefine([\n    'uiRegistry',\n    'ko',\n    'underscore'\n], function (registry, ko, _) {\n    'use strict';\n\n    return {\n        /**\n         * Returns a properly formatted list of regions that follows the following format:\n         * [ countryId => [regionCode => regionId] ]\n         * @type {Object.<string, Object.<string, string>>}\n         */\n        regionMap: null,\n\n        /**\n         * Number of available street fields\n         * @type {number}\n         */\n        streetFieldsCount: 1,\n\n        /**\n         * @param {Place} place\n         * @returns {Promise<{}|null>}\n         */\n        convertToAddress: async function (place) {\n            if (!place.addressComponents) {\n                const placeFetched = await place.fetchFields({ fields: [ 'addressComponents', 'displayName' ] });\n                place = placeFetched.place;\n\n                if (!place.addressComponents) {\n                    return null;\n                }\n            }\n\n            let address = {\n                    country_id: '',\n                    street: [ place.displayName ],\n                    postcode: '',\n                    region_id: '',\n                    region_id_input: ''\n                },\n                regionData = {\n                    region_id: '',\n                    region: '',\n                    region_2: ''\n                };\n\n            place.addressComponents.forEach((addressComponent) => {\n                let shortValue = addressComponent.shortText,\n                    longValue = addressComponent.longText;\n\n                switch (addressComponent.types[0]) {\n                    case 'street_number':\n                        if (this.streetFieldsCount > 1) {\n                            address.street[1] = longValue;\n                        }\n\n                        break;\n                    case 'route':\n                        if (this.streetFieldsCount > 1) {\n                            address.street[0] = longValue;\n                        }\n\n                        break;\n                    case 'postal_code_prefix':\n                        address.postcode = longValue + '-';\n\n                        break;\n                    case 'postal_code':\n                        address.postcode = longValue + address.postcode;\n\n                        break;\n                    case 'postal_code_suffix':\n                        address.postcode += '-' + longValue;\n\n                        break;\n                    case 'administrative_area_level_1':\n                        regionData.region_id = shortValue;\n                        regionData.region = longValue;\n\n                        break;\n                    case 'administrative_area_level_2':\n                        regionData.region_2 = shortValue;\n\n                        break;\n                    case 'locality':\n                    case 'postal_town':\n                        address.city = longValue;\n\n                        break;\n                    case 'country':\n                        address.country_id = shortValue;\n\n                        break;\n                    default:\n                        break;\n                }\n            });\n\n            if (address.country_id in this.regionMap) {\n                address.region_id = this.regionMap[address.country_id][regionData.region_id]\n                    || this.regionMap[address.country_id][regionData.region_2]\n                    || '';\n            } else {\n                address.region_id_input = regionData.region;\n            }\n\n            return address;\n        }\n    }\n});\n","Amasty_GoogleAddressAutocomplete/js/model/requestModel.js":"/* global google, navigator */\n/**\n * Google Autocomplete request processor\n */\ndefine([\n    'ko',\n    'underscore',\n    'mage/utils/misc'\n], function (ko, _, utils) {\n    'use strict';\n\n    /**\n     * @typedef {Object} AmSuggestion\n     * @property {string} text\n     * @property {Array<StringRange>} matches\n     * @property {Place} place\n     * @property {string} uid\n     *\n     * @typedef {Object} StringRange\n     * @property {number} startOffset\n     * @property {number} endOffset\n     */\n\n    return {\n        includedCounties: [],\n        request: null,\n        suggestions: ko.observableArray([]),\n        selectedPlace: ko.observable(null),\n        isActive: ko.observable(false),\n        isLoading: ko.observable(false),\n        /**\n         * @type {HTMLInputElement}\n         */\n        input: null,\n        activeKeydownListener: null,\n\n        /**\n         * @param {HTMLInputElement} input\n         * @param includedCounties\n         */\n        activate: function (input, includedCounties) {\n            this.input = input;\n            this.includedCounties = includedCounties;\n\n            if (!this.request) {\n                this.buildRequestCore().then(() => {\n                    this.initInputBinding(input);\n                });\n            } else {\n                this.initInputBinding(input);\n            }\n\n            this.isActive(true);\n        },\n\n        initInputBinding: function (input) {\n            const inputText = input.value;\n\n            this.doRequest(inputText);\n\n            if (!this.activeKeydownListener) {\n                this.activeKeydownListener = _.debounce(this.keydownListener.bind(this), 200);\n\n                input.addEventListener(\n                    'keydown',\n                    this.activeKeydownListener\n                );\n            }\n        },\n\n        keydownListener: function (event) {\n            if (event.key === 'Enter' || event.key === 'Escape') {\n                return;\n            }\n\n            this.doRequest(this.input.value);\n        },\n\n        deactivate: function (input) {\n            this.isActive(false);\n            this.suggestions([]);\n            input.removeEventListener(\n                'keydown',\n                this.activeKeydownListener\n            );\n            this.activeKeydownListener = null;\n            this.input = null;\n        },\n\n        /**\n         * @param {AmSuggestion|null} suggestion\n         */\n        selectSuggestion: function (suggestion) {\n            this.isActive(false);\n\n            if (suggestion) {\n                this.selectedPlace(suggestion.place);\n            } else {\n                this.selectedPlace(null);\n            }\n        },\n\n        buildRequestCore: async function () {\n            const { AutocompleteSessionToken } = await google.maps.importLibrary('places');\n\n            this.request = {\n                input: '',\n                includedPrimaryTypes: [ 'street_address', 'route' ],\n                sessionToken: new AutocompleteSessionToken\n            };\n\n            if (this.includedCounties) {\n                this.request.includedRegionCodes = this.includedCounties;\n            }\n\n            this.geolocate();\n        },\n\n        geolocate: function () {\n            navigator?.geolocation.getCurrentPosition((position) => {\n                this.request.locationBias = {\n                    lat: position.coords.latitude,\n                    lng: position.coords.longitude\n                };\n            });\n        },\n\n        /**\n         * @param {string} inputText\n         * @returns {Promise<*>}\n         */\n        doRequest: async function (inputText) {\n            if (this.request.input === inputText) {\n                this.isLoading(false);\n\n                return;\n            }\n\n            if (!inputText) {\n                this.suggestions([]);\n                this.request.input = '';\n                this.isLoading(false);\n\n                return;\n            }\n\n            this.isActive(true);\n            this.isLoading(true);\n            const { AutocompleteSuggestion } = await google.maps.importLibrary('places');\n            this.request.input = inputText;\n            const { suggestions } =\n                await AutocompleteSuggestion.fetchAutocompleteSuggestions(this.request);\n            this.suggestions(suggestions.map(this.mapSuggestion.bind(this)));\n            this.isLoading(false);\n\n            return suggestions;\n        },\n\n        /**\n         * @param {PlacePrediction} placePrediction\n         * @returns {AmSuggestion}\n         */\n        mapSuggestion: function ({ placePrediction }) {\n            return {\n                text: placePrediction.text.text,\n                matches: placePrediction.text.matches,\n                place: placePrediction.toPlace(),\n                uid: utils.uniqueid()\n            };\n        }\n    };\n});\n","Amasty_GoogleAddressAutocomplete/js/form/element/autocomplete.js":"/**\n * Autocomplete element field\n */\ndefine([\n    'Magento_Ui/js/form/element/abstract',\n    'Amasty_GoogleAddressAutocomplete/js/autocomplete'\n], function (AbstractField, autocomplete) {\n    'use strict';\n\n    return AbstractField.extend({\n        initialize: function () {\n            this._super();\n\n            autocomplete.registerField(this.name.split('.').slice(0, -2).join('.'));\n\n            return this;\n        }\n    });\n});\n","Magento_SalesRule/js/model/place-order-mixin.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'mage/utils/wrapper',\n    'Magento_Checkout/js/model/quote',\n    'Magento_SalesRule/js/model/coupon',\n    'Magento_Checkout/js/action/get-totals'\n], function ($, wrapper, quote, coupon, getTotalsAction) {\n    'use strict';\n\n    return function (placeOrderAction) {\n        return wrapper.wrap(placeOrderAction, function (originalAction, paymentData, messageContainer) {\n            var result;\n\n            $.when(\n                result = originalAction(paymentData, messageContainer)\n            ).fail(\n                function () {\n                    var deferred = $.Deferred(),\n\n                        /**\n                         * Update coupon form\n                         */\n                        updateCouponCallback = function () {\n                            if (quote.totals() && !quote.totals()['coupon_code']) {\n                                coupon.setCouponCode('');\n                                coupon.setIsApplied(false);\n                            }\n                        };\n\n                    getTotalsAction([], deferred);\n                    $.when(deferred).done(updateCouponCallback);\n                }\n            );\n\n            return result;\n        });\n    };\n});\n","Magento_SalesRule/js/model/coupon.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/**\n * Coupon model.\n */\ndefine([\n    'ko',\n    'domReady!'\n], function (ko) {\n    'use strict';\n\n    var couponCode = ko.observable(null),\n        isApplied = ko.observable(null);\n\n    return {\n        couponCode: couponCode,\n        isApplied: isApplied,\n\n        /**\n         * @return {*}\n         */\n        getCouponCode: function () {\n            return couponCode;\n        },\n\n        /**\n         * @return {Boolean}\n         */\n        getIsApplied: function () {\n            return isApplied;\n        },\n\n        /**\n         * @param {*} couponCodeValue\n         */\n        setCouponCode: function (couponCodeValue) {\n            couponCode(couponCodeValue);\n        },\n\n        /**\n         * @param {Boolean} isAppliedValue\n         */\n        setIsApplied: function (isAppliedValue) {\n            isApplied(isAppliedValue);\n        }\n    };\n});\n","Magento_SalesRule/js/model/shipping-save-processor-mixin.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'mage/utils/wrapper',\n    'Magento_Checkout/js/model/quote',\n    'Magento_SalesRule/js/model/coupon'\n], function (wrapper, quote, coupon) {\n    'use strict';\n\n    return function (shippingSaveProcessor) {\n        shippingSaveProcessor.saveShippingInformation = wrapper.wrapSuper(\n            shippingSaveProcessor.saveShippingInformation,\n            function (type) {\n                var updateCouponCallback;\n\n                /**\n                 * Update coupon form\n                 */\n                updateCouponCallback = function () {\n                    if (quote.totals() && !quote.totals()['coupon_code']) {\n                        coupon.setCouponCode('');\n                        coupon.setIsApplied(false);\n                    }\n                };\n\n                return this._super(type).done(updateCouponCallback);\n            }\n        );\n\n        return shippingSaveProcessor;\n    };\n});\n","Magento_SalesRule/js/model/payment/discount-messages.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/model/messages'\n], function (Messages) {\n    'use strict';\n\n    return new Messages();\n});\n","Magento_SalesRule/js/action/select-payment-method-mixin.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'mage/utils/wrapper',\n    'Magento_Checkout/js/model/quote',\n    'Magento_SalesRule/js/model/payment/discount-messages',\n    'Magento_Checkout/js/action/set-payment-information-extended',\n    'Magento_Checkout/js/action/get-totals',\n    'Magento_SalesRule/js/model/coupon'\n], function ($, wrapper, quote, messageContainer, setPaymentInformationExtended, getTotalsAction, coupon) {\n    'use strict';\n\n    return function (selectPaymentMethodAction) {\n\n        return wrapper.wrap(selectPaymentMethodAction, function (originalSelectPaymentMethodAction, paymentMethod) {\n\n            originalSelectPaymentMethodAction(paymentMethod);\n\n            if (paymentMethod === null) {\n                return;\n            }\n\n            $.when(\n                setPaymentInformationExtended(\n                    messageContainer,\n                    {\n                        method: paymentMethod.method\n                    },\n                    true\n                )\n            ).done(\n                function () {\n                    var deferred = $.Deferred(),\n\n                        /**\n                         * Update coupon form.\n                         */\n                        updateCouponCallback = function () {\n                            if (quote.totals() && !quote.totals()['coupon_code']) {\n                                coupon.setCouponCode('');\n                                coupon.setIsApplied(false);\n                            }\n                        };\n\n                    getTotalsAction([], deferred);\n                    $.when(deferred).done(updateCouponCallback);\n                }\n            );\n        });\n    };\n\n});\n","Magento_SalesRule/js/action/set-coupon-code.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * Customer store credit(balance) application\n */\ndefine([\n    'ko',\n    'jquery',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Checkout/js/model/resource-url-manager',\n    'Magento_Checkout/js/model/error-processor',\n    'Magento_SalesRule/js/model/payment/discount-messages',\n    'mage/storage',\n    'mage/translate',\n    'Magento_Checkout/js/action/get-payment-information',\n    'Magento_Checkout/js/model/totals',\n    'Magento_Checkout/js/model/full-screen-loader',\n    'Magento_Checkout/js/action/recollect-shipping-rates'\n], function (ko, $, quote, urlManager, errorProcessor, messageContainer, storage, $t, getPaymentInformationAction,\n    totals, fullScreenLoader, recollectShippingRates\n) {\n    'use strict';\n\n    var dataModifiers = [],\n        successCallbacks = [],\n        failCallbacks = [],\n        action;\n\n    /**\n     * Apply provided coupon.\n     *\n     * @param {String} couponCode\n     * @param {Boolean}isApplied\n     * @returns {Deferred}\n     */\n    action = function (couponCode, isApplied) {\n        var quoteId = quote.getQuoteId(),\n            url = urlManager.getApplyCouponUrl(couponCode, quoteId),\n            message = $t('Your coupon was successfully applied.'),\n            data = {},\n            headers = {};\n\n        //Allowing to modify coupon-apply request\n        dataModifiers.forEach(function (modifier) {\n            modifier(headers, data);\n        });\n        fullScreenLoader.startLoader();\n\n        return storage.put(\n            url,\n            data,\n            false,\n            null,\n            headers\n        ).done(function (response) {\n            var deferred;\n\n            if (response) {\n                deferred = $.Deferred();\n\n                isApplied(true);\n                totals.isLoading(true);\n                recollectShippingRates();\n                getPaymentInformationAction(deferred);\n                $.when(deferred).done(function () {\n                    fullScreenLoader.stopLoader();\n                    totals.isLoading(false);\n                });\n                messageContainer.addSuccessMessage({\n                    'message': message\n                });\n                //Allowing to tap into apply-coupon process.\n                successCallbacks.forEach(function (callback) {\n                    callback(response);\n                });\n            }\n        }).fail(function (response) {\n            fullScreenLoader.stopLoader();\n            totals.isLoading(false);\n            errorProcessor.process(response, messageContainer);\n            //Allowing to tap into apply-coupon process.\n            failCallbacks.forEach(function (callback) {\n                callback(response);\n            });\n        });\n    };\n\n    /**\n     * Modifying data to be sent.\n     *\n     * @param {Function} modifier\n     */\n    action.registerDataModifier = function (modifier) {\n        dataModifiers.push(modifier);\n    };\n\n    /**\n     * When successfully added a coupon.\n     *\n     * @param {Function} callback\n     */\n    action.registerSuccessCallback = function (callback) {\n        successCallbacks.push(callback);\n    };\n\n    /**\n     * When failed to add a coupon.\n     *\n     * @param {Function} callback\n     */\n    action.registerFailCallback = function (callback) {\n        failCallbacks.push(callback);\n    };\n\n    return action;\n});\n","Magento_SalesRule/js/action/cancel-coupon.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * Customer store credit(balance) application\n */\ndefine([\n    'jquery',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Checkout/js/model/resource-url-manager',\n    'Magento_Checkout/js/model/error-processor',\n    'Magento_SalesRule/js/model/payment/discount-messages',\n    'mage/storage',\n    'Magento_Checkout/js/action/get-payment-information',\n    'Magento_Checkout/js/model/totals',\n    'mage/translate',\n    'Magento_Checkout/js/model/full-screen-loader',\n    'Magento_Checkout/js/action/recollect-shipping-rates'\n], function ($, quote, urlManager, errorProcessor, messageContainer, storage, getPaymentInformationAction, totals, $t,\n  fullScreenLoader, recollectShippingRates\n) {\n    'use strict';\n\n    var successCallbacks = [],\n        action,\n        callSuccessCallbacks;\n\n    /**\n     * Execute callbacks when a coupon is successfully canceled.\n     */\n    callSuccessCallbacks = function () {\n        successCallbacks.forEach(function (callback) {\n            callback();\n        });\n    };\n\n    /**\n     * Cancel applied coupon.\n     *\n     * @param {Boolean} isApplied\n     * @returns {Deferred}\n     */\n    action =  function (isApplied) {\n        var quoteId = quote.getQuoteId(),\n            url = urlManager.getCancelCouponUrl(quoteId),\n            message = $t('Your coupon was successfully removed.');\n\n        messageContainer.clear();\n        fullScreenLoader.startLoader();\n\n        return storage.delete(\n            url,\n            false\n        ).done(function () {\n            var deferred = $.Deferred();\n\n            totals.isLoading(true);\n            recollectShippingRates();\n            getPaymentInformationAction(deferred);\n            $.when(deferred).done(function () {\n                isApplied(false);\n                totals.isLoading(false);\n                fullScreenLoader.stopLoader();\n                //Allowing to tap into coupon-cancel process.\n                callSuccessCallbacks();\n            });\n            messageContainer.addSuccessMessage({\n                'message': message\n            });\n        }).fail(function (response) {\n            totals.isLoading(false);\n            fullScreenLoader.stopLoader();\n            errorProcessor.process(response, messageContainer);\n        });\n    };\n\n    /**\n     * Callback for when the cancel-coupon process is finished.\n     *\n     * @param {Function} callback\n     */\n    action.registerSuccessCallback = function (callback) {\n        successCallbacks.push(callback);\n    };\n\n    return action;\n});\n","Magento_SalesRule/js/view/summary/discount.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Checkout/js/view/summary/abstract-total',\n    'Magento_Checkout/js/model/quote'\n], function (Component, quote) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Magento_SalesRule/summary/discount'\n        },\n        totals: quote.getTotals(),\n\n        /**\n         * @return {*|Boolean}\n         */\n        isDisplayed: function () {\n            return this.isFullMode() && this.getPureValue() != 0; //eslint-disable-line eqeqeq\n        },\n\n        /**\n         * @return {*}\n         */\n        getCouponCode: function () {\n            if (!this.totals()) {\n                return null;\n            }\n\n            return this.totals()['coupon_code'];\n        },\n\n        /**\n         * @return {*}\n         */\n        getCouponLabel: function () {\n            if (!this.totals()) {\n                return null;\n            }\n\n            return this.totals()['coupon_label'];\n        },\n\n        /**\n         * Get discount title\n         *\n         * @returns {null|String}\n         */\n        getTitle: function () {\n            var discountSegments;\n\n            if (!this.totals()) {\n                return null;\n            }\n\n            discountSegments = this.totals()['total_segments'].filter(function (segment) {\n                return segment.code.indexOf('discount') !== -1;\n            });\n\n            return discountSegments.length ? discountSegments[0].title : null;\n        },\n\n        /**\n         * @return {Number}\n         */\n        getPureValue: function () {\n            var price = 0;\n\n            if (this.totals() && this.totals()['discount_amount']) {\n                price = parseFloat(this.totals()['discount_amount']);\n            }\n\n            return price;\n        },\n\n        /**\n         * @return {*|String}\n         */\n        getValue: function () {\n            return this.getFormattedPrice(this.getPureValue());\n        }\n    });\n});\n","Magento_SalesRule/js/view/cart/totals/discount.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_SalesRule/js/view/summary/discount'\n], function (Component) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Magento_SalesRule/cart/totals/discount'\n        },\n\n        /**\n         * @override\n         *\n         * @returns {Boolean}\n         */\n        isDisplayed: function () {\n            return this.getPureValue() != 0; //eslint-disable-line eqeqeq\n        }\n    });\n});\n","Magento_SalesRule/js/view/payment/discount.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'ko',\n    'uiComponent',\n    'Magento_Checkout/js/model/quote',\n    'Magento_SalesRule/js/action/set-coupon-code',\n    'Magento_SalesRule/js/action/cancel-coupon',\n    'Magento_SalesRule/js/model/coupon'\n], function ($, ko, Component, quote, setCouponCodeAction, cancelCouponAction, coupon) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Magento_SalesRule/payment/discount'\n        },\n        couponCode: coupon.getCouponCode(),\n\n        /**\n         * Applied flag\n         */\n        isApplied: coupon.getIsApplied(),\n\n        initialize: function () {\n            var totals = quote.getTotals(),\n                couponCode = this.couponCode,\n                isApplied = this.isApplied,\n                couponCodeValue;\n\n            if (totals()) {\n                couponCode(totals()['coupon_code']);\n            }\n\n            couponCodeValue = couponCode();\n            isApplied(typeof couponCodeValue === 'string' && couponCodeValue.length > 0);\n\n            this._super();\n        },\n\n        /**\n         * Coupon code application procedure\n         */\n        apply: function () {\n            if (this.validate()) {\n                setCouponCodeAction(this.couponCode(), this.isApplied);\n            }\n        },\n\n        /**\n         * Cancel using coupon\n         */\n        cancel: function () {\n            if (this.validate()) {\n                this.couponCode('');\n                cancelCouponAction(this.isApplied);\n            }\n        },\n\n        /**\n         * Coupon form validation\n         *\n         * @returns {Boolean}\n         */\n        validate: function () {\n            let form = '#discount-form';\n\n            $(form + ' input[type=\"text\"]').each(function () {\n                let currentValue = $(this).val();\n\n                $(this).val(currentValue.trim());\n            });\n            return $(form).validation() && $(form).validation('isValid');\n        }\n    });\n});\n","Magento_SalesRule/js/view/payment/discount-messages.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/view/messages',\n    '../../model/payment/discount-messages'\n], function (Component, messageContainer) {\n    'use strict';\n\n    return Component.extend({\n        /** @inheritdoc */\n        initialize: function (config) {\n            return this._super(config, messageContainer);\n        }\n    });\n});\n","Magento_SalesRule/js/view/payment/captcha.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Captcha/js/view/checkout/defaultCaptcha',\n    'Magento_Captcha/js/model/captchaList',\n    'Magento_SalesRule/js/action/set-coupon-code',\n    'Magento_SalesRule/js/action/cancel-coupon',\n    'Magento_Checkout/js/model/quote',\n    'ko'\n], function (defaultCaptcha, captchaList, setCouponCodeAction, cancelCouponAction, quote, ko) {\n    'use strict';\n\n    return defaultCaptcha.extend({\n        /** @inheritdoc */\n        initialize: function () {\n            var self = this,\n                currentCaptcha,\n                totals = quote.getTotals(),\n                couponCode = ko.observable(null),\n                couponCodeValue,\n                isApplied;\n\n            if (totals()) {\n                couponCode(totals()['coupon_code']);\n            }\n\n            // Captcha can only be required for adding a coupon so we need to know if one was added already.\n            couponCodeValue = couponCode();\n            isApplied = ko.observable(typeof couponCodeValue === 'string' && couponCodeValue.length > 0);\n\n            this._super();\n            //Getting coupon captcha model.\n            currentCaptcha = captchaList.getCaptchaByFormId(this.formId);\n\n            if (currentCaptcha != null) {\n                if (!isApplied()) {\n                    //Show captcha if we don't have a coupon applied.\n                    currentCaptcha.setIsVisible(true);\n                }\n                this.setCurrentCaptcha(currentCaptcha);\n                //Add captcha code to coupon-apply request.\n                setCouponCodeAction.registerDataModifier(function (headers) {\n                    if (self.isRequired()) {\n                        headers['X-Captcha'] = self.captchaValue()();\n                    }\n                });\n                //Refresh captcha after failed request.\n                setCouponCodeAction.registerFailCallback(function () {\n                    if (self.isRequired()) {\n                        self.refresh();\n                    }\n                });\n                //Hide captcha when a coupon has been applied.\n                setCouponCodeAction.registerSuccessCallback(function () {\n                    self.setIsVisible(false);\n                });\n                //Show captcha again if it was canceled.\n                cancelCouponAction.registerSuccessCallback(function () {\n                    if (self.isRequired()) {\n                        self.setIsVisible(true);\n                    }\n                });\n            }\n        }\n    });\n});\n","Magento_SalesRule/js/form/element/coupon-type.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'underscore',\n    'uiRegistry',\n    'Magento_Ui/js/form/element/select'\n], function (_, uiRegistry, select) {\n    'use strict';\n\n    return select.extend({\n\n        /**\n         * Hide fields on coupon tab\n         */\n        onUpdate: function () {\n\n            /* eslint-disable eqeqeq */\n            if (this.value() != this.displayOnlyForCouponType) {\n                uiRegistry.get('sales_rule_form.sales_rule_form.rule_information.use_auto_generation').checked(false);\n            }\n\n            this.enableDisableFields();\n        },\n\n        /**\n         * Enable/disable fields on Coupons tab\n         */\n        enableDisableFields: function () {\n            var selector,\n                isUseAutoGenerationChecked,\n                couponType,\n                disableAuto;\n\n            selector = '[id=sales-rule-form-tab-coupons] input, [id=sales-rule-form-tab-coupons] select, ' +\n                    '[id=sales-rule-form-tab-coupons] button';\n            isUseAutoGenerationChecked = uiRegistry\n                    .get('sales_rule_form.sales_rule_form.rule_information.use_auto_generation')\n                    .checked();\n            couponType = uiRegistry\n                .get('sales_rule_form.sales_rule_form.rule_information.coupon_type')\n                .value();\n            disableAuto = couponType === 3 || isUseAutoGenerationChecked;\n            _.each(\n                document.querySelectorAll(selector),\n                function (element) {\n                    element.disabled = !disableAuto;\n                }\n            );\n        }\n    });\n});\n","Magento_SalesRule/js/form/element/manage-coupon-codes.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'underscore',\n    'uiRegistry',\n    'Magento_Ui/js/form/components/fieldset',\n    'Magento_Ui/js/lib/view/utils/async'\n], function (_, uiRegistry, fieldset, async) {\n    'use strict';\n\n    return fieldset.extend({\n\n        /*eslint-disable no-unused-vars*/\n        /**\n         * Initialize element\n         *\n         * @returns {Abstract} Chainable\n         */\n        initialize: function (elems, position) {\n            var obj = this;\n\n            this._super();\n\n            async.async('#sales-rule-form-tab-coupons', document.getElementById('container'), function (node) {\n                var useAutoGeneration = uiRegistry.get(\n                    'sales_rule_form.sales_rule_form.rule_information.use_auto_generation'\n                );\n\n                useAutoGeneration.on('checked', function () {\n                    obj.enableDisableFields();\n                });\n                obj.enableDisableFields();\n            });\n\n            return this;\n        },\n\n        /*eslint-enable no-unused-vars*/\n        /*eslint-disable lines-around-comment*/\n\n        /**\n         * Enable/disable fields on Coupons tab\n         */\n        enableDisableFields: function () {\n            var selector,\n                isUseAutoGenerationChecked,\n                couponType,\n                disableAuto;\n\n            selector = '[id=sales-rule-form-tab-coupons] input, [id=sales-rule-form-tab-coupons] select, ' +\n                    '[id=sales-rule-form-tab-coupons] button';\n            isUseAutoGenerationChecked = uiRegistry\n                    .get('sales_rule_form.sales_rule_form.rule_information.use_auto_generation')\n                    .checked();\n            couponType = uiRegistry\n                .get('sales_rule_form.sales_rule_form.rule_information.coupon_type')\n                .value();\n            /**\n             * \\Magento\\Rule\\Model\\AbstractModel::COUPON_TYPE_AUTO\n             */\n            disableAuto = couponType === 3 || isUseAutoGenerationChecked;\n            _.each(\n                document.querySelectorAll(selector),\n                function (element) {\n                    element.disabled = !disableAuto;\n                }\n            );\n        }\n    });\n});\n","Amasty_CheckoutCore/vendor/tooltipster/js/tooltipster.min.js":"!function(t,i){\"function\"==typeof define&&define.amd?define([\"jquery\"],function(t){return i(t)}):\"object\"==typeof exports?module.exports=i(require(\"jquery\")):i(jQuery)}(0,function(t){var i={animation:\"fade\",animationDuration:350,content:null,contentAsHTML:!1,contentCloning:!1,debug:!0,delay:300,delayTouch:[300,500],functionInit:null,functionBefore:null,functionReady:null,functionAfter:null,functionFormat:null,IEmin:6,interactive:!1,multiple:!1,parent:null,plugins:[\"sideTip\"],repositionOnScroll:!1,restoration:\"none\",selfDestruction:!0,theme:[],timer:0,trackerInterval:500,trackOrigin:!1,trackTooltip:!1,trigger:\"hover\",triggerClose:{click:!1,mouseleave:!1,originClick:!1,scroll:!1,tap:!1,touchleave:!1},triggerOpen:{click:!1,mouseenter:!1,tap:!1,touchstart:!1},updateAnimation:\"rotate\",zIndex:9999999,styles:{backgroundColor:\"\",textColor:\"\"}},o=\"undefined\"!=typeof window?window:null,e={hasTouchCapability:!(!o||!(\"ontouchstart\"in o||o.DocumentTouch&&o.document instanceof o.DocumentTouch||o.navigator.maxTouchPoints)),hasTransitions:function(){if(!o)return!1;var t=(o.document.body||o.document.documentElement).style,i=\"transition\",e=[\"Moz\",\"Webkit\",\"Khtml\",\"O\",\"ms\"];if(\"string\"==typeof t[i])return!0;i=i.charAt(0).toUpperCase()+i.substr(1);for(var n=0;n<e.length;n++)if(\"string\"==typeof t[e[n]+i])return!0;return!1}(),IE:!1,semVer:\"4.2.8\",window:o},n=function(){this.__$emitterPrivate=t({}),this.__$emitterPublic=t({}),this.__instancesLatestArr=[],this.__plugins={},this._env=e};function s(t){this.$container,this.constraints=null,this.__$tooltip,this.__init(t)}function r(i,o){var e=!0;return t.each(i,function(t,n){if(void 0===o[t]||i[t]!==o[t])return e=!1,!1}),e}function _(i){var o=i.attr(\"id\"),n=o?e.window.document.getElementById(o):null;return n?n===i[0]:t.contains(e.window.document.body,i[0])}n.prototype={__bridge:function(o,e,n){if(!e[n]){var s=function(){};s.prototype=o;var r=new s;r.__init&&r.__init(e),t.each(o,function(t,o){0!=t.indexOf(\"__\")&&(e[t]?i.debug&&console.log(\"The \"+t+\" method of the \"+n+\" plugin conflicts with another plugin or native methods\"):(e[t]=function(){return r[t].apply(r,Array.prototype.slice.apply(arguments))},e[t].bridged=r))}),e[n]=r}return this},__setWindow:function(t){return e.window=t,this},_getRuler:function(t){return new s(t)},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_plugin:function(i){if(\"string\"==typeof i){var o=i,e=null;return o.indexOf(\".\")>0?e=this.__plugins[o]:t.each(this.__plugins,function(t,i){if(i.name.substring(i.name.length-o.length-1)==\".\"+o)return e=i,!1}),e}if(i.name.indexOf(\".\")<0)throw new Error(\"Plugins must be namespaced\");return this.__plugins[i.name]=i,i.core&&this.__bridge(i.core,this,i.name),this},_trigger:function(){var t=Array.prototype.slice.apply(arguments);return\"string\"==typeof t[0]&&(t[0]={type:t[0]}),this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,t),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,t),this},instances:function(i){var o=[];return t(i||\".tooltipstered\").each(function(){var i=t(this),e=i.data(\"tooltipster-ns\");e&&t.each(e,function(t,e){o.push(i.data(e))})}),o},instancesLatest:function(){return this.__instancesLatestArr},off:function(){return this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},origins:function(i){return t((i?i+\" \":\"\")+\".tooltipstered\").toArray()},setDefaults:function(o){return t.extend(i,o),this},triggerHandler:function(){return this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},t.tooltipster=new n,t.Tooltipster=function(i,o){this.__callbacks={close:[],open:[]},this.__closingTime,this.__Content,this.__contentBcr,this.__destroyed=!1,this.__$emitterPrivate=t({}),this.__$emitterPublic=t({}),this.__enabled=!0,this.__garbageCollector,this.__Geometry,this.__lastPosition,this.__namespace=\"tooltipster-\"+Math.round(1e6*Math.random()),this.__options,this.__$originParents,this.__pointerIsOverOrigin=!1,this.__previousThemes=[],this.__state=\"closed\",this.__timeouts={close:[],open:null},this.__touchEvents=[],this.__tracker=null,this._$origin,this._$tooltip,this.__init(i,o)},t.Tooltipster.prototype={__init:function(o,n){var s=this;if(s._$origin=t(o),s.__options=t.extend(!0,{},i,n),s.__optionsFormat(),!e.IE||e.IE>=s.__options.IEmin){var r=null;if(void 0===s._$origin.data(\"tooltipster-initialTitle\")&&(void 0===(r=s._$origin.attr(\"title\"))&&(r=null),s._$origin.data(\"tooltipster-initialTitle\",r)),null!==s.__options.content)s.__contentSet(s.__options.content);else{var _,a=s._$origin.attr(\"data-tooltip-content\");a&&(_=t(a)),_&&_[0]?s.__contentSet(_.first()):s.__contentSet(r)}s._$origin.removeAttr(\"title\").addClass(\"tooltipstered\"),s.__prepareOrigin(),s.__prepareGC(),t.each(s.__options.plugins,function(t,i){s._plug(i)}),e.hasTouchCapability&&t(e.window.document.body).on(\"touchmove.\"+s.__namespace+\"-triggerOpen\",function(t){s._touchRecordEvent(t)}),s._on(\"created\",function(){s.__prepareTooltip()})._on(\"repositioned\",function(t){s.__lastPosition=t.position})}else s.__options.disabled=!0},__contentInsert:function(){var t=this._$tooltip.find(\".tooltipster-content\"),i=this.__Content;return this._trigger({type:\"format\",content:this.__Content,format:function(t){i=t}}),this.__options.functionFormat&&(i=this.__options.functionFormat.call(this,this,{origin:this._$origin[0]},this.__Content)),\"string\"!=typeof i||this.__options.contentAsHTML?t.empty().append(i):t.text(i),this},__contentSet:function(i){return i instanceof t&&this.__options.contentCloning&&(i=i.clone(!0)),this.__Content=i,this._trigger({type:\"updated\",content:i}),this},__destroyError:function(){throw new Error(\"This tooltip has been destroyed and cannot execute your method call.\")},__geometry:function(){var i=this._$origin,o=this._$origin.is(\"area\");if(o){var n=this._$origin.parent().attr(\"name\");i=t('img[usemap=\"#'+n+'\"]')}var s=i[0].getBoundingClientRect(),r=t(e.window.document),_=t(e.window),a=i,l={available:{document:null,window:null},document:{size:{height:r.height(),width:r.width()}},window:{scroll:{left:e.window.scrollX||e.window.document.documentElement.scrollLeft,top:e.window.scrollY||e.window.document.documentElement.scrollTop},size:{height:_.height(),width:_.width()}},origin:{fixedLineage:!1,offset:{},size:{height:s.bottom-s.top,width:s.right-s.left},usemapImage:o?i[0]:null,windowOffset:{bottom:s.bottom,left:s.left,right:s.right,top:s.top}}};if(o){var p=this._$origin.attr(\"shape\"),c=this._$origin.attr(\"coords\");if(c&&(c=c.split(\",\"),t.map(c,function(t,i){c[i]=parseInt(t)})),\"default\"!=p)switch(p){case\"circle\":var h=c[0],d=c[1],u=c[2],g=d-u,f=h-u;l.origin.size.height=2*u,l.origin.size.width=l.origin.size.height,l.origin.windowOffset.left+=f,l.origin.windowOffset.top+=g;break;case\"rect\":var m=c[0],w=c[1],v=c[2],y=c[3];l.origin.size.height=y-w,l.origin.size.width=v-m,l.origin.windowOffset.left+=m,l.origin.windowOffset.top+=w;break;case\"poly\":for(var b=0,$=0,C=0,O=0,T=\"even\",z=0;z<c.length;z++){var E=c[z];\"even\"==T?(E>C&&(C=E,0===z&&(b=C)),E<b&&(b=E),T=\"odd\"):(E>O&&(O=E,1==z&&($=O)),E<$&&($=E),T=\"even\")}l.origin.size.height=O-$,l.origin.size.width=C-b,l.origin.windowOffset.left+=b,l.origin.windowOffset.top+=$}}for(this._trigger({type:\"geometry\",edit:function(t){l.origin.size.height=t.height,l.origin.windowOffset.left=t.left,l.origin.windowOffset.top=t.top,l.origin.size.width=t.width},geometry:{height:l.origin.size.height,left:l.origin.windowOffset.left,top:l.origin.windowOffset.top,width:l.origin.size.width}}),l.origin.windowOffset.right=l.origin.windowOffset.left+l.origin.size.width,l.origin.windowOffset.bottom=l.origin.windowOffset.top+l.origin.size.height,l.origin.offset.left=l.origin.windowOffset.left+l.window.scroll.left,l.origin.offset.top=l.origin.windowOffset.top+l.window.scroll.top,l.origin.offset.bottom=l.origin.offset.top+l.origin.size.height,l.origin.offset.right=l.origin.offset.left+l.origin.size.width,l.available.document={bottom:{height:l.document.size.height-l.origin.offset.bottom,width:l.document.size.width},left:{height:l.document.size.height,width:l.origin.offset.left},right:{height:l.document.size.height,width:l.document.size.width-l.origin.offset.right},top:{height:l.origin.offset.top,width:l.document.size.width}},l.available.window={bottom:{height:Math.max(l.window.size.height-Math.max(l.origin.windowOffset.bottom,0),0),width:l.window.size.width},left:{height:l.window.size.height,width:Math.max(l.origin.windowOffset.left,0)},right:{height:l.window.size.height,width:Math.max(l.window.size.width-Math.max(l.origin.windowOffset.right,0),0)},top:{height:Math.max(l.origin.windowOffset.top,0),width:l.window.size.width}};\"html\"!=a[0].tagName.toLowerCase();){if(\"fixed\"==a.css(\"position\")){l.origin.fixedLineage=!0;break}a=a.parent()}return l},__optionsFormat:function(){return\"number\"==typeof this.__options.animationDuration&&(this.__options.animationDuration=[this.__options.animationDuration,this.__options.animationDuration]),\"number\"==typeof this.__options.delay&&(this.__options.delay=[this.__options.delay,this.__options.delay]),\"number\"==typeof this.__options.delayTouch&&(this.__options.delayTouch=[this.__options.delayTouch,this.__options.delayTouch]),\"string\"==typeof this.__options.theme&&(this.__options.theme=[this.__options.theme]),null===this.__options.parent?this.__options.parent=t(e.window.document.body):\"string\"==typeof this.__options.parent&&(this.__options.parent=t(this.__options.parent)),\"hover\"==this.__options.trigger?(this.__options.triggerOpen={mouseenter:!0,touchstart:!0},this.__options.triggerClose={mouseleave:!0,originClick:!0,touchleave:!0}):\"click\"==this.__options.trigger&&(this.__options.triggerOpen={click:!0,tap:!0},this.__options.triggerClose={click:!0,tap:!0}),this._trigger(\"options\"),this},__prepareGC:function(){var i=this;return i.__options.selfDestruction?i.__garbageCollector=setInterval(function(){var o=(new Date).getTime();i.__touchEvents=t.grep(i.__touchEvents,function(t,i){return o-t.time>6e4}),_(i._$origin)||i.close(function(){i.destroy()})},2e4):clearInterval(i.__garbageCollector),i},__prepareOrigin:function(){var t=this;if(t._$origin.off(\".\"+t.__namespace+\"-triggerOpen\"),e.hasTouchCapability&&t._$origin.on(\"touchstart.\"+t.__namespace+\"-triggerOpen touchend.\"+t.__namespace+\"-triggerOpen touchcancel.\"+t.__namespace+\"-triggerOpen\",function(i){t._touchRecordEvent(i)}),t.__options.triggerOpen.click||t.__options.triggerOpen.tap&&e.hasTouchCapability){var i=\"\";t.__options.triggerOpen.click&&(i+=\"click.\"+t.__namespace+\"-triggerOpen \"),t.__options.triggerOpen.tap&&e.hasTouchCapability&&(i+=\"touchend.\"+t.__namespace+\"-triggerOpen\"),t._$origin.on(i,function(i){t._touchIsMeaningfulEvent(i)&&t._open(i)})}if(t.__options.triggerOpen.mouseenter||t.__options.triggerOpen.touchstart&&e.hasTouchCapability){i=\"\";t.__options.triggerOpen.mouseenter&&(i+=\"mouseenter.\"+t.__namespace+\"-triggerOpen \"),t.__options.triggerOpen.touchstart&&e.hasTouchCapability&&(i+=\"touchstart.\"+t.__namespace+\"-triggerOpen\"),t._$origin.on(i,function(i){!t._touchIsTouchEvent(i)&&t._touchIsEmulatedEvent(i)||(t.__pointerIsOverOrigin=!0,t._openShortly(i))})}if(t.__options.triggerClose.mouseleave||t.__options.triggerClose.touchleave&&e.hasTouchCapability){i=\"\";t.__options.triggerClose.mouseleave&&(i+=\"mouseleave.\"+t.__namespace+\"-triggerOpen \"),t.__options.triggerClose.touchleave&&e.hasTouchCapability&&(i+=\"touchend.\"+t.__namespace+\"-triggerOpen touchcancel.\"+t.__namespace+\"-triggerOpen\"),t._$origin.on(i,function(i){t._touchIsMeaningfulEvent(i)&&(t.__pointerIsOverOrigin=!1)})}return t},__prepareTooltip:function(){var i=this,o=i.__options.interactive?\"auto\":\"\";return i._$tooltip.attr(\"id\",i.__namespace).css({\"pointer-events\":o,zIndex:i.__options.zIndex}),t.each(i.__previousThemes,function(t,o){i._$tooltip.removeClass(o)}),t.each(i.__options.theme,function(t,o){i._$tooltip.addClass(o)}),i.__previousThemes=t.merge([],i.__options.theme),i},__scrollHandler:function(i){if(this.__options.triggerClose.scroll)this._close(i);else if(_(this._$origin)&&_(this._$tooltip)){var o=null;if(i.target===e.window.document)this.__Geometry.origin.fixedLineage||this.__options.repositionOnScroll&&this.reposition(i);else{o=this.__geometry();var n=!1;if(\"fixed\"!=this._$origin.css(\"position\")&&this.__$originParents.each(function(i,e){var s=t(e),r=s.css(\"overflow-x\"),_=s.css(\"overflow-y\");if(\"visible\"!=r||\"visible\"!=_){var a=e.getBoundingClientRect();if(\"visible\"!=r&&(o.origin.windowOffset.left<a.left||o.origin.windowOffset.right>a.right))return n=!0,!1;if(\"visible\"!=_&&(o.origin.windowOffset.top<a.top||o.origin.windowOffset.bottom>a.bottom))return n=!0,!1}if(\"fixed\"==s.css(\"position\"))return!1}),n)this._$tooltip.css(\"visibility\",\"hidden\");else if(this._$tooltip.css(\"visibility\",\"visible\"),this.__options.repositionOnScroll)this.reposition(i);else{var s=o.origin.offset.left-this.__Geometry.origin.offset.left,r=o.origin.offset.top-this.__Geometry.origin.offset.top;this._$tooltip.css({left:this.__lastPosition.coord.left+s,top:this.__lastPosition.coord.top+r})}}this._trigger({type:\"scroll\",event:i,geo:o})}return this},__stateSet:function(t){return this.__state=t,this._trigger({type:\"state\",state:t}),this},__timeoutsClear:function(){return clearTimeout(this.__timeouts.open),this.__timeouts.open=null,t.each(this.__timeouts.close,function(t,i){clearTimeout(i)}),this.__timeouts.close=[],this},__trackerStart:function(){var t=this,i=t._$tooltip.find(\".tooltipster-content\");return t.__options.trackTooltip&&(t.__contentBcr=i[0].getBoundingClientRect()),t.__tracker=setInterval(function(){if(_(t._$origin)&&_(t._$tooltip)){if(t.__options.trackOrigin){var o=t.__geometry(),e=!1;r(o.origin.size,t.__Geometry.origin.size)&&(t.__Geometry.origin.fixedLineage?r(o.origin.windowOffset,t.__Geometry.origin.windowOffset)&&(e=!0):r(o.origin.offset,t.__Geometry.origin.offset)&&(e=!0)),e||(t.__options.triggerClose.mouseleave?t._close():t.reposition())}if(t.__options.trackTooltip){var n=i[0].getBoundingClientRect();n.height===t.__contentBcr.height&&n.width===t.__contentBcr.width||(t.reposition(),t.__contentBcr=n)}}else t._close()},t.__options.trackerInterval),t},_close:function(i,o,n){var s=this,r=!0;if(s._trigger({type:\"close\",event:i,stop:function(){r=!1}}),r||n){o&&s.__callbacks.close.push(o),s.__callbacks.open=[],s.__timeoutsClear();var _=function(){t.each(s.__callbacks.close,function(t,o){o.call(s,s,{event:i,origin:s._$origin[0]})}),s.__callbacks.close=[]};if(\"closed\"!=s.__state){var a=!0,l=(new Date).getTime()+s.__options.animationDuration[1];if(\"disappearing\"==s.__state&&l>s.__closingTime&&s.__options.animationDuration[1]>0&&(a=!1),a){s.__closingTime=l,\"disappearing\"!=s.__state&&s.__stateSet(\"disappearing\");var p=function(){clearInterval(s.__tracker),s._trigger({type:\"closing\",event:i}),s._$tooltip.off(\".\"+s.__namespace+\"-triggerClose\").removeClass(\"tooltipster-dying\"),t(e.window).off(\".\"+s.__namespace+\"-triggerClose\"),s.__$originParents.each(function(i,o){t(o).off(\"scroll.\"+s.__namespace+\"-triggerClose\")}),s.__$originParents=null,t(e.window.document.body).off(\".\"+s.__namespace+\"-triggerClose\"),s._$origin.off(\".\"+s.__namespace+\"-triggerClose\"),s._off(\"dismissable\"),s.__stateSet(\"closed\"),s._trigger({type:\"after\",event:i}),s.__options.functionAfter&&s.__options.functionAfter.call(s,s,{event:i,origin:s._$origin[0]}),_()};e.hasTransitions?(s._$tooltip.css({\"-moz-animation-duration\":s.__options.animationDuration[1]+\"ms\",\"-ms-animation-duration\":s.__options.animationDuration[1]+\"ms\",\"-o-animation-duration\":s.__options.animationDuration[1]+\"ms\",\"-webkit-animation-duration\":s.__options.animationDuration[1]+\"ms\",\"animation-duration\":s.__options.animationDuration[1]+\"ms\",\"transition-duration\":s.__options.animationDuration[1]+\"ms\"}),s._$tooltip.clearQueue().removeClass(\"tooltipster-show\").addClass(\"tooltipster-dying\"),s.__options.animationDuration[1]>0&&s._$tooltip.delay(s.__options.animationDuration[1]),s._$tooltip.queue(p)):s._$tooltip.stop().fadeOut(s.__options.animationDuration[1],p)}}else _()}return s},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_open:function(i,o){var n=this;if(!n.__destroying&&_(n._$origin)&&n.__enabled){var s=!0;if(\"closed\"==n.__state&&(n._trigger({type:\"before\",event:i,stop:function(){s=!1}}),s&&n.__options.functionBefore&&(s=n.__options.functionBefore.call(n,n,{event:i,origin:n._$origin[0]}))),!1!==s&&null!==n.__Content){o&&n.__callbacks.open.push(o),n.__callbacks.close=[],n.__timeoutsClear();var r,a=function(){\"stable\"!=n.__state&&n.__stateSet(\"stable\"),t.each(n.__callbacks.open,function(t,i){i.call(n,n,{origin:n._$origin[0],tooltip:n._$tooltip[0]})}),n.__callbacks.open=[]};if(\"closed\"!==n.__state)r=0,\"disappearing\"===n.__state?(n.__stateSet(\"appearing\"),e.hasTransitions?(n._$tooltip.clearQueue().removeClass(\"tooltipster-dying\").addClass(\"tooltipster-show\"),n.__options.animationDuration[0]>0&&n._$tooltip.delay(n.__options.animationDuration[0]),n._$tooltip.queue(a)):n._$tooltip.stop().fadeIn(a)):\"stable\"==n.__state&&a();else{if(n.__stateSet(\"appearing\"),r=n.__options.animationDuration[0],n.__contentInsert(),n.reposition(i,!0),e.hasTransitions?(n._$tooltip.addClass(\"tooltipster-\"+n.__options.animation).addClass(\"tooltipster-initial\").css({\"-moz-animation-duration\":n.__options.animationDuration[0]+\"ms\",\"-ms-animation-duration\":n.__options.animationDuration[0]+\"ms\",\"-o-animation-duration\":n.__options.animationDuration[0]+\"ms\",\"-webkit-animation-duration\":n.__options.animationDuration[0]+\"ms\",\"animation-duration\":n.__options.animationDuration[0]+\"ms\",\"transition-duration\":n.__options.animationDuration[0]+\"ms\"}),setTimeout(function(){\"closed\"!=n.__state&&(n._$tooltip.addClass(\"tooltipster-show\").removeClass(\"tooltipster-initial\"),n.__options.animationDuration[0]>0&&n._$tooltip.delay(n.__options.animationDuration[0]),n._$tooltip.queue(a))},0)):n._$tooltip.css(\"display\",\"none\").fadeIn(n.__options.animationDuration[0],a),n.__trackerStart(),t(e.window).on(\"resize.\"+n.__namespace+\"-triggerClose\",function(i){var o=t(document.activeElement);(o.is(\"input\")||o.is(\"textarea\"))&&t.contains(n._$tooltip[0],o[0])||n.reposition(i)}).on(\"scroll.\"+n.__namespace+\"-triggerClose\",function(t){n.__scrollHandler(t)}),n.__$originParents=n._$origin.parents(),n.__$originParents.each(function(i,o){t(o).on(\"scroll.\"+n.__namespace+\"-triggerClose\",function(t){n.__scrollHandler(t)})}),n.__options.triggerClose.mouseleave||n.__options.triggerClose.touchleave&&e.hasTouchCapability){n._on(\"dismissable\",function(t){t.dismissable?t.delay?(h=setTimeout(function(){n._close(t.event)},t.delay),n.__timeouts.close.push(h)):n._close(t):clearTimeout(h)});var l=n._$origin,p=\"\",c=\"\",h=null;n.__options.interactive&&(l=l.add(n._$tooltip)),n.__options.triggerClose.mouseleave&&(p+=\"mouseenter.\"+n.__namespace+\"-triggerClose \",c+=\"mouseleave.\"+n.__namespace+\"-triggerClose \"),n.__options.triggerClose.touchleave&&e.hasTouchCapability&&(p+=\"touchstart.\"+n.__namespace+\"-triggerClose\",c+=\"touchend.\"+n.__namespace+\"-triggerClose touchcancel.\"+n.__namespace+\"-triggerClose\"),l.on(c,function(t){if(n._touchIsTouchEvent(t)||!n._touchIsEmulatedEvent(t)){var i=\"mouseleave\"==t.type?n.__options.delay:n.__options.delayTouch;n._trigger({delay:i[1],dismissable:!0,event:t,type:\"dismissable\"})}}).on(p,function(t){!n._touchIsTouchEvent(t)&&n._touchIsEmulatedEvent(t)||n._trigger({dismissable:!1,event:t,type:\"dismissable\"})})}n.__options.triggerClose.originClick&&n._$origin.on(\"click.\"+n.__namespace+\"-triggerClose\",function(t){n._touchIsTouchEvent(t)||n._touchIsEmulatedEvent(t)||n._close(t)}),(n.__options.triggerClose.click||n.__options.triggerClose.tap&&e.hasTouchCapability)&&setTimeout(function(){if(\"closed\"!=n.__state){var i=\"\",o=t(e.window.document.body);n.__options.triggerClose.click&&(i+=\"click.\"+n.__namespace+\"-triggerClose \"),n.__options.triggerClose.tap&&e.hasTouchCapability&&(i+=\"touchend.\"+n.__namespace+\"-triggerClose\"),o.on(i,function(i){n._touchIsMeaningfulEvent(i)&&(n._touchRecordEvent(i),n.__options.interactive&&t.contains(n._$tooltip[0],i.target)||n._close(i))}),n.__options.triggerClose.tap&&e.hasTouchCapability&&o.on(\"touchstart.\"+n.__namespace+\"-triggerClose\",function(t){n._touchRecordEvent(t)})}},0),n._trigger(\"ready\"),n.__options.functionReady&&n.__options.functionReady.call(n,n,{origin:n._$origin[0],tooltip:n._$tooltip[0]})}if(n.__options.timer>0){h=setTimeout(function(){n._close()},n.__options.timer+r);n.__timeouts.close.push(h)}}}return n},_openShortly:function(t){var i=this,o=!0;if(\"stable\"!=i.__state&&\"appearing\"!=i.__state&&!i.__timeouts.open&&(i._trigger({type:\"start\",event:t,stop:function(){o=!1}}),o)){var e=0==t.type.indexOf(\"touch\")?i.__options.delayTouch:i.__options.delay;e[0]?i.__timeouts.open=setTimeout(function(){i.__timeouts.open=null,i.__pointerIsOverOrigin&&i._touchIsMeaningfulEvent(t)?(i._trigger(\"startend\"),i._open(t)):i._trigger(\"startcancel\")},e[0]):(i._trigger(\"startend\"),i._open(t))}return i},_optionsExtract:function(i,o){var e=this,n=t.extend(!0,{},o),s=e.__options[i];return s||(s={},t.each(o,function(t,i){var o=e.__options[t];void 0!==o&&(s[t]=o)})),t.each(n,function(i,o){void 0!==s[i]&&(\"object\"!=typeof o||o instanceof Array||null==o||\"object\"!=typeof s[i]||s[i]instanceof Array||null==s[i]?n[i]=s[i]:t.extend(n[i],s[i]))}),n},_plug:function(i){var o=t.tooltipster._plugin(i);if(!o)throw new Error('The \"'+i+'\" plugin is not defined');return o.instance&&t.tooltipster.__bridge(o.instance,this,o.name),this},_touchIsEmulatedEvent:function(t){for(var i=!1,o=(new Date).getTime(),e=this.__touchEvents.length-1;e>=0;e--){var n=this.__touchEvents[e];if(!(o-n.time<500))break;n.target===t.target&&(i=!0)}return i},_touchIsMeaningfulEvent:function(t){return this._touchIsTouchEvent(t)&&!this._touchSwiped(t.target)||!this._touchIsTouchEvent(t)&&!this._touchIsEmulatedEvent(t)},_touchIsTouchEvent:function(t){return 0==t.type.indexOf(\"touch\")},_touchRecordEvent:function(t){return this._touchIsTouchEvent(t)&&(t.time=(new Date).getTime(),this.__touchEvents.push(t)),this},_touchSwiped:function(t){for(var i=!1,o=this.__touchEvents.length-1;o>=0;o--){var e=this.__touchEvents[o];if(\"touchmove\"==e.type){i=!0;break}if(\"touchstart\"==e.type&&t===e.target)break}return i},_trigger:function(){var i=Array.prototype.slice.apply(arguments);return\"string\"==typeof i[0]&&(i[0]={type:i[0]}),i[0].instance=this,i[0].origin=this._$origin?this._$origin[0]:null,i[0].tooltip=this._$tooltip?this._$tooltip[0]:null,this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,i),t.tooltipster._trigger.apply(t.tooltipster,i),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,i),this},_unplug:function(i){var o=this;if(o[i]){var e=t.tooltipster._plugin(i);e.instance&&t.each(e.instance,function(t,e){o[t]&&o[t].bridged===o[i]&&delete o[t]}),o[i].__destroy&&o[i].__destroy(),delete o[i]}return o},close:function(t){return this.__destroyed?this.__destroyError():this._close(null,t),this},content:function(t){var i=this;if(void 0===t)return i.__Content;if(i.__destroyed)i.__destroyError();else if(i.__contentSet(t),null!==i.__Content){if(\"closed\"!==i.__state&&(i.__contentInsert(),i.reposition(),i.__options.updateAnimation))if(e.hasTransitions){var o=i.__options.updateAnimation;i._$tooltip.addClass(\"tooltipster-update-\"+o),setTimeout(function(){\"closed\"!=i.__state&&i._$tooltip.removeClass(\"tooltipster-update-\"+o)},1e3)}else i._$tooltip.fadeTo(200,.5,function(){\"closed\"!=i.__state&&i._$tooltip.fadeTo(200,1)})}else i._close();return i},destroy:function(){var i=this;if(i.__destroyed)i.__destroyError();else{\"closed\"!=i.__state?i.option(\"animationDuration\",0)._close(null,null,!0):i.__timeoutsClear(),i._trigger(\"destroy\"),i.__destroyed=!0,i._$origin.removeData(i.__namespace).off(\".\"+i.__namespace+\"-triggerOpen\"),t(e.window.document.body).off(\".\"+i.__namespace+\"-triggerOpen\");var o=i._$origin.data(\"tooltipster-ns\");if(o)if(1===o.length){var n=null;\"previous\"==i.__options.restoration?n=i._$origin.data(\"tooltipster-initialTitle\"):\"current\"==i.__options.restoration&&(n=\"string\"==typeof i.__Content?i.__Content:t(\"<div></div>\").append(i.__Content).html()),n&&i._$origin.attr(\"title\",n),i._$origin.removeClass(\"tooltipstered\"),i._$origin.removeData(\"tooltipster-ns\").removeData(\"tooltipster-initialTitle\")}else o=t.grep(o,function(t,o){return t!==i.__namespace}),i._$origin.data(\"tooltipster-ns\",o);i._trigger(\"destroyed\"),i._off(),i.off(),i.__Content=null,i.__$emitterPrivate=null,i.__$emitterPublic=null,i.__options.parent=null,i._$origin=null,i._$tooltip=null,t.tooltipster.__instancesLatestArr=t.grep(t.tooltipster.__instancesLatestArr,function(t,o){return i!==t}),clearInterval(i.__garbageCollector)}return i},disable:function(){return this.__destroyed?(this.__destroyError(),this):(this._close(),this.__enabled=!1,this)},elementOrigin:function(){if(!this.__destroyed)return this._$origin[0];this.__destroyError()},elementTooltip:function(){return this._$tooltip?this._$tooltip[0]:null},enable:function(){return this.__enabled=!0,this},hide:function(t){return this.close(t)},instance:function(){return this},off:function(){return this.__destroyed||this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},open:function(t){return this.__destroyed?this.__destroyError():this._open(null,t),this},option:function(i,o){return void 0===o?this.__options[i]:(this.__destroyed?this.__destroyError():(this.__options[i]=o,this.__optionsFormat(),t.inArray(i,[\"trigger\",\"triggerClose\",\"triggerOpen\"])>=0&&this.__prepareOrigin(),\"selfDestruction\"===i&&this.__prepareGC()),this)},reposition:function(t,i){return this.__destroyed?this.__destroyError():\"closed\"!=this.__state&&_(this._$origin)&&(i||_(this._$tooltip))&&(i||this._$tooltip.detach(),this.__Geometry=this.__geometry(),this._trigger({type:\"reposition\",event:t,helper:{geo:this.__Geometry}})),this},show:function(t){return this.open(t)},status:function(){return{destroyed:this.__destroyed,enabled:this.__enabled,open:\"closed\"!==this.__state,state:this.__state}},triggerHandler:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},t.fn.tooltipster=function(){var o=Array.prototype.slice.apply(arguments),e=\"You are using a single HTML element as content for several tooltips. You probably want to set the contentCloning option to TRUE.\";if(0===this.length)return this;if(\"string\"==typeof o[0]){var n=\"#*$~&\";return this.each(function(){var i=t(this).data(\"tooltipster-ns\"),s=i?t(this).data(i[0]):null;if(!s)throw new Error(\"You called Tooltipster's \\\"\"+o[0]+'\" method on an uninitialized element');if(\"function\"!=typeof s[o[0]])throw new Error('Unknown method \"'+o[0]+'\"');this.length>1&&\"content\"==o[0]&&(o[1]instanceof t||\"object\"==typeof o[1]&&null!=o[1]&&o[1].tagName)&&!s.__options.contentCloning&&s.__options.debug&&console.log(e);var r=s[o[0]](o[1],o[2]);if(r!==s||\"instance\"===o[0])return n=r,!1}),\"#*$~&\"!==n?n:this}t.tooltipster.__instancesLatestArr=[];var s=o[0]&&void 0!==o[0].multiple,r=s&&o[0].multiple||!s&&i.multiple,_=o[0]&&void 0!==o[0].content,a=_&&o[0].content||!_&&i.content,l=o[0]&&void 0!==o[0].contentCloning,p=l&&o[0].contentCloning||!l&&i.contentCloning,c=o[0]&&void 0!==o[0].debug,h=c&&o[0].debug||!c&&i.debug;return this.length>1&&(a instanceof t||\"object\"==typeof a&&null!=a&&a.tagName)&&!p&&h&&console.log(e),this.each(function(){var i=!1,e=t(this),n=e.data(\"tooltipster-ns\"),s=null;n?r?i=!0:h&&(console.log(\"Tooltipster: one or more tooltips are already attached to the element below. Ignoring.\"),console.log(this)):i=!0,i&&(s=new t.Tooltipster(this,o[0]),n||(n=[]),n.push(s.__namespace),e.data(\"tooltipster-ns\",n),e.data(s.__namespace,s),s.__options.functionInit&&s.__options.functionInit.call(s,s,{origin:this}),s._trigger(\"init\")),t.tooltipster.__instancesLatestArr.push(s)}),this},s.prototype={__init:function(i){this.__$tooltip=i,this.__$tooltip.css({left:0,overflow:\"hidden\",position:\"absolute\",top:0}).find(\".tooltipster-content\").css(\"overflow\",\"auto\"),this.$container=t('<div class=\"tooltipster-ruler\"></div>').append(this.__$tooltip).appendTo(e.window.document.body)},__forceRedraw:function(){var t=this.__$tooltip.parent();this.__$tooltip.detach(),this.__$tooltip.appendTo(t)},constrain:function(t,i){return this.constraints={width:t,height:i},this.__$tooltip.css({display:\"block\",height:\"\",overflow:\"auto\",width:t}),this},destroy:function(){this.__$tooltip.detach().find(\".tooltipster-content\").css({display:\"\",overflow:\"\"}),this.$container.remove()},free:function(){return this.constraints=null,this.__$tooltip.css({display:\"\",height:\"\",overflow:\"visible\",width:\"\"}),this},measure:function(){this.__forceRedraw();var t=this.__$tooltip[0].getBoundingClientRect(),i={size:{height:t.height||t.bottom-t.top,width:t.width||t.right-t.left}};if(this.constraints){var o=this.__$tooltip.find(\".tooltipster-content\"),n=this.__$tooltip.outerHeight(),s=o[0].getBoundingClientRect(),r={height:n<=this.constraints.height,width:t.width<=this.constraints.width&&s.width>=o[0].scrollWidth-1};i.fits=r.height&&r.width}return e.IE&&e.IE<=11&&i.size.width!==e.window.document.documentElement.clientWidth&&(i.size.width=Math.ceil(i.size.width)+1),i}};var a=navigator.userAgent.toLowerCase();-1!=a.indexOf(\"msie\")?e.IE=parseInt(a.split(\"msie\")[1]):-1!==a.toLowerCase().indexOf(\"trident\")&&-1!==a.indexOf(\" rv:11\")?e.IE=11:-1!=a.toLowerCase().indexOf(\"edge/\")&&(e.IE=parseInt(a.toLowerCase().split(\"edge/\")[1]));return t.tooltipster._plugin({name:\"tooltipster.sideTip\",instance:{__defaults:function(){return{arrow:!0,distance:6,functionPosition:null,maxWidth:null,minIntersection:16,minWidth:0,position:null,side:\"top\",viewportAware:!0,defaultStyles:{backgroundColor:\"#fff\",textColor:\"#000\"}}},__init:function(t){var i=this;i.__instance=t,i.__namespace=\"tooltipster-sideTip-\"+Math.round(1e6*Math.random()),i.__previousState=\"closed\",i.__options,i.__optionsFormat(),i.__instance._on(\"state.\"+i.__namespace,function(t){\"closed\"==t.state?i.__close():\"appearing\"==t.state&&\"closed\"==i.__previousState&&i.__create(),i.__previousState=t.state}),i.__instance._on(\"options.\"+i.__namespace,function(){i.__optionsFormat()}),i.__instance._on(\"reposition.\"+i.__namespace,function(t){i.__reposition(t.event,t.helper)})},__close:function(){this.__instance.content()instanceof t&&this.__instance.content().detach(),this.__instance._$tooltip.remove(),this.__instance._$tooltip=null},__create:function(){var i=this.__instance.__options.styles,o=t('<div class=\"tooltipster-base tooltipster-sidetip\"><div class=\"tooltipster-box\"><div class=\"tooltipster-content\"></div></div><div class=\"tooltipster-arrow\"><div class=\"tooltipster-arrow-uncropped\"><div class=\"tooltipster-arrow-border\"></div><div class=\"tooltipster-arrow-background\"></div></div></div></div>');o.find(\".tooltipster-box\").css({color:i.textColor?i.textColor:this.__options.defaultStyles.textColor,backgroundColor:i.backgroundColor?i.backgroundColor:this.__options.defaultStyles.backgroundColor}),o.find(\".tooltipster-arrow-border\").css({backgroundColor:i.backgroundColor?i.backgroundColor:this.__options.defaultStyles.backgroundColor}),this.__options.arrow||o.find(\".tooltipster-box\").css(\"margin\",0).end().find(\".tooltipster-arrow\").hide(),this.__options.minWidth&&o.css(\"min-width\",this.__options.minWidth+\"px\"),this.__options.maxWidth&&o.css(\"max-width\",this.__options.maxWidth+\"px\"),this.__instance._$tooltip=o,this.__instance._trigger(\"created\")},__destroy:function(){this.__instance._off(\".\"+self.__namespace)},__optionsFormat:function(){if(this.__options=this.__instance._optionsExtract(\"tooltipster.sideTip\",this.__defaults()),this.__options.position&&(this.__options.side=this.__options.position),\"object\"!=typeof this.__options.distance&&(this.__options.distance=[this.__options.distance]),this.__options.distance.length<4&&(void 0===this.__options.distance[1]&&(this.__options.distance[1]=this.__options.distance[0]),void 0===this.__options.distance[2]&&(this.__options.distance[2]=this.__options.distance[0]),void 0===this.__options.distance[3]&&(this.__options.distance[3]=this.__options.distance[1])),this.__options.distance={top:this.__options.distance[0],right:this.__options.distance[1],bottom:this.__options.distance[2],left:this.__options.distance[3]},\"string\"==typeof this.__options.side){this.__options.side=[this.__options.side,{top:\"bottom\",right:\"left\",bottom:\"top\",left:\"right\"}[this.__options.side]],\"left\"==this.__options.side[0]||\"right\"==this.__options.side[0]?this.__options.side.push(\"top\",\"bottom\"):this.__options.side.push(\"right\",\"left\")}6===t.tooltipster._env.IE&&!0!==this.__options.arrow&&(this.__options.arrow=!1)},__reposition:function(i,o){var e,n=this,s=n.__targetFind(o),r=[];n.__instance._$tooltip.detach();var _=n.__instance._$tooltip.clone(),a=t.tooltipster._getRuler(_),l=!1,p=n.__instance.option(\"animation\");switch(p&&_.removeClass(\"tooltipster-\"+p),t.each([\"window\",\"document\"],function(e,p){var c=null;if(n.__instance._trigger({container:p,helper:o,satisfied:l,takeTest:function(t){c=t},results:r,type:\"positionTest\"}),1==c||0!=c&&0==l&&(\"window\"!=p||n.__options.viewportAware))for(e=0;e<n.__options.side.length;e++){var h={horizontal:0,vertical:0},d=n.__options.side[e];\"top\"==d||\"bottom\"==d?h.vertical=n.__options.distance[d]:h.horizontal=n.__options.distance[d],n.__sideChange(_,d),t.each([\"natural\",\"constrained\"],function(t,e){if(c=null,n.__instance._trigger({container:p,event:i,helper:o,mode:e,results:r,satisfied:l,side:d,takeTest:function(t){c=t},type:\"positionTest\"}),1==c||0!=c&&0==l){var _={container:p,distance:h,fits:null,mode:e,outerSize:null,side:d,size:null,target:s[d],whole:null},u=(\"natural\"==e?a.free():a.constrain(o.geo.available[p][d].width-h.horizontal,o.geo.available[p][d].height-h.vertical)).measure();if(_.size=u.size,_.outerSize={height:u.size.height+h.vertical,width:u.size.width+h.horizontal},\"natural\"==e?o.geo.available[p][d].width>=_.outerSize.width&&o.geo.available[p][d].height>=_.outerSize.height?_.fits=!0:_.fits=!1:_.fits=u.fits,\"window\"==p&&(_.fits?_.whole=\"top\"==d||\"bottom\"==d?o.geo.origin.windowOffset.right>=n.__options.minIntersection&&o.geo.window.size.width-o.geo.origin.windowOffset.left>=n.__options.minIntersection:o.geo.origin.windowOffset.bottom>=n.__options.minIntersection&&o.geo.window.size.height-o.geo.origin.windowOffset.top>=n.__options.minIntersection:_.whole=!1),r.push(_),_.whole)l=!0;else if(\"natural\"==_.mode&&(_.fits||_.size.width<=o.geo.available[p][d].width))return!1}})}}),n.__instance._trigger({edit:function(t){r=t},event:i,helper:o,results:r,type:\"positionTested\"}),r.sort(function(t,i){return t.whole&&!i.whole?-1:!t.whole&&i.whole?1:t.whole&&i.whole?(o=n.__options.side.indexOf(t.side))<(e=n.__options.side.indexOf(i.side))?-1:o>e?1:\"natural\"==t.mode?-1:1:t.fits&&!i.fits?-1:!t.fits&&i.fits?1:t.fits&&i.fits?(o=n.__options.side.indexOf(t.side))<(e=n.__options.side.indexOf(i.side))?-1:o>e?1:\"natural\"==t.mode?-1:1:\"document\"==t.container&&\"bottom\"==t.side&&\"natural\"==t.mode?-1:1;var o,e}),(e=r[0]).coord={},e.side){case\"left\":case\"right\":e.coord.top=Math.floor(e.target-e.size.height/2);break;case\"bottom\":case\"top\":e.coord.left=Math.floor(e.target-e.size.width/2)}switch(e.side){case\"left\":e.coord.left=o.geo.origin.windowOffset.left-e.outerSize.width;break;case\"right\":e.coord.left=o.geo.origin.windowOffset.right+e.distance.horizontal;break;case\"top\":e.coord.top=o.geo.origin.windowOffset.top-e.outerSize.height;break;case\"bottom\":e.coord.top=o.geo.origin.windowOffset.bottom+e.distance.vertical}\"window\"==e.container?\"top\"==e.side||\"bottom\"==e.side?e.coord.left<0?o.geo.origin.windowOffset.right-this.__options.minIntersection>=0?e.coord.left=0:e.coord.left=o.geo.origin.windowOffset.right-this.__options.minIntersection-1:e.coord.left>o.geo.window.size.width-e.size.width&&(o.geo.origin.windowOffset.left+this.__options.minIntersection<=o.geo.window.size.width?e.coord.left=o.geo.window.size.width-e.size.width:e.coord.left=o.geo.origin.windowOffset.left+this.__options.minIntersection+1-e.size.width):e.coord.top<0?o.geo.origin.windowOffset.bottom-this.__options.minIntersection>=0?e.coord.top=0:e.coord.top=o.geo.origin.windowOffset.bottom-this.__options.minIntersection-1:e.coord.top>o.geo.window.size.height-e.size.height&&(o.geo.origin.windowOffset.top+this.__options.minIntersection<=o.geo.window.size.height?e.coord.top=o.geo.window.size.height-e.size.height:e.coord.top=o.geo.origin.windowOffset.top+this.__options.minIntersection+1-e.size.height):(e.coord.left>o.geo.window.size.width-e.size.width&&(e.coord.left=o.geo.window.size.width-e.size.width),e.coord.left<0&&(e.coord.left=0)),n.__sideChange(_,e.side),o.tooltipClone=_[0],o.tooltipParent=n.__instance.option(\"parent\").parent[0],o.mode=e.mode,o.whole=e.whole,o.origin=n.__instance._$origin[0],o.tooltip=n.__instance._$tooltip[0],delete e.container,delete e.fits,delete e.mode,delete e.outerSize,delete e.whole,e.distance=e.distance.horizontal||e.distance.vertical;var c,h,d,u=t.extend(!0,{},e);if(n.__instance._trigger({edit:function(t){e=t},event:i,helper:o,position:u,type:\"position\"}),n.__options.functionPosition){var g=n.__options.functionPosition.call(n,n.__instance,o,u);g&&(e=g)}a.destroy(),\"top\"==e.side||\"bottom\"==e.side?(c={prop:\"left\",val:e.target-e.coord.left},h=e.size.width-this.__options.minIntersection):(c={prop:\"top\",val:e.target-e.coord.top},h=e.size.height-this.__options.minIntersection),c.val<this.__options.minIntersection?c.val=this.__options.minIntersection:c.val>h&&(c.val=h),d=o.geo.origin.fixedLineage?o.geo.origin.windowOffset:{left:o.geo.origin.windowOffset.left+o.geo.window.scroll.left,top:o.geo.origin.windowOffset.top+o.geo.window.scroll.top},e.coord={left:d.left+(e.coord.left-o.geo.origin.windowOffset.left),top:d.top+(e.coord.top-o.geo.origin.windowOffset.top)},n.__sideChange(n.__instance._$tooltip,e.side),o.geo.origin.fixedLineage?n.__instance._$tooltip.css(\"position\",\"fixed\"):n.__instance._$tooltip.css(\"position\",\"\"),n.__instance._$tooltip.css({left:e.coord.left,top:e.coord.top,height:e.size.height,width:e.size.width}).find(\".tooltipster-arrow\").css({left:\"\",top:\"\"}).css(c.prop,c.val),n.__instance._$tooltip.appendTo(n.__instance.option(\"parent\")),n.__instance._trigger({type:\"repositioned\",event:i,position:e})},__sideChange:function(t,i){t.removeClass(\"tooltipster-bottom\").removeClass(\"tooltipster-left\").removeClass(\"tooltipster-right\").removeClass(\"tooltipster-top\").addClass(\"tooltipster-\"+i)},__targetFind:function(t){var i={},o=this.__instance._$origin[0].getClientRects();o.length>1&&(1==this.__instance._$origin.css(\"opacity\")&&(this.__instance._$origin.css(\"opacity\",.99),o=this.__instance._$origin[0].getClientRects(),this.__instance._$origin.css(\"opacity\",1)));if(o.length<2)i.top=Math.floor(t.geo.origin.windowOffset.left+t.geo.origin.size.width/2),i.bottom=i.top,i.left=Math.floor(t.geo.origin.windowOffset.top+t.geo.origin.size.height/2),i.right=i.left;else{var e=o[0];i.top=Math.floor(e.left+(e.right-e.left)/2),e=o.length>2?o[Math.ceil(o.length/2)-1]:o[0],i.right=Math.floor(e.top+(e.bottom-e.top)/2),e=o[o.length-1],i.bottom=Math.floor(e.left+(e.right-e.left)/2),e=o.length>2?o[Math.ceil((o.length+1)/2)-1]:o[o.length-1],i.left=Math.floor(e.top+(e.bottom-e.top)/2)}return i}}}),t});\n","Amasty_CheckoutCore/js/checkout-collapsible.js":"define([\n    'jquery',\n    'mage/collapsible'\n], function ($) {\n\n    $.widget('mage.amCheckoutCollapsible', $.mage.collapsible, {\n        _create: function () {\n            // WCAG compatibility\n            this.options.content = $(this.element).find(this.options.content);\n            this._super();\n        }\n    });\n\n    return $.mage.amCheckoutCollapsible;\n});\n","Amasty_CheckoutCore/js/action/create-js-bundle.js":"define([\n    'underscore',\n    'mage/storage',\n    'Magento_Checkout/js/model/url-builder'\n], function (_, storage, urlBuilder) {\n    \"use strict\";\n\n    var API_PATH = '/amasty_checkout/js/create-bundle';\n\n    return function () {\n        var ulr = urlBuilder.createUrl(API_PATH, {}),\n            match = /\\/frontend\\//.exec(Object.keys(require.s.contexts._.urlFetched)[0]),\n            trashStringSize = match.index || 0,\n            data = [];\n\n        _.each(require.s.contexts._.urlFetched, function (val, key) {\n            data.push(key.substr(trashStringSize));\n        });\n\n        _.each(require.s.contexts._.defined, function (val, key) {\n            if (key.substr(0, 5) === \"text!\") {\n                // collect all html\n                data.push(require.toUrl(key.substr(5)).substr(trashStringSize));\n            }\n        });\n\n        storage.post(ulr, JSON.stringify({fileNames: data}), false);\n    };\n});\n","Amasty_CheckoutCore/js/action/get-totals.js":"define([\n    'jquery',\n    'mage/utils/wrapper',\n    'underscore',\n    'Amasty_CheckoutCore/js/model/resource-url-manager',\n    'Magento_Checkout/js/model/quote',\n    'mage/storage',\n    'Magento_Checkout/js/model/totals',\n    'Magento_Checkout/js/model/error-processor'\n], function ($, wrapper, _, resourceUrlManager, quote, storage, totalsService, errorProcessor) {\n    'use strict';\n\n    return function (callbacks, deferred) {\n        var serviceUrl = resourceUrlManager.getUrlForTotalsEstimationForNewAddress(quote),\n            request,\n            payload,\n            requiredFields = ['countryId', 'region', 'regionId', 'postcode'],\n            address = quote.isVirtual() ? quote.billingAddress() : quote.shippingAddress(),\n            deferredObject = deferred || $.Deferred();\n\n        address = _.pick(address, requiredFields);\n\n        payload = {\n            addressInformation: {\n                address: address\n            }\n        };\n\n        if (quote.shippingMethod() && quote.shippingMethod()['method_code']) {\n            payload.addressInformation['shipping_method_code'] = quote.shippingMethod()['method_code'];\n            payload.addressInformation['shipping_carrier_code'] = quote.shippingMethod()['carrier_code'];\n        }\n\n        totalsService.isLoading(true);\n\n        request = window.checkoutConfig.isNegotiableQuote ?\n            storage.get.bind(this, serviceUrl, false) :\n            storage.post.bind(this, serviceUrl, JSON.stringify(payload), false);\n\n        return request().done(function (response) {\n            var proceed = true;\n\n            if (callbacks && callbacks.length > 0) {\n                _.each(callbacks, function (callback) {\n                    proceed = proceed && callback();\n                });\n            }\n\n            if (proceed) {\n                quote.setTotals(response);\n                deferredObject.resolve();\n            }\n        }).fail(function (response) {\n            if (response.responseText || response.status) {\n                errorProcessor.process(response);\n            }\n\n            deferredObject.reject();\n        }).always(function () {\n            totalsService.isLoading(false);\n        });\n    };\n});\n","Amasty_CheckoutCore/js/action/focus-first-error.js":"define(\n    ['jquery'],\n    function ($) {\n        'use strict';\n\n        function toggleErrorCollapsible(errors) {\n            $.each(errors, function (index, error) {\n                if ($(error).css('display') != 'none'\n                    && $(error).parents('[data-amcheckout-js=\"step-content\"]').length) {\n                    var stepContainer = $(error).parents('[data-amcheckout-js=\"step-content\"]').parent(),\n                        stepContainerIsActive = stepContainer.data('mageCollapsible')\n                            ? stepContainer.data('mageCollapsible').options.active\n                            : true;\n\n                    if (!stepContainerIsActive) {\n                        var animate = stepContainer.collapsible(\"option\", \"animate\");\n\n                        stepContainer\n                            .collapsible('option', 'animate', false)\n                            .collapsible('activate')\n                            .collapsible('option', 'animate', animate);\n                    }\n                }\n            })\n        }\n\n        return function () {\n            var checkoutWindow = window;\n\n            if (checkoutWindow.checkoutDesign == 'modern'\n                && (checkoutWindow.checkoutLayout == '1column' || checkoutWindow.checkoutLayout == '2columns')) {\n                var allErrors = $('.mage-error, .field-error');\n\n                if (allErrors.length) {\n                    toggleErrorCollapsible(allErrors);\n                }\n            }\n\n            var errorField = $('.mage-error:visible, .field-error:visible').first();\n\n            if (!errorField.length) {\n                return;\n            }\n\n            if (errorField.is('div.mage-error')) {\n                if (errorField.prop('for')) {\n                    errorField = $('#' + errorField.prop('for')).length\n                        ? $('#' + errorField.prop('for'))\n                        : $('[name=\"' + errorField.prop('for') + '\"]');\n                } else {\n                    var input = errorField.prevAll(':input');\n                    if (input.length) {\n                        errorField = input;\n                    }\n                }\n            } else if (errorField.is('div.field-error')) {\n                errorField = $('#' + errorField.prop('id').replace('error-', ''))\n            }\n\n            if (errorField.is('input:not(:visible)')) {\n                errorField = $('label[for=\"' + errorField.prop('id') + '\"]')\n            }\n\n            var offset = errorField.offset().top - (checkoutWindow.innerHeight / 2);\n\n            if (offset < 0) {\n                offset = 0;\n            }\n\n            $(checkoutWindow).scrollTop(offset);\n\n            errorField.focus();\n        };\n    }\n);\n\n","Amasty_CheckoutCore/js/action/update-items-content.js":"define(\n    [\n        'Magento_Checkout/js/model/totals',\n        'Magento_Checkout/js/model/error-processor',\n        'uiRegistry',\n        'Magento_Checkout/js/model/quote',\n        'mage/storage'\n    ],\n    function (\n        totals,\n        errorProcessor,\n        registry,\n        quote,\n        storage\n    ) {\n        \"use strict\";\n\n        return function (quoteTotals) {\n            waitForTotals().then(function () {\n                    totals.isLoading(true);\n\n                    storage.get('/checkout/ajax/getItemsData').done(\n                        function (result) {\n                            if (!result) {\n                                window.location.reload();\n                            }\n\n                            if (result.image_data) {\n                                registry.get('checkout.sidebar.summary.cart_items.details.thumbnail').imageData\n                                    = result.image_data;\n                            }\n\n                            if (result.options_data) {\n                                var options = result.options_data;\n                                quoteTotals.items.forEach(function (item) {\n                                    item.amcheckout = options[item.item_id];\n                                });\n                            }\n                            quote.setTotals(quoteTotals);\n                        }\n                    ).fail(\n                        function (response) {\n                            errorProcessor.process(response);\n                        }\n                    ).always(\n                        function () {\n                            totals.isLoading(false);\n                        }\n                    );\n                }\n            );\n        };\n\n        function waitForTotals() {\n            return new Promise(function (resolve) {\n                if (!totals.isLoading()) {\n                    resolve();\n                } else {\n                    const subscription = totals.isLoading.subscribe(function (loading) {\n                        if (!loading) {\n                            subscription.dispose();\n                            resolve();\n                        }\n                    });\n                }\n            });\n        }\n    });\n","Amasty_CheckoutCore/js/action/recollect-shipping-rates.js":"define([\n    'underscore',\n    'Magento_Checkout/js/model/quote',\n    'Amasty_CheckoutCore/js/model/shipping-rate-service-override'\n], function (_, quote,  rateService) {\n    'use strict';\n\n    /**\n     * Clear shipping rates cache and request new rates for current shipping address\n     */\n    return _.throttle(function () {\n        if (!quote.isVirtual()) {\n            rateService.updateRates(quote.shippingAddress(), true);\n        }\n    }, 500);\n});\n","Amasty_CheckoutCore/js/action/remove-item.js":"define(\n    [\n        'Amasty_CheckoutCore/js/model/resource-url-manager',\n        'Magento_Checkout/js/model/totals',\n        'Magento_Checkout/js/model/quote',\n        'mage/storage',\n        'Magento_Checkout/js/model/error-processor',\n        'Magento_Checkout/js/model/shipping-service',\n        'Magento_Checkout/js/model/shipping-rate-registry',\n        'Magento_Checkout/js/model/payment-service',\n        'Magento_Checkout/js/model/payment/method-converter',\n        'Magento_Customer/js/customer-data',\n        'mage/url'\n    ],\n    function (\n        resourceUrlManager,\n        totals,\n        quote,\n        storage,\n        errorProcessor,\n        shippingService,\n        rateRegistry,\n        paymentService,\n        methodConverter,\n        customerData,\n        urlBuilder\n    ) {\n        \"use strict\";\n        return function (itemId) {\n            if (totals.isLoading())\n                return;\n\n            totals.isLoading(true);\n            shippingService.isLoading(true);\n            var serviceUrl = resourceUrlManager.getUrlForRemoveItem(quote);\n            var shipppingAddress = quote.shippingAddress();\n\n            //Fix for magento 2.2.2\n            if (shipppingAddress.extensionAttributes\n                && shipppingAddress.extensionAttributes.checkoutFields\n                && Object.keys(shipppingAddress.extensionAttributes.checkoutFields).length === 0\n            ) {\n                shipppingAddress.extensionAttributes.checkoutFields = [];\n            }\n\n            storage.post(\n                serviceUrl, JSON.stringify({\n                    itemId: itemId,\n                    address: shipppingAddress\n                }), false\n            ).done(\n                function (result) {\n                    if (!result) {\n                        return window.location.reload();\n                    }\n\n                    var itemIds = result.totals.items.map(function (value, index) {\n                        return value.item_id;\n                    });\n                    customerData.reload(['cart']);\n\n                    if  (!itemIds.length) {\n                        window.location.href = urlBuilder.build(\"checkout/cart/index\");\n                        return this;\n                    }\n                    window.checkoutConfig.quoteItemData = window.checkoutConfig.quoteItemData.filter(function (item) {\n                        return itemIds.indexOf(+item.item_id) !== -1;\n                    });\n\n                    shippingService.setShippingRates(result.shipping);\n                    rateRegistry.set(quote.shippingAddress().getKey(), result.shipping);\n                    quote.setTotals(result.totals);\n\n                    paymentService.setPaymentMethods(methodConverter(result.payment));\n                }\n            ).fail(\n                function (response) {\n                    errorProcessor.process(response);\n                }\n            ).always(\n                function () {\n                    shippingService.isLoading(false);\n                    totals.isLoading(false);\n                }\n            );\n        }\n    }\n);\n","Amasty_CheckoutCore/js/action/get-address-cache-key.js":"define(\n    [\n        'underscore',\n        'Magento_Checkout/js/model/shipping-rates-validation-rules',\n        'Magento_Checkout/js/model/address-converter'\n    ],\n    function (_, validationRules, addressConverter) {\n        'use strict';\n\n        /**\n         * Return cache string by guest address.\n         * Improve guest cache string key generation.\n         * Collecting by shipping carriers required fields.\n         *\n         * @param {Object} address - quote model address\n         * @return {String}\n         * @since 3.0.0\n         */\n        function getAddressCacheKey (address) {\n            var fields,\n                formAddress,\n                cacheKey = '',\n                postcodeElementName = 'postcode';\n\n            if (address.getType() !== 'new-address' && address.getType() !== 'new-customer-address') {\n                return address.getCacheKey();\n            }\n\n            fields = validationRules.getObservableFields();\n\n            if (!_.include(fields, postcodeElementName)){\n                fields.push(postcodeElementName);\n            }\n\n            formAddress = addressConverter.quoteAddressToFormAddressData(address);\n            _.each(fields, function (name) {\n                if (formAddress.hasOwnProperty(name)) {\n                    if (_.isObject(formAddress[name]) || _.isArray(formAddress[name])) {\n                        _.each(formAddress[name], function (streetLine) {\n                            cacheKey += '|' + streetLine;\n                        });\n                    } else if (_.isString(formAddress[name])){\n                        cacheKey += '|' + formAddress[name];\n                    }\n                } else if(formAddress['custom_attributes']) {\n                    cacheKey += '|' + formAddress['custom_attributes'][name];\n                }\n            });\n\n            return cacheKey;\n        }\n\n        return getAddressCacheKey;\n    }\n);\n","Amasty_CheckoutCore/js/action/save-additional-fields.js":"define(\n    [\n        'jquery',\n        'Amasty_CheckoutCore/js/model/resource-url-manager',\n        'Magento_Checkout/js/model/quote',\n        'uiRegistry',\n        'mage/storage',\n        'Magento_Checkout/js/model/error-processor'\n    ],\n    function ($, resourceUrlManager, quote, registry, storage, errorProcessor) {\n        \"use strict\";\n        var request;\n        return function () {\n            var serviceUrl, payload, data;\n\n            serviceUrl = resourceUrlManager.getUrlForAdditionalFields(quote);\n\n            data = registry.get('checkoutProvider').get('amcheckout.additional');\n\n            payload = {\n                cartId: quote.getQuoteId(),\n                fields: data\n            };\n            if (request) {\n                request.abort();\n            }\n\n            request = storage.post(\n                serviceUrl, JSON.stringify(payload), false\n            ).fail(\n                function (response) {\n                    if (response.responseText) {\n                        errorProcessor.process(response);\n                    }\n                }\n            );\n\n            return request;\n        }\n    }\n);\n","Amasty_CheckoutCore/js/action/update-item.js":"define(\n    [\n        'Amasty_CheckoutCore/js/model/resource-url-manager',\n        'Magento_Checkout/js/model/totals',\n        'Magento_Checkout/js/model/quote',\n        'mage/storage',\n        'Magento_Checkout/js/model/error-processor',\n        'Amasty_CheckoutCore/js/action/recollect-shipping-rates',\n        'Magento_Checkout/js/model/payment-service',\n        'Magento_Checkout/js/model/payment/method-converter',\n        'Magento_Customer/js/customer-data',\n        'Amasty_CheckoutCore/js/action/update-items-content',\n        'uiRegistry'\n    ],\n    function (\n        resourceUrlManager,\n        totals,\n        quote,\n        storage,\n        errorProcessor,\n        recollectShippingRates,\n        paymentService,\n        methodConverter,\n        customerData,\n        updateItemsContent,\n        registry\n    ) {\n        \"use strict\";\n\n\n        return function (itemId, formData) {\n            if (totals.isLoading()) {\n                return;\n            }\n\n            totals.isLoading(true);\n\n            storage.post(\n                resourceUrlManager.getUrlForUpdateItem(quote),\n                JSON.stringify({\n                    itemId: itemId,\n                    formData: formData\n                }), false\n            ).done(\n                function (result) {\n                    if (!result) {\n                        window.location.reload();\n                    }\n\n                    recollectShippingRates();\n\n                    paymentService.setPaymentMethods(methodConverter(result.payment));\n                    customerData.reload(['cart']);\n                    totals.isLoading(false);\n                    \n                    const quoteMessages = JSON.parse(result.quote_messages);\n                    if (quoteMessages) {\n                        const cartItemsMessages = registry.get('checkout.sidebar.summary.cart_items.details.message');\n                        Object.keys(quoteMessages).forEach((id) => {\n                            window.checkoutConfig.quoteMessages[id] = quoteMessages[id];\n                            cartItemsMessages.quoteMessages[id] = quoteMessages[id];\n                        });\n                    }\n\n                    updateItemsContent(result.totals);\n                }\n            ).fail(\n                function (response) {\n                    errorProcessor.process(response);\n                    totals.isLoading(false);\n                }\n            );\n        };\n    }\n);\n","Amasty_CheckoutCore/js/action/is-equal-ignore-functions.js":"/**\n * Extended copy of underscore comparison function for `isEqual` with.\n * Underscore's 'isEqual' doesn't compare functions correctly.\n */\ndefine([\n    'underscore'\n], function (_) {\n    'use strict';\n\n    var isEqualIgnoreFunctions = function (a, b, aStack, bStack) {\n        var className,\n            areArrays,\n            key,\n            length,\n            aCtor,\n            bCtor,\n            keys,\n            isFunction;\n\n        if (a === b) {\n            return a !== 0 || 1 / a === 1 / b;\n        }\n\n        if (a == null || b == null) {\n            return a === b;\n        }\n\n        if (a instanceof _) {\n            a = a._wrapped;\n        }\n\n        if (b instanceof _) {\n            b = b._wrapped;\n        }\n\n        className = Object.prototype.toString.call(a);\n\n        if (className !== Object.prototype.toString.call(b)) {\n            return false;\n        }\n\n        switch (className) {\n            case '[object RegExp]':\n            case '[object String]':\n                return '' + a === '' + b;\n            case '[object Number]':\n                if (+a !== +a) {\n                    return +b !== +b;\n                }\n\n                return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n            case '[object Date]':\n            case '[object Boolean]':\n                return +a === +b;\n            default:\n                break;\n        }\n\n        areArrays = className === '[object Array]';\n\n        if (!areArrays) {\n            if (typeof a != 'object' || typeof b != 'object') { return false; }\n\n            aCtor = a.constructor;\n            bCtor = b.constructor;\n\n            if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&\n                _.isFunction(bCtor) && bCtor instanceof bCtor) &&\n                ('constructor' in a && 'constructor' in b)) {\n                return false;\n            }\n        }\n\n        aStack = aStack || [];\n        bStack = bStack || [];\n        length = aStack.length;\n\n        while (length--) {\n            if (aStack[length] === a) {\n                return bStack[length] === b;\n            }\n        }\n\n        aStack.push(a);\n        bStack.push(b);\n\n        if (areArrays) {\n            length = a.length;\n\n            if (length !== b.length) {\n                return false;\n            }\n\n            while (length--) {\n                if (!isEqualIgnoreFunctions(a[length], b[length], aStack, bStack)) {\n                    return false;\n                }\n            }\n        } else {\n            keys = _.keys(a);\n            length = keys.length;\n\n            if (_.keys(b).length !== length) {\n                return false;\n            }\n\n            while (length--) {\n                key = keys[length];\n\n                // Custom Amasty check\n                isFunction = _.isFunction(a[key]) || _.isFunction(b[key]);\n\n                if (!isFunction &&\n                    !(_.has(b, key) && isEqualIgnoreFunctions(a[key], b[key], aStack, bStack))) {\n                    return false;\n                }\n            }\n        }\n\n        aStack.pop();\n        bStack.pop();\n\n        return true;\n    }\n\n    return isEqualIgnoreFunctions;\n});\n","Amasty_CheckoutCore/js/action/save-password.js":"define(\n    [\n        'jquery',\n        'Amasty_CheckoutCore/js/model/resource-url-manager',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/model/error-processor',\n        'mage/storage'\n    ],\n    function (\n        $,\n        resourceUrlManager,\n        quote,\n        errorProcessor,\n        storage\n    ) {\n        \"use strict\";\n\n        return function () {\n            var serviceUrl = resourceUrlManager.getUrlForSavePassword(quote),\n                password = $('form[data-role=email-with-possible-login]').find('#customer-password'),\n                payload = {\n                    password: password ? password.val() : ''\n            };\n\n            return storage.post(\n                serviceUrl,\n                JSON.stringify(payload),\n                false\n            ).fail(\n                function (response) {\n                    errorProcessor.process(response);\n                }\n            );\n        };\n    }\n);\n","Amasty_CheckoutCore/js/action/select-shipping-address-mixin.js":"define([\n    'Magento_Checkout/js/model/quote',\n    'mage/utils/wrapper'\n], function (quote, wrapper) {\n    'use strict';\n\n    return function (setShippingAddressAction) {\n        return wrapper.wrap(setShippingAddressAction, function (originalAction, shippingAddress) {\n\n            if (quote.shippingAddress.equalityComparer(quote.shippingAddress(), shippingAddress)) {\n                // prevent infinity shipping loader\n                require(['Magento_Checkout/js/model/shipping-service'], function (shippingService) {\n                    shippingService.isLoading(false);\n                });\n            }\n\n            return originalAction(shippingAddress);\n        });\n    };\n});\n","Amasty_CheckoutCore/js/action/set-shipping-information-mixin.js":"define([\n    'jquery',\n    'mage/utils/wrapper',\n    'Amasty_CheckoutCore/js/model/events',\n    'Magento_Checkout/js/model/totals'\n], function ($, wrapper, events, totals) {\n    'use strict';\n\n    return function (setShippingInformationAction) {\n        return wrapper.wrap(setShippingInformationAction, function (original) {\n            events.trigger('before_shipping_save');\n            totals.isLoading(true);\n            return original().always(function(){\n                events.trigger('after_shipping_save');\n                totals.isLoading(false);\n            });\n        });\n    };\n});\n","Amasty_CheckoutCore/js/action/set-payment-method-mixin.js":"define([\n    'uiRegistry',\n    'Magento_Checkout/js/model/quote',\n    'mage/utils/wrapper',\n    'Magento_CheckoutAgreements/js/model/agreements-assigner'\n], function (registry, quote, wrapper, agreementsAssigner) {\n    'use strict';\n\n    return function (setPaymentMethodAction) {\n        return wrapper.wrap(setPaymentMethodAction, function (originalAction, messageContainer) {\n            agreementsAssigner(quote.paymentMethod());\n\n            return originalAction(messageContainer);\n        });\n    };\n});\n","Amasty_CheckoutCore/js/view/gdpr-consent.js":"/**\n * Gdpr component inheritance to avoid incorrect checkbox displaying by country\n */\ndefine(\n    [\n        'Amasty_Gdpr/js/view/consent',\n        'Magento_Checkout/js/model/quote'\n    ],\n    function (Component, quote) {\n        'use strict';\n\n        return Component.extend({\n\n            initialize: function () {\n                this._super();\n\n                if (quote.billingAddress()) {\n                    quote.billingAddress.valueHasMutated();\n                }\n            }\n        });\n    }\n);\n","Amasty_CheckoutCore/js/view/summary-mixin.js":"define([\n    'Amasty_CheckoutCore/js/view/utils'\n], function (viewUtils) {\n    'use strict';\n\n    return function (Component) {\n        return Component.extend({\n            getNameSummary: function () {\n                return viewUtils.getBlockTitle('summary');\n            }\n        });\n    };\n});\n","Amasty_CheckoutCore/js/view/shipping-mixin.js":"define(\n    [\n        'underscore',\n        'ko',\n        'jquery',\n        'Magento_Ui/js/lib/view/utils/async',\n        'Magento_Customer/js/model/customer',\n        'Magento_Checkout/js/model/address-converter',\n        'Magento_Customer/js/customer-data',\n        'Magento_Checkout/js/checkout-data',\n        'Magento_Checkout/js/model/shipping-service',\n        'Magento_Checkout/js/action/select-shipping-address',\n        'Magento_Checkout/js/action/select-shipping-method',\n        'Magento_Checkout/js/action/set-shipping-information',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/model/customer-email-validator',\n        'Amasty_CheckoutCore/js/view/utils',\n        'Amasty_CheckoutCore/js/model/payment/payment-loading',\n        'Amasty_CheckoutCore/js/action/get-totals',\n        'Amasty_CheckoutCore/js/model/shipping-registry',\n        'Amasty_CheckoutCore/js/model/address-form-state',\n        'Amasty_CheckoutCore/js/model/events',\n        'uiRegistry',\n        'rjsResolver',\n        'mage/translate'\n    ],\n    function (\n        _,\n        ko,\n        $,\n        async,\n        customer,\n        addressConverter,\n        storage,\n        checkoutData,\n        shippingService,\n        selectShippingAddress,\n        selectShippingMethod,\n        setShippingInformationAction,\n        quote,\n        emailValidator,\n        viewUtils,\n        paymentLoader,\n        totalsProcessor,\n        shippingRegistry,\n        addressFormState,\n        events,\n        registry,\n        onLoad,\n        $t\n    ) {\n        'use strict';\n\n        var instance = null;\n\n        function removeAmazonPayButton() {\n            var amazonPaymentButton = $('#PayWithAmazon_amazon-pay-button img');\n\n            if (amazonPaymentButton.length > 1) {\n                amazonPaymentButton.not(':first').remove();\n            }\n        }\n\n        return function (Shipping) {\n            return Shipping.extend({\n                allowedDynamicalSave: false,\n                allowedDynamicalValidation: true,\n                isUpdateCancelledByBilling: false,\n                isInitialDataSaved: false,\n                previousShippingMethodData: {},\n\n                initialize: function () {\n                    this._super();\n\n                    instance = this;\n                    onLoad(shippingRegistry.initObservers.bind(shippingRegistry, this.elems));\n                    onLoad(this.registerObserversAfterLoad.bind(this));\n\n                    if (!this.isFormInline) {\n                        shippingRegistry.excludedCollectionNames.push(\n                            'shipping-address-fieldset',\n                            'additional-fieldsets'\n                        );\n                    }\n\n                    registry.get(\n                        // eslint-disable-next-line max-len\n                        'checkout.steps.shipping-step.shippingAddress.before-form.amazon-widget-address.before-widget-address.amazon-checkout-revert',\n                        function (component) {\n                            component.isAmazonAccountLoggedIn.subscribe(this.amazonLoginStatusObserver);\n                        }.bind(this)\n                    );\n\n                    registry.get(\n                        'checkout.steps.billing-step.payment.payments-list.amazon_payment',\n                        function (component) {\n                            if (component.isAmazonAccountLoggedIn()) {\n                                $('button.action-show-popup').hide();\n                            }\n                        }\n                    );\n\n                    registry.get(\n                        // eslint-disable-next-line max-len\n                        'checkout.steps.shipping-step.shippingAddress.customer-email.amazon-button-region.amazon-button',\n                        function (component) {\n                            async.async({\n                                selector: '#PayWithAmazon_amazon-pay-button img'\n                            }, function () {\n                                removeAmazonPayButton();\n                            });\n\n                            component.isAmazonAccountLoggedIn.subscribe(function (loggedIn) {\n                                if (!loggedIn) {\n                                    removeAmazonPayButton();\n                                }\n                            });\n                        }\n                    );\n\n                    quote.billingAddress.subscribe(function () {\n                        if (this.isUpdateCancelledByBilling) {\n                            this.validateAndSaveIfChanged(true);\n                        }\n                    }, this);\n                },\n\n                initObservable: function () {\n                    this._super();\n\n                    quote.shippingMethod.subscribe(this.shippingMethodObserver.bind(this));\n\n                    if (quote.shippingMethod.getVersion() > 1) {\n                        this.shippingMethodObserver(quote.shippingMethod());\n                    }\n\n                    this.allowedDynamicalSave = true;\n\n                    events.onBeforeShippingSave(shippingRegistry.register.bind(shippingRegistry));\n                    events.onBeforeShippingSave(paymentLoader.bind(null, true));\n                    events.onAfterShippingSave(paymentLoader.bind(null, false));\n\n                    return this;\n                },\n\n                /**\n                 * Register subscribers who save shipping.\n                 * Register after full load.\n                 * @returns {void}\n                 */\n                registerObserversAfterLoad: function () {\n                    this.isInitialDataSaved = true;\n\n                    shippingRegistry.isAddressChanged.subscribe(this.additionalFieldsObserver.bind(this));\n                    shippingService.isLoading.subscribe(function (isLoading) {\n                        if (!isLoading) {\n                            this.validateAndSaveIfChanged(true);\n                        }\n                    }, this);\n                },\n\n                /**\n                 * If checkout already have all shipping information\n                 * then execute validate and save process because we dont have any triggers\n                 * and save should be executed on storefront for 3rd party extensions compatibility\n                 * @returns {void}\n                 */\n                saveInitialData: function () {\n                    if (!this.isInitialDataSaved) {\n                        onLoad(\n                            function () {\n                                shippingRegistry.initializedPromise.then(function () {\n                                    if (this.silentValidation()) {\n                                        this.validateAndSaveIfChanged(true);\n                                    }\n                                }.bind(this));\n                            }.bind(this)\n                        );\n\n                        this.isInitialDataSaved = true;\n                    }\n                },\n\n                /**\n                 * Validate shipping without showing any errors\n                 * @return {Boolean} result Validation result\n                 */\n                silentValidation: function () {\n                    var invalidElement,\n                        result = !_.isEmpty(quote.shippingMethod()) && !_.isEmpty(quote.shippingAddress());\n\n                    if (result && this.isFormInline) {\n                        invalidElement = _.find(shippingRegistry.addressComponents, function (module) {\n                            return ko.isObservable(module.required)\n                                && ko.isObservable(module.value)\n                                && ko.isObservable(module.visible)\n                                && ko.isObservable(module.disabled)\n                                && module.required.peek()\n                                && module.visible.peek()\n                                && !module.disabled.peek()\n                                && this._isValueEmpty(module.value.peek());\n                        }, this);\n\n                        result = _.isUndefined(invalidElement);\n                    }\n\n                    return result;\n                },\n\n                /**\n                 * @param {String|Number|Object|*} value\n                 * @return {boolean}\n                 * @private\n                 */\n                _isValueEmpty: function (value) {\n                    if (_.isNumber(value)) {\n                        return !value;\n                    }\n\n                    return _.isEmpty(value);\n                },\n\n                setShippingInformation: function () {\n                    var result;\n\n                    this.allowedDynamicalSave = false;\n                    result = this._super();\n                    this.allowedDynamicalSave = true;\n\n                    return result;\n                },\n\n                selectShippingMethod: function (method) {\n                    window.loaderIsNotAllowed = true;\n                    this._super(method);\n                    instance.validateAndSaveIfChanged();\n                    delete window.loaderIsNotAllowed;\n\n                    return true;\n                },\n\n                /**\n                 * Copy of parent method validateShippingInformation()\n                 * without focus to email field\n                 * @param {Boolean} hideError\n                 * @return {Boolean}\n                 */\n                validateShipping: function (hideError) {\n                    var shippingAddress,\n                        addressData,\n                        emailValidationResult = customer.isLoggedIn(),\n                        field,\n                        option = _.isObject(this.countryOptions)\n                                && this.countryOptions[quote.shippingAddress().countryId],\n                        messageContainer = registry.get('checkout.errors').messageContainer;\n\n                    if (!quote.shippingMethod()) {\n                        this.errorValidationMessage(\n                            $t('The shipping method is missing. Select the shipping method and try again.')\n                        );\n\n                        return false;\n                    }\n\n                    if (!customer.isLoggedIn()) {\n                        emailValidationResult = emailValidator.validate(hideError);\n                    }\n\n                    if (this.isFormInline) {\n                        this.source.set('params.invalid', false);\n                        this.triggerShippingDataValidateEvent();\n\n                        if (!quote.shippingMethod()['method_code']) {\n                            this.errorValidationMessage(\n                                $t('The shipping method is missing. Select the shipping method and try again.')\n                            );\n                        }\n\n                        if ((emailValidationResult\n                            && this.source.get('params.invalid'))\n                            || !quote.shippingMethod()['method_code']\n                            || !quote.shippingMethod()['carrier_code']\n                        ) {\n                            this.focusInvalid();\n\n                            return false;\n                        }\n\n                        if (this.source.get('params.invalid')) {\n                            return false;\n                        }\n\n                        shippingAddress = quote.shippingAddress();\n                        addressData = addressConverter.formAddressDataToQuoteAddress(\n                            this.source.get('shippingAddress')\n                        );\n\n                        // Copy form data to quote shipping address object\n                        // eslint-disable-next-line no-restricted-syntax\n                        for (field in addressData) {\n                            if (addressData.hasOwnProperty(field)\n                                && shippingAddress.hasOwnProperty(field)\n                                && typeof addressData[field] != 'function'\n                                && _.isEqual(shippingAddress[field], addressData[field])\n                            ) {\n                                shippingAddress[field] = addressData[field];\n                            } else if (typeof addressData[field] != 'function'\n                                && !_.isEqual(shippingAddress[field], addressData[field])) {\n                                shippingAddress = addressData;\n                                break;\n                            }\n                        }\n\n                        if (customer.isLoggedIn()) {\n                            shippingAddress['save_in_address_book'] = 1;\n                        }\n\n                        selectShippingAddress(shippingAddress);\n                    } else if (customer.isLoggedIn()\n                        && option\n                        && option['is_region_required']\n                        && !quote.shippingAddress().region\n                    ) {\n                        messageContainer.addErrorMessage({\n                            message: $t('Please specify a regionId in shipping address.')\n                        });\n\n                        return false;\n                    }\n\n                    return true;\n                },\n\n                /**\n                 * @param {Boolean} hideError\n                 * @returns {Boolean}\n                 */\n                validateShippingInformation: function (hideError) {\n                    var result;\n\n                    if (hideError && (shippingRegistry.isEstimationHaveError() || !this.silentValidation())) {\n                        return false;\n                    }\n\n                    this.allowedDynamicalValidation = false;\n                    result = this.validateShipping(hideError);\n                    if (hideError && !result && !window.shippingErrorHideIsNotAllowed) {\n                        if (this.isFormInline && this.source.get('params.invalid')) {\n                            //set current value as initialValue\n                            this.source.trigger('data.overload');\n                            //set initialValue to value and reset errors\n                            this.source.trigger('data.reset');\n                        }\n\n                        this.errorValidationMessage(false);\n                    }\n                    this.allowedDynamicalValidation = true;\n\n                    return result;\n                },\n\n                /**\n                 * Calculate Totals for changed shipping method.\n                 * Necessary only if dynamical shipping save is not working (i.e. shipping is not valid)\n                 *\n                 * @param {Object} method Shipping method\n                 * @returns {void}\n                 */\n                shippingMethodObserver: function (method) {\n                    this.saveInitialData();\n\n                    if (method\n                        && shippingRegistry.isEstimationHaveError()\n                        || this.source.get('params.invalid')\n                        || shippingRegistry.isEstimationHaveError.getVersion() === 1\n                        && shippingRegistry.isHaveUnsavedShipping()\n                        && !window.checkoutConfig.isNegotiableQuote\n                    ) {\n                        totalsProcessor();\n                    }\n                },\n\n                /**\n                 * Reselect shipping method when customer logs out of Amazon\n                 * @param {Boolean} loggedIn Amazon account login status\n                 * @returns {void}\n                 */\n                amazonLoginStatusObserver: function (loggedIn) {\n                    if (!loggedIn) {\n                        registry.get('checkout.steps.shipping-step.shippingAddress', function (component) {\n                            if (component.isSelected()) {\n                                component.selectShippingMethod(quote.shippingMethod());\n                            }\n                        });\n                    }\n                },\n\n                /**\n                 * Trigger shipping address validation and save on additional address fields change\n                 * @param {Boolean} isChanged Change status\n                 * @returns {void}\n                 */\n                additionalFieldsObserver: function (isChanged) {\n                    var versionBeforeChange;\n\n                    if (!isChanged || shippingRegistry.isEstimationHaveError()) {\n                        paymentLoader(false);\n\n                        return;\n                    }\n\n                    if (this.isFormInline) {\n                        versionBeforeChange = shippingService.isLoading.getVersion();\n\n                        if ((this.validateShippingInformation(true) || !this.source.get('params.invalid'))\n                            && shippingService.isLoading.hasChanged(versionBeforeChange)\n                        ) {\n                            return;\n                        }\n                    }\n\n                    this.validateAndSaveIfChanged(true);\n                },\n\n                validateAndSaveIfChanged: function (hideError) {\n                    var isShippingValid;\n\n                    if (!this.allowedDynamicalSave\n                        || this.isBillingAddressFormVisible()\n                        || !shippingRegistry.isHaveUnsavedShipping()\n                    ) {\n                        paymentLoader(false);\n\n                        return;\n                    }\n\n                    isShippingValid = !this.allowedDynamicalValidation;\n\n                    // allowedDynamicalValidation - for avoid circular dependency\n                    if (this.allowedDynamicalValidation) {\n                        this.allowedDynamicalSave = false;\n                        isShippingValid = this.validateShippingInformation(hideError);\n                        this.allowedDynamicalSave = true;\n                    }\n\n                    /*\n                     if isFormInline = true, method validateShippingInformation\n                     will set shipping address and this observer will be executed.\n                     validateShippingInformation - also validate email, which is not part of Shipping information.\n                    */\n                    if (isShippingValid || (this.isFormInline && !this.source.get('params.invalid'))) {\n                        window.loaderIsNotAllowed = true;\n                        events.trigger('before_shipping_save');\n                        setShippingInformationAction();\n                        delete window.loaderIsNotAllowed;\n                    } else {\n                        paymentLoader(false);\n                    }\n                },\n\n                getNameShippingAddress: function () {\n                    return viewUtils.getBlockTitle('shipping_address');\n                },\n\n                getNameShippingMethod: function () {\n                    return viewUtils.getBlockTitle('shipping_method');\n                },\n\n                isPostNlEnable: function () {\n                    return window.checkoutConfig.quoteData.posnt_nl_enable;\n                },\n\n                /**\n                 * Trigger Shipping data Validate Event.\n                 * @returns {void}\n                 */\n                triggerShippingDataValidateEvent: function () {\n                    this.source.trigger('shippingAddress.data.validate');\n\n                    if (this.source.get('shippingAddress.custom_attributes')) {\n                        this.source.trigger('shippingAddress.custom_attributes.data.validate');\n                    }\n                },\n\n                validatePlaceOrder: function () {\n                    var loginFormSelector = 'form[data-role=email-with-possible-login]',\n                        emailValidationResult = this.isCustomerLoggedIn();\n\n                    if (!emailValidationResult) {\n                        $(loginFormSelector).validation();\n                        emailValidationResult = Boolean($(loginFormSelector + ' input[name=username]').valid());\n                    }\n\n                    if (!emailValidationResult) {\n                        $(loginFormSelector + ' input[name=username]').focus();\n\n                        return false;\n                    }\n\n                    if (this.isFormInline) {\n                        this.source.set('params.invalid', false);\n                        this.triggerShippingDataValidateEvent();\n\n                        if (\n                            this.source.get('params.invalid')\n                        ) {\n                            return false;\n                        }\n                    }\n\n                    return true;\n                },\n\n                isModernDesign: function () {\n                    return window.checkoutDesign === 'modern';\n                },\n\n                /**\n                 * @param {Object} method - shipping method\n                 * @return {String} comment Tooltip text\n                 */\n                getMethodTooltipText: function (method) {\n                    var comment = '';\n\n                    if (this.isModernDesign() && method.error_message) {\n                        comment = method.error_message;\n                    }\n\n                    if (!comment) {\n                        comment = this.getCommentShippingMethod(method);\n                    }\n\n                    return comment;\n                },\n\n                /**\n                 * Compatibility with Amasty_ShippingTableRates and Amasty_StorePickup\n                 * @param {Object} method Shipping method\n                 * @returns {String} Shipping method comment\n                 */\n                getCommentShippingMethod: function (method) {\n                    if (!method) {\n                        return '';\n                    }\n\n                    if (method.comment && typeof method.comment === 'string') {\n                        return method.comment;\n                    }\n\n                    if (method.extension_attributes) {\n                        if (method.extension_attributes.amstorepick_comment) {\n                            return method.extension_attributes.amstorepick_comment;\n                        }\n\n                        if (method.extension_attributes.amstartes_comment) {\n                            return method.extension_attributes.amstartes_comment;\n                        }\n                    }\n\n                    return '';\n                },\n\n                getAdditionalClassForIcons: function (method) {\n                    if (this.isModernDesign()\n                        && Object.prototype.hasOwnProperty.call(method, 'error_message')\n                        && method.error_message\n                    ) {\n                        return '-error';\n                    }\n\n                    return '';\n                },\n\n                isShippingMethodTooltip: function (method) {\n                    return this.isModernDesign() && this.getMethodTooltipText(method);\n                },\n\n                getColspanCarrier: function (method) {\n                    if (this.isShippingMethodTooltip(method)) {\n                        return 1;\n                    }\n\n                    return 2;\n                },\n\n                /**\n                 * Disable focus on validation\n                 * Override parents function\n                 * @returns {Function}\n                 */\n                focusInvalid: function () {\n                    return this;\n                },\n\n                /**\n                 * Check on visible billing address form\n                 * @returns {Boolean} Billing address form visibility state\n                 */\n                isBillingAddressFormVisible: function () {\n                    this.isUpdateCancelledByBilling = !addressFormState.isBillingSameAsShipping()\n                        && addressFormState.isBillingFormVisible();\n\n                    return this.isUpdateCancelledByBilling;\n                },\n\n                /**\n                 * Can be used as override for getPopUp function\n                 * to suppress new shipping address popup.\n                 * Used in 'list-mixin.js'\n                 *\n                 * @return {{openModal: openModal, closeModal: closeModal}}\n                 */\n                getPopUpOverride: function () {\n                    var self = this;\n\n                    return {\n                        openModal: function () {\n                            self.isFormPopUpVisible(true);\n                        },\n                        closeModal: function () {\n                            self.isFormPopUpVisible(false);\n                        }\n                    };\n                }\n            });\n        };\n    }\n);\n","Amasty_CheckoutCore/js/view/billing-address-mixin.js":"/**\n * Billing address view mixin for store flag is billing form in edit mode (visible)\n */\ndefine([\n    'underscore',\n    'Magento_Checkout/js/model/quote',\n    'Amasty_CheckoutCore/js/model/address-form-state'\n], function (_, quote, formService) {\n    'use strict';\n\n    return function (billingAddress) {\n        /**\n         * force initialization for correct isAddressSameAsShipping working\n         * @see Magento_Checkout/js/view/billing-address\n         */\n        var updateDependenciesBounced = _.debounce(function () {\n            quote.billingAddress.valueHasMutated();\n        }, 50);\n\n        return billingAddress.extend({\n            initialize: function () {\n                this._super();\n\n                /**\n                 * Vendor Module Fix\n                 * Magento EE 2.4.2\n                 * Module: Vertex_AddressValidation\n                 * File: view/frontend/web/js/billing-validation-mixin.js; method addressDetailsVisibilityChanged\n                 * Issue: observable isAddressDetailsVisible could be changed by other components\n                 * before registry.get() is executed => this.addressValidator is null =>\n                 * => this.addressValidator.message is browser console error\n                 */\n                if (!this.addressValidator) {\n                    this.addressValidator = {\n                        message: {\n                            hasMessage: function () {\n                                return false;\n                            }\n                        }\n                    }\n                }\n\n                return this;\n            },\n\n            initObservable: function () {\n                this._super();\n\n                if (quote.billingAddress() && this.isAddressSameAsShipping.getVersion() <= 1) {\n                    updateDependenciesBounced();\n                }\n\n                this.isAddressSameAsShipping.subscribe(formService.updateBillingFormStates, formService);\n                this.isAddressDetailsVisible.subscribe(formService.updateBillingFormStates, formService);\n\n                if (window.checkoutConfig.displayBillingOnPaymentMethod) {\n                    quote.paymentMethod.subscribe(formService.updateBillingFormStates, formService);\n                }\n\n                formService.updateBillingFormStates();\n                formService.isFormRendered(true);\n\n                return this;\n            }\n        });\n    };\n});\n","Amasty_CheckoutCore/js/view/utils.js":"// Checkout views utility methods\ndefine(['underscore'], function (_) {\n    'use strict';\n\n    return {\n        /**\n         * Find checkout block layout config in window.checkoutConfig\n         * @param {string} blockNames\n         * @returns {null|{title:string, name:string}}\n         */\n        getBlockLayoutConfig: function (blockNames) {\n            var resultBlock = null;\n\n            _.find(window.checkoutConfig.checkoutBlocksConfig, function (column) {\n                return _.find(column, function (block) {\n                    if (blockNames === block.name) {\n                        resultBlock = block;\n\n                        return true;\n                    }\n                });\n            });\n\n            return resultBlock;\n        },\n\n        /**\n         * Get checkout block title from window.checkoutConfig\n         * @param {String} blockName\n         * @returns {String}\n         */\n        getBlockTitle: function (blockName) {\n            var blockConfig = this.getBlockLayoutConfig(blockName);\n\n            return blockConfig ? blockConfig.title : '';\n        }\n    };\n});\n","Amasty_CheckoutCore/js/view/onepage.js":"define(\n    [\n        'jquery',\n        'underscore',\n        'uiComponent',\n        'ko',\n        'uiRegistry',\n        'consoleLogger',\n        'Magento_Customer/js/model/customer',\n        'Magento_Checkout/js/action/select-billing-address',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/model/payment/additional-validators',\n        'Magento_Checkout/js/model/payment/method-converter',\n        'Magento_Checkout/js/model/payment-service',\n        'Magento_Checkout/js/model/checkout-data-resolver',\n        'Amasty_CheckoutCore/js/model/one-step-layout',\n        'Amasty_CheckoutCore/js/model/payment-validators/shipping-validator',\n        'Amasty_CheckoutCore/js/model/address-form-state',\n        'Amasty_CheckoutCore/js/model/statistic',\n        'Amasty_CheckoutCore/js/model/shipping-registry',\n        'Amasty_CheckoutCore/js/action/recollect-shipping-rates',\n        'Amasty_CheckoutCore/js/model/payment/salesrule-observer',\n        'Amasty_CheckoutCore/js/action/update-items-content'\n    ],\n    function (\n        $,\n        _,\n        Component,\n        ko,\n        registry,\n        consoleLogger,\n        customer,\n        selectBillingAddress,\n        quote,\n        paymentValidatorRegistry,\n        paymentMethodConverter,\n        paymentService,\n        checkoutDataResolver,\n        oneStepLayout,\n        shippingValidator,\n        addressFormState,\n        statistic,\n        shippingRegistry,\n        recollectRates,\n        salesRuleObserver,\n        getEditableItemsData\n    ) {\n        'use strict';\n\n        return Component.extend({\n            /** @inheritdoc */\n            initialize: function () {\n                this._super();\n\n                oneStepLayout.checkoutDesign = window.checkoutDesign;\n                oneStepLayout.checkoutLayout = !quote.isVirtual() ? window.checkoutLayout : '2columns';\n                oneStepLayout.mainAdditionalClasses = this.additionalClasses;\n                oneStepLayout.setContainerClassNames();\n\n                this.initCheckoutLayout();\n                this.initChangePlaceButtonText();\n\n                statistic.initialize();\n            },\n\n            initObservable: function () {\n                var addressComponentPromise;\n\n                this._super().observe({\n                    isAmazonLoggedIn: null\n                });\n\n                if (!quote.isVirtual()) {\n                    quote.shippingAddress.subscribe(this.shippingAddressObserver.bind(this));\n                    paymentValidatorRegistry.registerValidator(shippingValidator);\n                }\n                shippingRegistry.setInitialValues();\n                addressComponentPromise = registry.promise('checkout.steps.shipping-step.shippingAddress');\n\n                registry.get('checkout.steps.billing-step.payment', function (component) {\n                    if (addressComponentPromise.state() !== 'pending') {\n                        this.initializePaymentStep(component);\n                        return;\n                    }\n                    addressComponentPromise.done(this.initializePaymentStep.bind(this, component));\n\n                }.bind(this));\n\n                registry.get('checkout.sidebar.summary_additional.discount', function (couponView) {\n                    try {\n                        //recollect shipping rates on apply/cancel coupon code\n                        couponView.isApplied.subscribe(recollectRates);\n                    } catch (e) {\n                        consoleLogger.error(\n                            'Coupon field failed. Cannot subscribe on isApplied for recollect shipping rates.'\n                        );\n                    }\n                });\n\n                return this;\n            },\n\n            /**\n             * Set initial payment information.\n             * payment information should be setted after shipping address.\n             * @param {Collection} component\n             */\n            initializePaymentStep: function (component) {\n                if (_.isNull(quote.guestEmail) && !customer.isLoggedIn()) {\n                    quote.guestEmail = '';\n                }\n\n                if (window.checkoutConfig.isCheckoutItemsEditable) {\n                    getEditableItemsData(window.checkoutConfig.quoteData.initPayment.totals);\n                } else {\n                    quote.setTotals(window.checkoutConfig.quoteData.initPayment.totals);\n                }\n\n                paymentService.setPaymentMethods(\n                    paymentMethodConverter(window.checkoutConfig.quoteData.initPayment.payment_methods)\n                );\n                // subscribes to payment method\n                salesRuleObserver.initialize();\n                component.isVisible(true);\n            },\n\n            /**\n             * Init checkout layout by quote type\n             * @returns {void}\n             */\n            initCheckoutLayout: function () {\n                if (!quote.isVirtual()) {\n                    oneStepLayout.selectedLayout = window.checkoutConfig.checkoutBlocksConfig;\n                } else {\n                    oneStepLayout.selectedLayout = oneStepLayout.getVirtualLayout();\n                }\n            },\n\n            /**\n             * [ Used it template ]\n             * Getting oneStepLayout model in view\n             * @returns {Object}\n             */\n            getOneStepModel: function () {\n                return oneStepLayout;\n            },\n\n            shippingAddressObserver: function (address) {\n                if (!address) {\n                    return;\n                }\n\n                this.isAccountLoggedInAmazon();\n\n                this.setShippingToBilling(address);\n            },\n\n            /**\n             * fix default \"My billing and shipping address are the same\" checkbox behaviour\n             *\n             * @param {object|null} address\n             * @returns {void}\n             */\n            setShippingToBilling: function (address) {\n                if (!address) {\n                    return;\n                }\n\n                if (!address.canUseForBilling()) {\n                    checkoutDataResolver.resolveBillingAddress();\n\n                    return;\n                }\n\n                if (_.isNull(address.street) || _.isUndefined(address.street)) {\n                    // fix: some payments (paypal) takes street.0 without checking\n                    address.street = [];\n                }\n\n                if (!addressFormState.isFormRendered()) {\n                    addressFormState.isFormRendered.subscribe(this.setShippingToBilling.bind(this, address));\n\n                    return;\n                }\n\n                if (addressFormState.isBillingSameAsShipping()) {\n                    selectBillingAddress(address);\n                }\n            },\n\n            /**\n             * Set customer Amazon logged in status and hide billing address if customer logged in Amazon\n             * @returns {void}\n             */\n            isAccountLoggedInAmazon: function () {\n                if (require.defined('Amazon_Payment/js/model/storage')) {\n                    if (this.isAmazonLoggedIn()) {\n                        $('.checkout-billing-address').hide();\n                    } else {\n                        require([ 'Amazon_Payment/js/model/storage' ], function (amazonStorage) {\n                            amazonStorage.isAmazonAccountLoggedIn.subscribe(function (isLoggedIn) {\n                                this.isAmazonLoggedIn(isLoggedIn);\n                            }, this);\n                            this.isAmazonLoggedIn(amazonStorage.isAmazonAccountLoggedIn());\n                        }.bind(this));\n                    }\n                }\n            },\n\n            initChangePlaceButtonText: function () {\n                var placeOrderButtonSelector = '.payment-method .action.primary.checkout';\n\n                if (!this.customPlaceButtonText) {\n                    return;\n                }\n\n                $.async(placeOrderButtonSelector, function (element) {\n                    $(element).attr('title', this.customPlaceButtonText);\n                    $(element).attr('aria-label', this.customPlaceButtonText);\n                    $(element).text(this.customPlaceButtonText);\n                }.bind(this));\n            }\n        });\n    }\n);\n","Amasty_CheckoutCore/js/view/checkout-agreements-mixin.js":"/**\n * compatibility with 'braintree_paypal' payment method\n * when 'Terms and Conditions Checkbox Positioning' = 'Below the Order Total'\n * paymentMethodRenderer.item is empty\n * but 'braintree_paypal' require specific CheckboxId\n * @see Paypal_Braintree/js/view/payment/method-renderer/paypal.js:onInit()\n */\ndefine([\n], function () {\n    'use strict';\n\n    return function (Component) {\n        return Component.extend({\n            getCheckboxId: function (context, agreementId) {\n                let paymentMethodRenderer = context.$parents[1];\n\n                if (paymentMethodRenderer && !paymentMethodRenderer.item) {\n                    return 'agreement_' + 'braintree_paypal' + '_' + agreementId;\n                }\n\n                return this._super(context, agreementId);\n            }\n        })\n    }\n});\n","Amasty_CheckoutCore/js/view/payment-mixin.js":"define([], function () {\n    'use strict';\n\n    return function (Component) {\n        return Component.extend({\n            /**\n             * Force show payment methods block\n             *\n             * @returns {boolean}\n             */\n            hasShippingMethod: function () {\n                return true;\n            }\n        });\n    };\n});\n","Amasty_CheckoutCore/js/view/messages-mixin.js":"//when new error message added - scroll page to message block\ndefine([\n    'jquery',\n    'underscore',\n    'Magento_Ui/js/lib/knockout/extender/bound-nodes'\n], function ($, _, boundNodes) {\n    'use strict';\n\n    return function (Component) {\n        return Component.extend({\n            defaults: {\n                scrollAllowed: true,\n                scrollOffset: 0\n            },\n            initialize: function () {\n                this._super();\n\n                if (this.scrollAllowed === true && this.messageContainer.errorMessages) {\n                    this.messageContainer.errorMessages.subscribe(function (changes) {\n                        try {\n                            _.find(changes, function (change) {\n                                if (change.status === 'added') {\n                                    this._scrollToMessageBlock();\n\n                                    return true;//break\n                                }\n                            }, this);\n                        } catch (e) {\n                            console.log('Unable to scroll to error message.');\n                            console.debug(e);\n                        }\n                    }, this, 'arrayChange');\n                }\n\n                return this;\n            },\n\n            /**\n             * Scroll page to the message block\n             * @private\n             */\n            _scrollToMessageBlock: function () {\n                var componentNodes = boundNodes.get(this),\n                    $element = $(componentNodes),\n                    offset = $element.offset().top,\n                    scrollTo = false,\n                    windowTop = $(window).scrollTop(),\n                    windowHeight = $(window).height(),\n                    windowBottom = windowTop + windowHeight;\n\n                if (offset < 0 || !$element.is(':visible')) {\n                    return;\n                }\n\n                if (windowTop > offset) {\n                    scrollTo = offset;\n                } else if (windowBottom < offset) {\n                    //scroll page to bottom screen border\n                    scrollTo = offset - windowHeight * 0.7;\n                }\n\n                if (scrollTo !== false) {\n                    $([document.documentElement, document.body]).animate({\n                        scrollTop: scrollTo + this.scrollOffset\n                    }, 250);\n                }\n            }\n        });\n    };\n});\n","Amasty_CheckoutCore/js/view/summary/summary-widget.js":"define([\n    'jquery',\n    'stickyWidget',\n    'checkoutCollapsibleSteps'\n], function ($) {\n    'use strict';\n\n    $.widget('amasty.summaryWidget', {\n        options: {\n            desktopBreakpoint: 1024,\n        },\n\n        _create: function () {\n            if ($(this.element).parents('[data-amcheckout-js=\"main-container\"]').length) {\n                this.summaryByLayout();\n            }\n        },\n\n        summaryByLayout: function () {\n            switch (window.checkoutLayout) {\n                case '1column':\n                    $(this.element).checkoutCollapsibleSteps();\n                    break;\n\n                case '2columns':\n                    this.manageCollapsible();\n                    if (!$(this.element).data('amastyStickyWidget')) {\n                        $(this.element).stickyWidget({\n                            parentContainer: '[data-amcheckout-js=\"main-container\"]',\n                            element: '[data-amcheckout-js=\"sidebar-column\"]',\n                            scrollContentContainer: '[data-amcheckout-js=\"main-column\"]',\n                            stickyOffset: {\n                                top: 0,\n                                left: 60\n                            },\n                            stickyPosition: 'right'\n                        });\n                    }\n                    break;\n\n                default:\n                    break;\n            }\n        },\n\n        manageCollapsible: function () {\n            if ($(window).width() < this.options.desktopBreakpoint) {\n                $(this.element).checkoutCollapsibleSteps();\n            } else {\n                $('[data-amcheckout-js=\"step-container\"]').on(\"dimensionsChanged\", function () {\n                    $(window).trigger('scroll');\n                });\n            }\n\n            $(window).on('resize', function () {\n                if ($(window).width() < this.options.desktopBreakpoint) {\n                    $(this.element).checkoutCollapsibleSteps().checkoutCollapsibleSteps('createCollapsible');\n                } else {\n                    if ($(this.element).data('amastyCheckoutCollapsibleSteps')) {\n                        $(this.element).checkoutCollapsibleSteps('destroyCollapsible');\n                    }\n                }\n            }.bind(this));\n        }\n    });\n\n    return $.amasty.summaryWidget;\n});\n","Amasty_CheckoutCore/js/view/summary/cart-items-mixin.js":"define([], function () {\n    'use strict';\n\n    return function (Component) {\n        return Component.extend({\n            /**\n             * After Magento 2.2.4 items is not expanded by default.\n             * return true for expanded by default\n             */\n            isItemsBlockExpanded: function () {\n                return true;\n            }\n        });\n    }\n});","Amasty_CheckoutCore/js/view/summary/abstract-total.js":"define([], function () {\n    'use strict';\n\n    return function (Component) {\n        return Component.extend({\n            isFullMode: function () {\n                return this.getTotals();\n            }\n        });\n    }\n});","Amasty_CheckoutCore/js/view/summary/sticky-widget.js":"define([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    $.widget('amasty.stickyWidget', {\n        options: {\n            //selectors\n            parentContainer: '[data-amsticky-js=\"main-container\"]',\n            element: '[data-amsticky-js=\"sticky-element\"]',\n            scrollContentContainer: '[data-amsticky-js=\"scroll-element\"]',\n            stopper: '[data-amsticky-js=\"stopper\"]',\n\n            //sticky options\n            stickyOffset: {\n                top: 0,\n                left: 0\n            },\n            stickyPosition: 'right',\n            stickyClass: '-sticky',\n            disableBreakpoint: 1024\n        },\n\n        _create: function () {\n            var toggleSticky = this.stickyToggle.bind(this),\n                windowGlobal = window;\n\n            if ($(windowGlobal).width() >= this.options.disableBreakpoint) {\n                if ($(this.options.scrollContentContainer).length) {\n                    this.stickyPosition(this.options.stickyPosition);\n                };\n\n                $(windowGlobal).off('scroll', toggleSticky).on('scroll', toggleSticky);\n            }\n\n            $(windowGlobal).on('resize', function () {\n                this.stickyToggle();\n                if ($(windowGlobal).width() >= this.options.disableBreakpoint) {\n                    this.stickyPosition(this.options.stickyPosition);\n                    $(windowGlobal).off('scroll', toggleSticky).on('scroll', toggleSticky);\n                } else {\n                    $(windowGlobal).off('scroll', toggleSticky);\n                }\n            }.bind(this));\n        },\n\n        stickyToggle: function () {\n            var stickyOptions = this.options,\n                parentIsSet = $(stickyOptions.parentContainer).length,\n                parentContainer = (parentIsSet)\n                    ? $(stickyOptions.parentContainer)\n                    : $('body'),\n                parentContainerOffset = parentContainer.offset(),\n                scrollContentIsSet = $(stickyOptions.scrollContentContainer).length,\n                scrollContent = (scrollContentIsSet)\n                    ? $(stickyOptions.scrollContentContainer)\n                    : $('body'),\n                stickyElement = $(stickyOptions.element),\n                stickyIsRight = stickyOptions.stickyPosition == 'right',\n                stickyOffset = stickyOptions.stickyOffset,\n                stickyOffsetLeft = (scrollContentIsSet)\n                    ? scrollContent.offset().left + scrollContent.outerWidth() + stickyOffset.left\n                    : stickyOffset.left,\n                stopperOffset = ($(stickyOptions.stopper).length)\n                    ? $(stickyOptions.stopper).offset()\n                    :   {\n                            top: parentContainerOffset.top + parentContainer.height(),\n                            left: parentContainerOffset.left\n                        },\n                windowScrollTop = $(window).scrollTop();\n\n            if ($(window).width() < stickyOptions.disableBreakpoint) {\n                this.enableMobileLayout();\n\n                return;\n            }\n\n            if (parentContainer.height() <= stickyElement.height()) {\n                this.stickyDisable(stickyElement);\n\n                return;\n            }\n\n            if (stopperOffset.top - stickyElement[0].scrollHeight < windowScrollTop) {\n                if (stickyElement.css('position') != 'absolute') {\n                    stickyElement.css({\n                        position: 'absolute',\n                        top: 'initial',\n                        right: stickyIsRight ? 0 : 'initial',\n                        bottom: parentContainer.height() - (stopperOffset.top - parentContainerOffset.top),\n                        left: stickyIsRight ? 'initial' : 0\n                    });\n                    stickyElement.removeClass(stickyOptions.stickyClass);\n                }\n            } else if (parentContainerOffset.top < windowScrollTop + stickyOffset.top) {\n                if (stickyElement.css('position') != 'fixed') {\n                    stickyElement.css({\n                        position: 'fixed',\n                        top: stickyOffset.top,\n                        right: 'initial',\n                        bottom: 'initial',\n                        left: stickyIsRight ? stickyOffsetLeft : (parentContainerOffset.left + stickyOffset.left)\n                    });\n                    stickyElement.addClass(this.options.stickyClass);\n                }\n            } else {\n                this.stickyDisable(stickyElement);\n            }\n        },\n\n        stickyPosition: function (position) {\n            var stickyElement = $(this.options.element),\n                stickyFloat = (position == 'right') ? 'right' : 'left',\n                scrollContent = $(this.options.scrollContentContainer),\n                scrollContentFloat = (stickyFloat == 'right') ? 'left' : 'right';\n\n            stickyElement.css('float', stickyFloat);\n            scrollContent.css('float', scrollContentFloat);\n        },\n\n        stickyDisable: function (stickyElement) {\n            if (stickyElement.css('position') != 'static') {\n                stickyElement.css({\n                    position: 'static',\n                    top: 'initial',\n                    right: 'initial',\n                    bottom: 'initial',\n                    left: 'initial'\n                });\n                stickyElement.removeClass(this.options.stickyClass);\n            }\n        },\n\n        enableMobileLayout: function () {\n            var stickyElement = $(this.options.element),\n                scrollContent = $(this.options.scrollContentContainer);\n\n            this.stickyDisable(stickyElement);\n            stickyElement.css('float', 'none');\n            if (scrollContent.length) scrollContent.css('float', 'none');\n        }\n    });\n\n    return $.amasty.stickyWidget;\n});\n","Amasty_CheckoutCore/js/view/additional/date-of-birth.js":"define([\n    'Magento_Ui/js/form/element/date',\n    'jquery',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'Amasty_CheckoutCore/js/model/payment-validators/dob-validator',\n    'Amasty_CheckoutCore/js/view/additional/register',\n    'Amasty_CheckoutCore/js/view/checkout/datepicker'\n], function (Component, $, paymentValidatorRegistry, dobValidator) {\n    'use strict';\n    return Component.extend({\n        defaults: {\n            template: 'Amasty_CheckoutCore/form/date',\n            listens: {\n                '${ $.parentName }.register:checked': 'visible'\n            },\n            modules: {\n                registerComponent: '${ $.parentName }.register'\n            }\n        },\n\n        /**\n         * initialize\n         */\n        initialize: function () {\n            this._super();\n            paymentValidatorRegistry.registerValidator(dobValidator);\n            this.options.maxDate = '-1d';\n            this.options.changeMonth = true;\n            this.options.changeYear = true;\n            this.options.yearRange = \"-120y:c+nn\";\n            this.options.showButtonPanel = true;\n            this.options.showOn = 'both';\n            this.registerComponent(function (component) {\n                this.visible(component.checked() && component.visible());\n            }.bind(this))\n        },\n        onUpdate: function (newValue) {\n            this._super();\n            if (this.hasChanged()) {\n                this.source.trigger('amcheckout.additional:save');\n            }\n        }\n    });\n});\n","Amasty_CheckoutCore/js/view/additional/fieldset.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'uiComponent',\n    'Amasty_CheckoutCore/js/action/save-additional-fields',\n    'Magento_Checkout/js/checkout-data'\n], function (Component, saveAction) {\n    'use strict';\n\n    return Component.extend({\n        saveAllowed: false,\n\n        initialize: function () {\n            this._super();\n            this.source.on('amcheckout.additional:save', this.saveForm.bind(this));\n        },\n\n        saveForm: function () {\n            saveAction();\n        }\n    });\n});\n","Amasty_CheckoutCore/js/view/additional/subscribe.js":"define([\n    'jquery',\n    'Magento_Ui/js/form/element/single-checkbox'\n], function ($,  SingleCheckbox) {\n    'use strict';\n\n    return SingleCheckbox.extend({\n        defaults: {\n            valueMap: {\n                'true': true,\n                'false': false\n            }\n        },\n        onUpdate: function (newValue) {\n            this._super();\n            if (this.initialChecked !== newValue) {\n                this.source.trigger('amcheckout.additional:save');\n                this.initialChecked = newValue;\n            }\n        }\n    });\n});","Amasty_CheckoutCore/js/view/additional/comment.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/form/element/textarea'\n], function (Component) {\n    'use strict';\n\n    return Component.extend({\n        onUpdate: function (newValue) {\n            this._super();\n            if (this.isDifferedFromDefault()) {\n                this.source.trigger('amcheckout.additional:save');\n            }\n        }\n    });\n});\n","Amasty_CheckoutCore/js/view/additional/register.js":"define([\n    'jquery',\n    'Magento_Ui/js/form/element/single-checkbox'\n], function ($, SingleCheckbox) {\n    'use strict';\n\n    return SingleCheckbox.extend({\n        defaults: {\n            templates: {\n                checkbox: 'Amasty_CheckoutCore/form/components/single/checkbox'\n            },\n            modules: {\n                email: 'checkout.steps.shipping-step.shippingAddress.customer-email'\n            },\n            listens: {\n                'visible': 'onVisibilityChange'\n            },\n            valueMap: {\n                'true': true,\n                'false': false\n            }\n        },\n\n        initialize: function () {\n            this._super();\n            this.email(this.emailObserver.bind(this));\n        },\n        onUpdate: function (newValue) {\n            this._super();\n            this.source.trigger('amcheckout.additional:save');\n        },\n        onVisibilityChange: function (visibility) {\n            if (!visibility) {\n                this.checked(false);\n                this.checked.valueHasMutated();\n            } else {\n                this.checked(this.initialChecked);\n            }\n        },\n        emailObserver: function (component) {\n            this.visible(!component.isPasswordVisible());\n\n            component.isLoading.subscribe(function (isLoading) {\n                if (isLoading === true) {\n                    $.when(component.isEmailCheckComplete).done(function () {\n                        this.visible(true);\n                    }.bind(this)).fail(function () {\n                        this.visible(false);\n                    }.bind(this));\n                }\n            }.bind(this));\n        }\n    });\n});","Amasty_CheckoutCore/js/view/validators/agreement-validation.js":"define(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/payment/additional-validators',\n        'Amasty_CheckoutCore/js/model/payment-validators/agreement-validator'\n    ],\n    function (Component, additionalValidators, agreementValidator) {\n        'use strict';\n        additionalValidators.registerValidator(agreementValidator);\n        return Component.extend({});\n    }\n);\n","Amasty_CheckoutCore/js/view/validators/order-summary-validation.js":"define([\n    'uiComponent',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'Amasty_CheckoutCore/js/model/payment-validators/order-summary-validator'\n], function (Component, additionalValidators, orderSummaryValidator) {\n    'use strict';\n\n    additionalValidators.registerValidator(orderSummaryValidator);\n\n    return Component.extend({});\n});\n","Amasty_CheckoutCore/js/view/payment/list.js":"// Checkout payment methods view mixin\ndefine([\n    'Magento_Checkout/js/model/payment-service',\n    'Amasty_CheckoutCore/js/view/utils'\n], function (paymentService, viewUtils) {\n    'use strict';\n\n    return function (Component) {\n        return Component.extend({\n            /**\n             * add loader block for payment\n             */\n            isLoading: paymentService.isLoading,\n\n            getGroupTitle: function (newValue) {\n                var paymentMethodLayoutConfig = viewUtils.getBlockLayoutConfig('payment_method');\n\n                if (newValue().index === 'methodGroup'\n                    && paymentMethodLayoutConfig !== null\n                ) {\n                    return paymentMethodLayoutConfig.title;\n                }\n\n                return this._super(newValue);\n            }\n        });\n    };\n});\n","Amasty_CheckoutCore/js/view/payment/method-renderer/default-mixin.js":"/**\n * By default Magento flow, when payment method selected billing address is updates.\n * And when billing address updates, isPlaceOrderActionAllowed also update.\n * But One Step Checkout optimize billing address KO update. @see onepage.replaceEqualityComparer\n * So we need update isPlaceOrderActionAllowed on payment method change, to emulate default flow.\n * Also we added placeOrderState for Place Order button. Thus, we can flexibly manage its state.\n */\ndefine([\n    'jquery',\n    'ko',\n    'underscore',\n    'Magento_Checkout/js/model/quote',\n    'Amasty_CheckoutCore/js/model/payment/place-order-state',\n    'Amasty_CheckoutCore/js/model/payment/payment-loading'\n], function ($, ko, _, quote, placeOrderState, paymentLoader) {\n    'use strict';\n\n    return function (Component) {\n        return Component.extend({\n            initObservable: function () {\n                this._super();\n\n                this.isPlaceOrderActionAllowed = ko.pureComputed({\n                    read: this.isPlaceOrderActionAllowedRead,\n                    write: this.isPlaceOrderActionAllowedWrite,\n                    owner: this\n                });\n\n                return this;\n            },\n\n            /**\n             * Read function for KO computed isPlaceOrderActionAllowed.\n             *\n             * Don't call this function directly.\n             * Use isPlaceOrderActionAllowed().\n             *\n             * @returns {boolean}\n             */\n            isPlaceOrderActionAllowedRead: function () {\n                return quote.billingAddress() !== null && placeOrderState() && !paymentLoader();\n            },\n\n            /**\n             * Write function for KO computed isPlaceOrderActionAllowed.\n             *\n             * Don't call this function directly.\n             * Use isPlaceOrderActionAllowed(value).\n             *\n             * @param {boolean} value\n             * @returns {boolean}\n             */\n            isPlaceOrderActionAllowedWrite: function (value) {\n                return placeOrderState(!!value);\n            }\n        });\n    };\n});\n","Amasty_CheckoutCore/js/view/payment/method-renderer/braintree/paypal-mixin.js":"define([\n    'underscore',\n    'Magento_Checkout/js/model/quote',\n    'Amasty_CheckoutCore/js/model/events'\n], function (_, quote, events) {\n    'use strict';\n\n    return function (Component) {\n        return Component.extend({\n            /**\n             * fix braintree paypal behavior for one step checkout\n             */\n            initObservable: function () {\n                var self = this;\n\n                this._super();\n\n                events.onAfterShippingSave(_.debounce(function () {\n                    var method = quote.paymentMethod();\n\n                    if (method && method.method === self.code) {\n                        self.reInitPayPal();\n                    }\n                }, 50));\n\n                return this;\n            }\n        });\n    };\n});\n","Amasty_CheckoutCore/js/view/payment/method-renderer/braintree/cc-form-mixin.js":"// upgrade Braintree flow for One Step Checkout\ndefine([\n], function () {\n    'use strict';\n\n    return function (Component) {\n        return Component.extend({\n            /**\n             * Brantree harcoded disallow order place on initialization.\n             * By default Magento flow, payment method cannot be preselected.\n             * Dnd when payment method selected billing address is updates.\n             * And when billing address updates, isPlaceOrderActionAllowed also update.\n             * But One Step Checkout optimize billing address KO update.\n             */\n            initFormValidationEvents: function () {\n                this._super();\n                this.updateIsPlaceOrderActionAllowed();\n            }\n        });\n    };\n});\n","Amasty_CheckoutCore/js/view/payment/method-renderer/in-context/checkout-express-mixin.js":"define([\n    'ko',\n    'underscore',\n    'uiRegistry',\n    'rjsResolver',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Checkout/js/model/payment/method-list'\n], function (ko, _, registry, onJsLoad, quote, paymentMethods) {\n    'use strict';\n\n    return function (Component) {\n        return Component.extend({\n            validationTimeout: 0,\n\n            /**\n             * fix paypal behavior for one step checkout\n             * reactivate button on shipping save\n             */\n            initListeners: function () {\n                this._super();\n                onJsLoad(function () {\n                    var fields = registry.filter(function (module) {\n                        return ko.isObservable(module.required)\n                            && module.required.peek() === true\n                            && ko.isObservable(module.value)\n                            && ko.isObservable(module.visible)\n                            && ko.isObservable(module.disabled);\n                    });\n\n                    paymentMethods.subscribe(this.amDeferredValidation, this);\n                    _.each(fields, function (element) {\n                        element.value.subscribe(function (value) {\n                            if ((value || value === 0 || value === false)\n                                && element.required()\n                                && element.visible()\n                                && !element.disabled()\n                            ) {\n                                this.amDeferredValidation();\n                            }\n                        }.bind(this));\n                    }.bind(this));\n\n                }.bind(this));\n            },\n\n            validate: function () {\n                this._super();\n                clearTimeout(this.validationTimeout);\n            },\n\n            amDeferredValidation: function () {\n                clearTimeout(this.validationTimeout);\n\n                if (quote.paymentMethod() && quote.paymentMethod().method === this.item.method) {\n                    this.validationTimeout = setTimeout(function () {\n                        window.shippingErrorHideIsNotAllowed = true;\n                        this.validate();\n                        delete window.shippingErrorHideIsNotAllowed;\n                    }.bind(this), 200);\n                }\n            }\n        });\n    };\n});\n","Amasty_CheckoutCore/js/view/form/element/email.js":"define([\n    'jquery',\n    'uiRegistry',\n    'ko',\n    'underscore',\n    'Magento_Checkout/js/view/form/element/email',\n    'Magento_Customer/js/model/customer',\n    'Magento_Customer/js/customer-data',\n    'Magento_Checkout/js/checkout-data',\n    'Amasty_CheckoutCore/js/model/payment-validators/login-form-validator',\n    'Amasty_CheckoutCore/js/action/save-password',\n    'Amasty_CheckoutCore/js/model/payment/place-order-state',\n    'Magento_Ui/js/lib/view/utils/async'\n], function (\n    $,\n    registry,\n    ko,\n    _,\n    Component,\n    customer,\n    customerData,\n    checkoutData,\n    loginFormValidator,\n    saveAction,\n    placeOrderState\n) {\n    'use strict';\n\n    /**\n     * Setting 'Let Customers Create an Account at Checkout'\n     * Decryption of codes for this.createAcc:\n     * 0 - No\n     * 1 - After Placing an Order\n     * 2 - While Placing an Order, Optional\n     * 3 - While Placing an Order, Required\n     */\n\n    /**\n     * @return {*}\n     */\n    var getData = function () {\n        return customerData.get('checkout-data')();\n    };\n\n    return Component.extend({\n        defaults: {\n            isCreateAccountAction: ko.observable(true),\n            isPassword: ko.observable(false),\n            createAcc: +window.checkoutConfig.quoteData.additional_options.create_account,\n            passwordConfirmation: '',\n            passValidationDelay: 500,\n            loginFormSelector: 'form[data-role=\"email-with-possible-login\"]',\n            modules: {\n                dateOfBirth: 'checkout.sidebar.additional.checkboxes.date_of_birth',\n                loginCaptcha: '${ $.name }.additional-login-form-fields.captcha',\n                mspRecaptcha: '${ $.name }.msp_recaptcha',\n                recaptcha: '${ $.name }.recaptcha',\n                createAccountRecaptcha: '${ $.name }.recaptcha-customer-create'\n            },\n            listens: {\n                passwordConfirmation: 'validateAndSaveRegistration'\n            }\n        },\n        passValidationTimeout: 0,\n\n        initialize: function () {\n            this._super();\n\n            if (this.createAcc <= '1') {\n                return;\n            }\n\n            this.template = 'Amasty_CheckoutCore/form/element/email';\n            this._renderLoginForm(this._resolveInitialPasswordVisibility());\n\n            this.isLoading.subscribe(function (isLoading) {\n                if (isLoading === false) {\n                    $.when(this.isEmailCheckComplete)\n                        .done(function () {\n                            this._isNeededCreateAccountFunc(true);\n                        }.bind(this))\n                        .fail(function () {\n                            this._isNeededCreateAccountFunc(false);\n                        }.bind(this));\n                }\n            }.bind(this));\n\n            if (this.createAcc === 3 && !customer.isLoggedIn()) {\n                this.isPassword(true);\n                placeOrderState(false);\n\n                this.isLoading.subscribe(function () {\n                    $.when(this.isEmailCheckComplete).done(function () {\n                        this.isPassword(true);\n                    }.bind(this)).fail(function () {\n                        this.isPassword(false);\n                    }.bind(this)).always(function () {\n                        placeOrderState(true);\n                    });\n                }.bind(this));\n\n                this.\u0441heckEnteredEmail();\n            }\n        },\n\n        initObservable: function () {\n            this._super().observe('passwordConfirmation');\n\n            if (this.createAcc <= 1) {\n                return this;\n            }\n\n            this.validate = ko.computed(function () {\n                $.async('#customer-password', function (elem) {\n                    if (this.isPasswordVisible() && this.isCreateAccountAction() === true) {\n                        $(elem).rules('add', 'validate-customer-password');\n                    } else if ($.data(elem.form, 'validator')\n                        && $(elem).rules().hasOwnProperty('validate-customer-password')\n                    ) {\n                        $(elem).rules('remove', 'validate-customer-password');\n                    }\n                }.bind(this));\n\n                loginFormValidator.validate();\n\n                return this.isPasswordVisible() && this.isCreateAccountAction() === true;\n            }.bind(this));\n\n            return this;\n        },\n\n        /**\n         * Checks the email entered before reloading the page\n         *\n         * @returns {void}\n         */\n        \u0441heckEnteredEmail: _.once(function () {\n            if (this.email()) {\n                this.checkEmailAvailability();\n            }\n        }),\n\n        isPasswordRequired: function () {\n            this._visibleDateOfBirth();\n            this._visibleLoginCaptcha();\n            this._visibleReCaptcha();\n        },\n\n        getTooltip: function () {\n            return this.tooltip;\n        },\n\n        isPasswordSet: function (element) {\n            this.isPassword(!!element.value);\n\n            this._visibleDateOfBirth();\n            this._visibleLoginCaptcha();\n            this._visibleReCaptcha();\n        },\n\n        emailHasChanged: function () {\n            this._super();\n\n            if (this.createAcc <= 1) {\n                return;\n            }\n\n            if (!this.validateEmail()) {\n                this.isCreateAccountAction(false)\n            }\n\n            setTimeout(function () {\n                this._visibleLoginCaptcha();\n                this._visibleReCaptcha();\n            }.bind(this), this.checkDelay);\n        },\n\n        getRequiredCharacterClassesNumber: function () {\n            return parseInt(registry.get('checkoutProvider').requiredCharacterClassesNumber, 10);\n        },\n\n        getMinimumPasswordLength: function () {\n            return parseInt(registry.get('checkoutProvider').minimumPasswordLength, 10);\n        },\n\n        validateAndSaveRegistration: function () {\n            if (loginFormValidator.validate()) {\n                saveAction();\n            }\n        },\n\n        /**\n         * Override submit action\n         * on create account action - just validate and save\n         * @returns {void|UIClass}\n         */\n        login: function () {\n            if (this.createAcc >= 2\n                && this.isPasswordVisible()\n                && this.isCreateAccountAction() === true) {\n                this.validateAndSaveRegistration();\n            } else {\n                return this._super();\n            }\n        },\n\n        _isNeededCreateAccountFunc: function (state) {\n            this.isCreateAccountAction(state);\n            this.isPasswordVisible(true);\n\n            this._visibleLoginCaptcha();\n            this._visibleReCaptcha();\n        },\n\n        _renderLoginForm: function (state) {\n            if (state) {\n                this.isPasswordVisible(true);\n                this.isCreateAccountAction(false);\n            } else {\n                $.async(this.loginFormSelector, function () {\n                    if (this.validateEmail()) {\n                        this.isPasswordVisible(true);\n                        this.isCreateAccountAction(true);\n                    } else {\n                        this.isPasswordVisible(false);\n                        this.isCreateAccountAction(false);\n                    }\n                }.bind(this));\n            }\n        },\n\n        /**\n         * Resolves an initial sate of a login form.\n         *\n         * @returns {Boolean} - initial visibility state.\n         */\n        _resolveInitialPasswordVisibility: function () {\n            if (checkoutData.getInputFieldEmailValue() !== '') {\n                return checkoutData.getInputFieldEmailValue() === this._getCheckedEmailValue();\n            }\n\n            return false;\n        },\n\n        _getCheckedEmailValue: function () {\n            return getData().checkedEmailValue || '';\n        },\n\n        _visibleLoginCaptcha: function () {\n            if (this.loginCaptcha()) {\n                this.loginCaptcha().currentCaptcha.setIsVisible(\n                    (this.isPasswordVisible() && !this.isCreateAccountAction() && window.checkoutConfig.amastyOscCaptcha.isLoginCaptcha)\n                    || (this.isCreateAccountAction() && window.checkoutConfig.amastyOscCaptcha.isCreateAccountCaptcha)\n                );\n            }\n        },\n\n        _visibleReCaptcha: function () {\n            // for magento < 2.4.0\n            if (this.mspRecaptcha()) {\n                $.async({\n                    selector: '#msp-recaptcha-checkout-inline-login-wrapper'\n                }, function (loginWrapper) {\n                    $(loginWrapper).toggle(\n                        this.isReCaptchaVisible()\n                    );\n                }.bind(this));\n            }\n            //for magento >= 2.4.0\n            if (this.recaptcha()) {\n                $.async({\n                    // customer_login recaptcha\n                    selector: '#recaptcha-checkout-inline-login-wrapper'\n                }, function (loginWrapper) {\n                    $(loginWrapper).toggle(\n                        this.isPasswordVisible() && !this.isCreateAccountAction() && window.checkoutConfig.amastyOscCaptcha.isLoginReCaptcha\n                    );\n                }.bind(this));\n            }\n            if (this.createAccountRecaptcha()) {\n                $.async({\n                    // customer_create recaptcha\n                    selector: '#recaptcha-checkout-inline-create-wrapper'\n                }, function (loginWrapper) {\n                    $(loginWrapper).toggle(\n                        this.isCreateAccountAction() && window.checkoutConfig.amastyOscCaptcha.isCreateAccountReCaptcha\n                    );\n                }.bind(this));\n            }\n        },\n\n        isReCaptchaVisible: function() {\n            return (this.isPasswordVisible() && !this.isCreateAccountAction() && window.checkoutConfig.amastyOscCaptcha.isLoginReCaptcha)\n                || (this.isCreateAccountAction() && window.checkoutConfig.amastyOscCaptcha.isCreateAccountReCaptcha);\n        },\n\n        _visibleDateOfBirth: function () {\n            if (this.dateOfBirth()) {\n                this.dateOfBirth().visible(this.isPassword() && this.isCreateAccountAction());\n            }\n        }\n    });\n});\n","Amasty_CheckoutCore/js/view/form/element/tooltip.js":"/**\n * Custom tooltip initializer\n */\ndefine([\n    'jquery',\n    'uiElement',\n    'Amasty_CheckoutCore/vendor/tooltipster/js/tooltipster.min'\n], function (\n    $,\n    Element\n) {\n    'use strict';\n\n    return Element.extend({\n        defaults: {\n            selectors: {\n                tooltipElement: '[data-amcheckout-js=\"tooltip\"]'\n            },\n            keycodes: {\n                escape: 27\n            }\n        },\n\n        initialize: function () {\n            this._super();\n\n            this.initTooltip();\n\n            return this;\n        },\n\n        initTooltip: function () {\n            $.async(this.selectors.tooltipElement, function (element) {\n                $(element).tooltipster({\n                    position: 'right',\n                    contentAsHtml: true,\n                    interactive: true,\n                    trigger: 'click',\n                    theme: 'amcheckout-default-tooltip'\n                });\n\n                $(element).focus(function() {\n                    $(this).tooltipster('open');\n                });\n\n                $(element).blur(function() {\n                    $(this).tooltipster('close');\n                });\n\n                $(element).keydown(function(event) {\n                    (event.keyCode === this.keycodes.escape) && $(this).tooltipster('close');\n                });\n            });\n        },\n\n        isTouchDevice: function () {\n            return ('ontouchstart' in window)\n                || (navigator.maxTouchPoints > 0)\n                || (navigator.msMaxTouchPoints > 0);\n        }\n    });\n});\n","Amasty_CheckoutCore/js/view/shipping-address/list-mixin.js":"/**\n * Change shipping address list view.\n */\ndefine([\n    'ko',\n    'underscore',\n    'Amasty_CheckoutCore/js/model/address-form-state',\n    'Amasty_CheckoutCore/js/model/shipping-registry',\n    'Magento_Customer/js/model/address-list',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Checkout/js/model/shipping-address/form-popup-state',\n    'Magento_Checkout/js/action/select-shipping-address',\n    'Magento_Checkout/js/checkout-data',\n    'mage/translate',\n    'jquery'\n], function (\n    ko,\n    _,\n    addressFormState,\n    shippingRegistry,\n    addressList,\n    quote,\n    formPopUpState,\n    selectShippingAddress,\n    checkoutData,\n    $t\n) {\n    'use strict';\n\n    var newAddressOption = {\n        /**\n         * Get new address label\n         * @returns {String}\n         */\n        getAddressInline: function () {\n            return $t('New Address');\n        },\n        customerAddressId: null\n    };\n\n    function isAddressNew(address) {\n        return address && (address === newAddressOption || address.getType() === 'new-customer-address');\n    }\n\n    return function (Component) {\n        return Component.extend({\n            defaults: {\n                dropdownTemplate: 'Amasty_CheckoutCore/shipping-address/shipping-address',\n                modules: {\n                    shippingInformationComponent: 'index = ship-to',\n                    shippingAddressComponent: '${ $.parentName }'\n                }\n            },\n\n            initialize: function () {\n                _.bindAll(\n                    this,\n                    'addressOptionsText',\n                    'changeAddress',\n                    'onAddressChange',\n                    'updateAddress',\n                    'cancelAddressEdit'\n                );\n\n                this._super();\n\n                if (this.getVisible()) {\n                    window.isShippingAddressFormOverridden(true);\n                    this.shippingAddressComponent(this.overrideNewShippingAddress);\n                    shippingRegistry.excludedCollectionNames.push('shipping-address-fieldset');\n                }\n\n                return this;\n            },\n\n            initObservable: function () {\n                this._super()\n                    .observe({\n                        /**\n                         * Current dropdown value\n                         */\n                        selectedAddress: quote.shippingAddress(),\n\n                        /**\n                         * On true shows current shipping address information as plain text\n                         */\n                        isAddressDetailsVisible: quote.shippingAddress() != null,\n\n                        /**\n                         * On true shows new address form if isAddressListVisible is also true\n                         */\n                        isAddressFormVisible: false,\n\n                        /**\n                         * On true shows dropdown and new address form\n                         */\n                        isAddressListVisible: !quote.shippingAddress(),\n                    });\n\n                this.initSubscribers();\n\n                return this;\n            },\n\n            /**\n             * Set subscribers to observables\n             */\n            initSubscribers: function () {\n                if (this.getVisible()) {\n                    quote.shippingAddress.subscribe(this.onShippingAddressUpdate, this);\n                    this.selectedAddress.subscribe(this.onAddressChange, this);\n                    this.isAddressFormVisible.subscribe(this.updatePopupState, this);\n                    this.isAddressListVisible.subscribe(this.isShippingFormVisibleUpdate, this);\n                }\n            },\n\n            /**\n             * Modify new shipping address for registered customer functionality.\n             *  Old behavior - popup; new - inline form\n             *\n             * @param {object} shippingComponent\n             */\n            overrideNewShippingAddress: function (shippingComponent) {\n                //override popup functionality\n                shippingComponent.getPopUp = shippingComponent.getPopUpOverride;\n            },\n\n            /**\n             * Override for better compatibility.\n             * Magento_NegotiableQuote compatibility.\n             *\n             * @return {string}\n             */\n            getTemplate: function () {\n                this._super();\n\n                return this.dropdownTemplate;\n            },\n\n            /**\n             * Override to prevent not used functionality render (performance save)\n             */\n            initChildren: function () {\n                return this;\n            },\n\n            /**\n             * Override to prevent not used functionality render (performance save).\n             * This list uses ship-to component instead origin\n             */\n            createRendererComponent: function () {},\n\n            /**\n             * Visible by default is usual variable,\n             * but it can be changed to observable or computed by vendors (amazon)\n             *\n             * @return {boolean}\n             */\n            getVisible: function () {\n                return ko.utils.unwrapObservable(this.visible);\n            },\n\n            /**\n             * Subscriber\n             * updates new shipping address core state\n             * required to suppress address update before save\n             */\n            updatePopupState: function () {\n                if (this.getVisible()) {\n                    formPopUpState.isVisible(this.isAddressListVisible() && this.isAddressFormVisible());\n                }\n            },\n\n            /**\n             * Shipping address subscriber\n             * Close form on shipping address change\n             *\n             * @param {object} newAddress\n             */\n            onShippingAddressUpdate: function (newAddress) {\n                if (newAddress != null) {\n                    this.isAddressDetailsVisible(true);\n                    this.isAddressListVisible(false);\n                }\n            },\n\n            /**\n             * New Address form visibility subscriber\n             */\n            isShippingFormVisibleUpdate: function () {\n                this.updatePopupState();\n\n                if (this.getVisible()) {\n                    addressFormState.isShippingFormVisible(\n                        this.isAddressListVisible()\n                    );\n                }\n            },\n\n            /*\n             * html Select binding methods\n             */\n\n            /**\n             * Options array\n             */\n            addressOptions: ko.pureComputed(function () {\n                var addressOptions = _.clone(addressList()),\n                    newAddressAdded;\n\n                _.find(addressOptions, function (address) {\n                    if (isAddressNew(address)) {\n                        newAddressAdded = true;\n\n                        return true;//break\n                    }\n                });\n\n                if (!newAddressAdded) {\n                    addressOptions.push(newAddressOption);\n                }\n\n                return addressOptions;\n            }),\n\n            /**\n             * For html option text binding\n             *\n             * @param {Object} address\n             * @return {string}\n             */\n            addressOptionsText: function (address) {\n                if (address.getAddressInline) {\n                    return address.getAddressInline();\n                }\n\n                if (isAddressNew(address)) {\n                    return $t('New Address');\n                }\n\n                return this.getCaptionByAddressType(address);\n            },\n\n            /**\n             * @param {Object} address\n             * @returns {*}\n             */\n            getCaptionByAddressType: function (address) {\n                switch (address.getType()) {\n                    case 'gift-registry':\n                        return $t('Recipient Address');\n                    default:\n                        return address.getKey();\n                }\n            },\n\n            /**\n             * Update address action\n             */\n            updateAddress: function () {\n                var canCloseForm = false;\n\n                if (this.selectedAddress() != null) {\n                    if (this.isAddressFormVisible()) {\n                        this.shippingAddressComponent().saveNewAddress();\n                    } else {\n                        selectShippingAddress(this.selectedAddress());\n                        checkoutData.setSelectedShippingAddress(this.selectedAddress().getKey());\n                        canCloseForm = true;\n                    }\n                }\n\n                if (this.shippingAddressComponent().source.get('params.invalid') !== true || canCloseForm === true) {\n                    this.cancelAddressEdit();\n                }\n            },\n\n            /**\n             * Update dropdown selected value. Should same as current shipping address.\n             */\n            updateDropdownAddress: function () {\n                var shippingAddress = quote.shippingAddress(),\n                    list = addressList(),\n                    addressIndex,\n                    selectedAddress;\n\n                selectedAddress = _.find(list, function (address) {\n                    return address === shippingAddress;\n                });\n\n                if (!selectedAddress && isAddressNew(shippingAddress)) {\n                    //Resolve when shipping address and selectedAddress different objects with same value.\n                    addressIndex = _.findIndex(list, function (address) {\n                        return isAddressNew(address);\n                    });\n\n                    if (addressIndex !== -1) {\n                        list[addressIndex] = shippingAddress;\n                        addressList(list);\n                    }\n                }\n\n                this.selectedAddress(shippingAddress);\n            },\n\n            /**\n             * Show address dropdown\n             */\n            changeAddress: function () {\n                this.updateDropdownAddress();\n                this.isAddressListVisible(true);\n                this.isAddressDetailsVisible(false);\n            },\n\n            /**\n             * Cancel address edit action.\n             */\n            cancelAddressEdit: function () {\n                this.updateDropdownAddress();\n                this.isAddressDetailsVisible(true);\n                this.isAddressListVisible(false);\n            },\n\n            /**\n             * On dropdown value change\n             *\n             * @param {Object} address\n             */\n            onAddressChange: function (address) {\n                this.isAddressFormVisible(isAddressNew(address));\n            }\n        });\n    };\n});\n","Amasty_CheckoutCore/js/view/shipping-address/address-renderer/default-mixin.js":"define([\n    'underscore',\n    'uiRegistry'\n], function (_) {\n    'use strict';\n\n    return function (targetModule) {\n        return targetModule.extend({\n            getCustomAttributeLabel: function (attribute) {\n                if (_.isObject(attribute)\n                    && _.isString(attribute.attribute_code)\n                    && attribute.attribute_code.indexOf('custom_field_') !== -1\n                ) {\n                    return this._super(attribute.value);\n                }\n\n                return this._super();\n            }\n        });\n    };\n});\n","Amasty_CheckoutCore/js/view/checkout/datepicker.js":"define([\n    'moment',\n    'ko',\n    'underscore',\n    'jquery',\n    'mage/translate',\n    'mage/calendar'\n], function (moment, ko, _, $, $t) {\n    'use strict';\n\n    var defaults = {\n        showsTime: false,\n        timeFormat: null,\n        buttonImage: null,\n        buttonImageOnly: null,\n        buttonText: $t('Select Date')\n    };\n\n    ko.bindingHandlers.amastydatepicker = {\n\n        init: function (el, valueAccessor) {\n\n            var config = valueAccessor(),\n                observable,\n                options = {};\n\n            _.extend(options, defaults);\n\n            if (typeof config === 'object') {\n                observable = config.storage;\n\n                _.extend(options, config.options);\n            } else {\n                observable = config;\n            }\n\n            var date = moment(observable(), config.elem.pickerDateTimeFormat);\n\n            $(el).calendar(options);\n            observable() && $(el).datepicker('setDate', date.format(config.elem.pickerDateTimeFormat));\n            $(el).blur();\n\n            ko.utils.registerEventHandler(el, 'change', function () {\n                observable(this.value);\n            });\n        }\n    };\n});\n","Amasty_CheckoutCore/js/view/checkout/design/collapsible-steps.js":"define([\n    'jquery',\n    'mage/collapsible',\n    'Magento_Ui/js/modal/modal'\n], function ($) {\n    'use strict';\n\n    $.widget('amasty.checkoutCollapsibleSteps', $.mage.collapsible, {\n        _create: function () {\n            this.createCollapsible();\n            this.trigger = this.element.find(this.options.header);\n        },\n\n        initCollapsible: function () {\n            $(this.element).parent().collapsible({\n                header: '[data-amcheckout-js=\"step-title\"]',\n                content: $(this.element).parent().find('[data-amcheckout-js=\"step-content\"]'),\n                active: true,\n                openedState: '-collapsible -opened',\n                closedState: '-collapsible -closed',\n                icons: {\n                    header: 'amcheckout-icon -plus',\n                    activeHeader: 'amcheckout-icon -minus'\n                },\n                animate: 300\n            });\n        },\n\n        createCollapsible: function () {\n            var checkoutWindow = window;\n\n            if (!$(this.element).parent().data('mageCollapsible')\n                && checkoutWindow.checkoutDesign == 'modern'\n                && (checkoutWindow.checkoutLayout == '1column' || checkoutWindow.checkoutLayout == '2columns')) {\n                this.initCollapsible();\n            }\n        },\n\n        destroyCollapsible: function () {\n            var collapsibleElement = $(this.element).parent();\n\n            if (collapsibleElement.data('mageCollapsible')) {\n                collapsibleElement.collapsible(\"forceActivate\").collapsible(\"destroy\");\n            }\n        }\n    });\n\n    return $.amasty.checkoutCollapsibleSteps;\n});\n","Amasty_CheckoutCore/js/view/checkout/summary/cart-items.js":"/**\n * Checkout cart items view.\n */\ndefine([\n    'ko',\n    'Magento_Checkout/js/model/totals',\n    'Magento_Checkout/js/view/summary/cart-items'\n], function (ko, totals, Component) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Amasty_CheckoutCore/checkout/summary/cart-items'\n        },\n\n        itemsQty: ko.observable(),\n\n        initialize: function () {\n            this._super();\n\n            this.itemsQty(this.getItemsQty());\n            totals.totals.subscribe(function () {\n                this.itemsQty(this.getItemsQty());\n            }, this);\n\n            return this;\n        },\n\n        getItemsQty: function () {\n            return parseFloat(totals.totals().items_qty);\n        }\n    });\n});\n","Amasty_CheckoutCore/js/view/checkout/summary/item/details.js":"define(\n    [\n        'jquery',\n        'Magento_Checkout/js/view/summary/item/details',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Ui/js/modal/confirm',\n        'Amasty_CheckoutCore/js/action/remove-item',\n        'Amasty_CheckoutCore/js/action/update-item',\n        'mage/translate',\n        'ko',\n        'Amasty_CheckoutCore/js/options/configurable',\n        'priceOptions',\n        'mage/validation'\n    ],\n    function ($, Component, quote, confirm, removeItemAction, updateItemAction, $t, ko, configurable, priceOptions) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'Amasty_CheckoutCore/checkout/summary/item/details',\n                messages: {\n                    deleteItem: $t('Are you sure you would like to remove this item from the shopping cart?')\n                }\n            },\n\n            /**\n             * @param {Object} item\n             * @return {*}\n             */\n            getItemConfig: function (item) {\n                return this.getPropertyDataFromItem(item, 'amcheckout');\n            },\n\n            /**\n             *\n             * @param {Object} item\n             * @param {Object} propertyName\n             * @return {*}\n             */\n            getPropertyDataFromItem: function (item, propertyName) {\n                var property,\n                    itemDetails,\n                    quoteItem;\n\n                if (item.hasOwnProperty(propertyName)) {\n                    property = item[propertyName];\n                }\n\n                quoteItem = this.getItemFromQuote(item);\n\n                if (quoteItem.hasOwnProperty(propertyName)) {\n                    property = quoteItem[propertyName];\n                }\n\n                if (property) {\n                    this.storage().set('item_details' + item.item_id + propertyName, property);\n\n                    return property;\n                }\n\n                itemDetails = this.storage().get('item_details' + item.item_id + propertyName);\n\n                return itemDetails || false;\n            },\n\n            /**\n             *\n             * @param {Object} item\n             * @return {*}\n             */\n            getItemFromQuote: function (item) {\n                var items = quote.getItems(),\n                    quoteItems = items.filter(function (quoteItem) {\n                        return +quoteItem.item_id === item.item_id;\n                    });\n\n                if (quoteItems.length === 0) {\n                    return false;\n                }\n\n                return quoteItems[0];\n            },\n\n            getConfigurableOptions: function (item) {\n                var itemConfig = this.getItemConfig(item);\n\n                if (itemConfig.hasOwnProperty('configurableAttributes')) {\n                    return itemConfig.configurableAttributes.template;\n                }\n\n                return '';\n            },\n\n            getCustomOptions: function (item, element) {\n                var itemConfig = this.getItemConfig(item),\n                    template = '';\n\n                if (itemConfig.hasOwnProperty('customOptions')) {\n                    template = itemConfig.customOptions.template;\n                }\n\n                $(element).html(template).trigger('contentUpdated');\n            },\n\n            optionsAfterRender: function (item, element) {\n                $(element).one('beforeOpen', this.initOnOpen.bind(this, item));\n            },\n\n            initOnOpen: function (item) {\n                const itemConfig = this.getItemConfig(item);\n\n                if (itemConfig.hasOwnProperty('configurableAttributes')) {\n                    this.preSelectOptions(itemConfig, item);\n                }\n            },\n\n            preSelectOptions: function (itemConfig, item) {\n                const container = item.form;\n\n                container.amcheckoutConfigurable({\n                    spConfig: JSON.parse(itemConfig.configurableAttributes.spConfig),\n                    superSelector: '[data-role=\"product-attributes\"][data-item-id=' + item.item_id + ']' + ' .super-attribute-select'\n                });\n\n                item.preSelect = true;\n            },\n\n            isDecimal: function (item) {\n                var quoteItem = this.getItemFromQuote(item);\n\n                return quoteItem.is_qty_decimal;\n            },\n\n            isEditingAvailable: function (item) {\n                return this.isEditable(item) && !this.isNegotiableQuote();\n            },\n\n            isEditingLocked: function (item) {\n                return this.isEditable(item) && this.isNegotiableQuote();\n            },\n\n            isEditable: function (item) {\n                var itemConfig = this.getItemConfig(item);\n\n                return itemConfig.isEditable;\n            },\n\n            isNegotiableQuote: function () {\n                return window.checkoutConfig.isNegotiableQuote && this.backQuoteUrl();\n            },\n\n            backQuoteUrl: function () {\n                return window.checkoutConfig.backQuoteUrl;\n            },\n\n            initOptions: function (item) {\n                const itemConfig = this.getItemConfig(item),\n                    containerSelector = '[data-role=\"product-attributes\"][data-item-id=' + item.item_id + ']',\n                    container = $(containerSelector);\n\n                if (itemConfig.hasOwnProperty('customOptions')) {\n                    container.priceOptions({\n                        optionConfig: JSON.parse(itemConfig.customOptions.optionConfig)\n                    });\n                }\n\n                item.form = container;\n                item.isUpdated = ko.observable(false);\n                item.validation = container.validation();\n\n                container.find('input, select, textarea').change(function () {\n                    item.isUpdated(true);\n                });\n            },\n\n            updateItem: function (item) {\n                if (item.validation.valid()) {\n                    const itemConfig = this.getItemConfig(item);\n\n                    if (itemConfig.hasOwnProperty('configurableAttributes') && !item.preSelect) {\n                        this.preSelectOptions(itemConfig, item);\n                    }\n\n                    updateItemAction(item.item_id, item.form.serialize());\n                }\n            },\n\n            /**\n             * Automatically updates the order form if it`s changed\n             *\n             * @param {Object} item\n             * @return {*}\n             */\n            updateItemAuto: function (item) {\n                const itemConfig = this.getItemConfig(item);\n                let isNotEmpty = true,\n                    options;\n\n                if (!Object.prototype.hasOwnProperty.call(item, 'form')) {\n                    return;\n                }\n\n                if (itemConfig.hasOwnProperty('configurableAttributes') && !item.preSelect) {\n                    this.preSelectOptions(itemConfig, item);\n                }\n\n                options = item.form.serializeArray();\n                $.each(options, function () {\n                    if (this.value === '') {\n                        isNotEmpty = false;\n                    }\n                });\n\n                if (isNotEmpty) {\n                    item.validation.valid();\n                    updateItemAction(item.item_id, item.form.serialize());\n                }\n            },\n\n            deleteItem: function (item) {\n                confirm({\n                    content: this.messages.deleteItem,\n                    actions: {\n                        confirm: function () {\n                            removeItemAction(item.item_id);\n                        },\n                        always: function (event) {\n                            event.stopImmediatePropagation();\n                        }\n                    }\n                });\n            },\n\n            canShowDeleteButton: function () {\n                return this.isCheckoutItemsEditable() && quote.getItems().length >= 1 && !this.isNegotiableQuote();\n            },\n\n            isCheckoutItemsEditable: function () {\n                return window.checkoutConfig.isCheckoutItemsEditable;\n            }\n        });\n    }\n);\n","Amasty_CheckoutCore/js/view/checkout/summary/item/price/unit_incl_tax.js":"define([\n    'Magento_Weee/js/view/checkout/summary/item/price/row_incl_tax'\n], function (Component) {\n    'use strict';\n\n    return Component.extend({\n        /**\n         * @param {Object} item\n         * @return {Number}\n         */\n        getUnitPriceInclTax: function (item) {\n            var unitPriceInclTax = parseFloat(item['price_incl_tax']);\n\n            if (window.checkoutConfig.getIncludeWeeeFlag) {\n                unitPriceInclTax += this.getUnitWeeeTaxInclTax(item);\n            }\n\n            return unitPriceInclTax;\n        },\n\n        /**\n         * @param {Object}item\n         * @return {Number}\n         */\n        getUnitWeeeTaxInclTax: function (item) {\n            var totalWeeeTaxInclTaxApplied = 0,\n                weeeTaxAppliedAmounts;\n\n            if (item['weee_tax_applied']) {\n                weeeTaxAppliedAmounts = JSON.parse(item['weee_tax_applied']);\n                weeeTaxAppliedAmounts.forEach(function (weeeTaxAppliedAmount) {\n                    totalWeeeTaxInclTaxApplied += parseFloat(Math.max(weeeTaxAppliedAmount['amount_incl_tax'], 0));\n                });\n            }\n\n            return totalWeeeTaxInclTaxApplied;\n        }\n    });\n});\n","Amasty_CheckoutCore/js/view/checkout/summary/item/price/unit_excl_tax.js":"/* eslint-disable dot-notation */\ndefine([\n    'Magento_Weee/js/view/checkout/summary/item/price/row_excl_tax'\n], function (Component) {\n    'use strict';\n\n    return Component.extend({\n        /**\n         * @param {Object} item\n         * @return {Number}\n         */\n        getUnitPriceExclTax: function (item) {\n            var unitPriceExclTax = parseFloat(item['row_total']) / parseFloat(item['qty']);\n\n            if (window.checkoutConfig.getIncludeWeeeFlag) {\n                unitPriceExclTax += this.getUnitWeeeTaxExclTax(item);\n            }\n\n            return unitPriceExclTax;\n        },\n\n        /**\n         * @param {Object} item\n         * @return {Number}\n         */\n        getUnitWeeeTaxExclTax: function (item) {\n            var totalWeeeTaxExclTaxApplied = 0,\n                weeeTaxAppliedAmounts;\n\n            if (item['weee_tax_applied']) {\n                weeeTaxAppliedAmounts = JSON.parse(item['weee_tax_applied']);\n                weeeTaxAppliedAmounts.forEach(function (weeeTaxAppliedAmount) {\n                    totalWeeeTaxExclTaxApplied += parseFloat(Math.max(weeeTaxAppliedAmount.amount, 0));\n                });\n            }\n\n            return totalWeeeTaxExclTaxApplied;\n        }\n    });\n});\n","Amasty_CheckoutCore/js/options/configurable.js":"/*jshint browser:true jquery:true*/\ndefine([\n    'jquery',\n    'Magento_ConfigurableProduct/js/configurable',\n    'Magento_Ui/js/modal/modal'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.amcheckoutConfigurable', $.mage.configurable, {\n        options: {\n            selectorProduct: '.product'\n        },\n\n        /**\n          * Initialize tax configuration, initial settings, and options values.\n          * https://github.com/magento/magento2/issues/14211\n          * @private\n          */\n        _initializeOptions: function () {\n            const element = $(this.options.selectorProductPrice ?? this.options.priceHolderSelector);\n\n            if (!element.data('magePriceBox')) {\n                element.priceBox();\n            }\n\n            return this._super();\n        },\n\n        /**\n         * Initialize tax configuration, initial settings, and options values.\n         * https://github.com/magento/magento2/issues/14211\n         * @private\n         */\n        _calculatePrice: function (config) {\n            var element = $(this.options.priceHolderSelector);\n\n            if (!element.data('magePriceBox')) {\n                element.priceBox();\n            }\n\n            return this._super(config);\n        },\n\n        configureElement: function (element) {\n            return this._configureElement(element);\n        },\n\n        _getAttributeId: function (element) {\n            return +$(element).data('attribute-id');\n        },\n\n        _fillState: function () {\n            $.each(this.options.settings, $.proxy(function (index, element) {\n                var attributeId = this._getAttributeId(element);\n\n                if (attributeId && this.options.spConfig.attributes[attributeId]) {\n                    element.config = this.options.spConfig.attributes[attributeId];\n                    element.attributeId = attributeId;\n                    this.options.state[attributeId] = false;\n                }\n            }, this));\n        },\n\n        _fillSelect: function (element) {\n            var attributeId = this._getAttributeId(element),\n                options = this._getAttributeOptions(attributeId),\n                prevConfig,\n                index = 1,\n                allowedProducts,\n                i,\n                j;\n\n            this._clearSelect(element);\n            element.options[0] = new Option('', '');\n            element.options[0].innerHTML = this.options.spConfig.chooseText;\n            prevConfig = false;\n\n            if (element.prevSetting) {\n                prevConfig = element.prevSetting.options[element.prevSetting.selectedIndex];\n            }\n\n            if (options) {\n                for (i = 0; i < options.length; i++) {\n                    allowedProducts = [];\n\n                    if (prevConfig) {\n                        for (j = 0; j < options[i].products.length; j++) {\n                            // prevConfig.config can be undefined\n                            if (prevConfig.config &&\n                                prevConfig.config.allowedProducts &&\n                                prevConfig.config.allowedProducts.indexOf(options[i].products[j]) > -1) {\n                                allowedProducts.push(options[i].products[j]);\n                            }\n                        }\n                    } else {\n                        allowedProducts = options[i].products.slice(0);\n                    }\n\n                    if (allowedProducts.length > 0) {\n                        options[i].allowedProducts = allowedProducts;\n                        element.options[index] = new Option(this._getOptionLabel(options[i]), options[i].id);\n\n                        if (typeof options[i].price !== 'undefined') {\n                            element.options[index].setAttribute('price', options[i].prices);\n                        }\n\n                        element.options[index].config = options[i];\n                        index++;\n                    }\n                }\n            }\n        }\n    });\n\n    return $.mage.amcheckoutConfigurable;\n});\n","Amasty_CheckoutCore/js/model/customer-email-validator-mixin.js":"/**\n * Add functionality to hide validation errors (\"silent\" validation).\n */\ndefine([\n    'jquery',\n    'mage/utils/wrapper',\n    'Magento_Customer/js/model/customer'\n], function ($, wrapper, customer) {\n    'use strict';\n\n    return function (target) {\n        target.validate = wrapper.wrapSuper(target.validate, function (hideError) {\n            let result = this._super();\n\n            if (!result && (hideError || window.silentShippingValidation) && !customer.isLoggedIn()) {\n                $('form[data-role=email-with-possible-login]').validation('clearError');\n            }\n\n            return result;\n        });\n\n        return target;\n    };\n});\n","Amasty_CheckoutCore/js/model/shipping-rates-validator-mixin.js":"/*global define*/\ndefine(\n    [\n        'jquery',\n        'mage/utils/wrapper',\n        'Magento_Checkout/js/model/shipping-service'\n    ],\n    function (\n        $,\n        wrapper,\n        shippingService\n    ) {\n        'use strict';\n        return function (target) {\n            var mixin = {\n                validateAddressDataState: true,\n\n                /**\n                 * @return {*}\n                 */\n                postcodeValidation: function (original) {\n                    original();\n\n                    return true;\n                },\n\n                /**\n                 * Fix validation for billing address\n                 *\n                 * @param {Function} original\n                 * @param {Object} element\n                 * @param {Number} delay\n                 */\n                bindHandler: function (original, element, delay) {\n                    if (element.component.indexOf('/group') !== -1\n                        || (element.name.indexOf('billing') === -1 && element.dataScope.indexOf('billing') === -1)\n                    ) {\n                        return original(element, delay);\n                    }\n\n                    if (element.index === 'postcode') {\n                        var self = this;\n\n                        delay = typeof delay === 'undefined' ? 1000 : delay;\n\n                        element.on('value', function () {\n                            clearTimeout(self.validateZipCodeTimeout);\n                            self.validateZipCodeTimeout = setTimeout(function () {\n                                self.postcodeValidation(element);\n                            }, delay);\n                        });\n                    }\n                },\n\n                /**\n                 * Save Validation State\n                 *\n                 * @param {Function} original\n                 * @param {Object} address\n                 * @return {Boolean}\n                 */\n                validateAddressData: function (original, address) {\n                    this.validateAddressDataState = original(address);\n\n                    return this.validateAddressDataState;\n                },\n\n                /**\n                 * Hide Loader with disabled fields (ex. Country) - compatibility with 2.4.7\n                 *\n                 * @param {Function} original\n                 * @returns {void}\n                 */\n                validateFields: function (original) {\n                    original();\n\n                    if (!this.validateAddressDataState) {\n                        shippingService.isLoading(false);\n                    }\n                }\n            };\n\n            wrapper._extend(target, mixin);\n            return target;\n        };\n    }\n);\n","Amasty_CheckoutCore/js/model/events.js":"define([\n    'underscore',\n    'uiEvents'\n], function (_, uiEvents) {\n    'use strict';\n\n    // events to use\n    const eventBeforeShippingSave = 'before_shipping_save',\n        eventAfterShippingSave = 'after_shipping_save';\n\n    /**\n     * object undependable event manager\n     */\n    return _.extend(uiEvents, {\n        onBeforeShippingSave: function (callback) {\n            this.on(eventBeforeShippingSave, callback);\n        },\n        onAfterShippingSave: function (callback) {\n            this.on(eventAfterShippingSave, callback);\n        }\n    });\n});\n","Amasty_CheckoutCore/js/model/checkout-data-resolver-mixin.js":"define(\n    [\n        'jquery',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/checkout-data',\n        'Magento_Checkout/js/action/select-shipping-method',\n        'Magento_Checkout/js/model/address-converter',\n        'Magento_Customer/js/model/address-list',\n        'Magento_Checkout/js/model/payment-service',\n        'Magento_Checkout/js/action/select-payment-method',\n        'Magento_Checkout/js/action/select-shipping-address',\n        'Amasty_CheckoutCore/js/model/payment/vault-payment-resolver',\n        'uiRegistry',\n        'underscore',\n        'mage/utils/wrapper'\n    ],\n    function (\n        $,\n        quote,\n        checkoutData,\n        selectShippingMethodAction,\n        addressConverter,\n        addressList,\n        paymentService,\n        selectPaymentMethodAction,\n        selectShippingAddress,\n        vaultResolver,\n        registry,\n        _,\n        wrapper\n    ) {\n        'use strict';\n\n        var defaultShippingMethod = null;\n\n        /**\n         * Get default shipping method.\n         * Store default shipping method to speedup check.\n         *\n         * @return {String|false}\n         * @private\n         */\n        function _getDefaultShippingMethod () {\n            var provider, defaultMethod;\n\n            if (defaultShippingMethod === null) {\n                provider = registry.get('checkoutProvider');\n                defaultMethod = checkoutConfig.selectedShippingMethod;\n\n                if (provider && provider.defaultShippingMethod) {\n                    defaultShippingMethod = provider.defaultShippingMethod;\n                } else {\n\n                    if (defaultMethod !== null){\n                        defaultShippingMethod = defaultMethod.carrier_code + '_' + defaultMethod.method_code;\n\n                        return defaultShippingMethod;\n                    }\n\n                    defaultShippingMethod = false;\n                }\n            }\n\n            return defaultShippingMethod;\n        }\n\n        return function (target) {\n            var mixin = {\n                /**\n                 * @param {Function} original\n                 * @param {Object} ratesData\n                 */\n                resolveShippingRates: function (original, ratesData) {\n                    if (!ratesData || ratesData.length === 0) {\n                        selectShippingMethodAction(null);\n\n                        return;\n                    }\n\n                    if (ratesData.length === 1) {\n\n                        if (ratesData[0].error_message) {\n                            selectShippingMethodAction(null);\n\n                            return;\n                        }\n\n                        //set shipping rate if we have only one available shipping rate\n                        selectShippingMethodAction(ratesData[0]);\n\n                        return;\n                    }\n                    var selectedShippingRate = checkoutData.getSelectedShippingRate(),\n                        availableRate = false;\n\n                    if (quote.shippingMethod()) {\n                        availableRate = _.find(ratesData, function (rate) {\n                            return rate['carrier_code'] == quote.shippingMethod()['carrier_code'] && //eslint-disable-line\n                                rate['method_code'] == quote.shippingMethod()['method_code']; //eslint-disable-line eqeqeq\n                        });\n                    }\n\n                    if (!availableRate && selectedShippingRate) {\n                        availableRate = _.find(ratesData, function (rate) {\n                            return rate['carrier_code'] + '_' + rate['method_code'] === selectedShippingRate;\n                        });\n                    }\n\n                    if (!availableRate && window.checkoutConfig.selectedShippingMethod) {\n                        availableRate = _.find(ratesData, function (rate) {\n                            return rate['carrier_code'] + '_' + rate['method_code'] === window.checkoutConfig.selectedShippingMethod;\n                        });\n                    }\n\n                    if (!availableRate && _getDefaultShippingMethod()) {\n                        availableRate = _.find(ratesData, function (rate) {\n                            return rate['carrier_code'] + '_' + rate['method_code'] === _getDefaultShippingMethod();\n                        });\n                        if (!availableRate) {\n                            availableRate = _.find(ratesData, function (rate) {\n                                return !!rate.available;\n                            });\n                        }\n                    }\n\n                    if (availableRate) {\n                        selectShippingMethodAction(availableRate);\n                    } else {\n                        selectShippingMethodAction(null);\n                    }\n                },\n\n                /**\n                 * Resolve payment method. Used local storage\n                 * @param {Function} original\n                 */\n                resolvePaymentMethod: function (original) {\n                    original();\n                    if (quote.paymentMethod()) {\n                        return;\n                    }\n                    var paymentMethod = checkoutData.getSelectedPaymentMethod();\n                    if (vaultResolver.isSavedVaultPayment(paymentMethod) && vaultResolver.resolve(paymentMethod)) {\n                        return;\n                    }\n                    var provider = registry.get('checkoutProvider');\n                    if (provider && provider.defaultPaymentMethod) {\n                        var availablePaymentMethods = paymentService.getAvailablePaymentMethods();\n                        availablePaymentMethods.some(function (payment) {\n                            if (payment.method === provider.defaultPaymentMethod) {\n                                selectPaymentMethodAction(payment);\n                                return true;\n                            }\n                        });\n                    }\n                },\n\n                /**\n                 * Resolve estimation address. Used local storage\n                 * @param {Function} original\n                 */\n                resolveEstimationAddress: function (original) {\n                    original();\n                    var shippingAddressData = checkoutData.getShippingAddressFromData(),\n                        checkoutProvider = registry.get('checkoutProvider');\n\n                    if (shippingAddressData) {\n                        checkoutProvider.set(\n                            'shippingAddress',\n                            $.extend(true, {}, checkoutProvider.get('shippingAddress'), shippingAddressData)\n                        );\n                    }\n                },\n\n                /**\n                 * Apply resolved estimated address to quote\n                 *\n                 * @param {Function} original\n                 * @param {Object} isEstimatedAddress\n                 */\n                applyShippingAddress: function (original, isEstimatedAddress) {\n                    var addressData = addressList()[0];\n\n                    original();\n\n                    if (quote.shippingAddress()) {\n                        return;\n                    }\n\n                    if (isEstimatedAddress) {\n                        addressData = addressConverter.addressToEstimationAddress(addressData);\n                    }\n\n                    if (addressList().length > 1) {\n                        selectShippingAddress(addressData);\n                    }\n                }\n            };\n\n            wrapper._extend(target, mixin);\n            return target;\n        };\n    }\n);\n","Amasty_CheckoutCore/js/model/resource-url-manager.js":"/*jshint browser:true jquery:true*/\n/*global alert*/\ndefine(\n    [\n        'Magento_Customer/js/model/customer',\n        'Magento_Checkout/js/model/url-builder',\n        'Magento_Checkout/js/model/resource-url-manager',\n        'mageUtils'\n    ],\n    function (customer, urlBuilder, resourceUrlManager, utils) {\n        \"use strict\";\n        return {\n            getUrlForDelivery: function (quote) {\n                var params = (this.getCheckoutMethod() == 'guest') ? {cartId: quote.getQuoteId()} : {};\n                var urls = {\n                    'guest': '/amasty_checkout/guest-carts/:cartId/delivery',\n                    'customer': '/amasty_checkout/carts/mine/delivery'\n                };\n\n                return this.getUrl(urls, params);\n            },\n\n            getUrlForRemoveItem: function (quote) {\n                var params = (this.getCheckoutMethod() == 'guest') ? {cartId: quote.getQuoteId()} : {};\n                var urls = {\n                    'guest': '/amasty_checkout/guest-carts/:cartId/remove-item',\n                    'customer': '/amasty_checkout/carts/mine/remove-item'\n                };\n\n                return this.getUrl(urls, params);\n            },\n\n            getUrlForUpdateItem: function (quote) {\n                var params = (this.getCheckoutMethod() == 'guest') ? {cartId: quote.getQuoteId()} : {};\n                var urls = {\n                    'guest': '/amasty_checkout/guest-carts/:cartId/update-item',\n                    'customer': '/amasty_checkout/carts/mine/update-item'\n                };\n\n                return this.getUrl(urls, params);\n            },\n\n            getUrlForAdditionalFields: function (quote) {\n                var params = (this.getCheckoutMethod() == 'guest') ? {cartId: quote.getQuoteId()} : {};\n                var urls = {\n                    'guest': '/amasty_checkout/guest-carts/:cartId/amcheckoutFields',\n                    'customer': '/amasty_checkout/carts/mine/amcheckoutFields'\n                };\n\n                return this.getUrl(urls, params);\n            },\n\n            getUrlForSavePassword: function (quote) {\n                var params = (this.getCheckoutMethod() == 'guest') ? {cartId: quote.getQuoteId()} : {},\n                    urls = {\n                        'guest': '/amasty_checkout/guest-carts/:cartId/save-password'\n                };\n\n                return this.getUrl(urls, params);\n            },\n\n            /** Get url for service */\n            getUrl: function (urls, urlParams) {\n                var url;\n\n                if (utils.isEmpty(urls)) {\n                    return 'Provided service call does not exist.';\n                }\n\n                if (!utils.isEmpty(urls['default'])) {\n                    url = urls['default'];\n                } else {\n                    url = urls[this.getCheckoutMethod()];\n                }\n                return urlBuilder.createUrl(url, urlParams);\n            },\n\n            getCheckoutMethod: function () {\n                return customer.isLoggedIn() ? 'customer' : 'guest';\n            },\n\n            /**\n             * Making url for total estimation request.\n             *\n             * @param {Object} quote - Quote model.\n             * @returns {String} Result url.\n             */\n            getUrlForTotalsEstimationForNewAddress: function (quote) {\n                if (window.checkoutConfig.isNegotiableQuote) {\n                    var params = {\n                            quoteId: quote.getQuoteId()\n                        },\n                        urls = {\n                            'negotiable': '/negotiable-carts/:quoteId/totals/?isNegotiableQuote=true'\n                        };\n\n                    return resourceUrlManager.getUrl(urls, params);\n                }\n\n                return resourceUrlManager.getUrlForTotalsEstimationForNewAddress(quote);\n            }\n        };\n    }\n);\n","Amasty_CheckoutCore/js/model/shipping-registry.js":"define([\n    'ko',\n    'underscore',\n    'jquery',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Checkout/js/model/shipping-rates-validation-rules',\n    'Magento_Checkout/js/model/shipping-address/form-popup-state',\n    'Magento_Checkout/js/model/address-converter',\n    'Magento_Customer/js/model/address-list',\n    'Amasty_CheckoutCore/js/model/address-form-state',\n    'Amasty_CheckoutCore/js/action/get-address-cache-key',\n    'Amasty_CheckoutCore/js/model/payment/payment-loading',\n    'Magento_Ui/js/lib/validation/validator'\n], function (\n    ko,\n    _,\n    $,\n    quote,\n    validationRules,\n    formPopUpState,\n    addressConverter,\n    addressList,\n    addressFormState,\n    getAddressCacheKey,\n    paymentLoader,\n    validator\n) {\n    'use strict';\n\n    return {\n        savedAddress: '',\n        shippingMethod: '',\n        shippingCarrier: '',\n\n        /**\n         * list of shipping address\n         * it also can contains third party extension fields\n         */\n        addressComponents: [],\n\n        /**\n         * filtered addressComponents\n         *  modules that are not used in shipping estimation (not in observable)\n         */\n        observedComponents: [],\n\n        /**\n         * Saved values of observable address.\n         * Update on shipping address save\n         */\n        additionalAddressValues: {},\n\n        /**\n         * @api\n         * Excluded components by name (index)\n         * Additional excludes should be added before initObservers executed\n         */\n        excludedFieldsNames: [],\n\n        /**\n         * @api\n         * Excluded collection components by name (index)\n         * Additional excludes should be added before initObservers executed\n         */\n        excludedCollectionNames: ['billing-address-form', 'customer-email'],\n        isEstimationHaveError: ko.observable(false),\n        isAddressChanged: ko.observable(false).extend({ notify: 'always', rateLimit: 20 }),\n        validationTimeout: 0,\n        checkDelay: 1000,\n\n        /**\n         * @property jQuery.Deferred\n         */\n        initializedPromise: $.Deferred(),\n\n        /**\n         * Register additional shipping fields observers\n         * @param {Function} elems - observable array of shipping elements\n         * @returns {void}\n         */\n        initObservers: function (elems) {\n            if (_.isEmpty(this.addressComponents)) {\n                this.excludedFieldsNames = _.union(this.excludedFieldsNames, validationRules.getObservableFields());\n                this.filterElements(elems());\n\n                _.each(this.addressComponents, function (element) {\n                    if (this.excludedFieldsNames.indexOf(element.index) === -1) {\n                        this.observedComponents.push(element);\n                        this.additionalAddressValues[element.index] = this.getInitialValue(element.index);\n                    }\n\n                    element.on('value', this.triggerValidation.bind(this, element));\n                }, this);\n\n                this.initializedPromise.resolve();\n            }\n        },\n\n        /**\n         * Set saved values on page load (saved on server)\n         * @returns {void}\n         */\n        setInitialValues: function () {\n            var savedAddress = window.checkoutConfig.shippingAddressFromData,\n                savedMethod = window.checkoutConfig.selectedShippingMethod,\n                subscriber;\n\n            if (savedAddress) {\n                this.savedAddress = addressConverter.formAddressDataToQuoteAddress(savedAddress);\n            } else if (window.checkoutConfig.selectedShippingAddressId) {\n                if (addressList.getLength()) {\n                    this._setCustomerAddress(addressList());\n                    this.isAddressChanged(true);\n                } else {\n                    subscriber = addressList.subscribe(function (addreses) {\n                        this._setCustomerAddress(addreses);\n                        subscriber.dispose();\n                    }, this);\n                }\n            }\n\n            if (savedMethod) {\n                if (_.isObject(savedMethod)) {\n                    this.shippingMethod = savedMethod.method_code;\n                    this.shippingCarrier = savedMethod.carrier_code;\n                } else if (_.isString(savedMethod)) {\n                    savedMethod = savedMethod.split('_');\n                    this.shippingMethod = savedMethod[0];\n                    this.shippingCarrier = savedMethod[1];\n                }\n            }\n        },\n\n        /**\n         * Set shipping rates and saved address by customer address\n         * @param {Array} addresses\n         * @private\n         * @returns {void}\n         */\n        _setCustomerAddress: function (addresses) {\n            var selectedAddress;\n\n            selectedAddress = _.find(addresses, function (address) {\n                return address.customerAddressId * 1 === window.checkoutConfig.selectedShippingAddressId * 1;\n            });\n\n            if (selectedAddress) {\n                this.savedAddress = selectedAddress;\n            }\n        },\n\n        /**\n         * Get initial value for additional shipping fields.\n         * @param {String} index\n         * @return {null|*}\n         */\n        getInitialValue: function (index) {\n            var savedAddress = window.checkoutConfig.shippingAddressFromData;\n\n            if (savedAddress) {\n                if (savedAddress.custom_attributes\n                    && savedAddress.custom_attributes[index]\n                ) {\n                    return savedAddress.custom_attributes[index];\n                }\n\n                if (savedAddress[index]) {\n                    return savedAddress[index];\n                }\n            }\n\n            return null;\n        },\n\n        /**\n         * Extract all fields wich can be observable from fields\n         * @param {Array} elems\n         * @returns {void}\n         */\n        filterElements: function (elems) {\n            if (!elems || !elems.length) {\n                return;\n            }\n\n            _.each(elems, function (element) {\n                if (this._isCollection(element)) {\n                    try {\n                        if (this._isCollectionValid(element)) {\n                            this.filterElements(element.elems());\n                        }\n                    } catch (e) {\n                        // continue\n                    }\n\n                    return;// continue\n                }\n\n                if (this._isModuleValid(element)) {\n                    this.addressComponents.push(element);\n                }\n            }.bind(this));\n        },\n\n        /**\n         * Is component are collection\n         *\n         * @param {Object} element\n         * @returns {Boolean}\n         * @private\n         */\n        _isCollection: function (element) {\n            return typeof element.initChildCount === 'number';\n        },\n\n        /**\n         * Is component collection is valid\n         *\n         * @param {Object} element\n         * @returns {Boolean}\n         * @private\n         */\n        _isCollectionValid: function (element) {\n            return this.excludedCollectionNames.indexOf(element.index) === -1;\n        },\n\n        /**\n         * Is component can be observable\n         *\n         * @param {Object} module\n         * @returns {Boolean}\n         * @private\n         */\n        _isModuleValid: function (module) {\n            return ko.isObservable(module.error)\n                && ko.isObservable(module.value);\n        },\n\n        /**\n         * Debounce validation\n         * @returns {void}\n         */\n        triggerValidation: function () {\n            clearTimeout(this.validationTimeout);\n\n            if (!formPopUpState.isVisible() && !addressFormState.isShippingFormVisible()) {\n                paymentLoader(true);\n\n                this.validationTimeout = setTimeout(this.validation.bind(this), this.checkDelay);\n            }\n        },\n\n        validation: function () {\n            var isError = false,\n                valueChanged = false,\n                result;\n\n            _.find(this.observedComponents, function (element) {\n                if (element.visible && !element.visible() || element.disabled && element.disabled()) {\n                    return false;// continue\n                }\n\n                if (element.error()) {\n                    isError = true;\n\n                    return true;// break\n                }\n\n                if (_.isObject(element.validation)) {\n                    result = validator(element.validation, element.value(), element.validationParams);\n\n                    if (!result.passed) {\n                        isError = true;\n\n                        return true;// break\n                    }\n                }\n\n                if (this.additionalAddressValues[element.index] !== element.value()) {\n                    valueChanged = true;\n                }\n\n                return false;\n            }, this);\n\n            this.isEstimationHaveError(isError);\n\n            if (!isError) {\n                this.isAddressChanged(valueChanged);\n            } else {\n                paymentLoader(false);\n            }\n        },\n\n        /**\n         * Store saved values for tracking changes\n         * @returns {void}\n         */\n        registerAdditionAddressValues: function () {\n            clearTimeout(this.validationTimeout);\n            _.each(this.observedComponents, function (element) {\n                this.additionalAddressValues[element.index] = element.value();\n            }.bind(this));\n        },\n\n        /**\n         * Set saved data\n         * @param {object} address\n         * @returns {void}\n         */\n        register: function (address) {\n            if (!address) {\n                address = quote.shippingAddress();\n            }\n\n            this.savedAddress = address;\n            this.shippingMethod = quote.shippingMethod().method_code;\n            this.shippingCarrier = quote.shippingMethod().carrier_code;\n            this.isAddressChanged(false);\n            this.registerAdditionAddressValues();\n        },\n\n        /**\n         * Compare current Shipping Data with saved and determines is need to save it\n         *\n         * @returns {boolean}\n         */\n        isHaveUnsavedShipping: function () {\n            var methodData = quote.shippingMethod();\n\n            if (!methodData) {\n                return false;\n            }\n\n            if (!this.savedAddress) {\n                return true;\n            }\n\n            return this.isAddressChanged()\n                || !this._compareObjectsData(quote.shippingAddress(), this.savedAddress)\n                || this.shippingMethod !== methodData.method_code\n                || this.shippingCarrier !== methodData.carrier_code;\n        },\n\n        /**\n         * Is address objects are equal\n         *\n         * @param {*} quoteAddress\n         * @param {*} savedAddress\n         * @returns {boolean}\n         * @private\n         * @since 2.0.0\n         * @since 3.0.0 - empty values removed from comparable objects, customer address compare optimization\n         */\n        _compareObjectsData: function (quoteAddress, savedAddress) {\n            if (quoteAddress.getType && quoteAddress.getType() === 'customer-address') {\n                // customer address is not editable, compare only ids.\n                return quoteAddress.customerAddressId === savedAddress.customerAddressId;\n            }\n\n            // objects for isEqual should not contain functions. Same for objects of their objects.\n            return _.isEqual(this._prepareAddressToCompare(quoteAddress), this._prepareAddressToCompare(savedAddress));\n        },\n\n        _prepareAddressToCompare: function (address) {\n            let filteredAddress = _.pick(address, this._cleanupAddressFunction);\n\n            if (filteredAddress.regionId) {\n                filteredAddress.regionId *= 1;\n            }\n\n            if (filteredAddress.postcode === '-') {\n                delete filteredAddress.postcode;\n            }\n\n            if (filteredAddress.street) {\n                filteredAddress.street = _.compact(filteredAddress.street); // remove empty strings elements\n            }\n\n            return filteredAddress;\n        },\n\n        /**\n         * Iterate function.\n         * Remove functions and empty values.\n         * Leave only acceptable array cells for comparing.\n         *\n         * @param {*} value\n         * @param {string} key\n         * @return {boolean}\n         * @private\n         */\n        _cleanupAddressFunction: function (value, key) {\n            return !_.isFunction(value)\n                && key !== 'save_in_address_book'\n                && value\n                && (!_.isEmpty(value) || _.isNumber(value))// isEmpty - returns true for any number type (int/float)\n                && (!_.isArray(value) || _.compact(value).length > 0);// delete arrays with empty strings (like street)\n        }\n    };\n});\n","Amasty_CheckoutCore/js/model/new-customer-address-mixin.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*jshint browser:true jquery:true*/\n/*global alert*/\ndefine([\n    'underscore',\n    'mage/utils/wrapper'\n], function (_, wrapper) {\n    'use strict';\n\n    return function (newAddressFunction) {\n        return wrapper.wrap(newAddressFunction, function (origin, addressData) {\n            if (window.checkoutConfig.amdefault) {\n                _.each(window.checkoutConfig.amdefault, function (defaultValue, name) {\n                    if (!addressData[name] && name !== 'region_id' && name !== 'region') {\n                        addressData[name] = defaultValue;\n                    }\n                });\n                if (addressData.country_id === window.checkoutConfig.amdefault.country_id) {\n                    if (!addressData.region) {\n                        addressData.region = {};\n                    }\n                    if (!addressData.region.region_id) {\n                        addressData.region.region_id = window.checkoutConfig.amdefault.region_id;\n                    }\n                    if (!addressData.region.region) {\n                        addressData.region.region = window.checkoutConfig.amdefault.region;\n                    }\n                }\n            }\n\n            return origin(addressData);\n        });\n    }\n});\n","Amasty_CheckoutCore/js/model/agreements-assigner-mixin.js":"define([\n    'mage/utils/wrapper',\n    'jquery'\n], function (wrapper, $) {\n    'use strict';\n\n    return function (agreementsAssignerAction) {\n        return wrapper.wrap(agreementsAssignerAction, function (originalAction, paymentData) {\n            originalAction(paymentData);\n\n            var amcheckoutFormData = $('.additional-options input, .additional-options textarea').serializeArray(),\n                data = {},\n                agreements = [],\n                re = /^agreement\\[\\d+?\\]$/;\n            amcheckoutFormData.forEach(function(item){\n                data[item.name] = item.value;\n                if (re.test(item.name)) {\n                    agreements.push(item.value);\n                }\n            });\n\n            if (agreements.length) {\n                if (paymentData['extension_attributes'] === undefined) {\n                    paymentData['extension_attributes'] = {};\n                }\n\n                paymentData['extension_attributes']['agreement_ids'] = agreements;\n            }\n\n            return paymentData;\n        });\n    };\n});","Amasty_CheckoutCore/js/model/address-converter-mixin.js":"define([\n    'underscore', 'mage/utils/wrapper'\n], function (_, wrapper) {\n    'use strict';\n\n    return function (target) {\n        /**\n         * If custom attributes array, convert to object\n         */\n        target.quoteAddressToFormAddressData = wrapper.wrapSuper(\n            target.quoteAddressToFormAddressData,\n            function (inputModelAddress) {\n                var modelAddress = _.clone(inputModelAddress),\n                    shippingAddress,\n                    customAttributes;\n\n                if (modelAddress.customAttributes) {\n                    customAttributes = {};\n                    _.each(modelAddress.customAttributes, function (attribute, key) {\n                        if (_.isObject(attribute) && _.has(attribute, 'attribute_code')) {\n                            customAttributes[attribute.attribute_code] = attribute.value;\n                        } else if (!_.isNumber(key)) {\n                            customAttributes[key] = attribute;\n                        }\n                    });\n\n                    delete modelAddress.customAttributes;\n                }\n\n                shippingAddress = this._super(modelAddress);\n\n                if (customAttributes) {\n                    shippingAddress['custom_attributes'] = customAttributes;\n                }\n\n                return shippingAddress;\n            }\n        );\n\n        return target;\n    };\n});\n","Amasty_CheckoutCore/js/model/one-step-layout.js":"// Checkout layout options model\ndefine([\n    'ko',\n    'uiRegistry',\n    'Amasty_CheckoutCore/js/view/utils',\n    'uiLayout'\n], function (ko, registry, viewUtils, layout) {\n    'use strict';\n\n    const MAPPING_BLOCK_NAME = {\n            shipping_address: 'checkout.steps.shipping-step.shippingAddress',\n            shipping_method: 'checkout.steps.shipping-step.shippingAddress',\n            delivery: 'checkout.steps.shipping-step.amcheckout-delivery-date',\n            payment_method: 'checkout.steps.billing-step',\n            summary: 'checkout.sidebar',\n            additional_checkboxes: 'checkout.sidebar.additional.checkboxes'\n        },\n        CLASS_NAMES = {\n            classic: {\n                main: 'opc-wrapper am-opc-wrapper',\n                column: 'checkout-column opc',\n                block: 'checkout-block'\n            },\n            modern: {\n                main: 'amcheckout-main-container',\n                column: 'amcheckout-column',\n                block: 'amcheckout-block amcheckout-step-container'\n            }\n        },\n        BLOCK_ATTRS = {\n            classic: {},\n            modern: {\n                main: {\n                    'data-amcheckout-js': 'main-container'\n                }\n            }\n        };\n\n    return {\n        containerClassNames: ko.observable(''),\n        selectedLayout: [],\n        checkoutDesign: '',\n        checkoutLayout: '',\n        checkoutBlocks: {},\n        mainAdditionalClasses: '',\n        gdprConsents: window.checkoutConfig.amastyOscGdprConsent,\n        gdprComponents: {},\n\n        /**\n         * Getting checkout block by name\n         * @param {String} blockName\n         * @returns {observable}\n         */\n        getCheckoutBlock: function (blockName) {\n            var requestComponent = this.checkoutBlocks[blockName]\n                || this.requestComponent(MAPPING_BLOCK_NAME[blockName]);\n\n            switch (blockName) {\n                case 'shipping_address':\n                    if (requestComponent()) {\n                        requestComponent().template = 'Amasty_CheckoutCore/onepage/shipping/address';\n                    }\n\n                    break;\n\n                case 'shipping_method':\n                    if (requestComponent()) {\n                        requestComponent().template = 'Amasty_CheckoutCore/onepage/shipping/methods';\n                    }\n\n                    break;\n\n                default: break;\n            }\n\n            return requestComponent;\n        },\n\n        /**\n         * Getting component by name from registry\n         * @param {String} name\n         * @returns {observable}\n         */\n        requestComponent: function (name) {\n            var observable = ko.observable();\n\n            registry.get(name, function (summary) {\n                observable(summary);\n            });\n\n            this.checkoutBlocks[name] = observable;\n\n            return observable;\n        },\n\n        /**\n         * Emulate 2columns layout for virtual quote checkout\n         * @returns {Array}\n         */\n        getVirtualLayout: function () {\n            return [\n                [viewUtils.getBlockLayoutConfig('payment_method')],\n                [viewUtils.getBlockLayoutConfig('summary')]\n            ];\n        },\n\n        /**\n         * Getting checkout container css classes by selected design\n         * @returns {String}\n         */\n        setContainerClassNames: function () {\n            var classNames = this.containerClassNames() + ' ' + CLASS_NAMES[this.checkoutDesign].main;\n\n            if (this.checkoutDesign === 'modern') {\n                classNames += ' -' + this.checkoutDesign + ' -layout-' + this.checkoutLayout;\n            } else {\n                classNames += ' layout-' + this.checkoutLayout;\n            }\n\n            classNames += ' ' + this.mainAdditionalClasses;\n\n            this.containerClassNames(classNames);\n        },\n\n        /**\n         * Getting checkout container attributes by selected design\n         * @returns {Object}\n         */\n        getContainerAttrs: function () {\n            return BLOCK_ATTRS[this.checkoutDesign].main;\n        },\n\n        /**\n         * Getting checkout column css classes by design\n         * @param {Number} columnIndex\n         * @returns {String}\n         */\n        getColumnClassNames: function (columnIndex) {\n            var classNames = '',\n                defaultClassNames = CLASS_NAMES;\n\n            classNames = defaultClassNames[this.checkoutDesign].column\n                + this.getAdditionalColumnClassNames(columnIndex);\n\n            return classNames;\n        },\n\n        /**\n         * Getting checkout column additional css classes by design, layout and column type\n         * @param {Number} columnIndex\n         * @returns {String}\n         */\n        getAdditionalColumnClassNames: function (columnIndex) {\n            var additionalColumnsClasses = '';\n\n            if (this.checkoutDesign === 'modern' && this.checkoutLayout === '2columns') {\n                if (columnIndex === 0) {\n                    additionalColumnsClasses += ' -main';\n                } else if (columnIndex === 1) {\n                    additionalColumnsClasses += ' -sidebar';\n                }\n            }\n\n            return additionalColumnsClasses;\n        },\n\n        /**\n         * Getting checkout column tag attributes by design, layout and column type\n         * @param {Number} columnIndex\n         * @returns {Object}\n         */\n        getColumnAttrs: function (columnIndex) {\n            var columnAttrs = {},\n                checkoutJsPrefix = 'data-amcheckout-js',\n                defaultAttrs = BLOCK_ATTRS[this.checkoutDesign].column;\n\n            columnAttrs = defaultAttrs || {};\n\n            if (this.checkoutDesign === 'modern' && this.checkoutLayout === '2columns') {\n                if (columnIndex === 0) {\n                    columnAttrs[checkoutJsPrefix] = 'main-column';\n                } else if (columnIndex === 1) {\n                    columnAttrs[checkoutJsPrefix] = 'sidebar-column';\n                }\n            }\n\n            return columnAttrs;\n        },\n\n        /**\n         * Getting checkout block css classes\n         * @param {String} blockName\n         * @returns {*}\n         */\n        getBlockClassNames: function (blockName) {\n            var defaultClassNames = CLASS_NAMES,\n                classNames = defaultClassNames[this.checkoutDesign].block;\n\n            if (blockName === 'summary') {\n                classNames += ' -summary';\n            }\n\n            return classNames;\n        },\n\n        /**\n         * Getting checkout block tag attributes by design and layout\n         * @returns {Object}\n         */\n        getBlockAttrs: function () {\n            var blockAttrs = {},\n                checkoutJsPrefix = 'data-amcheckout-js',\n                defaultAttrs = BLOCK_ATTRS[this.checkoutDesign].block;\n\n            blockAttrs = defaultAttrs || {};\n\n            if (this.checkoutDesign === 'modern' && this.checkoutLayout !== '3columns') {\n                blockAttrs[checkoutJsPrefix] = 'step-container';\n            }\n\n            return blockAttrs;\n        },\n\n        /**\n         * Check modern 2 columns design\n         * @returns {boolean}\n         */\n        isModernTwoColumns: function () {\n            return this.checkoutDesign === 'modern' && this.checkoutLayout === '2columns';\n        },\n\n        /**\n         * @param {String} blockName\n         * @param {Object|null} componentConfig\n         * @return {observable}\n         */\n        getGdprComponent: function (blockName, componentConfig) {\n            var name = componentConfig ? componentConfig.name + '-' + blockName : '',\n                component = this.gdprComponents[name],\n                config = {};\n\n            if (this.gdprConsents[blockName] && name && !component) {\n                component = ko.observable();\n                config = Object.assign(\n                    config,\n                    componentConfig,\n                    {\n                        name: name,\n                        items: this.gdprConsents[blockName]['consents'],\n                        meta: this.gdprConsents[blockName]['meta']\n                    }\n                );\n\n                // move checkbox before place order button\n                if (blockName === 'summary') {\n                    config.parent = MAPPING_BLOCK_NAME.additional_checkboxes;\n                }\n\n                layout([config]);\n                registry.get(name, function (target) {\n                    component(target);\n                });\n\n                this.gdprComponents[name] = component;\n            }\n\n            return component;\n        }\n    };\n});\n","Amasty_CheckoutCore/js/model/step-navigator-mixin.js":"define(\n    [\n        'knockout',\n        'mage/utils/wrapper'\n    ],\n    function (ko, wrapper) {\n        'use strict';\n\n        return function (target) {\n            /**\n             * Override isVisible to isActive function;\n             * because in onestepcheckout all steps should be visible\n             */\n            target.registerStep = wrapper.wrapSuper(target.registerStep, function (code, alias, title, isVisible, navigate, sortOrder) {\n                var isActive = ko.observable(isVisible());\n                this._super(code, alias, title, isActive, navigate, sortOrder);\n            });\n\n            /**\n             * Override for avoid hash in url because in our checkout all doing in one step\n             */\n            target.setHash = wrapper.wrapSuper(target.setHash, function (hash) {\n                hash = '';\n                this._super(hash);\n            });\n\n            return target;\n        };\n    }\n);\n\n","Amasty_CheckoutCore/js/model/statistic.js":"define([\n    'jquery',\n    'mage/storage',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Checkout/js/model/url-builder',\n    'Magento_Customer/js/model/customer'\n], function ($, storage, quote, urlBuilder, customer) {\n    'use strict';\n\n    return {\n        canSave: true,\n        paymentMethod: null,\n        quoteId: quote.getQuoteId(),\n        isLoggedIn:customer.isLoggedIn(),\n        saveUrl: '',\n\n        initialize: function () {\n            quote.paymentMethod.subscribe(function (method) {\n                this.paymentMethod = null;\n                if (method) {\n                    this.paymentMethod = method.method;\n                }\n            }, this);\n\n            if (this.isLoggedIn) {\n                this.saveUrl = urlBuilder.createUrl('/checkout/saveInsertedInfo', {});\n            } else {\n                this.saveUrl = urlBuilder.createUrl('/checkout/:cartId/saveInsertedInfo', {cartId: this.quoteId});\n            }\n\n            $(window).on('beforeunload', this.saveStatistic.bind(this));\n\n            return this;\n        },\n\n        saveStatistic: function () {\n            var cashStorage = JSON.parse(window.localStorage.getItem('mage-cache-storage')),\n                checkoutData,\n                shippingAddress = quote.shippingAddress(),\n                request = {quote_id: this.quoteId},\n                isQuoteActive;\n\n            if (window.checkoutConfig.isNegotiableQuote\n                || !this.canSave\n                || !cashStorage\n                || !cashStorage.hasOwnProperty('checkout-data')\n                || !this.quoteId\n            ) {\n                return;\n            }\n\n            checkoutData = cashStorage['checkout-data'];\n            isQuoteActive = Object.keys(checkoutData).some(function (value) {\n                return checkoutData[value] != null;\n            });\n\n            if (!isQuoteActive) {\n                return;\n            }\n\n            if (shippingAddress && shippingAddress.getType() === 'new-customer-address') {\n                request.shippingAddressFromData = {\n                    'street': shippingAddress.street,\n                    'city': shippingAddress.city,\n                    'region_id': shippingAddress.regionId,\n                    'region': shippingAddress.region,\n                    'country_id': shippingAddress.countryId,\n                    'postcode': shippingAddress.postcode,\n                    'email': shippingAddress.email,\n                    'customer_id': shippingAddress.customerId,\n                    'firstname': shippingAddress.firstname,\n                    'lastname': shippingAddress.lastname,\n                    'middlename': shippingAddress.middlename,\n                    'prefix': shippingAddress.prefix,\n                    'suffix': shippingAddress.suffix,\n                    'vat_id': shippingAddress.vatId,\n                    'company': shippingAddress.company,\n                    'telephone': shippingAddress.telephone,\n                    'fax': shippingAddress.fax,\n                    'custom_attributes': shippingAddress.customAttributes,\n                    'save_in_address_book': shippingAddress.saveInAddressBook\n                };\n            }\n\n            if (checkoutData.newCustomerBillingAddress) {\n                request.newCustomerBillingAddress = checkoutData.newCustomerBillingAddress;\n            }\n\n            if (checkoutData.selectedPaymentMethod) {\n                if (checkoutData.selectedPaymentMethod.includes('braintree_cc_vault_')) {\n                    checkoutData.selectedPaymentMethod = 'braintree_cc_vault';\n                }\n                request.selectedPaymentMethod = checkoutData.selectedPaymentMethod;\n            }\n\n            if (checkoutData.selectedShippingRate) {\n                request.selectedShippingRate = checkoutData.selectedShippingRate;\n            }\n\n            if (checkoutData.validatedEmailValue) {\n                request.validatedEmailValue = checkoutData.validatedEmailValue;\n            }\n\n            if (!request.selectedPaymentMethod && this.paymentMethod) {\n                request.selectedPaymentMethod = this.paymentMethod;\n            }\n\n            storage.post(\n                this.saveUrl,\n                JSON.stringify(request),\n                false\n            );\n        }\n    };\n});\n","Amasty_CheckoutCore/js/model/default-shipping-rate-processor-mixin.js":"define(\n    [\n        'mage/utils/wrapper',\n        'Magento_Checkout/js/model/shipping-rate-registry',\n        'Magento_Checkout/js/model/shipping-service',\n        'Amasty_CheckoutCore/js/action/get-address-cache-key'\n    ],\n    function (wrapper, rateRegistry, shippingService, getAddressCacheKey) {\n        'use strict';\n\n        /**\n         * Modify shippingRegistry guest cache.\n         * Reduce quantity of requests to server.\n         * @since 3.0.0\n         * @since 3.0.5 fixed\n         */\n        return function (target) {\n            target.getRates = wrapper.wrapSuper(target.getRates, function (address) {\n                var cacheKey, cache;\n\n                if (address.getType() !== 'new-address' && address.getType() !== 'new-customer-address') {\n                    return this._super();\n                }\n\n                cacheKey = getAddressCacheKey(address);\n                cache = rateRegistry.get(cacheKey);\n                if (cache) {\n                    rateRegistry.set(address.getCacheKey(), cache);\n                } else if (!rateRegistry.get(address.getCacheKey())) {\n                    shippingService.getShippingRates().subscribe(function (rates) {\n                        rateRegistry.set(cacheKey, rates);\n                        this.dispose();\n                    });\n                }\n\n                return this._super();\n            });\n\n            return target;\n        };\n    }\n);\n\n","Amasty_CheckoutCore/js/model/full-screen-loader-mixin.js":"define(\n    [\n        'mage/utils/wrapper',\n        'Amasty_CheckoutCore/js/model/payment/payment-loading'\n    ],\n    function (wrapper, paymentLoader) {\n        'use strict';\n\n        return function (target) {\n            /**\n             * Override for avoid full screen on shipping dynamic save\n             */\n            target.startLoader =  wrapper.wrapSuper(target.startLoader, function () {\n                if (window.loaderIsNotAllowed) {\n                    paymentLoader(true);\n                } else {\n                    this._super();\n                }\n            });\n\n            return target;\n        };\n    }\n);\n\n","Amasty_CheckoutCore/js/model/shipping-rate-service-override.js":"/**\n * Rate request moved to separate method to be able to request methods without update shipping address.\n */\ndefine([\n    'Magento_Checkout/js/model/quote',\n    'Magento_Checkout/js/model/shipping-rate-processor/new-address',\n    'Magento_Checkout/js/model/shipping-rate-processor/customer-address',\n    'Magento_Checkout/js/model/shipping-rate-registry',\n    'Magento_Checkout/js/action/select-billing-address',\n    'Amasty_CheckoutCore/js/model/address-form-state'\n], function (\n    quote,\n    defaultProcessor,\n    customerAddressProcessor,\n    rateRegistry,\n    selectBillingAddress,\n    addressFormState\n) {\n    'use strict';\n\n    var RateService = {\n        processors: {},\n\n        /**\n         * @private\n         */\n        _initialize: function () {\n            this.processors.default = defaultProcessor;\n            this.processors['customer-address'] = customerAddressProcessor;\n\n            if (!quote.isVirtual()) {\n                quote.shippingAddress.subscribe(this.updateRates, this);\n            }\n        },\n\n        /**\n         * @param {object|null|undefined} address\n         * @param {boolean|null|undefined} forceUpdate\n         */\n        updateRates: function (address, forceUpdate) {\n            var shippingAddress = address || quote.shippingAddress(),\n                type = shippingAddress.getType();\n\n            if (addressFormState.isBillingSameAsShipping()\n                && (!_.isFunction(shippingAddress.canUseForBilling) || shippingAddress.canUseForBilling())\n            ) {\n                selectBillingAddress(shippingAddress);\n            }\n\n            if (forceUpdate) {\n                rateRegistry.clearStorage();\n            }\n\n            if (this.processors[type]) {\n                this.processors[type].getRates(shippingAddress);\n            } else {\n                this.processors.default.getRates(shippingAddress);\n            }\n        },\n\n        /**\n         * @param {String} type\n         * @param {*} processor\n         */\n        registerProcessor: function (type, processor) {\n            this.processors[type] = processor;\n        }\n    };\n\n    RateService._initialize();\n\n    return RateService;\n});\n","Amasty_CheckoutCore/js/model/billing-address-postcode-validator-mixin.js":"define([\n    'jquery',\n    'mage/utils/wrapper'\n], function ($, wrapper) {\n    'use strict';\n\n    return function (target) {\n        const mixin = {\n\n            /**\n             * for Correct Validation of the Billing Address Form\n             *\n             * @param {Function} original\n             * @param {Object} postcodeElement\n             * @returns {*}\n             */\n            postcodeValidation: function (original, postcodeElement) {\n                let shippingAddressCountryNode = $('.form-shipping-address select[name=\"country_id\"]'),\n                    validationResult;\n\n                shippingAddressCountryNode.attr('name', 'amcountry_id');\n                validationResult = original(postcodeElement);\n                shippingAddressCountryNode.attr('name', 'country_id');\n\n                return validationResult;\n            }\n        }\n\n        wrapper._extend(target, mixin);\n\n        return target;\n    };\n});\n","Amasty_CheckoutCore/js/model/quote-ext-override.js":"/**\n * Override store pickup quote mixin to set equalityComparer for shipping address before it override with computed\n */\ndefine([\n    'ko',\n    'Magento_InventoryInStorePickupFrontend/js/model/pickup-address-converter',\n    './quote-mixin'\n], function (ko, pickupAddressConverter, quoteMixin) {\n    'use strict';\n\n    return function (quote) {\n        // amasty fix start\n        quote = quoteMixin(quote);\n        // amasty fix finish\n        var shippingAddress = quote.shippingAddress;\n\n        /**\n         * Makes sure that shipping address gets appropriate type when it points\n         * to a store pickup location.\n         */\n        quote.shippingAddress = ko.pureComputed({\n            /**\n             * Return quote shipping address\n             */\n            read: function () {\n                return shippingAddress();\n            },\n\n            /**\n             * Set quote shipping address\n             */\n            write: function (address) {\n                shippingAddress(\n                    pickupAddressConverter.formatAddressToPickupAddress(address)\n                );\n            }\n        });\n\n        return quote;\n    };\n});\n","Amasty_CheckoutCore/js/model/shipping-rate-registry-mixin.js":"define(['mage/utils/wrapper'], function (wrapper) {\n    'use strict';\n\n    /**\n     * Add clear registry cache functionality.\n     */\n    return function (target) {\n        return wrapper.extend(target, {\n            usedKeys: [],\n            set: function (origin, addressKey) {\n                if (addressKey && this.usedKeys.indexOf(addressKey) === -1) {\n                    this.usedKeys.push(addressKey);\n                }\n\n                return origin();\n            },\n            clearStorage: function () {\n                this.usedKeys.forEach(function (key) {\n                    this.set(key, null);\n                }, this);\n\n                this.usedKeys = [];\n            }\n        });\n    };\n});\n\n","Amasty_CheckoutCore/js/model/quote-mixin.js":"/**\n * Main observables equality comparer replacement\n */\n\ndefine([\n    'Amasty_CheckoutCore/js/action/is-equal-ignore-functions'\n], function (isEqualIgnoreFunctions) {\n    'use strict';\n\n    return function (quote) {\n        quote.shippingAddress.equalityComparer = isEqualIgnoreFunctions;\n        quote.billingAddress.equalityComparer = isEqualIgnoreFunctions;\n        quote.shippingMethod.equalityComparer = isEqualIgnoreFunctions;\n        quote.paymentMethod.equalityComparer = isEqualIgnoreFunctions;\n\n        return quote;\n    };\n});\n","Amasty_CheckoutCore/js/model/address-form-state.js":"define([\n    'ko',\n    'underscore',\n    'uiRegistry',\n    'Magento_Checkout/js/model/quote'\n], function (ko, _, registry, quote) {\n    'use strict';\n\n    /**\n     * States of Billing Address and Shipping Address Forms which can change checkout behaviour.\n     * You cant change state of form by changing this observables (one way links)\n     */\n    return {\n        /**\n         * is Billing address form in edit mode\n         */\n        isBillingFormVisible: ko.observable(false),\n\n        /**\n         * is Billing Same As Shipping\n         */\n        isBillingSameAsShipping: ko.observable(true),\n\n        /**\n         * is Shipping address form in edit mode\n         */\n        isShippingFormVisible: ko.observable(false),\n\n        isFormRendered: ko.observable(false).extend({ rateLimit: { timeout: 100, method: 'notifyWhenChangesStop' } }),\n\n        /**\n         * Update states by billing form view\n         */\n        updateBillingFormStates: function () {\n            var billingAddressFormComponent,\n                billingFormCacheKey = 'billing-address-form',\n                paymentMethod;\n\n            if (window.checkoutConfig.displayBillingOnPaymentMethod) {\n                paymentMethod = quote.paymentMethod();\n                billingFormCacheKey = false;\n\n                if (paymentMethod) {\n                    billingFormCacheKey = paymentMethod.method + '-form';\n                }\n            }\n\n            billingAddressFormComponent = this.getBillingForm(billingFormCacheKey);\n\n            if (billingAddressFormComponent) {\n                this.isBillingSameAsShipping(Boolean(billingAddressFormComponent.isAddressSameAsShipping()));\n                this.isBillingFormVisible(!billingAddressFormComponent.isAddressDetailsVisible());\n            } else {\n                this.isBillingSameAsShipping(true);\n                this.isBillingFormVisible(false);\n\n                if (!window.checkoutConfig.displayBillingOnPaymentMethod && quote.isVirtual() ||\n                    !quote.billingAddress() && quote.isVirtual()) {\n                    this.isBillingSameAsShipping(false);\n                    this.isBillingFormVisible(true);\n                }\n            }\n        },\n\n        _indexedBillingForm: {},\n\n        getBillingForm: function (index) {\n            if (index && _.isUndefined(this._indexedBillingForm[index])) {\n                this._indexedBillingForm[index] = registry.get({index: index});\n            }\n\n            return this._indexedBillingForm[index];\n        }\n    };\n});\n","Amasty_CheckoutCore/js/model/consents-assigner-mixin.js":"/**\n * Mixin for Gdpr assigner to collect checkbox values by position\n */\ndefine([\n    'underscore',\n    'mage/utils/wrapper',\n    './gdpr/consent-processor'\n], function (_, wrapper, processor) {\n    'use strict';\n\n    return function (agreementsAssignerAction) {\n        return wrapper.wrap(agreementsAssignerAction, function (originalAction, paymentData) {\n            var consents = window.checkoutConfig.amastyOscGdprConsent || [];\n\n            if (_.isEmpty(consents)) {\n                originalAction(paymentData);\n\n                return;\n            }\n\n            if (!paymentData['additional_data']) {\n                paymentData['additional_data'] = {};\n            }\n\n            paymentData['additional_data']['amgdpr_agreement'] = JSON.stringify(processor.getConsentsData());\n\n            return paymentData;\n        });\n    };\n});\n","Amasty_CheckoutCore/js/model/payment-service-mixin.js":"define([\n    'ko',\n    'mage/utils/wrapper',\n    'Magento_Checkout/js/model/quote',\n    'Amasty_CheckoutCore/js/model/payment/vault-payment-resolver'\n],function (ko, wrapper, quote, vaultResolver) {\n    'use strict';\n    return function (target) {\n        /**\n         * Fix unselection of saved vault payment method\n         */\n        target.setPaymentMethods = wrapper.wrapSuper(target.setPaymentMethods, function (methods) {\n            if (methods && quote.paymentMethod()) {\n                var selectedMethod = quote.paymentMethod().method;\n\n                if (vaultResolver.isVaultMethodAvailable(selectedMethod, methods)) {\n                    methods.push({\n                        method: selectedMethod\n                    });\n                }\n            }\n\n            this._super(methods);\n        });\n\n        return target;\n    };\n});\n","Amasty_CheckoutCore/js/model/gdpr/consent-processor.js":"/**\n * Processor for collect consent checkboxes data by each checkout block\n */\ndefine([\n    'mage/utils/wrapper',\n    'jquery',\n    'underscore'\n], function (wrapper, $, _) {\n    'use strict';\n\n    return {\n\n        /**\n         * @return {Object}\n         */\n        getConsentsData: function () {\n            var consents = window.checkoutConfig.amastyOscGdprConsent || [],\n                consentsData = {},\n                consentData,\n                consentElements,\n                checked;\n\n            _.each(consents, function (consentByBlock, blockCode) {\n                _.each(consentByBlock.consents, function (consent) {\n                    consentElements = $('input[data-gdpr-checkbox-code=\"' + consent.checkbox_code + '\"]:visible');\n\n                    _.each(consentElements, function (consentElement) {\n                        consentData = consentsData[consent.checkbox_code];\n                        checked = Boolean($(consentElement).prop('checked'));\n\n                        if (!consentData || !consentData.checked) {\n                            consentsData[consent.checkbox_code] = {\n                                checked: checked,\n                                from: blockCode\n                            };\n                        }\n                    });\n                });\n            });\n\n            return consentsData;\n        }\n    };\n});\n","Amasty_CheckoutCore/js/model/payment/vault-payment-resolver.js":"define([\n    'underscore',\n    'mageUtils',\n    'uiRegistry',\n    'Magento_Checkout/js/model/payment/method-list'\n],function (_, utils, registry, availableMethods) {\n    'use strict';\n\n    return {\n        /**\n         * Is pyment method are saved valt payment\n         *\n         * @param {String} method\n         * @returns {boolean}\n         */\n        isSavedVaultPayment: function (method) {\n            try {\n                if (method\n                    && utils.nested(window, 'checkoutConfig.payment.vault.' + method)\n                ) {\n                    return true;\n                }\n            } catch (e) {\n\n            }\n\n            return false;\n        },\n\n        /**\n         * Is pyment method are saved valt payment and available\n         *\n         * @param {String} method\n         * @param {Array} methodlist optional\n         * @returns {boolean}\n         */\n        isVaultMethodAvailable: function (vaultMethod, methodlist) {\n            if (!vaultMethod) {\n                return false;\n            }\n\n            var vaultCode = utils.nested(window, 'checkoutConfig.payment.vault.' + vaultMethod + '.config.code');\n            if (!vaultCode) {\n                return false;\n            }\n\n            if (_.isUndefined(methodlist)) {\n                methodlist = availableMethods;\n            }\n            return !! _.some(methodlist, function (method) {\n                return method.method === vaultCode;\n            });\n        },\n\n        /**\n         * Fix Magento bug with preselect saved vault payment\n         * @param {String} method\n         * @returns {boolean}\n         */\n        resolve: function (method) {\n            if (this.isVaultMethodAvailable(method)) {\n                registry.get({index: method}, function (vaultView) {\n                    if (_.isFunction(vaultView.selectPaymentMethod)) {\n                        vaultView.selectPaymentMethod();\n                    }\n                });\n                return true\n            }\n\n            return false;\n        }\n    };\n});\n","Amasty_CheckoutCore/js/model/payment/place-order-state.js":"define([\n    'ko'\n], function (ko) {\n    'use strict';\n\n    /**\n     * State for Place Order button\n     *\n     * @returns {observable}\n     */\n    return ko.observable(true);\n});\n","Amasty_CheckoutCore/js/model/payment/salesrule-observer.js":"/**\n * Optimized replacement of Magento_SalesRule/js/action/select-payment-method-mixin\n * Payment save will be triggered only if object of payment method is changed.\n * Originally, payment save was triggered on any update action, even if there was same data.\n * Which causes a lot of unnecessary requests for One Step Checkout\n */\ndefine([\n    'jquery',\n    'Magento_Checkout/js/model/quote',\n    'Magento_SalesRule/js/model/payment/discount-messages',\n    'Magento_Checkout/js/action/set-payment-information-extended',\n    'Magento_Checkout/js/action/get-totals',\n    'Magento_SalesRule/js/model/coupon'\n],function ($, quote, messageContainer, setPaymentInformationExtended, getTotalsAction, coupon) {\n    'use strict';\n\n    return {\n        /**\n         * @var {string|null}\n         */\n        savedMethod: null,\n\n        /**\n         * @returns {void}\n         */\n        initialize: function () {\n            let currentMethod = quote.paymentMethod();\n\n            quote.paymentMethod.subscribe(this.observer.bind(this));\n\n            if (currentMethod) {\n                this.observer(currentMethod);\n            }\n        },\n\n        /**\n         * Quote payment method subscriber.\n         *\n         * @param {Object|null} paymentMethod\n         * @returns {void}\n         */\n        observer: function (paymentMethod) {\n            if (paymentMethod === null || paymentMethod.method === this.savedMethod) {\n                return;\n            }\n\n            $.when(\n                setPaymentInformationExtended(\n                    messageContainer,\n                    {\n                        method: paymentMethod.method\n                    },\n                    true\n                )\n            ).done(\n                this.updateTotals.bind(this)\n            );\n\n            this.savedMethod = paymentMethod.method;\n        },\n\n        /**\n         * Emulate Magento behavior\n         *\n         * @returns {void}\n         */\n        updateTotals: function () {\n            let deferred = $.Deferred();\n\n            getTotalsAction([], deferred);\n            $.when(deferred).done(this.updateCoupon.bind(this));\n        },\n\n        /**\n         * Emulate Magento behavior\n         *\n         * @returns {void}\n         */\n        updateCoupon: function () {\n            if (quote.totals() && !quote.totals()['coupon_code']) {\n                coupon.setCouponCode('');\n                coupon.setIsApplied(false);\n            }\n        }\n    };\n});\n","Amasty_CheckoutCore/js/model/payment/payment-loading.js":"define([\n    'ko'\n], function (ko) {\n    'use strict';\n\n    /**\n     * Loader for payment block\n     * @see payment-service-mixin.js\n     */\n    return ko.observable(false);\n});\n","Amasty_CheckoutCore/js/model/payment-validators/login-form-validator.js":"define(\n    [\n        'jquery',\n        'underscore',\n        'uiRegistry',\n        'Magento_Customer/js/model/customer'\n    ],\n    function ($, _, registry, customer) {\n        'use strict';\n\n        return {\n            /**\n             * Validate Login Form on checkout if available\n             *\n             * @returns {Boolean}\n             */\n            validate: function (hideError) {\n                let createAcc = +window?.checkoutConfig?.quoteData?.additional_options?.create_account,\n                    $loginForm,\n                    customerEmail;\n\n                if (customer.isLoggedIn() || createAcc <= 1) {\n                    return true;\n                }\n\n                $loginForm = $('form[data-role=email-with-possible-login]');\n\n                if (createAcc === 3) {\n                    customerEmail = registry.get('checkout.steps.shipping-step.shippingAddress.customer-email')\n                    if (!_.isUndefined(customerEmail) && customerEmail.isPassword()) {\n                        return this._validateElement($loginForm, hideError);\n                    }\n                }\n\n                if ($loginForm.find('#customer-password').val()) {\n                    return this._validateElement($loginForm, hideError);\n                }\n\n                return true;\n            },\n\n            _validateElement: function ($loginForm, hideError) {\n                let isValid = $loginForm.validation() && $loginForm.validation('isValid');\n\n                if (hideError) {\n                    $loginForm.validation('clearError');\n                }\n\n                return isValid;\n            }\n        };\n    }\n);\n","Amasty_CheckoutCore/js/model/payment-validators/agreement-validator.js":"define([\n    'jquery',\n    'mage/validation'\n], function ($) {\n    'use strict';\n\n    var checkoutConfig = window.checkoutConfig,\n        agreementsConfig = checkoutConfig ? checkoutConfig.checkoutAgreements : {},\n        agreementsInputPath = '.additional-options .checkout-agreements .checkout-agreement.required input',\n        agreementsInputPathPayment = '.payment-method._active div.checkout-agreements input',\n        agreementsError = '.additional-options .checkout-agreements .checkout-agreement div.mage-error',\n        agreementsInputPathOld = '.additional-options .checkout-agreements .checkout-agreement input';\n\n    return {\n        /**\n         * Validate checkout agreements\n         *\n         * @param {boolean} hideError\n         * @returns {Boolean}\n         */\n        validate: function (hideError) {\n            var isValid = true,\n                agreementsForValidate = agreementsInputPath;\n\n            if (!agreementsConfig || !agreementsConfig.isEnabled) {\n                return true;\n            }\n            if ($(agreementsInputPath).length === 0) {\n                if ($(agreementsInputPathPayment).length !== 0) {\n                    agreementsForValidate = agreementsInputPathPayment;\n                } else {\n                    return this.validateOld(hideError);\n                }\n            }\n\n            $(agreementsForValidate).each(function (index, element) {\n                if (!$.validator.validateSingleElement(\n                    element,\n                    {\n                        errorElement: 'div',\n                        hideError: hideError || false,\n                        errorPlacement: function (error, element) {\n                            let errorPlacement = element;\n                            if (element.is(':checkbox') || element.is(':radio')) {\n                                errorPlacement = element.siblings('label').last();\n                            }\n                            errorPlacement.after(error);\n                        }\n                    }\n                )) {\n                    isValid = false;\n                }\n            });\n\n            return isValid;\n        },\n        /**\n         * Validate checkout agreements with old version of magento\n         *\n         * @param {boolean} hideError\n         * @returns {Boolean}\n         */\n        validateOld: function (hideError) {\n            if ($(agreementsInputPathOld).length === 0) {\n                return true;\n            }\n\n            var isValid = true,\n                element = $(agreementsInputPathOld),\n                validator = $('#checkout').validate({\n                    errorClass: 'mage-error',\n                    errorElement: 'div',\n                    meta: 'validate',\n                    hideError: hideError || false,\n                    errorPlacement: function (error, element) {\n                        var errorPlacement = element;\n                        if (element.is(':checkbox') || element.is(':radio')) {\n                            errorPlacement = element.siblings('label').last();\n                        }\n                        errorPlacement.after(error);\n                    }\n                });\n\n            if (element.is(':checked') == false) {\n                isValid = false;\n                if (!$(agreementsError).length && !hideError) {\n                    validator.showLabel(element, $.mage.__('This is a required field.'));\n                }\n            }\n\n            return isValid;\n        }\n    };\n});\n","Amasty_CheckoutCore/js/model/payment-validators/dob-validator.js":"\ndefine([\n    'uiRegistry'\n], function (registry) {\n    'use strict';\n\n    return {\n        /**\n         * Validate Date of Birth if available\n         *\n         * @returns {Boolean}\n         */\n        validate: function () {\n            var amastyDob = registry.get('checkout.sidebar.additional.checkboxes.date_of_birth');\n\n            if (amastyDob && amastyDob.visible()) {\n                var validate = amastyDob.validate();\n                if (validate == false) {\n                    return false;\n                }\n                return validate.valid;\n            }\n\n            return true;\n        }\n    };\n});\n","Amasty_CheckoutCore/js/model/payment-validators/additional-validators-mixin.js":"define(\n    [\n        'mage/utils/wrapper',\n        'Amasty_CheckoutCore/js/action/focus-first-error',\n        'Amasty_CheckoutCore/js/model/payment-validators/login-form-validator'\n    ],\n    function (wrapper, focusFirstError, loginFormValidator) {\n        'use strict';\n\n        return function (target) {\n            /**\n             * Focus first error after validation\n             */\n            target.validate = wrapper.wrapSuper(target.validate, function (hideError) {\n                var result;\n\n                if (!loginFormValidator.validate(hideError)) {\n                    if (!hideError) {\n                        focusFirstError();\n                    }\n\n                    return false;\n                }\n\n                result = this._super();\n\n                if (!result && !hideError) {\n                    focusFirstError();\n                }\n\n                return result;\n            });\n\n            return target;\n        };\n    }\n);\n","Amasty_CheckoutCore/js/model/payment-validators/order-summary-validator.js":"define([\n    'jquery',\n    'uiRegistry'\n], function ($, registry) {\n    'use strict';\n\n    return {\n        /**\n         * Validate Summary order form if automatic update setting is enabled\n         *\n         * @returns {Boolean}\n         */\n        validate: function () {\n            var forms = $('[data-amcheckout-js=\"order-form\"]'),\n                result = true;\n\n            registry.get('checkout.sidebar.summary.cart_items.details', function (details) {\n                if (!details.isAutomatically) {\n                    return result;\n                }\n\n                $.each(forms, function () {\n                    if (!$(this).valid()) {\n                        result = false;\n                    }\n                });\n\n                return result;\n            });\n\n            return result;\n        }\n    };\n});\n","Amasty_CheckoutCore/js/model/payment-validators/shipping-validator.js":"define([\n    'uiRegistry', 'Amasty_CheckoutCore/js/model/shipping-registry'\n], function (registry, shippingRegistry) {\n    'use strict';\n\n    return {\n        /**\n         * Validate checkout shipping step\n         *\n         * @returns {Boolean}\n         */\n        validate: function (hideError) {\n            let shipping = registry.get('checkout.steps.shipping-step.shippingAddress'),\n                result;\n\n            if (hideError && (shippingRegistry.isEstimationHaveError() || !shipping.silentValidation())) {\n                return false;\n            }\n\n            shipping.allowedDynamicalSave = false;\n            window.silentShippingValidation = !!hideError;\n            result = shipping.validateShippingInformation(hideError);\n\n            delete window.silentShippingValidation;\n            shipping.allowedDynamicalSave = true;\n\n            return result;\n        }\n    };\n});\n","Amasty_CheckoutCore/js/form/element/region.js":"define(\n    [\n        'Magento_Ui/js/form/element/region',\n        'uiRegistry'\n    ],\n    function (\n        Component,\n        registry\n    ) {\n        'use strict';\n\n        return Component.extend({\n            /**\n             * Set default region value\n             */\n            initialize: function (config) {\n                this._super();\n\n                if (window.checkoutConfig.amdefault && window.checkoutConfig.amdefault.region) {\n                    registry.get(this.parentName + '.' + 'region_id_input', function (region) {\n                        if (!region.value() ) {\n                            var country = registry.get(this.parentName + '.' + 'country_id');\n                            if (country.value() == window.checkoutConfig.amdefault.country_id) {\n                                region.value(window.checkoutConfig.amdefault.region);\n                            }\n                        }\n                    }.bind(this));\n                }\n\n                return this;\n            }\n        });\n    }\n);\n","Magento_Tax/js/price/adjustment.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/grid/columns/column',\n    'mage/translate'\n], function (Element, $t) {\n    'use strict';\n\n    return Element.extend({\n        defaults: {\n            bodyTmpl: 'Magento_Tax/price/adjustment',\n            taxPriceType: 'final_price',\n            taxPriceCssClass: 'price-including-tax',\n            bothPrices: 3,\n            inclTax: 2,\n            exclTax: 1,\n            modules: {\n                price: '${ $.parentName }'\n            },\n            listens: {\n                price: 'initializePriceAttributes'\n            }\n        },\n\n        /**\n         * {@inheritdoc}\n         */\n        initialize: function () {\n            this._super()\n                .initializePriceAttributes();\n\n            return this;\n        },\n\n        /**\n         * Update parent price.\n         *\n         * @returns {Object} Chainable.\n         */\n        initializePriceAttributes: function () {\n            if (this.displayBothPrices && this.price()) {\n                this.price().priceWrapperCssClasses = this.taxPriceCssClass;\n                this.price().priceWrapperAttr = {\n                    'data-label': $t('Incl. Tax')\n                };\n            }\n\n            return this;\n        },\n\n        /**\n         * Get price tax adjustment.\n         *\n         * @param {Object} row\n         * @return {HTMLElement} tax html\n         */\n        getTax: function (row) {\n            return row['price_info']['extension_attributes']['tax_adjustments']['formatted_prices'][this.taxPriceType];\n        },\n\n        /**\n         * UnsanitizedHtml version of getTax.\n         *\n         * @param {Object} row\n         * @return {HTMLElement} tax html\n         */\n        getTaxUnsanitizedHtml: function (row) {\n            return this.getTax(row);\n        },\n\n        /**\n         * Set price tax type.\n         *\n         * @param {String} priceType\n         * @return {Object}\n         */\n        setPriceType: function (priceType) {\n            this.taxPriceType = priceType;\n\n            return this;\n        },\n\n        /**\n         * Return whether display setting is to display\n         * both price including tax and price excluding tax.\n         *\n         * @return {Boolean}\n         */\n        displayBothPrices: function () {\n            return +this.source.data.displayTaxes === this.bothPrices;\n        },\n\n        /**\n         * Return whether display setting is to display price including tax.\n         *\n         * @return {Boolean}\n         */\n        displayPriceIncludeTax: function () {\n            return +this.source.data.displayTaxes === this.inclTax;\n        },\n\n        /**\n         * Return whether display setting is to display price excluding tax.\n         *\n         * @return {Boolean}\n         */\n        displayPriceExclTax: function () {\n            return +this.source.data.displayTaxes === this.exclTax;\n        }\n    });\n});\n","Magento_Tax/js/view/checkout/summary/tax.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\n\ndefine([\n    'ko',\n    'Magento_Checkout/js/view/summary/abstract-total',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Checkout/js/model/totals',\n    'mage/translate',\n    'underscore'\n], function (ko, Component, quote, totals, $t, _) {\n    'use strict';\n\n    var isTaxDisplayedInGrandTotal = window.checkoutConfig.includeTaxInGrandTotal,\n        isFullTaxSummaryDisplayed = window.checkoutConfig.isFullTaxSummaryDisplayed,\n        isZeroTaxDisplayed = window.checkoutConfig.isZeroTaxDisplayed,\n        taxAmount = 0,\n        rates = 0;\n\n    return Component.extend({\n        defaults: {\n            isTaxDisplayedInGrandTotal: isTaxDisplayedInGrandTotal,\n            notCalculatedMessage: $t('Not yet calculated'),\n            template: 'Magento_Tax/checkout/summary/tax'\n        },\n        totals: quote.getTotals(),\n        isFullTaxSummaryDisplayed: isFullTaxSummaryDisplayed,\n\n        /**\n         * @return {Boolean}\n         */\n        ifShowValue: function () {\n            if (this.isFullMode() && this.getPureValue() == 0) { //eslint-disable-line eqeqeq\n                return isZeroTaxDisplayed;\n            }\n\n            return true;\n        },\n\n        /**\n         * @return {Boolean}\n         */\n        ifShowDetails: function () {\n            if (!this.isFullMode()) {\n                return false;\n            }\n\n            return this.getPureValue() > 0 && isFullTaxSummaryDisplayed;\n        },\n\n        /**\n         * @return {Number}\n         */\n        getPureValue: function () {\n            var amount = 0,\n                taxTotal;\n\n            if (this.totals()) {\n                taxTotal = totals.getSegment('tax');\n\n                if (taxTotal) {\n                    amount = taxTotal.value;\n                }\n            }\n\n            return amount;\n        },\n\n        /**\n         * @return {*|Boolean}\n         */\n        isCalculated: function () {\n            return this.totals() && this.isFullMode() && totals.getSegment('tax') != null;\n        },\n\n        /**\n         * @return {*}\n         */\n        getValue: function () {\n            var amount;\n\n            if (!this.isCalculated()) {\n                return this.notCalculatedMessage;\n            }\n            amount = totals.getSegment('tax').value;\n\n            return this.getFormattedPrice(amount);\n        },\n\n        /**\n         * @param {*} amount\n         * @return {*|String}\n         */\n        formatPrice: function (amount) {\n            return this.getFormattedPrice(amount);\n        },\n\n        /**\n         * @param {*} parent\n         * @param {*} percentage\n         * @return {*|String}\n         */\n        getTaxAmount: function (parent, percentage) {\n            var totalPercentage = 0;\n\n            taxAmount = parent.amount;\n            rates = parent.rates;\n            _.each(rates, function (rate) {\n                totalPercentage += parseFloat(rate.percent);\n            });\n\n            return this.getFormattedPrice(this.getPercentAmount(taxAmount, totalPercentage, percentage));\n        },\n\n        /**\n         * @param {*} amount\n         * @param {*} totalPercentage\n         * @param {*} percentage\n         * @return {*|String}\n         */\n        getPercentAmount: function (amount, totalPercentage, percentage) {\n            return parseFloat(amount * percentage / totalPercentage);\n        },\n\n        /**\n         * @return {Array}\n         */\n        getDetails: function () {\n            var taxSegment = totals.getSegment('tax');\n\n            if (taxSegment && taxSegment['extension_attributes']) {\n                return taxSegment['extension_attributes']['tax_grandtotal_details'];\n            }\n\n            return [];\n        }\n    });\n});\n"}
}});
